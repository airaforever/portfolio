if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("LSBumpE2EEMetadataThread",["LSCancelTaskByQueueName","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(e){return d[0]=new c.Map(),d[0].set("bump_timestamp_ms",a[1]),d[0].set("thread_key",a[0]),d[0].set("bumped_by_local_device_send",a[2]),d[1]=d[0].get("thread_key"),d[0],c.sp(b("LSCancelTaskByQueueName"),c.i64.to_string(d[1]),[0,389])},function(e){return d[2]=new c.Map(),d[2].set("bump_timestamp_ms",a[1]),d[2].set("thread_key",a[0]),d[2].set("bumped_by_local_device_send",a[2]),d[3]=d[2].get("thread_key"),d[2],d[4]=c.toJSON(d[2]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[3]),[0,389],d[4],f,f,[0,0],[0,0],f,f,[0,0])}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSCreateE2EEMetadataThread",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return d[0]=new c.Map(),d[0].set("wa_jid",a[0]),d[0].set("offline_thread_key",a[1]),d[0].set("thread_type",a[2]),d[0].set("folder_type",a[3]),d[0].set("bump_timestamp_ms",a[4]),d[1]=d[0].get("offline_thread_key"),d[0],d[2]=c.toJSON(d[0]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[1]),[0,388],d[2],f,f,[0,0],[0,0],f,f,[0,0])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSUpdateE2EEMetadataParticipants",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[1]=d[0].get("thread_key"),d[0],d[2]=c.toJSON(d[0]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[1]),[0,394],d[2],f,f,[0,0],[0,0],f,f,[0,0])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("MAWCatQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4877036382414550"}),null);
__d("MAWCatQuery.facebook.graphql",["MAWCatQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"SecureMessageOverWACATGraphResult",kind:"LinkedField",name:"secure_message_over_wa_cat_query",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"encrypted_serialized_cat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"expiration_time_in_seconds",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MAWCatQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MAWCatQuery",selections:a},params:{id:b("MAWCatQuery_facebookRelayOperation"),metadata:{},name:"MAWCatQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MAWCatQuery.graphql",["cr:11203"],(function(a,b,c,d,e,f){"use strict";e.exports=b("cr:11203")}),null);
__d("MAWCatQuery",["MAWCatQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("MAWCatQuery.graphql");c=a;g["default"]=c}),98);
__d("MAWCryptoAuthToken",["MAWCatQuery","MAWDbMetaTxns","MAWIndexedDb","MAWTransactionMode","RelayHooks","WALogger","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);h=function(){return a};return a}function i(a){return a==null||a.secure_message_over_wa_cat_query==null||a.secure_message_over_wa_cat_query.encrypted_serialized_cat==null||a.secure_message_over_wa_cat_query.expiration_time_in_seconds==null?{error:"Crypto Auth Token was null or incomplete"}:{success:{encrypted_serialized_cat:a.secure_message_over_wa_cat_query.encrypted_serialized_cat,expiration_time_in_seconds:a.secure_message_over_wa_cat_query.expiration_time_in_seconds}}}function j(a){return d("RelayHooks").fetchQuery(a,c("MAWCatQuery"),{}).toPromise().then(i)["catch"](function(a){d("WALogger").WARN(h(),a);return{error:"Failed to fetch Crypto Auth Token"}})}function a(a){return j(a).then(function(a){if(a.error!==null&&a.error!==void 0)throw c("err")("Unable to rotate Crypto Auth Token");var b=function(b){return d("MAWIndexedDb").makeMsgrTransactor({meta:d("MAWTransactionMode").READWRITE})(b)(a.success)};return b(d("MAWDbMetaTxns").putCAT).then(function(){return a.success})})}g.processCatResponse=i;g.fetchFreshCAT=j;g.fetchAndSaveCAT=a}),98);
__d("MessengerWaitForEvent",["Promise"],(function(a,b,c,d,e,f){function a(a,c,d){var e,f=d;return new(b("Promise"))(function(b){f?e=function(){f.apply(this,arguments)&&b.apply(this,arguments)}:e=b,a&&a.addEventListener&&a.addEventListener(c,e)})["finally"](function(){a&&a.removeEventListener&&a.removeEventListener(c,e)})}f.waitForEvent=a}),66);
__d("LocalStorageMutex",["MessengerWaitForEvent","Promise","QPLUserFlow","err","pageID","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=1e3;a=function(){function a(a){var b=this,d=a.mutexKey,e=a.localTakeoverKey,f=a.log,g=a.logError,h=a.getStorage,j=a.setItemGuarded,k=a.mutexTimeoutMs;k=k===void 0?i:k;a=a.mutexTimeoutCallback;this.mutexFilter=function(a){if(a.key!==b.$1)return!1;a=a.newValue||"";if(!a.includes(c("pageID")))return!0;else return!1};this.$1=d;this.$2=e;this.$5=h;this.$6=j;this.$3=f;this.$4=g;this.$7=k;this.$8=a}var e=a.prototype;e.init=function(){c("QPLUserFlow").start(c("qpl")._(1056847375,"584"));this.$3("APPMUTEX - this tab is "+c("pageID"));var a=this.getMutex();if(a!=null&&a===c("pageID")){this.$3("APPMUTEX - WE ALREADY HAVE THE MUTEX LOCK WITHIN INIT");c("QPLUserFlow").endSuccess(c("qpl")._(1056847375,"584"));return b("Promise").resolve(!0)}if(a!=null){this.$3("APPMUTEX - initiating localTAKEOVER");return this.localTakeover()}else{this.$3("APPMUTEX - NO1 ELSE IS ALIVE, GET THE MUTEX");a=this.$9(c("pageID"));var d=this.$10(c("pageID"));if(!a.success||!d.success){c("QPLUserFlow").addAnnotations(c("qpl")._(1056847375,"584"),{bool:{setMutexResult:d.success,setTakeoverResult:a.success},string:{setTakeoverError:a.error,setMutexError:d.error}});c("QPLUserFlow").endFailure(c("qpl")._(1056847375,"584"),"fail_to_set_takeover_or_mutex");return b("Promise").resolve(!1)}c("QPLUserFlow").endSuccess(c("qpl")._(1056847375,"584"));return b("Promise").resolve(!0)}};e.localTakeover=function(){var a,e=this,f=this.$9(c("pageID"));if(!f.success){c("QPLUserFlow").addAnnotations(c("qpl")._(1056847375,"584"),{string:{initTakeoverError:f.error}});c("QPLUserFlow").endFailure(c("qpl")._(1056847375,"584"),"local_takeover_init_takeover_failure");return b("Promise").resolve(!1)}var g,h=function(){g!=null&&clearTimeout(g)};f=d("MessengerWaitForEvent").waitForEvent(window,"storage",this.mutexFilter);var j=(a=this==null?void 0:this._mutexTimeoutMs)!=null?a:i;return b("Promise").race([f,new(b("Promise"))(function(a){g=setTimeout(function(){a()},j)}),this.$8?this.$8():new(b("Promise"))(function(a){})]).then(function(a){if(a==null){e.$3("AppMutex - Forcefully took the mutex and takeover lock");var b=e.$9(c("pageID")),d=e.$10(c("pageID"));if(!b.success||!d.success){c("QPLUserFlow").addAnnotations(c("qpl")._(1056847375,"584"),{string:{setTakeoverError:b.error,setMutexError:d.error}});c("QPLUserFlow").endFailure(c("qpl")._(1056847375,"584"),"local_takeover_forcefully_takeover_failure");return!1}c("QPLUserFlow").endSuccess(c("qpl")._(1056847375,"584"));return!0}e.$3("APPMUTEX - GOT MUTEX STORAGE EVENT CHANGE FROM ANOTHER TAB");b=e.$11(a.newValue);if(!b&&e.hasTakeoverPermission()){e.$3("APPMUTEX - setting mutex on localtakeover");d=e.$10(c("pageID"));if(!d.success){c("QPLUserFlow").addAnnotations(c("qpl")._(1056847375,"584"),{string:{setMutexError:d.error}});c("QPLUserFlow").endFailure(c("qpl")._(1056847375,"584"),"local_takeover_set_mutex_failure");return!1}c("QPLUserFlow").endSuccess(c("qpl")._(1056847375,"584"));return!0}else{e.hasTakeoverPermission()&&e.$12();c("QPLUserFlow").endFailure(c("qpl")._(1056847375,"584"),"local_takeover_no_takeover_permission");return!1}}).then(function(a){h();return a})["catch"](function(a){h();e.$4("AppMutex - localTakeover error no permission - "+a);c("QPLUserFlow").endFailure(c("qpl")._(1056847375,"584"),"local_takeover_general_failure");return!1})};e.onMutexDeath=function(){var a=this.getMutex();a!=null&&a==c("pageID")&&(this.$3("APPMUTEX - removing mutex on death"),this.$13(),this.hasTakeoverPermission()&&this.$12())};e.takeoverFilter=function(a){if(a.key!==this.$2)return!1;a=a.newValue||"";if(!a.includes(c("pageID")))return!0;else return!1};e.$14=function(){if(!h){var a=this.$5();if(!a)throw c("err")("Could not get localStorage");h=a}return h};e.getMutex=function(){h=this.$14();return h.getItem(this.$1)};e.$10=function(a){h=this.$14();return this.$6(h,this.$1,a)};e.$13=function(){h=this.$14(),h.removeItem(this.$1)};e.getTakeover=function(){h=this.$14();return h.getItem(this.$2)};e.$9=function(a){h=this.$14();return this.$6(h,this.$2,a)};e.$12=function(){h=this.$14(),h.removeItem(this.$2)};e.$11=function(a){return a!=null?a:""};e.hasTakeoverPermission=function(){var a=this.getTakeover();return a!=null&&a==c("pageID")};return a}();g.THIS_TAB=c("pageID");g.LocalStorageMutex=a}),98);
__d("MAWAppMutex",["LocalStorageMutex","MAWLocalStorage","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h="armadillo_msgr_mutex",i="armadillo_msgr_local_takeover",j=null;function a(){j==null&&(j=new(d("LocalStorageMutex").LocalStorageMutex)({mutexKey:h,localTakeoverKey:i,log:function(a){d("WALogger").LOG([a])},logError:function(a){d("WALogger").ERROR([a])},getStorage:d("MAWLocalStorage").getStorage,setItemGuarded:d("MAWLocalStorage").setItemGuarded}));return j}g.MAW_MUTEX_KEY=h;g.MAW_LOCALTAKEOVER_KEY=i;g.use=a}),98);
__d("MAWAckLevel.bs",["LSMessageSendStatus.bs","LSMessageSendStatusV2.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a.TAG){case 7:return b("LSMessageSendStatusV2.bs").sendingToServer;case 8:case 9:case 10:case 11:return b("LSMessageSendStatusV2.bs").serverReceived;default:return b("LSMessageSendStatusV2.bs").nonRetriableError}}function c(a){switch(a.TAG){case 7:return b("LSMessageSendStatus.bs").sendingToServer;case 8:case 9:case 10:case 11:return b("LSMessageSendStatus.bs").serverReceived;default:return b("LSMessageSendStatus.bs").nonRetriableError}}d={clock:0,contentGone:-3,contentTooBig:-4,contentUnuploadable:-5,expired:-2,failed:-1,inactiveReceived:-6,played:4,read:3,received:2,senderBackFillSent:-7,sent:1};f.levelToMessagingSendStatusV2=a;f.levelToMessagingSendStatus=c;f.ackVal_DO_NOT_USE=d}),null);
__d("MAWAckLevel",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a;switch(a.TAG){case 0:return-7;case 1:return-6;case 2:return-5;case 3:return-4;case 4:return-3;case 5:return-2;case 6:return-1;case 7:return 0;case 8:return 1;case 9:return 2;case 10:return 3;case 11:return 4}}function b(a){var b=null;switch(a){case-7:b=0;break;case-6:b=1;break;case-5:b=2;break;case-4:b=3;break;case-3:b=4;break;case-2:b=5;break;case-1:b=6;break;case 0:b=7;break;case 1:b=8;break;case 2:b=9;break;case 3:b=10;break;case 4:b=11;break}return{_0:void 0,TAG:b}}f.ackLevelToJS=a;f.ackLevelToRE=b}),66);
__d("MAWLocalizationEphemeralSettingSetAdminMsg",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF}g.isEphemeralSettingSetAdminMsg=a}),98);
__d("MAWLocalizationEphemeralSettingSetAdminMsg.bs",["MAWLocalizationEphemeralSettingSetAdminMsg"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(a)}f.isEphemeralSettingSetAdminMsg=a}),null);
__d("MAWAdminMsgCTA.bs",["fbt","MAWLocalizationEphemeralSettingSetAdminMsg.bs","MAWLocalizationType.bs","MAWTimeUtils","Promise","ReQL.bs","bs_caml_int64"],(function(a,b,c,d,e,f,g){"use strict";var h=g._("__JHASH__iw7A0LnsmaW__JHASH__").toString(),i=g._("__JHASH__jODYJ2eW1Pa__JHASH__").toString(),j=g._("__JHASH__xAOSvpC7vLN__JHASH__").toString();function k(a){return b("ReQL.bs").first(b("ReQL.bs").fromIndexDescending(a.table("admin_message_ctas").index("ctaId"))).then(function(a){if(a!==void 0)return b("bs_caml_int64").add(a.ctaId,b("bs_caml_int64").one);else return b("bs_caml_int64").zero})}function l(a,c,d){return b("ReQL.bs").first(b("ReQL.bs").bounds(b("ReQL.bs").fromTableDescending(a.table("admin_message_ctas")),{NAME:"range",VAL:[{NAME:"greaterThanOrEqual",VAL:{hd:c,tl:{hd:d,tl:0}}},{NAME:"lessThanOrEqual",VAL:{hd:c,tl:{hd:d,tl:0}}}]})).then(function(a){return a})}function m(a){if(a!==void 0)if(b("MAWLocalizationEphemeralSettingSetAdminMsg.bs").isEphemeralSettingSetAdminMsg(a))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:h};else if(a===b("MAWLocalizationType.bs").cutoverThreadAdminMessage||a===b("MAWLocalizationType.bs").e2eeThreadAdminMessage)return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:i};else if(a===b("MAWLocalizationType.bs").cutoverRollbackAdminMessage)return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:j};else return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:void 0};else return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:void 0}}function n(a){if(a!==void 0)if(b("MAWLocalizationEphemeralSettingSetAdminMsg.bs").isEphemeralSettingSetAdminMsg(a))return"admin_msg_armadillo_ephemeral_change_duration";else if(a===b("MAWLocalizationType.bs").cutoverThreadAdminMessage)return"admin_msg_thread_level_cutover";else if(a===b("MAWLocalizationType.bs").e2eeThreadAdminMessage)return"admin_msg_e2ee_thread";else if(a===b("MAWLocalizationType.bs").cutoverRollbackAdminMessage)return"admin_msg_cutover_rollback";else return}function o(a,c,d,e,f){return a.table("admin_message_ctas").add({actionUrl:f.actionUrl,adClientToken:f.adClientToken,adHelpUrl:f.adHelpUrl,adminMessageNicknameParticipantId:f.adminMessageNicknameParticipantId,adPreferenceUrl:f.adPreferenceUrl,ctaId:c,messageId:e.msgId,showAdChoiceIcon:f.showAdChoiceIcon,targetId:f.targetId,targetTitle:f.targetTitle,threadKey:d,timestampMs:b("MAWTimeUtils").toTimestamp(e.ts),title:f.title})}function p(a,c,d){return b("Promise").all([l(a,c,d.msgId),k(a)]).then(function(e){var f=e[1];e=e[0];var g=m(d.adminType);if(e!==void 0)return b("Promise").resolve({ctaId:e.ctaId,ctaType:n(d.adminType),title:e.title});else return o(a,f,c,d,g).then(function(a){return{ctaId:f,ctaType:n(d.adminType),title:g.title}})})}function a(a,c,d){var e=d.adminType;if(e!==void 0&&(b("MAWLocalizationEphemeralSettingSetAdminMsg.bs").isEphemeralSettingSetAdminMsg(e)||e===b("MAWLocalizationType.bs").cutoverThreadAdminMessage||e===b("MAWLocalizationType.bs").e2eeThreadAdminMessage||e===b("MAWLocalizationType.bs").cutoverRollbackAdminMessage))return p(a,c,d).then(function(a){return{result:a,threadKey:c}});else return b("Promise").resolve({result:void 0,threadKey:c})}f.insertAdminMsgCta=o;f.createOrReturnExistingAdminMsgCta=p;f.getAdminMsgCtaStep=a}),null);
__d("MAWAdminMsgNormalized",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:return{contactIds:b,contents:[]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:a=b[0];var c=b[1];return{contactIds:[a],contents:[c]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:a=b[0];c=b[1];var e=b[2];return{contactIds:[a,c],contents:[e]};case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:default:return{contactIds:[],contents:b}}}g.deconstructContactIdsFromAdminContent=a}),98);
__d("MAWMedia.bs",["MAWDbMedia","MessagingAttachmentType.bs","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function a(a){if(a===b("MAWDbMedia").IMAGE)return b("MessagingAttachmentType.bs").image;else if(a===b("MAWDbMedia").VIDEO)return b("MessagingAttachmentType.bs").video;else if(a===b("MAWDbMedia").PTT)return b("MessagingAttachmentType.bs").audio;else if(a===b("MAWDbMedia").GIF)return b("MessagingAttachmentType.bs").animatedImage;else if(a===b("MAWDbMedia").STICKER)return b("MessagingAttachmentType.bs").sticker;else return b("MessagingAttachmentType.bs").none}c=b("bs_caml_int64").of_int32;f.mediaTypeToMessageAttachmentType=a;f.mediaIdToIntExn=c}),null);
__d("bs_js_mapperRt",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==null)throw{RE_EXN_ID:"Not_found",Error:new Error()};return a}function b(a,b,c){var d=0;while(!0){var e=d;if(e===a)return;var f=b[e];if(f===c)return e;d=e+1|0;continue}}function c(a,b,c){var d=0;while(!0){var e=d;if(e===a)throw{RE_EXN_ID:"Not_found",Error:new Error()};var f=b[e];if(f===c)return e;d=e+1|0;continue}}f.raiseWhenNotFound=a;f.fromInt=b;f.fromIntAssert=c}),null);
__d("MAWXMA.bs",["bs_caml_int64","bs_js_mapperRt"],(function(a,b,c,d,e,f){"use strict";var g=[4,9,10,11,12,13,14,15,16,17,18,1e3,1001,1002,1003,1004,1005];function a(a){return g[a]}function c(a){return b("bs_js_mapperRt").fromInt(17,g,a)}e={tFromJs:c,tToJs:a};function d(a){if(a===11)return"xma_open_native"}c=b("bs_caml_int64").of_int32;f.ExtendedContentTargetType=e;f.extendedContentCTAButtonTypeToLSCTAType=d;f.xmaIdToIntExn=c}),null);
__d("QPLUserCountEvent",["QPLUserFlow"],(function(a,b,c,d,e,f,g){"use strict";function a(a){c("QPLUserFlow").start(a),c("QPLUserFlow").endSuccess(a)}g.fireQplUserCount=a}),98);
__d("MNLSXMATemplateType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").neg_one;f.genericShare=a;f.default_=c}),null);
__d("MNXMAPreviewImageDecorationType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9];f.default_=a;f.collage=c;f.video=d;f.messengerIcon=e;f.instagramIcon=b;f.shopping=g;f.upcomingEvent=h;f.live=i;f.reel=j;f.igtv=k}),null);
__d("MAWBridgeNewXMAHandler.bs",["MAWDbMsg","MAWThreadId.bs","MAWXMA.bs","MNLSXMALayoutType.bs","MNLSXMATemplateType.bs","MNXMAPreviewImageDecorationType.bs","MessagingAttachmentType.bs","Promise","ReQL.bs","bs_belt_Array","bs_belt_Option","bs_caml_int64","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function g(a,c){if(a===void 0)return;a=b("bs_belt_Array").get(a,c-1|0);if(a===void 0)return;c=a.buttonType;if(c!==void 0)return b("MAWXMA.bs").extendedContentCTAButtonTypeToLSCTAType(c)}function h(a,c){if(a===void 0)return;a=b("bs_belt_Array").get(a,c-1|0);if(a!==void 0)return a.title}function i(a){if(a===0||a!==3)return b("MNLSXMALayoutType.bs").single;else return b("MNLSXMALayoutType.bs").portrait}function j(a){return b("MNLSXMATemplateType.bs").default_}function k(a){switch(a){case 10:return b("MNXMAPreviewImageDecorationType.bs").collage;case 14:return b("MNXMAPreviewImageDecorationType.bs").reel;case 5:case 6:case 7:case 8:case 9:case 11:case 15:case 16:case 17:case 18:case 19:return b("MNXMAPreviewImageDecorationType.bs").default_;case 4:case 12:case 13:case 20:case 21:case 22:case 23:return b("MNXMAPreviewImageDecorationType.bs").instagramIcon;default:return b("MNXMAPreviewImageDecorationType.bs").default_}}function l(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve();var e=String(c.xmaId),f=c.msgId;if(f!==void 0)return b("ReQL.bs").first(b("ReQL.bs").fromTableDescending(a.table("attachment_ctas"))).then(function(g){var h=g!==void 0?b("bs_caml_int64").add(g.ctaId,b("bs_caml_int64").one):b("bs_caml_int64").one;g=c.defaultCTA;if(g===void 0)return b("Promise").resolve([void 0,h]);var i=g.actionUrl,j=g.nativeUrl;return a.table("attachment_ctas").add({actionContentBlob:void 0,actionUrl:i!==void 0?i:g.nativeUrl,attachmentFbid:e,attachmentIndex:b("bs_caml_int64").zero,ctaId:h,enableExtensions:!1,extensionHeightType:void 0,messageId:f,nativeUrl:j!==void 0?j:g.actionUrl,platformToken:void 0,targetId:void 0,threadKey:d,title:b("bs_belt_Option").getWithDefault(g.title,""),type_:"xma_web_url",urlWebviewType:void 0}).then(function(a){return b("Promise").resolve([h,h])})}).then(function(g){var h=g[1],i=g[0],j=[];g=c.ctas;if(g===void 0)return b("Promise").resolve([i,[]]);g=g.map(function(c,g){g=b("bs_caml_int64").add(h,b("bs_caml_int64").of_int32(g+1|0));j.push(g);var i=c.actionUrl,k=c.nativeUrl;return a.table("attachment_ctas").add({actionContentBlob:void 0,actionUrl:i!==void 0?i:c.nativeUrl,attachmentFbid:e,attachmentIndex:b("bs_caml_int64").zero,ctaId:g,enableExtensions:!1,extensionHeightType:void 0,messageId:f,nativeUrl:k!==void 0?k:c.actionUrl,platformToken:void 0,targetId:void 0,threadKey:d,title:b("bs_belt_Option").getWithDefault(c.title,"Tap to view status update"),type_:"xma_web_url",urlWebviewType:void 0})});return b("Promise").all(g).then(function(a){return b("Promise").resolve([i,j])})}).then(function(l){var m=l[1],n=b("bs_caml_int64").of_int32(b("MAWDbMsg").getInChatMsgIdFromMsgId(f)),o=b("MAWXMA.bs").ExtendedContentTargetType.tFromJs(c.targetType),p,q=0;o===13?p={height:[0,108],width:[0,72],xmaContentType:"xma_montage_share"}:q=1;q===1&&(p={height:b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(c.previewHeight),b("bs_caml_int64").of_int32),width:b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(c.previewWidth),b("bs_caml_int64").of_int32),xmaContentType:"xma_web_url"});return a.table("attachments").add({accessibilitySummaryText:void 0,actionUrl:void 0,attachmentCta1Id:b("bs_belt_Array").get(m,0),attachmentCta2Id:b("bs_belt_Array").get(m,1),attachmentCta3Id:b("bs_belt_Array").get(m,2),attachmentFbid:e,attachmentIndex:b("bs_caml_int64").zero,attachmentLoggingType:void 0,attachmentType:b("MessagingAttachmentType.bs").xma,attributionAppIcon:void 0,attributionAppIconFallback:void 0,attributionAppIconUrlExpirationTimestampMs:void 0,attributionAppId:void 0,attributionAppName:void 0,authorityLevel:b("bs_caml_int64").zero,avatarCount:void 0,avatarViewAccessibilityLabel:void 0,avatarViewSize:void 0,avatarViewTitleList:void 0,avatarViewUrlExpirationTimestampList:void 0,avatarViewUrlFallbackList:void 0,avatarViewUrlList:void 0,captionBodyText:void 0,cta1Title:h(c.ctas,1),cta1Type:g(c.ctas,1),cta2Title:h(c.ctas,2),cta2Type:g(c.ctas,2),cta3Title:h(c.ctas,3),cta3Type:g(c.ctas,3),dashManifest:void 0,decryptionKey:void 0,defaultCtaId:l[0],defaultCtaTitle:b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(c.defaultCTA,function(a){return a.title})),defaultCtaType:p.xmaContentType,descriptionText:void 0,ephemeralMediaState:void 0,faviconUrl:void 0,faviconUrlExpirationTimestampMs:void 0,faviconUrlFallback:void 0,filename:void 0,filesize:b("bs_belt_Option").map(c.filesize,b("bs_caml_int64").of_int32),gatingTitle:void 0,gatingType:b("bs_belt_Option").map(c.overlayIconGlyph,function(a){return String(a)}),hasMedia:!1,hasXma:!0,headerImageUrl:void 0,headerImageUrlExpirationTimestampMs:void 0,headerImageUrlFallback:void 0,headerImageUrlMimeType:void 0,headerTitle:c.headerTitle,imageUrl:void 0,imageUrlExpirationTimestampMs:void 0,imageUrlFallback:void 0,imageUrlMimeType:void 0,isBorderless:void 0,isPreviewImage:void 0,isSharable:!0,listItemAccessibilityText1:void 0,listItemAccessibilityText2:void 0,listItemAccessibilityText3:void 0,listItemContactUrlExpirationTimestampList1:void 0,listItemContactUrlExpirationTimestampList2:void 0,listItemContactUrlExpirationTimestampList3:void 0,listItemContactUrlFallbackList1:void 0,listItemContactUrlFallbackList2:void 0,listItemContactUrlFallbackList3:void 0,listItemContactUrlList1:void 0,listItemContactUrlList2:void 0,listItemContactUrlList3:void 0,listItemId1:void 0,listItemId2:void 0,listItemId3:void 0,listItemProfilePictureUrl1:void 0,listItemProfilePictureUrl2:void 0,listItemProfilePictureUrl3:void 0,listItemProfilePictureUrlExpirationTimestamp1:void 0,listItemProfilePictureUrlExpirationTimestamp2:void 0,listItemProfilePictureUrlExpirationTimestamp3:void 0,listItemProfilePictureUrlFallback1:void 0,listItemProfilePictureUrlFallback2:void 0,listItemProfilePictureUrlFallback3:void 0,listItemProgressBarFilledPercentage1:void 0,listItemProgressBarFilledPercentage2:void 0,listItemProgressBarFilledPercentage3:void 0,listItemsDescriptionSubtitleText:void 0,listItemsDescriptionText:void 0,listItemsId:void 0,listItemsSecondaryDescriptionText:void 0,listItemTitleText1:void 0,listItemTitleText2:void 0,listItemTitleText3:void 0,localPlayableUrl:void 0,maxSubtitleNumOfLines:b("bs_belt_Option").map(c.maxSubtitleNumOfLines,b("bs_caml_int64").of_int32),maxTitleNumOfLines:b("bs_belt_Option").map(c.maxTitleNumOfLines,b("bs_caml_int64").of_int32),messageId:f,miniPreview:void 0,offlineAttachmentId:e,originalFileHash:void 0,originalPageSenderId:void 0,playableDurationMs:void 0,playableUrl:void 0,playableUrlExpirationTimestampMs:void 0,playableUrlFallback:void 0,playableUrlMimeType:void 0,preheaderText:void 0,previewHeight:p.height,previewHeightLarge:b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(c.previewHeightLarge),b("bs_caml_int64").of_int32),previewImageDecorationType:k(c.targetType),previewUrl:void 0,previewUrlExpirationTimestampMs:void 0,previewUrlFallback:void 0,previewUrlLarge:void 0,previewUrlMimeType:void 0,previewWidth:p.width,previewWidthLarge:b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(c.previewWidthLarge),b("bs_caml_int64").of_int32),samplingFrequencyHz:void 0,shouldAutoplayVideo:void 0,shouldHighlightHeaderTitleInTitle:void 0,shouldRespectServerPreviewSize:void 0,sourceText:void 0,subtitleIconUrl:void 0,subtitleText:c.subtitleText,targetId:void 0,threadKey:d,timestampMs:n,titleText:c.titleText,viewerSeenTimestampMs:void 0,waveformData:void 0,xmaLayoutType:b("bs_belt_Option").map(c.xmaLayoutType,i),xmasTemplateType:b("bs_belt_Option").map(c.xmaLayoutType,j)})});else return b("Promise").resolve()})}function a(a,b){return l(a,b).then(function(a){})}f.getCTAType=g;f.getCTATitle=h;f.getLSXMALayoutType=i;f.getLSXMATemplateType=j;f.getLSPreviewImageDecorationType=k;f.call=a}),null);
__d("MAWBridgeTypes.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){return{_0:a,TAG:1}}function b(a){return{_0:a,TAG:2}}function c(a){return{_0:a,TAG:0}}function d(a){return{_0:a,TAG:1}}function e(a){return{_0:a,TAG:2}}function g(a){return{_0:void 0,TAG:0}}f.makeInitialThreadRange=a;f.makeThreadRangeForLoadBefore=b;f.makeThreadRangeNoThreads=c;f.makeInitialRange=d;f.makeExtendBefore=e;f.makeNoMsg=g}),null);
__d("MAWBridgeTypes.re",["MAWBridgeTypes.bs"],(function(a,b,c,d,e,f){c=(a=b("MAWBridgeTypes.bs")).makeInitialThreadRange;f.makeInitialThreadRange=c;d=a.makeThreadRangeForLoadBefore;f.makeThreadRangeForLoadBefore=d;e=a.makeThreadRangeNoThreads;f.makeThreadRangeNoThreads=e;b=a.makeInitialRange;f.makeInitialRange=b;c=a.makeExtendBefore;f.makeExtendBefore=c;d=a.makeNoMsg;f.makeNoMsg=d}),null);
__d("MAWBridgeTypesWrapper",["MAWAckLevel"],(function(a,b,c,d,e,f,g){"use strict";function h(a){switch(a.TAG){case 0:return"User";case 1:return"Group"}}function i(a){switch(a){case"User":return{_0:void 0,TAG:0};case"Group":return{_0:void 0,TAG:1}}}function a(a){return babelHelpers["extends"]({},a,{ack:d("MAWAckLevel").ackLevelToJS(a.ack)})}function b(a){return babelHelpers["extends"]({},a,{ack:d("MAWAckLevel").ackLevelToRE(a.ack)})}function c(a){return babelHelpers["extends"]({},a,{ack:d("MAWAckLevel").ackLevelToJS(a.ack),threadType:h(a.threadType)})}function e(a){return babelHelpers["extends"]({},a,{ack:d("MAWAckLevel").ackLevelToRE(a.ack),threadType:i(a.threadType)})}g.bridgeMsgToJS=a;g.bridgeMsgToRE=b;g.bridgeStartTraceDataToJS=c;g.bridgeStartTraceDataToRE=e}),98);
__d("MAWBridgeAbPropsUpdatedHandler.bs",["MAWAbPropsClient.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){b("MAWAbPropsClient.bs").rewrite(a);return window.Promise.resolve()}f.call=a}),null);
__d("MAWBridgeDeleteGroupInviteHandler",["MAWThreadId","Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){return d("MAWThreadId").toThreadKeyMaybe(a,c.threadId).then(function(c){return c==null?b("Promise").resolve():d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("group_invites")).getKeyRange(c)).then(function(c){return c.reduce(function(b,c){return b.then(function(){return a.table("group_invites")["delete"]({hd:c.threadKey,tl:{hd:c.inviterId,tl:{hd:c.inviteeId,tl:0}}})})},b("Promise").resolve(void 0))})})}g["default"]=a}),98);
__d("MAWBridgeDeleteMessageRangesV2Handler.bs",["MAWThreadId.bs","Promise","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d!==void 0)return a.table("messages_ranges_v2__generated")["delete"]({hd:d,tl:{hd:b("bs_caml_int64").of_float(c.minTimestampMs),tl:{hd:c.minMsgId,tl:0}}});else return b("Promise").resolve()})}f.call=a}),null);
__d("MAWBridgeDeleteMessagesHandler",["MAWThreadId","MAWTimeUtils","ReQL","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){var e,f,g,h,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:k.next=2;return b("regeneratorRuntime").awrap(d("MAWThreadId").toThreadKeyMaybe(a,c.threadId));case 2:e=k.sent;if(!(e!==void 0)){k.next=20;break}f=c.messages,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 5:if(!g){k.next=11;break}if(!(h>=f.length)){k.next=8;break}return k.abrupt("break",20);case 8:i=f[h++];k.next=15;break;case 11:h=f.next();if(!h.done){k.next=14;break}return k.abrupt("break",20);case 14:i=h.value;case 15:j=i;k.next=18;return b("regeneratorRuntime").awrap(a.table("messages")["delete"](d("ReQL").key(e,d("MAWTimeUtils").toTimestamp(j.ts),j.msgId)));case 18:k.next=5;break;case 20:case"end":return k.stop()}},null,this)}g["default"]=a}),98);
__d("MAWBridgeDeleteReactionHandler.bs",["MAWThreadId.bs","Promise","bs_caml_format"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d!==void 0)return a.table("reactions")["delete"]({hd:d,tl:{hd:c.messageId,tl:{hd:b("bs_caml_format").caml_int64_of_string(c.actorId),tl:0}}});else return b("Promise").resolve()})}function a(a,b){return g(a,b).then(function(a){})}f.call=a}),null);
__d("MAWBridgeGroupInfoUpdatedHandler.bs",["MAWThreadId.bs","Promise","ReQL.bs","bs_caml_obj","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve();var e=c.threadName,f=e==null?void 0:b("bs_caml_option").some(e);return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("threads")),{hd:d,tl:0})).then(function(c){if(c===void 0)return b("Promise").resolve();c=b("bs_caml_obj").caml_obj_dup(c);return a.table("threads").put((c.threadName=f,c))})})}function a(a,b){return g(a,b).then(function(a){})}f.call=a}),null);
__d("MAWBridgeGroupInviteUpdateHandler.bs",["MAWThreadId.bs","MAWTimeUtils","MAWUpdateLSThreadCapabilities.bs","Promise","bs_caml_format","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve();var e=b("bs_caml_format").caml_int64_of_string(c.inviterId);return a.table("group_invites").put({caption:b("bs_caml_option").nullable_to_opt(c.caption),inviteCode:c.inviteCode,inviteeId:b("bs_caml_format").caml_int64_of_string(c.inviteeId),inviteExpirationTimestampMs:b("MAWTimeUtils").toTimestamp(c.inviteExpireTs),inviterId:e,threadKey:d}).then(function(c){return b("MAWUpdateLSThreadCapabilities.bs").setGroupInviteTxn(a,d,e)})})}function a(a,b){return g(a,b).then(function(a){})}f.call=a}),null);
__d("MAWBridgeInitOfflineQueueSyncCompleteHandler.bs",["CurrentLocale","LSDict","LSJson","LSLogHistory","LSSyncChannel.bs","LSSyncStatus.bs","MAWInitSyncComplete.bs","Promise","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";var g=[2328,1316134911];function h(a){return a.table("sync_groups").put({canIgnoreTimestamp:!1,currentCursor:void 0,dataTraceId:void 0,groupId:b("MAWInitSyncComplete.bs").id,initTraceTimestampMs:void 0,lastSyncCompletedTimestampMs:void 0,lastSyncRequestTimestampMs:b("bs_caml_int64").zero,minTimeToSyncTimestampMs:g,priority:b("bs_caml_int64").zero,regionHint:void 0,sendSyncParams:!0,syncChannel:b("LSSyncChannel.bs").mqtt,syncParams:b("LSJson").stringify(new(b("LSDict"))([["locale",b("CurrentLocale").get()]])),syncStatus:b("LSSyncStatus.bs").complete})}function a(a){b("LSLogHistory").log("Init Offline Queue Sync Complete","debug");return window.Promise.resolve([h(a)]).then(function(a){return b("Promise").resolve()})}f.neverSyncTimestamp=g;f.finishOfflineArmadilloSyncCursor=h;f.call=a}),null);
__d("MAWBridgeInitOfflineQueueSyncProgressHandler.bs",["Promise"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("Promise").resolve()}f.call=a}),null);
__d("MAWBridgeInitOfflineQueueSyncStartHandler.bs",["CurrentLocale","LSDict","LSJson","LSLogHistory","LSSyncChannel.bs","LSSyncStatus.bs","MAWInitSyncComplete.bs","Promise","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";var g=[2328,1316134911];function h(a){return a.table("sync_groups").put({canIgnoreTimestamp:!1,currentCursor:void 0,dataTraceId:void 0,groupId:b("MAWInitSyncComplete.bs").id,initTraceTimestampMs:void 0,lastSyncCompletedTimestampMs:void 0,lastSyncRequestTimestampMs:b("bs_caml_int64").zero,minTimeToSyncTimestampMs:g,priority:b("bs_caml_int64").zero,regionHint:void 0,sendSyncParams:!0,syncChannel:b("LSSyncChannel.bs").mqtt,syncParams:b("LSJson").stringify(new(b("LSDict"))([["locale",b("CurrentLocale").get()]])),syncStatus:b("LSSyncStatus.bs").paging})}function a(a,c){b("LSLogHistory").log("Init Offline Queue Sync Start","debug");return window.Promise.resolve([h(a)]).then(function(a){return b("Promise").resolve()})}f.neverSyncTimestamp=g;f.initOfflineArmadilloSyncCursor=h;f.call=a}),null);
__d("MWChatDataLossCheckerUtil",["Crypto.bs","FBLogger","MWChatFetchThreadMessageCounts","Promise","QuickPerformanceLogger","WebStorage","promiseDone","qpl","regeneratorRuntime","useDataLossStatisticsStorageListener"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=Array.from(new Uint8Array(a));return a.map(function(a){return a.toString(16).padStart(2,"0")}).join("")}function i(a,e,f,g){var i,j,k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:i=new TextEncoder();j=i.encode(g).buffer;m.prev=2;m.next=5;return b("regeneratorRuntime").awrap(d("Crypto.bs").digest("SHA-256",j));case 5:k=m.sent;l=h(k);c("QuickPerformanceLogger").markerStartFromNavStart(a);c("QuickPerformanceLogger").markerAnnotate(a,{"int":{current_msg_count:f,prev_msg_count:e},string:{hashTreahdIdHex:l}});c("QuickPerformanceLogger").markerEnd(a,2);m.next=17;break;case 12:m.prev=12,m.t0=m["catch"](2),c("QuickPerformanceLogger").markerStartFromNavStart(a),c("QuickPerformanceLogger").markerAnnotate(a,{"int":{current_msg_count:f,prev_msg_count:e}}),c("QuickPerformanceLogger").markerEnd(a,2);case 17:case"end":return m.stop()}},null,this,[[2,12]])}function a(a){c("promiseDone")(d("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCounts(a).then(function(a){var e=c("WebStorage").getAllowlistedKeyFromLocalStorage(d("useDataLossStatisticsStorageListener").DATA_LOSS_STATISTICS_STORAGE_KEY);if(e==null)return b("Promise").resolve(null);e=JSON.parse(e);return b("Promise").resolve({current:a,previous:e})}).then(function(a){if(a==null)return b("Promise").resolve();var c=a.current;a=a.previous;return j(a,c)})["catch"](function(a){return c("FBLogger")("labyrinth").catching(a).warn("Failed to check for data loss")}))}function j(a,d){var e,f,g,h,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:e=[];for(f in a)Object.prototype.hasOwnProperty.call(d,f)&&e.push(f);g=[];for(h=0;h<e.length;h++)j=e[h],a[j]>d[j]&&d[j]===0?g.push(i(c("qpl")._(717553665,"1183"),a[j],d[j],j)):g.push(i(c("qpl")._(717553666,"1184"),a[j],d[j],j));k.next=6;return b("regeneratorRuntime").awrap(b("Promise").all(g));case 6:case"end":return k.stop()}},null,this)}g.fetchCountsAndLogDataLoss=a;g.logThreadCompleteDataLoss=j}),98);
__d("MAWBridgeInitSyncCompleteHandler.bs",["CurrentLocale","LSDict","LSJson","LSLogHistory","LSSyncChannel.bs","LSSyncStatus.bs","MAWInit","MAWInitSyncComplete.bs","MWChatDataLossCheckerUtil","Promise","bs_caml_int64","qex"],(function(a,b,c,d,e,f){"use strict";function g(a){return a.table("sync_groups").add({canIgnoreTimestamp:!1,currentCursor:void 0,dataTraceId:void 0,groupId:b("MAWInitSyncComplete.bs").id,initTraceTimestampMs:void 0,lastSyncCompletedTimestampMs:void 0,lastSyncRequestTimestampMs:b("bs_caml_int64").zero,minTimeToSyncTimestampMs:[2328,1316134911],priority:b("bs_caml_int64").zero,regionHint:void 0,sendSyncParams:!0,syncChannel:b("LSSyncChannel.bs").mqtt,syncParams:b("LSJson").stringify(new(b("LSDict"))([["locale",b("CurrentLocale").get()]])),syncStatus:b("LSSyncStatus.bs").complete})}function h(a){return a.table("network_requests").add({epochId:(a=b("bs_caml_int64")).neg_one,failureCount:a.zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:a.zero,lastSyncRequestTimestampMs:a.zero,networkTaskIdentifier:void 0,syncDatabaseId:b("MAWInitSyncComplete.bs").id,taskQueueName:""})}function a(a){b("LSLogHistory").log("Init Sync Complete","debug");b("MAWInit").logPoint("init_sync_received");b("MAWInit").endSuccess();b("qex")._("222")&&b("MWChatDataLossCheckerUtil").fetchCountsAndLogDataLoss(a);return window.Promise.all([g(a),h(a)]).then(function(a){return b("Promise").resolve()})}f.completeLocalArmadilloSyncCursor=g;f.completeLocalArmadilloNetworkRequest=h;f.call=a}),null);
__d("MAWBridgeMediaExpiredHandler.bs",["MAWThreadId.bs","Promise"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=String(c.mediaId);return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(e){if(e!==void 0)return a.table("attachments")["delete"]({hd:e,tl:{hd:c.msgId,tl:{hd:d,tl:0}}});else return b("Promise").resolve()})}f.call=a}),null);
__d("MAWEphemeralMessageExpirationStorage.bs",["MAWBridgeDeleteMessagesHandler","bs_belt_Array","clearTimeout","promiseDone","setTimeout"],(function(a,b,c,d,e,f){"use strict";var g=new Map();function h(a,c,d){b("bs_belt_Array").forEach(c,function(c){var d=c.ts,e=c.chatId,f=c.msgId;f={msgId:f,threadId:e,ts:d};e=c.chatId;d=[f];c={messages:d,threadId:e};b("promiseDone")(b("MAWBridgeDeleteMessagesHandler")(a,c))});return g["delete"](d)}function i(a,c,d,e){return b("setTimeout")(function(b){h(a,c,d)},e)}function a(a,c,d,e){var f=g.get(d);c=f==null?[c]:(b("clearTimeout")(f.timeoutId),f.msgs.map(function(a){return a.msgId}).indexOf(c.msgId)===-1?(f.msgs.push(c),void 0):void 0,f.msgs);f=i(a,c,d,e);g.set(d,{expirationTs:d,msgs:c,timeoutId:f})}function c(a){var b=a.msgId;a=g.get(a.countdownTs);if(a==null)return;b=a.msgs.map(function(a){return a.msgId}).indexOf(b);if(b>-1){a.msgs.splice(b,1);return}}f.setMessageForExpiration=a;f.clearMessageFromExpiration=c}),null);
__d("MAWBridgeMsgClearCountdownHandler.bs",["MAWEphemeralMessageExpirationStorage.bs","Promise"],(function(a,b,c,d,e,f){"use strict";function a(a){b("MAWEphemeralMessageExpirationStorage.bs").clearMessageFromExpiration(a);return b("Promise").resolve()}f.call=a}),null);
__d("LSMessageUnsendabilityStatus.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8];f.canUnsend=a;f.denyLogMessage=c;f.denyTombstoneMessage=d;f.denyForNonSender=e;f.denyP2pPayment=b;f.denyStoryReaction=g;f.denyBlobAttachment=h;f.denyMessageNotFound=i;f.denyMessageInstagramDirectWriteRestriction=j}),null);
__d("LSContactGender",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FEMALE:1,MALE:2,NEUTER:3});f["default"]=a}),66);
__d("LSContactIdType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FBID:1,SMS_LOCAL_ID:2});f["default"]=a}),66);
__d("LSContactViewerRelationship",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,NOT_CONTACT:1,CONTACT_OF_VIEWER:2,FACEBOOK_FRIEND:3,SOFT_CONTACT:4});f["default"]=a}),66);
__d("LSContactWorkForeignEntityType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FOREIGN:1,NOT_FOREIGN:2,NOT_FOREIGN_LIMITED:3});f["default"]=a}),66);
__d("MAWSubscribeToContactNames",["fbt","$InternalEnum","Env","I64","Promise","ReQL","gkx","promiseDone","regeneratorRuntime"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("$InternalEnum").Mirrored(["FIRST_NAME","FULL_NAME"]),j=new Map(),k=Boolean(c("Env").isMessengerDotComOnComet)?"Messenger":c("gkx")("1902661")?"Instagram":"Facebook";function l(){return h._("__JHASH__9kaBCOd2SjE__JHASH__",[h._param("Platform Name",k)]).toString()}function m(a,e,f,g){var h=d("ReQL").fromTableAscending(a.table("contacts")).getKeyRange(d("I64").of_string(e)).subscribe(function(a,d){c("promiseDone")(function(){var a,c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:if(!(d.operation!=="delete")){e.next=7;break}a=d.value;c=f===i.FULL_NAME?a.name:a.firstName;if(!(c!=null&&c!=="")){e.next=7;break}e.next=6;return b("regeneratorRuntime").awrap(g(c));case 6:h();case 7:case"end":return e.stop()}},null,this)}())});return h}function a(a,c){return b("Promise").all(c.map(function(c){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("contacts")).getKeyRange(d("I64").of_string(c))));case 2:e=f.sent;return f.abrupt("return",e==null?c:null);case 4:case"end":return f.stop()}},null,this)})).then(function(a){return a.filter(Boolean)})}function n(a,c,e){var f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:g.next=2;return b("regeneratorRuntime").awrap(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("contacts")).getKeyRange(d("I64").of_string(c))));case 2:f=g.sent;return g.abrupt("return",e===i.FULL_NAME?f==null?void 0:f.name:f==null?void 0:f.firstName);case 4:case"end":return g.stop()}},null,this)}function e(a){var c=a.contactIDs,d=a.db,e=a.nameMode,f=e===void 0?i.FIRST_NAME:e,g=a.onResolve,h=a.subscriptionKey,k=a.txn,o=new Map(),p=[],q=function(a,b){return(a=o.get(b))!=null?a:l()};if(j.has(h)){(e=j.get(h))==null?void 0:e.map(function(a){return a()})}j.set(h,p);return b("Promise").all(c.map(function(a,e){var i,r;return b("regeneratorRuntime").async(function(s){while(1)switch(s.prev=s.next){case 0:s.next=2;return b("regeneratorRuntime").awrap(n(k,a,f));case 2:i=s.sent;if(!(i!=null&&i!=="")){s.next=6;break}o.set(e,i);return s.abrupt("return",i);case 6:g!=null&&(r=m(d,a,f,function(a){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:r();o.set(e,a);if(!(o.size===c.length)){d.next=6;break}j["delete"](h);d.next=6;return b("regeneratorRuntime").awrap(g(c.map(q)));case 6:case"end":return d.stop()}},null,this)}),p.push(r));return s.abrupt("return",l());case 8:case"end":return s.stop()}},null,this)}))}g.ContactNameMode=i;g.getUnknownUser=l;g.getMissingContactNames=a;g.getContactNameFromContactID=n;g.getContactNamesFromContactIDs=e}),98);
__d("MAWBridgeBuildAdminMsg",["CurrentUser","I64","LS.re","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSVerifyContactRowExists","MAWAdminMsg","MAWAdminMsgNormalized","MAWLocalizationType","MAWSubscribeToContactNames","MAWThreadId","Promise","ReQL","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e,f,g,i,j,k,l){var m,n,o,p,q,r,s;return b("regeneratorRuntime").async(function(t){while(1)switch(t.prev=t.next){case 0:l===void 0&&(l=0);m=d("MAWAdminMsgNormalized").deconstructContactIdsFromAdminContent(k,j),n=m.contactIds,o=m.contents;if(!(l===1)){t.next=15;break}p=k===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP?d("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME:d("MAWSubscribeToContactNames").ContactNameMode.FULL_NAME;t.next=6;return b("regeneratorRuntime").awrap(d("MAWSubscribeToContactNames").getMissingContactNames(e,n));case 6:q=t.sent;if(!(q.length>0)){t.next=10;break}t.next=10;return b("regeneratorRuntime").awrap(b("Promise").all(q.map(function(a){return c("LSVerifyContactRowExists")(d("I64").of_string(a),d("I64").of_int32(c("LSContactIdType").FBID),void 0,void 0,d("I64").of_int32(c("LSContactType").USER),void 0,void 0,void 0,void 0,!1,!1,d("I64").of_int32(c("LSContactBlockedByViewerStatus").UNBLOCKED),void 0,a===c("CurrentUser").getID(),d("I64").of_int32(c("LSAuthorityLevel").OPTIMISTIC),void 0,void 0,d("I64").of_int32(c("LSContactWorkForeignEntityType").UNKNOWN),d("I64").of_int32(c("LSContactGender").UNKNOWN),d("I64").of_int32(c("LSContactViewerRelationship").UNKNOWN),void 0,c("LS.re").make(e))})));case 10:t.next=12;return b("regeneratorRuntime").awrap(d("MAWSubscribeToContactNames").getContactNamesFromContactIDs({contactIDs:[].concat(n),db:a,nameMode:p,onResolve:function(b){b=d("MAWAdminMsg").buildLocalizedString(o,b,k);return h(a,f,g,i,b)},subscriptionKey:d("I64").to_string(g),txn:e}));case 12:r=t.sent;s=d("MAWAdminMsg").buildLocalizedString(o,r,k);return t.abrupt("return",s);case 15:return t.abrupt("return",d("MAWAdminMsg").buildLocalizedString(o,n,k));case 16:case"end":return t.stop()}},null,this)}function h(a,c,e,f,g){return a.runInTransaction(function(h){var i,j,k;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:l.next=2;return b("regeneratorRuntime").awrap(d("MAWThreadId").toThreadKeyMaybe(a,c));case 2:i=l.sent;if(!(i==null)){l.next=5;break}return l.abrupt("return");case 5:j=h.table("messages");l.next=8;return b("regeneratorRuntime").awrap(d("ReQL").firstAsync(d("ReQL").fromTableAscending(j).getKeyRange(i,e,f)));case 8:k=l.sent;if(!k){l.next=12;break}l.next=12;return b("regeneratorRuntime").awrap(j.put(babelHelpers["extends"]({},k,{text:g})));case 12:case"end":return l.stop()}},null,this)},"readwrite")}g.buildAdminMsgText=a}),98);
__d("MAWBridgeBuildAdminMsg.bs",["MAWBridgeBuildAdminMsg"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i){return b("MAWBridgeBuildAdminMsg").buildAdminMsgText(a,c,d,e,f,g,h,i)}f.buildAdminMsgText=a}),null);
__d("LSReplyMessageStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,VALID:1,DELETED:2,TEMPORARY_UNAVAILABLE:3,EXPIRED:4});f["default"]=a}),66);
__d("MAWMsgReply",["fbt","LSReplyMessageStatus","MAWSubscribeToContactNames","MAWThreadId","MAWTimeUtils","ODS","Promise","ReQL","WAMsgType","err","regeneratorRuntime"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a){var b=a.isAuthorMe,c=a.isDeletedMsg,d=a.isStoryReply;d=d===void 0?!1:d;var e=a.isStoryShare;e=e===void 0?!1:e;var f=a.recipientName,g=a.replySenderIsMe;g=g===void 0?!1:g;var i=a.replySenderIsRecepient;a=a.senderName;switch(!0){case b&&c:return h._("__JHASH__FzueDOoURT8__JHASH__");case b&&e:return h._("__JHASH__d4DLCdwDC03__JHASH__");case b&&g:return h._("__JHASH__GiGYAtipVIl__JHASH__");case b&&d:return f!=null?h._("__JHASH__ZkkDtvZx-as__JHASH__",[h._param("name",f)]):h._("__JHASH__GEUovmERkjj__JHASH__");case b:return f!=null?h._("__JHASH__eQLjVyXwwuH__JHASH__",[h._param("other_name",f)]):h._("__JHASH__NYU_gsfRGpq__JHASH__");case c:return h._("__JHASH__30kvLEU_B_p__JHASH__",[h._param("name",a)]);case i:return h._("__JHASH__RWi7lW394uo__JHASH__",[h._param("other",a)]);case e:return h._("__JHASH__JQwHPEO2e9j__JHASH__",[h._param("user",a)]);case g&&d:return h._("__JHASH__zc6GoZLyKDZ__JHASH__",[h._param("name",a)]);case g:return h._("__JHASH__uU6-xunUPnp__JHASH__",[h._param("other_name",a)]);default:return f!=null?h._("__JHASH__iOHMd6RP1E7__JHASH__",[h._param("other",a),h._param("other_name",f)]):h._("__JHASH__JL2f9yie2zt__JHASH__",[h._param("other",a)])}}function a(a,e,f){var g,h,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;return b("regeneratorRuntime").async(function(C){while(1)switch(C.prev=C.next){case 0:h=f.chatId,l=f.isAuthorMe,m=f.isStoryReply,n=f.isStoryShare,o=n===void 0?!1:n,p=f.msgId,q=f.originalTs,r=f.replySenderIsMe,s=f.replySourceId,t=f.replyToUserId,u=f.sender,v=f.ts,w=f.type_;if(!(s==null&&!o)){C.next=3;break}return C.abrupt("return",b("Promise").resolve());case 3:if(!(t==null||u==null)){C.next=5;break}throw c("err")("Error getting reply snippet without replyToUserId or sender");case 5:x=d("MAWSubscribeToContactNames").getContactNameFromContactID(e,t,d("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME)==null;y=d("MAWSubscribeToContactNames").getContactNameFromContactID(e,u,d("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME)==null;d("ODS").bumpEntityKey(3185,"armadillo_reply","creating_reply_snippet");x&&y?d("ODS").bumpEntityKey(3185,"armadillo_reply","missing_both"):y?d("ODS").bumpEntityKey(3185,"armadillo_reply","missing_sender"):x&&d("ODS").bumpEntityKey(3185,"armadillo_reply","missing_reply_to");C.next=11;return b("regeneratorRuntime").awrap(d("MAWSubscribeToContactNames").getContactNamesFromContactIDs({contactIDs:[t,u],db:a,onResolve:function(b){var e,g=b[0];b=b[1];return k(a,h,d("MAWTimeUtils").toTimestamp(w===d("WAMsgType").MSG_TYPE.REVOKED?(e=q)!=null?e:v:v),p,(e=i({isAuthorMe:l,isDeletedMsg:j(f)===c("LSReplyMessageStatus").DELETED,isStoryReply:m,isStoryShare:o,recipientName:g,replySenderIsMe:r,replySenderIsRecepient:u===t,senderName:b}))==null?void 0:e.toString())},subscriptionKey:p,txn:e}));case 11:z=C.sent;A=z[0];B=z[1];return C.abrupt("return",b("Promise").resolve((g=i({isAuthorMe:l,isDeletedMsg:j(f)===c("LSReplyMessageStatus").DELETED,isStoryReply:m,isStoryShare:o,recipientName:x?void 0:A,replySenderIsMe:r,replySenderIsRecepient:u===t,senderName:B}))==null?void 0:g.toString()));case 15:case"end":return C.stop()}},null,this)}function j(a){a=a.replyStatusType;switch(a){case d("WAMsgType").MSG_TYPE.DELETE_FOR_ME:case d("WAMsgType").MSG_TYPE.REVOKED:return c("LSReplyMessageStatus").DELETED;case d("WAMsgType").MSG_TYPE.TEXT:case d("WAMsgType").MSG_TYPE.IMAGE:case d("WAMsgType").MSG_TYPE.VIDEO:case d("WAMsgType").MSG_TYPE.PTT:case d("WAMsgType").MSG_TYPE.ADMIN:case d("WAMsgType").MSG_TYPE.GIF:case d("WAMsgType").MSG_TYPE.STICKER:case d("WAMsgType").MSG_TYPE.XMA:return c("LSReplyMessageStatus").VALID;case d("WAMsgType").MSG_TYPE.FUTUREPROOF:case d("WAMsgType").MSG_TYPE.CIPHERTEXT:case d("WAMsgType").MSG_TYPE.UNAVAILABLE:return c("LSReplyMessageStatus").TEMPORARY_UNAVAILABLE;case d("WAMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:return c("LSReplyMessageStatus").UNKNOWN;case d("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return c("LSReplyMessageStatus").EXPIRED;default:return void 0}}function k(a,c,e,f,g){var h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return b("regeneratorRuntime").awrap(d("MAWThreadId").toThreadKeyMaybe(a,c));case 2:h=i.sent;if(!(h==null)){i.next=5;break}return i.abrupt("return",b("Promise").resolve());case 5:return i.abrupt("return",a.runInTransaction(function(a){var c,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:c=a.table("messages");j.next=3;return b("regeneratorRuntime").awrap(d("ReQL").firstAsync(d("ReQL").fromTableAscending(c).getKeyRange(h,e,f)));case 3:i=j.sent;if(!i){j.next=7;break}j.next=7;return b("regeneratorRuntime").awrap(c.put(babelHelpers["extends"]({},i,{replySnippet:g})));case 7:case"end":return j.stop()}},null,this)},"readwrite"));case 6:case"end":return i.stop()}},null,this)}g.buildLocalizedReplySnippet=i;g.getReplySnippet=a;g.getReplyStatus=j}),98);
__d("MAWMsgReply.bs",["LSMessageReplySourceTypeV2.bs","LSReplyMessageAttachmentType.bs","MAWGating","MAWMedia.bs","MAWXMA.bs","bs_belt_Option","bs_caml_format","bs_caml_int64","bs_caml_option","bs_curry","cr:2382"],(function(a,b,c,d,e,f){"use strict";function a(a){return!b("bs_belt_Option").isNone(a.replySourceId)}function c(a){a=a.replyToUserId;if(a!==void 0)return b("bs_caml_format").caml_int64_of_string(b("bs_caml_option").valFromOption(a))}function d(a){var c=a.isForwarded,d=!b("bs_belt_Option").isNone(a.replySourceId),e=a.isStoryReply;a=a.isStoryShare;if(c)return b("LSMessageReplySourceTypeV2.bs").forward;if(a!==void 0&&a)return b("LSMessageReplySourceTypeV2.bs").fbStoryShare;if(d)if(e!==void 0&&e)return b("LSMessageReplySourceTypeV2.bs").story;else return b("LSMessageReplySourceTypeV2.bs").message}function e(a){var c=!b("bs_belt_Option").isNone(a.replySourceId),d=a.isStoryReply;a=a.isStoryShare;if(a!==void 0&&a)return b("LSMessageReplySourceTypeV2.bs").fbStoryShare;if(c)if(d!==void 0&&d)return b("LSMessageReplySourceTypeV2.bs").story;else return b("LSMessageReplySourceTypeV2.bs").message}function g(a){if(!b("bs_belt_Option").isNone(a.replySourceId))return a.replySourceId}function h(a){if(!b("bs_belt_Option").isNone(a.replySourceId))return a.replyMessageText}function i(a){if(b("bs_belt_Option").isNone(a.replySourceId))return!1;else return b("bs_belt_Option").isSome(a.replyMediaUrlMimeType)}function j(a){if(i(a))return a.replyMediaUrlMimeType}function k(a){if(i(a))return b("bs_belt_Option").map(a.replyMediaPreviewHeight,b("bs_caml_int64").of_int32)}function l(a){if(i(a))return b("bs_belt_Option").map(a.replyMediaPreviewWidth,b("bs_caml_int64").of_int32)}function m(a){var c=a.replyMessageText;c=c!==void 0?b("cr:2382")==null?c:b("bs_curry")._1(b("cr:2382").unvault,c):"";c=c==="\ud83d\udc4d"&&a.replyStatusType==="Sticker"&&b("MAWGating").isHotLikeEnabled();var d=i(a);a=a.replyStatusType;if(d){if(a===void 0)return;switch(a){case"Gif":if(c)return;else return b("LSReplyMessageAttachmentType.bs").gif;case"Ptt":if(c)return;else return b("LSReplyMessageAttachmentType.bs").other;case"Sticker":if(!c)return b("LSReplyMessageAttachmentType.bs").sticker;break;case"Video":if(c)return;else return b("LSReplyMessageAttachmentType.bs").video;case"Image":case"XMA":if(c)return;else return b("LSReplyMessageAttachmentType.bs").photo;default:}}if(a!==void 0&&a==="Sticker"&&c)return b("LSReplyMessageAttachmentType.bs").sticker}function n(a){var c=i(a),d=a.replyMediaId;a=a.replyXMAId;if(c&&d!==void 0)if(a!==void 0)return;else return b("bs_belt_Option").map(d,b("MAWMedia.bs").mediaIdToIntExn);if(d!==void 0||a===void 0)return;else return b("bs_belt_Option").map(a,b("MAWXMA.bs").xmaIdToIntExn)}function o(a){var c=a.replyStatusType,d=m(a),e=n(a),f=a.replyMessageText;a=a.isStoryReply;if(c!==void 0&&c==="XMA"&&d===void 0){if(e!==void 0)return;if(f===void 0)return b("bs_caml_int64").zero}if(e!==void 0||!(a!==void 0&&a))return;else return b("bs_caml_int64").zero}f.hasReply=a;f.getReplyUserId=c;f.getReplySourceTypeV2=d;f.getReplySourceType=e;f.getReplySourceId=g;f.getReplyMessageText=h;f.hasReplyMedia=i;f.getReplyMediaMimeType=j;f.getReplyMediaHeight=k;f.getReplyMediaWidth=l;f.$MAWVault$requireCond=b("cr:2382");f.getReplyAttachmentType=m;f.getReplyAttachmentId=n;f.getReplyMediaExpirationTimestampMs=o}),null);
__d("MAWBridgeNewMsgHandler.bs",["LSAuthorityLevel.bs","LSHotEmojiSize.bs","LSMessageUnsendabilityStatus.bs","LSMessageViewFlag.bs","LSQuickReplyType.bs","MAWAckLevel.bs","MAWAdminMsgCTA.bs","MAWBridgeBuildAdminMsg.bs","MAWMsg.bs","MAWMsgReply","MAWMsgReply.bs","MAWThreadId.bs","MAWTimeUtils","Promise","ReQL.bs","bs_belt_Option","bs_caml_format","bs_caml_int64","bs_caml_obj"],(function(a,b,c,d,e,f){"use strict";function g(a){a=a.specialTextSize;if(b("bs_caml_obj").caml_equal(a,1))return b("LSHotEmojiSize.bs").small;else if(b("bs_caml_obj").caml_equal(a,2))return b("LSHotEmojiSize.bs").medium;else if(b("bs_caml_obj").caml_equal(a,3))return b("LSHotEmojiSize.bs").large;else return b("LSHotEmojiSize.bs").none}function h(a,c,d,e,f,h){f=f!==void 0?[f.ctaId,f.title,f.ctaType]:[void 0,void 0,void 0];var i=f[2],j=f[1],k=f[0],l=b("MAWTimeUtils").toTimestamp(e.type_===b("MAWMsg.bs").unsent?b("bs_belt_Option").getWithDefault(e.originalTs,e.ts):e.ts);f=function(d){var e=d.isAdminMessage,f=d.adminContent,g=d.adminType;if(e&&f!==void 0&&g!==void 0)return b("MAWBridgeBuildAdminMsg.bs").buildAdminMsgText(a,c,d.chatId,l,d.msgId,f,g,d.adminVersion).then(function(a){return a});else return b("Promise").resolve(d.content)};return f(e).then(function(a){var f=e.ephemeralDurationInSec;return c.table("messages").add({adminMsgCtaId:k,adminMsgCtaTitle:j,adminMsgCtaType:i,authorityLevel:b("LSAuthorityLevel.bs").authoritative,cannotUnsendReason:e.type_===b("MAWMsg.bs").unsent||!e.isAuthorMe?b("LSMessageUnsendabilityStatus.bs").denyForNonSender:void 0,displayedContentTypes:b("MAWMsg.bs").getDisplayedContentTypes(e.type_,e.isForwarded,e.isExpiredXmaMsg),ephemeralDurationInSec:f!==void 0?b("bs_caml_int64").of_int32(f):void 0,ephemeralExpirationTs:void 0,forwardScore:void 0,hasQuickReplies:!1,hotEmojiSize:g(e),isAdminMessage:e.isAdminMessage,isForwarded:void 0,isUnsent:e.type_===b("MAWMsg.bs").unsent,localDataId:void 0,mentionIds:void 0,mentionLengths:void 0,mentionOffsets:void 0,mentionTypes:void 0,messageId:e.msgId,msUntilExpirationTs:void 0,offlineThreadingId:e.msgId,primarySortKey:b("bs_caml_int64").of_float(e.sortOrderMs),quickReplyType:b("LSQuickReplyType.bs").none,replyAttachmentExtra:void 0,replyAttachmentId:b("MAWMsgReply.bs").getReplyAttachmentId(e),replyAttachmentType:b("MAWMsgReply.bs").getReplyAttachmentType(e),replyCtaId:void 0,replyCtaTitle:void 0,replyMediaExpirationTimestampMs:b("MAWMsgReply.bs").getReplyMediaExpirationTimestampMs(e),replyMediaPreviewHeight:b("MAWMsgReply.bs").getReplyMediaHeight(e),replyMediaPreviewWidth:b("MAWMsgReply.bs").getReplyMediaWidth(e),replyMediaUrl:void 0,replyMediaUrlFallback:void 0,replyMediaUrlMimeType:b("MAWMsgReply.bs").getReplyMediaMimeType(e),replyMessageText:b("MAWMsgReply.bs").getReplyMessageText(e),replySnippet:h,replySourceId:b("MAWMsgReply.bs").getReplySourceId(e),replySourceTimestampMs:void 0,replySourceType:b("MAWMsgReply.bs").getReplySourceType(e),replySourceTypeV2:b("MAWMsgReply.bs").getReplySourceTypeV2(e),replyStatus:b("bs_belt_Option").map(b("MAWMsgReply").getReplyStatus(e),b("bs_caml_int64").of_int32),replyToUserId:b("MAWMsgReply.bs").getReplyUserId(e),replyType:void 0,secondarySortKey:void 0,senderId:b("bs_caml_format").caml_int64_of_string(e.sender),sendStatus:b("MAWAckLevel.bs").levelToMessagingSendStatus(e.ack),sendStatusV2:b("MAWAckLevel.bs").levelToMessagingSendStatusV2(e.ack),stickerId:void 0,subscriptErrorMessage:void 0,takedownState:void 0,text:a,textHasLinks:!1,threadKey:d,timestampMs:l,unsentTimestampMs:b("MAWTimeUtils").toTimestamp(e.ts),viewedPluginContext:void 0,viewedPluginKey:void 0,viewFlags:b("LSMessageViewFlag.bs").uncalculated})})}function i(a,c,d){return b("MAWThreadId.bs").toThreadKeyMaybe(c,d.chatId).then(function(e){if(e!==void 0)return b("MAWAdminMsgCTA.bs").getAdminMsgCtaStep(c,e,d).then(function(e){return b("MAWMsgReply").getReplySnippet(a,c,d).then(function(a){return[e,a]})}).then(function(e){var f=e[1];e=e[0];var i=d.offlineMsg;if(i!==void 0){var j=e.threadKey,k=e.result,l=k!==void 0?[k.ctaId,k.title,k.ctaType]:[void 0,void 0,void 0],m=l[2],n=l[1],o=l[0];return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("messages")),{hd:j,tl:{hd:b("bs_caml_int64").of_float(i.ts),tl:{hd:i.msgId,tl:0}}})).then(function(e){if(e===void 0)return h(a,c,j,d,k,f);e=b("bs_caml_obj").caml_obj_dup(e);var i=d.ephemeralDurationInSec;e.ephemeralDurationInSec=i!==void 0?b("bs_caml_int64").of_int32(i):void 0;return c.table("messages").put((e.replySourceTimestampMs=void 0,e.authorityLevel=b("LSAuthorityLevel.bs").authoritative,e.hotEmojiSize=g(d),e.displayedContentTypes=b("MAWMsg.bs").getDisplayedContentTypes(d.type_,d.isForwarded,d.isExpiredXmaMsg),e.adminMsgCtaType=m,e.adminMsgCtaTitle=n,e.adminMsgCtaId=o,e.replyAttachmentId=b("MAWMsgReply.bs").getReplyAttachmentId(d),e.replyAttachmentType=b("MAWMsgReply.bs").getReplyAttachmentType(d),e.replyMediaUrlMimeType=b("MAWMsgReply.bs").getReplyMediaMimeType(d),e.replyMediaPreviewHeight=b("MAWMsgReply.bs").getReplyMediaHeight(d),e.replyMediaPreviewWidth=b("MAWMsgReply.bs").getReplyMediaWidth(d),e.replyMediaUrl=void 0,e.replyMediaExpirationTimestampMs=b("MAWMsgReply.bs").getReplyMediaExpirationTimestampMs(d),e.replyToUserId=b("MAWMsgReply.bs").getReplyUserId(d),e.replyMessageText=b("MAWMsgReply.bs").getReplyMessageText(d),e.replySnippet=f,e.replyStatus=b("bs_belt_Option").map(b("MAWMsgReply").getReplyStatus(d),b("bs_caml_int64").of_int32),e.replySourceTypeV2=b("MAWMsgReply.bs").getReplySourceTypeV2(d),e.replySourceType=b("MAWMsgReply.bs").getReplySourceType(d),e.replySourceId=b("MAWMsgReply.bs").getReplySourceId(d),e.isUnsent=d.type_===b("MAWMsg.bs").unsent,e.sendStatusV2=b("MAWAckLevel.bs").levelToMessagingSendStatusV2(d.ack),e.sendStatus=b("MAWAckLevel.bs").levelToMessagingSendStatus(d.ack),e.messageId=d.msgId,e.primarySortKey=b("bs_caml_int64").of_float(d.sortOrderMs),e.timestampMs=b("MAWTimeUtils").toTimestamp(d.ts),e))})}else return h(a,c,e.threadKey,d,e.result,f)});else return b("Promise").resolve()}).then(function(a){})}function a(a,c,d){return b("Promise").all(d.filter(function(a){return!a.isDualSend}).map(function(b){return i(a,c,b)})).then(function(a){})}f.getSpecialTextSize=g;f.call=i;f.bulkCall=a}),null);
__d("MAWBridgeMsgUpdatedHandler.bs",["LSMessageUnsendabilityStatus.bs","MAWAckLevel.bs","MAWAdminMsg.bs","MAWAdminMsgCTA.bs","MAWBridgeNewMsgHandler.bs","MAWMsg.bs","MAWMsgReply","MAWMsgReply.bs","MAWThreadId.bs","MAWTimeUtils","Promise","ReQL.bs","bs_belt_Option","bs_caml_int64","bs_caml_obj"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("MAWThreadId.bs").toThreadKeyMaybe(c,d.chatId).then(function(e){if(e!==void 0)return b("MAWAdminMsgCTA.bs").getAdminMsgCtaStep(c,e,d).then(function(e){return b("MAWMsgReply").getReplySnippet(a,c,d).then(function(a){return[e,a]}).then(function(f){var e=f[0],a=e.threadKey;e=e.result;var g=f[1],h=d.type_===b("MAWMsg.bs").unsent;f=e!==void 0?[e.ctaId,e.title,e.ctaType]:[void 0,void 0,void 0];var i=f[2],j=f[1],k=f[0];return b("ReQL.bs").first(b("ReQL.bs").filter(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("messages")),{hd:a,tl:0}),function(a){return a.messageId===d.msgId})).then(function(a){if(a===void 0)return b("Promise").resolve();var e=b("MAWAckLevel.bs").levelToMessagingSendStatusV2(d.ack);a=b("bs_caml_obj").caml_obj_dup(a);a.replySourceTimestampMs=void 0;a.unsentTimestampMs=h?b("MAWTimeUtils").toTimestamp(d.ts):void 0;a.hotEmojiSize=b("MAWBridgeNewMsgHandler.bs").getSpecialTextSize(d);a.displayedContentTypes=b("MAWMsg.bs").getDisplayedContentTypes(d.type_,d.isForwarded,d.isExpiredXmaMsg);a.cannotUnsendReason=h||!d.isAuthorMe?b("LSMessageUnsendabilityStatus.bs").denyForNonSender:void 0;a.adminMsgCtaType=i;a.adminMsgCtaTitle=j;a.adminMsgCtaId=k;a.replyAttachmentExtra=void 0;a.replyAttachmentId=b("MAWMsgReply.bs").getReplyAttachmentId(d);a.replyAttachmentType=b("MAWMsgReply.bs").getReplyAttachmentType(d);a.replyMediaUrlMimeType=b("MAWMsgReply.bs").getReplyMediaMimeType(d);a.replyMediaPreviewHeight=b("MAWMsgReply.bs").getReplyMediaHeight(d);a.replyMediaPreviewWidth=b("MAWMsgReply.bs").getReplyMediaWidth(d);a.replyMediaUrl=void 0;a.replyMediaExpirationTimestampMs=b("MAWMsgReply.bs").getReplyMediaExpirationTimestampMs(d);a.replyToUserId=b("MAWMsgReply.bs").getReplyUserId(d);a.replyMessageText=b("MAWMsgReply.bs").getReplyMessageText(d);a.replySnippet=g;a.replyStatus=b("bs_belt_Option").map(b("MAWMsgReply").getReplyStatus(d),b("bs_caml_int64").of_int32);a.replySourceTypeV2=b("MAWMsgReply.bs").getReplySourceTypeV2(d);a.replySourceType=b("MAWMsgReply.bs").getReplySourceType(d);a.replySourceId=b("MAWMsgReply.bs").getReplySourceId(d);a.isUnsent=h;a.sendStatusV2=e;a.sendStatus=b("MAWAckLevel.bs").levelToMessagingSendStatus(d.ack);if(d.isAdminMessage){e=d.adminContent;var f=d.adminType;e=e!==void 0&&f!==void 0?b("MAWAdminMsg.bs").buildLocalizedString(e,[],f):void 0}else e=d.content;a.text=e;return c.table("messages").put((a.primarySortKey=b("bs_caml_int64").of_float(d.sortOrderMs),a.timestampMs=b("MAWTimeUtils").toTimestamp(h?b("bs_belt_Option").getWithDefault(d.originalTs,d.ts):d.ts),a))})})});else return b("Promise").resolve()})}f.call=a}),null);
__d("MAWBridgeMsgsLoadedHandler.bs",["LS.bs","LSClearMessagePlaceholderRange","LSInsertNewMessageRange","MAWThreadId.bs","MAWTimeUtils.bs","Promise","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d!==void 0)return b("LSClearMessagePlaceholderRange")(d,"",b("MAWTimeUtils.bs").maxTimestampMs,b("LS.bs").make(a)).then(function(e){e=c.rangeExtensionType;var f;switch(e.TAG){case 1:case 2:f=b("bs_caml_int64").of_float(e._0.minMsgTs);break;case 0:case 3:f=b("MAWTimeUtils.bs").minTimestampMs;break}e=c.rangeExtensionType;e=e.TAG===3?b("bs_caml_int64").of_float(e._0.maxMsgTs):b("MAWTimeUtils.bs").maxTimestampMs;var g=c.rangeExtensionType,h;switch(g.TAG){case 1:case 2:h=g._0.minMsgId;break;case 0:case 3:h="";break}g=c.rangeExtensionType;var i;switch(g.TAG){case 1:i=g._0.maxMsgId;break;case 0:case 2:i="";break;case 3:i=g._0.maxMsgId;break}g=c.rangeExtensionType;var j;switch(g.TAG){case 1:case 2:j=b("bs_caml_int64").of_float(g._0.minMsgTs);break;case 0:case 3:j=b("MAWTimeUtils.bs").minTimestampMs;break}g=c.rangeExtensionType;g=g.TAG===3?b("bs_caml_int64").of_float(g._0.maxMsgTs):b("MAWTimeUtils.bs").maxTimestampMs;var k=c.rangeExtensionType,l;switch(k.TAG){case 1:l=k._0.hasMoreBefore;break;case 2:l=k._0.hasMoreBefore;break;case 0:case 3:l=!1;break}k=c.rangeExtensionType;k=k.TAG===3?k._0.hasMoreAfter:!1;return b("LSInsertNewMessageRange")(d,f,e,h,i,j,g,l,k,void 0,b("LS.bs").make(a))});else return b("Promise").resolve()})}f.call=a}),null);
__d("MAWBridgeMsgsStartCountdownHandler.bs",["MAWEphemeralMessageExpirationStorage.bs","MAWThreadId.bs","MAWTimeUtils","Promise","ReQL.bs","bs_caml_int64","bs_caml_obj"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return c.msgs.reduce(function(c,d){return c.then(function(c){b("MAWEphemeralMessageExpirationStorage.bs").setMessageForExpiration(a,d,d.countdownTs,d.millisecondsUntilCountdownTs);b("bs_caml_int64").of_int32(d.millisecondsUntilCountdownTs);return b("MAWThreadId.bs").toThreadKeyMaybe(a,d.chatId).then(function(c){if(c!==void 0)return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("messages")),{hd:c,tl:{hd:b("MAWTimeUtils").toTimestamp(d.ts),tl:{hd:d.msgId,tl:0}}})).then(function(c){if(c===void 0)return b("Promise").resolve();c=b("bs_caml_obj").caml_obj_dup(c);return a.table("messages").put((c.ephemeralExpirationTs=b("bs_caml_int64").of_float(d.countdownTs),c))});else return b("Promise").resolve()})})},b("Promise").resolve())}f.call=a}),null);
__d("MAWBridgeNewMediaHandler.bs",["MAWDbMsg","MAWMedia.bs","MAWThreadId.bs","Promise","ReQLTable.bs","bs_belt_Option","bs_caml_int64","bs_caml_obj","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve();var e=String(c.mediaId);return c.msgIds.reduce(function(f,g){return f.then(function(f){var h=b("bs_caml_int64").of_int32(b("MAWDbMsg").getInChatMsgIdFromMsgId(g));return b("ReQLTable.bs").update(a.table("attachments"),{hd:d,tl:{hd:g,tl:{hd:e,tl:0}}},function(a){if(a===void 0){var f,i,j;return{accessibilitySummaryText:void 0,actionUrl:void 0,attachmentCta1Id:void 0,attachmentCta2Id:void 0,attachmentCta3Id:void 0,attachmentFbid:e,attachmentIndex:(f=b("bs_caml_int64")).zero,attachmentLoggingType:void 0,attachmentType:b("MAWMedia.bs").mediaTypeToMessageAttachmentType(c.mediaType),attributionAppIcon:void 0,attributionAppIconFallback:void 0,attributionAppIconUrlExpirationTimestampMs:void 0,attributionAppId:void 0,attributionAppName:void 0,authorityLevel:f.zero,avatarCount:void 0,avatarViewAccessibilityLabel:void 0,avatarViewSize:void 0,avatarViewTitleList:void 0,avatarViewUrlExpirationTimestampList:void 0,avatarViewUrlFallbackList:void 0,avatarViewUrlList:void 0,captionBodyText:void 0,cta1Title:void 0,cta1Type:void 0,cta2Title:void 0,cta2Type:void 0,cta3Title:void 0,cta3Type:void 0,dashManifest:void 0,decryptionKey:void 0,defaultCtaId:void 0,defaultCtaTitle:void 0,defaultCtaType:void 0,descriptionText:void 0,ephemeralMediaState:void 0,faviconUrl:void 0,faviconUrlExpirationTimestampMs:void 0,faviconUrlFallback:void 0,filename:void 0,filesize:(i=b("bs_belt_Option")).map(c.filesize,f.of_int32),gatingTitle:void 0,gatingType:void 0,hasMedia:c.hasMedia,hasXma:!1,headerImageUrl:void 0,headerImageUrlExpirationTimestampMs:void 0,headerImageUrlFallback:void 0,headerImageUrlMimeType:void 0,headerTitle:void 0,imageUrl:void 0,imageUrlExpirationTimestampMs:void 0,imageUrlFallback:void 0,imageUrlMimeType:void 0,isBorderless:void 0,isPreviewImage:void 0,isSharable:!1,listItemAccessibilityText1:void 0,listItemAccessibilityText2:void 0,listItemAccessibilityText3:void 0,listItemContactUrlExpirationTimestampList1:void 0,listItemContactUrlExpirationTimestampList2:void 0,listItemContactUrlExpirationTimestampList3:void 0,listItemContactUrlFallbackList1:void 0,listItemContactUrlFallbackList2:void 0,listItemContactUrlFallbackList3:void 0,listItemContactUrlList1:void 0,listItemContactUrlList2:void 0,listItemContactUrlList3:void 0,listItemId1:void 0,listItemId2:void 0,listItemId3:void 0,listItemProfilePictureUrl1:void 0,listItemProfilePictureUrl2:void 0,listItemProfilePictureUrl3:void 0,listItemProfilePictureUrlExpirationTimestamp1:void 0,listItemProfilePictureUrlExpirationTimestamp2:void 0,listItemProfilePictureUrlExpirationTimestamp3:void 0,listItemProfilePictureUrlFallback1:void 0,listItemProfilePictureUrlFallback2:void 0,listItemProfilePictureUrlFallback3:void 0,listItemProgressBarFilledPercentage1:void 0,listItemProgressBarFilledPercentage2:void 0,listItemProgressBarFilledPercentage3:void 0,listItemsDescriptionSubtitleText:void 0,listItemsDescriptionText:void 0,listItemsId:void 0,listItemsSecondaryDescriptionText:void 0,listItemTitleText1:void 0,listItemTitleText2:void 0,listItemTitleText3:void 0,localPlayableUrl:void 0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,messageId:g,miniPreview:void 0,offlineAttachmentId:e,originalFileHash:void 0,originalPageSenderId:void 0,playableDurationMs:i.map((j=b("bs_caml_option")).nullable_to_opt(c.duration),f.of_int32),playableUrl:void 0,playableUrlExpirationTimestampMs:void 0,playableUrlFallback:void 0,playableUrlMimeType:void 0,preheaderText:void 0,previewHeight:i.map(j.nullable_to_opt(c.previewHeight),f.of_int32),previewHeightLarge:i.map(j.nullable_to_opt(c.previewHeightLarge),f.of_int32),previewImageDecorationType:void 0,previewUrl:void 0,previewUrlExpirationTimestampMs:void 0,previewUrlFallback:void 0,previewUrlLarge:void 0,previewUrlMimeType:void 0,previewWidth:i.map(j.nullable_to_opt(c.previewWidth),f.of_int32),previewWidthLarge:i.map(j.nullable_to_opt(c.previewWidthLarge),f.of_int32),samplingFrequencyHz:void 0,shouldAutoplayVideo:void 0,shouldHighlightHeaderTitleInTitle:void 0,shouldRespectServerPreviewSize:void 0,sourceText:void 0,subtitleIconUrl:void 0,subtitleText:void 0,targetId:void 0,threadKey:d,timestampMs:h,titleText:void 0,viewerSeenTimestampMs:void 0,waveformData:void 0,xmaLayoutType:void 0,xmasTemplateType:void 0}}i=b("bs_caml_obj").caml_obj_dup(a);i.hasMedia=c.hasMedia;return i})})},b("Promise").resolve())})}function a(a,b){return g(a,b).then(function(a){})}f.call=a}),null);
__d("MAWBridgeNewMediaRangeHandler.bs",["LS.bs","LSThreadMediaGalleryGroup.bs","LSUpsertAttachmentRange","MAWThreadId.bs","Promise","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve();var e=b("bs_caml_int64").of_int32(c.minMsgRowId),f=c.hasMoreBefore;return b("LSUpsertAttachmentRange")(d,b("LSThreadMediaGalleryGroup.bs").photosAndVideos,e,f,b("LS.bs").make(a))})}function a(a,b){return g(a,b).then(function(a){})}f.call=a}),null);
__d("MAWBridgeOneToOneMessageRequestLoadedHandler.bs",["fbt","LSAuthorityLevel.bs","LSMessagingThreadTypeUtil.bs","LSThreadBitOffset.bs","MAWContact.bs","MAWGating","MAWMessageRequestUtil.bs","MAWThreadId.bs","Promise","ReQL.bs","bs_caml","bs_caml_format","bs_caml_int64","bs_caml_obj"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d!==void 0)return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("threads")),{hd:d,tl:0})).then(function(d){if(d===void 0)return b("Promise").resolve([void 0,void 0,void 0,!1]);var e=b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("contacts")),{hd:b("bs_caml_format").caml_int64_of_string(c.fbid),tl:0}));return b("Promise").all([b("Promise").resolve(d),e,b("Promise").resolve(c.relationship),b("Promise").resolve(b("LSMessagingThreadTypeUtil.bs").isOneToOne(d.threadType))])}).then(function(c){var d=c[0];if(d===void 0)return b("Promise").resolve();var e=c[1];if(e===void 0)return b("Promise").resolve();var f=c[2];if(f===void 0)return b("Promise").resolve();if(!c[3])return b("Promise").resolve();c=b("bs_caml").i64_neq(e.authorityLevel,b("LSAuthorityLevel.bs").authoritative)?f:b("MAWContact.bs").lsContactToContactRelationshipType(e);if(d.folderName==="pending"||d.folderName==="other"||d.folderName==="inbox"&&c!==b("MAWContact.bs").twoWayContact&&c!==b("MAWContact.bs").oneWayContact&&b("bs_caml").i64_neq(d.lastActivityTimestampMs,b("bs_caml_int64").zero)){f=b("LSThreadBitOffset.bs").clear(b("MAWMessageRequestUtil.bs").disabledThreadCapabilitiesForIncomingRequest,d.capabilities,d.capabilities2,d.capabilities3);e=b("MAWGating").isEyebrowTextEnabled()&&d.folderName==="inbox"?g._("__JHASH__4F6x7gUU1-S__JHASH__").toString():void 0;c=[b("LSThreadBitOffset.bs").set(b("MAWMessageRequestUtil.bs").enabledThreadCapabilitiesForIncomingRequest,f[0],f[1],f[2]),e]}else c=[[d.capabilities,d.capabilities2,d.capabilities3],void 0];f=c[0];e=b("bs_caml_obj").caml_obj_dup(d);return a.table("threads").put((e.capabilities3=f[2],e.capabilities2=f[1],e.additionalThreadContext=c[1],e.capabilities=f[0],e)).then(function(a){})});else return b("Promise").resolve()})}f.call=a}),null);
__d("MAWBridgeParticipantRemovedHandler.bs",["MAWThreadId.bs","Promise","bs_caml_format"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve();var e=b("bs_caml_format").caml_int64_of_string(c.fbid);return a.table("participants")["delete"]({hd:d,tl:{hd:e,tl:0}}).then(function(a){})})}f.call=a}),null);
__d("MAWBridgeParticipantUpdatedHandler.bs",["fbt","LS.bs","LSAuthorityLevel.bs","LSContactBlockedByViewerStatus.bs","LSContactGender.bs","LSContactIdType.bs","LSContactType.bs","LSContactViewerRelationship.bs","LSContactWorkForeignEntityType.bs","LSGroupParticipantJoinState.bs","LSVerifyContactRowExists","MAWCurrentUser","MAWThreadId.bs","MAWTimeUtils","MAWUpdateLSThreadCapabilities.bs","Promise","ReQLTable.bs","bs_caml","bs_caml_format","bs_caml_int64","bs_caml_obj"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MAWCurrentUser").getID(),i=b("bs_caml_format").caml_int64_of_string(h);function a(a){return a.startsWith("shadow_")}function c(a,c){if(c.fbid.startsWith("shadow_"))return b("Promise").resolve();else return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve();var e=b("bs_caml_format").caml_int64_of_string(c.fbid),f=b("MAWTimeUtils").toTimestamp(c.readWatermarkTs),j=b("MAWTimeUtils").toTimestamp(c.deliveredWatermarkTs),k=b("MAWTimeUtils").toTimestamp(c.lastReadActionTs),l=c.isSuperAdmin?g._("__JHASH__SYYL6HsMICm__JHASH__").toString():void 0,m={contents:!1},n={contents:!1};return b("ReQLTable.bs").update(a.table("participants"),{hd:d,tl:{hd:e,tl:0}},function(a){if(a!==void 0){n.contents=!0;return{authorityLevel:a.authorityLevel,contactId:e,deliveredWatermarkTimestampMs:j,groupParticipantJoinState:c.isInvited?b("LSGroupParticipantJoinState.bs").invited:b("LSGroupParticipantJoinState.bs").member,isAdmin:c.isAdmin,isModerator:!1,isSuperAdmin:a.isSuperAdmin,nickname:a.nickname,normalizedSearchTerms:a.normalizedSearchTerms,participantCapabilities:a.participantCapabilities,readActionTimestampMs:k,readWatermarkTimestampMs:f,subscribeSource:l,threadKey:d}}else{n.contents=!0;m.contents=!0;return{authorityLevel:b("bs_caml_int64").zero,contactId:e,deliveredWatermarkTimestampMs:j,groupParticipantJoinState:c.isInvited?b("LSGroupParticipantJoinState.bs").invited:b("LSGroupParticipantJoinState.bs").member,isAdmin:c.isAdmin,isModerator:!1,isSuperAdmin:c.isSuperAdmin,nickname:void 0,normalizedSearchTerms:void 0,participantCapabilities:void 0,readActionTimestampMs:b("bs_caml_int64").zero,readWatermarkTimestampMs:f,subscribeSource:l,threadKey:d}}}).then(function(f){if(n.contents)return b("MAWUpdateLSThreadCapabilities.bs").disableBlockerCapabilitiesTxn(a,d).then(function(f){f=b("bs_caml").i64_eq(i,e);var g=c.isAdmin;if(f)if(g)return b("MAWUpdateLSThreadCapabilities.bs").enableAddMembersTxn(a,d);else return b("MAWUpdateLSThreadCapabilities.bs").disableAddMembersTxn(a,d);else return window.Promise.resolve()});else return b("Promise").resolve()}).then(function(d){if(m.contents)return b("LSVerifyContactRowExists")(e,b("LSContactIdType.bs").fbid,void 0,void 0,b("LSContactType.bs").user,void 0,void 0,void 0,void 0,!1,!1,b("LSContactBlockedByViewerStatus.bs").unblocked,void 0,b("bs_caml_obj").caml_equal(h,c.fbid),b("LSAuthorityLevel.bs").optimistic,void 0,void 0,b("LSContactWorkForeignEntityType.bs").unknown,b("LSContactGender.bs").unknown,b("LSContactViewerRelationship.bs").unknown,void 0,b("LS.bs").make(a));else return b("Promise").resolve()})})}f.currentUserId=h;f.currentUserIdAsInt64=i;f.checkIfDualSendUser=a;f.call=c}),null);
__d("MAWBridgeParticipantsUpdatedHandler.bs",["fbt","LS.bs","LSAuthorityLevel.bs","LSContactBlockedByViewerStatus.bs","LSContactGender.bs","LSContactIdType.bs","LSContactType.bs","LSContactViewerRelationship.bs","LSContactWorkForeignEntityType.bs","LSGroupParticipantJoinState.bs","LSVerifyContactRowExists","MAWCurrentUser","MAWThreadId.bs","MAWTimeUtils","MAWUpdateLSThreadCapabilities.bs","Promise","ReQLTable.bs","bs_caml","bs_caml_format","bs_caml_int64","bs_caml_obj"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MAWCurrentUser").getID(),i=b("bs_caml_format").caml_int64_of_string(h);function a(a){return a.startsWith("shadow_")}function c(a,c){c=c.participants.filter(function(a){return!a.fbid.startsWith("shadow_")});return b("Promise").all(c.map(function(c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve();var e=b("bs_caml_format").caml_int64_of_string(c.fbid),f=b("MAWTimeUtils").toTimestamp(c.readWatermarkTs),j=b("MAWTimeUtils").toTimestamp(c.deliveredWatermarkTs),k=b("MAWTimeUtils").toTimestamp(c.lastReadActionTs),l=c.isSuperAdmin?g._("__JHASH__SYYL6HsMICm__JHASH__").toString():void 0,m={contents:!1},n={contents:!1};return b("ReQLTable.bs").update(a.table("participants"),{hd:d,tl:{hd:e,tl:0}},function(a){if(a!==void 0){n.contents=!0;return{authorityLevel:a.authorityLevel,contactId:e,deliveredWatermarkTimestampMs:j,groupParticipantJoinState:c.isInvited?b("LSGroupParticipantJoinState.bs").invited:b("LSGroupParticipantJoinState.bs").member,isAdmin:c.isAdmin,isModerator:!1,isSuperAdmin:a.isSuperAdmin,nickname:a.nickname,normalizedSearchTerms:a.normalizedSearchTerms,participantCapabilities:a.participantCapabilities,readActionTimestampMs:k,readWatermarkTimestampMs:f,subscribeSource:l,threadKey:d}}else{n.contents=!0;m.contents=!0;return{authorityLevel:b("bs_caml_int64").zero,contactId:e,deliveredWatermarkTimestampMs:j,groupParticipantJoinState:c.isInvited?b("LSGroupParticipantJoinState.bs").invited:b("LSGroupParticipantJoinState.bs").member,isAdmin:c.isAdmin,isModerator:!1,isSuperAdmin:c.isSuperAdmin,nickname:void 0,normalizedSearchTerms:void 0,participantCapabilities:void 0,readActionTimestampMs:b("bs_caml_int64").zero,readWatermarkTimestampMs:f,subscribeSource:l,threadKey:d}}}).then(function(f){if(n.contents)return b("MAWUpdateLSThreadCapabilities.bs").disableBlockerCapabilitiesTxn(a,d).then(function(f){f=b("bs_caml").i64_eq(i,e);var g=c.isAdmin;if(f)if(g)return b("MAWUpdateLSThreadCapabilities.bs").enableAddMembersTxn(a,d);else return b("MAWUpdateLSThreadCapabilities.bs").disableAddMembersTxn(a,d);else return window.Promise.resolve()});else return b("Promise").resolve()}).then(function(d){if(m.contents)return b("LSVerifyContactRowExists")(e,b("LSContactIdType.bs").fbid,void 0,void 0,b("LSContactType.bs").user,void 0,void 0,void 0,void 0,!1,!1,b("LSContactBlockedByViewerStatus.bs").unblocked,void 0,b("bs_caml_obj").caml_equal(h,c.fbid),b("LSAuthorityLevel.bs").optimistic,void 0,void 0,b("LSContactWorkForeignEntityType.bs").unknown,b("LSContactGender.bs").unknown,b("LSContactViewerRelationship.bs").unknown,void 0,b("LS.bs").make(a));else return b("Promise").resolve()})})})).then(function(a){})}f.currentUserId=h;f.currentUserIdAsInt64=i;f.checkIfDualSendUser=a;f.call=c}),null);
__d("MAWBridgeReactionUpsertHandler.bs",["LSAuthorityLevel.bs","MAWThreadId.bs","MAWTimeUtils","Promise","bs_caml_format"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d!==void 0)return a.table("reactions").upsert({hd:d,tl:{hd:c.messageId,tl:{hd:b("bs_caml_format").caml_int64_of_string(c.actorId),tl:0}}},{actorId:b("bs_caml_format").caml_int64_of_string(c.actorId),authorityLevel:b("LSAuthorityLevel.bs").authoritative,messageId:c.messageId,reaction:c.reaction,threadKey:d,timestampMs:b("MAWTimeUtils").toTimestamp(c.ts)});else return b("Promise").resolve()})}function a(a,b){return g(a,b).then(function(a){})}f.call=a}),null);
__d("MAWBridgeReceivedChatStateHandler.bs",["MAWThreadId.bs","Promise","ServerTime","WAChatState","bs_caml_format","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve();var e=b("bs_caml_format").caml_int64_of_string(c.senderId),f=b("bs_caml_int64").of_float(3e3+b("ServerTime").getMillis());if(c.state===b("WAChatState").TYPING)return a.table("typing_indicator").upsert({hd:d,tl:{hd:e,tl:0}},{expirationTimestampMs:f,senderId:e,threadKey:d}).then(function(a){});else if(c.state===b("WAChatState").IDLE)return a.table("typing_indicator")["delete"]({hd:d,tl:{hd:e,tl:0}}).then(function(a){});else return window.Promise.resolve()})}f.call=a}),null);
__d("MAWBridgeReceivedReceiptHandler.bs",["MAWThreadId.bs","MAWTimeUtils","Promise","ReQL.bs","bs_caml_format"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve();var e=b("bs_caml_format").caml_int64_of_string(c.fbid),f=b("MAWTimeUtils").toTimestamp(c.lastReadWatermarkTs),g=b("MAWTimeUtils").toTimestamp(c.deliveredWatermarkTs),h=b("MAWTimeUtils").toTimestamp(c.lastReadActionTs);return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("participants")),{hd:d,tl:{hd:e,tl:0}})).then(function(c){if(c!==void 0)return a.table("participants").put({authorityLevel:c.authorityLevel,contactId:c.contactId,deliveredWatermarkTimestampMs:g,groupParticipantJoinState:c.groupParticipantJoinState,isAdmin:c.isAdmin,isModerator:c.isModerator,isSuperAdmin:c.isSuperAdmin,nickname:c.nickname,normalizedSearchTerms:c.normalizedSearchTerms,participantCapabilities:c.participantCapabilities,readActionTimestampMs:h,readWatermarkTimestampMs:f,subscribeSource:c.subscribeSource,threadKey:c.threadKey});else return b("Promise").resolve()}).then(function(a){})})}f.call=a}),null);
__d("MAWBridgeSyncContacts.bs",["CurrentUser","LS.bs","LSAuthorityLevel.bs","LSContactBlockedByViewerStatus.bs","LSContactGender.bs","LSContactIdType.bs","LSContactType.bs","LSContactViewerRelationship.bs","LSContactWorkForeignEntityType.bs","LSVerifyContactRowExists","Promise","bs_caml_format","bs_caml_obj"],(function(a,b,c,d,e,f){"use strict";var g=b("CurrentUser").getID();function a(a,c){return c.reduce(function(c,d){var e=b("bs_caml_format").caml_int64_of_string(d);return c.then(function(c){return b("LSVerifyContactRowExists")(e,b("LSContactIdType.bs").fbid,void 0,void 0,b("LSContactType.bs").user,void 0,void 0,void 0,void 0,!1,!1,b("LSContactBlockedByViewerStatus.bs").unblocked,void 0,b("bs_caml_obj").caml_equal(g,d),b("LSAuthorityLevel.bs").optimistic,void 0,void 0,b("LSContactWorkForeignEntityType.bs").unknown,b("LSContactGender.bs").unknown,b("LSContactViewerRelationship.bs").unknown,void 0,b("LS.bs").make(a))}).then(function(a){})},b("Promise").resolve())}f.currentUserFbid=g;f.call=a}),null);
__d("MAWBridgeBuildThreadSnippet",["MAWAdminMsg","MAWSubscribeToContactNames","MAWThreadId","ReQL","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c,e,f){var g,i,j,k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:g=e.snippetContactIDs,i=e.snippetParams,j=e.snippetType,k=e.threadId;if(!(i==null||j==null||g==null)){m.next=3;break}return m.abrupt("return",f);case 3:m.next=5;return b("regeneratorRuntime").awrap(d("MAWSubscribeToContactNames").getContactNamesFromContactIDs({contactIDs:g,db:a,onResolve:function(b){return h(a,k,d("MAWAdminMsg").buildLocalizedString(i,b,j))},subscriptionKey:k,txn:c}));case 5:l=m.sent;return m.abrupt("return",d("MAWAdminMsg").buildLocalizedString(i,l,j));case 7:case"end":return m.stop()}},null,this)}function h(a,c,e){return a.runInTransaction(function(f){var g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:j.next=2;return b("regeneratorRuntime").awrap(d("MAWThreadId").toThreadKeyMaybe(a,c));case 2:g=j.sent;if(!(g==null)){j.next=5;break}return j.abrupt("return");case 5:h=f.table("threads");j.next=8;return b("regeneratorRuntime").awrap(d("ReQL").firstAsync(d("ReQL").fromTableAscending(h).getKeyRange(g)));case 8:i=j.sent;if(!i){j.next=12;break}j.next=12;return b("regeneratorRuntime").awrap(h.put(babelHelpers["extends"]({},i,{snippet:e})));case 12:case"end":return j.stop()}},null,this)},"readwrite")}g.buildBridgeThreadSnippet=a;g.mutateThreadSnippet=h}),98);
__d("MAWBridgeBuildThreadSnippet.bs",["MAWBridgeBuildThreadSnippet"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("MAWBridgeBuildThreadSnippet").buildBridgeThreadSnippet(a,c,d,e)}function c(a,c,d){b("MAWBridgeBuildThreadSnippet").mutateThreadSnippet(a,c,d)}f.buildBridgeThreadSnippet=a;f.mutateThreadSnippet=c}),null);
__d("MWV2DualSendMessageContent.bs",["MAWVault.bs"],(function(a,b,c,d,e,f){"use strict";var g="8031ded1058446aa93ccf8dace0eaf876dd5e32771904d5eb0058a0afdc724ce120dcba542d84548ac3f4a2741c45c0d",h="9031ded1058446aa93ccf8dace0eaf876dd5e32771904d5eb0058a0afdc724ce120dcba542d84548ac3f4a2741c45c0d";function a(a){if(a===void 0)return!1;a=b("MAWVault.bs").unvault(a);if(a.endsWith(g))return!0;else return a.endsWith(h)}f.messageText=g;f.messageTextV2=h;f.isDualSend=a}),null);
__d("MAWBridgeThreadBumpedHandler.bs",["MAWBridgeBuildThreadSnippet.bs","MAWBumpThread.bs","MAWThreadId.bs","MAWTimeUtils","MWV2DualSendMessageContent.bs","Promise","ReQL.bs","bs_belt_Option","bs_caml_format","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("MAWThreadId.bs").toThreadKeyMaybe(c,d.threadId).then(function(e){if(e!==void 0)return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("threads")),{hd:e,tl:0})).then(function(f){if(f!==void 0)return b("MAWBridgeBuildThreadSnippet.bs").buildBridgeThreadSnippet(a,c,d).then(function(a){var f=b("MWV2DualSendMessageContent.bs").isDualSend(a),g=b("MAWTimeUtils").millisTimeToTimestamp(d.lastActivityTs);g=b("MAWBumpThread.bs").threadMutation(c,e,g,b("MAWTimeUtils").millisTimeToTimestamp(d.lastReadTs),a,b("bs_belt_Option").mapWithDefault(b("bs_caml_option").nullable_to_opt(d.snippetSenderContactId),void 0,function(a){return b("bs_caml_format").caml_int64_of_string(a)}));if(f)return b("Promise").resolve();else return g.then(function(a){})});else return b("Promise").resolve()});else return b("Promise").resolve()}).then(function(a){})}f.call=a}),null);
__d("MAWBridgeThreadBumpedServerHandler",["I64","LS.re","LSBumpE2EEMetadataThread","MAWGating","MAWThreadId","MAWTimeUtils","regeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] Bumping thread on server. threadKey: ",", bumpTimestampMs: ",", isLocalDeviceSend: ",""]);h=function(){return a};return a}var i=c("requireDeferred")("WALogger").__setRef("MAWBridgeThreadBumpedServerHandler");function a(a,e){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:if(!(!d("MAWGating").isOccamadillo()||e.isDualSend)){b.next=2;break}return b.abrupt("return");case 2:return b.abrupt("return",d("MAWThreadId").toThreadKeyMaybe(a,e.threadId).then(function(b){if(b==null)return;var f=e.lastActivityTs,g=d("MAWTimeUtils").millisTimeToTimestamp(f);i.loadImmediately(function(a){a.LOG(h(),d("I64").to_string(b),d("I64").to_string(g),e.isCurrentDeviceSendingMsg)});return c("LSBumpE2EEMetadataThread")(b,g,e.isCurrentDeviceSendingMsg,c("LS.re").make(a))}));case 3:case"end":return b.stop()}},null,this)}g.call=a}),98);
__d("MAWBridgeThreadHiddenHandler.bs",["LS.bs","LSOptimisticRemoveThread","LSThreadRemoveType.bs","MAWGating","MAWThreadId.bs","Promise"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c).then(function(c){if(c===void 0)return b("Promise").resolve();if(!b("MAWGating").isOccamadillo())return a.table("threads")["delete"]({hd:c,tl:0}).then(function(a){});var d=b("LS.bs").make(a);return b("LSOptimisticRemoveThread")(c,b("LSThreadRemoveType.bs").deleteThread,d)})}f.call=a}),null);
__d("MAWBridgeThreadTimestampsHandler.bs",["CurrentUser","MAWThreadId.bs","MAWTimeUtils","Promise","ReQL.bs","bs_caml_format","bs_caml_obj"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d!==void 0)return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("threads")),{hd:d,tl:0})).then(function(d){if(d===void 0)return b("Promise").resolve();d=b("bs_caml_obj").caml_obj_dup(d);return a.table("threads").put((d.lastReadWatermarkTimestampMs=b("MAWTimeUtils").millisTimeToTimestamp(c.lastReadWatermarkTs),d))});else return b("Promise").resolve()})}function a(a,c){return g(a,c).then(function(d){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d===void 0)return b("Promise").resolve();var e=b("bs_caml_format").caml_int64_of_string(b("CurrentUser").getID());return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("participants")),{hd:d,tl:{hd:e,tl:0}})).then(function(d){if(d!==void 0)return a.table("participants").put({authorityLevel:d.authorityLevel,contactId:d.contactId,deliveredWatermarkTimestampMs:d.deliveredWatermarkTimestampMs,groupParticipantJoinState:d.groupParticipantJoinState,isAdmin:d.isAdmin,isModerator:d.isModerator,isSuperAdmin:d.isSuperAdmin,nickname:d.nickname,normalizedSearchTerms:d.normalizedSearchTerms,participantCapabilities:d.participantCapabilities,readActionTimestampMs:b("MAWTimeUtils").millisTimeToTimestamp(c.lastActivityTimestampMs),readWatermarkTimestampMs:b("MAWTimeUtils").millisTimeToTimestamp(c.lastReadWatermarkTs),subscribeSource:d.subscribeSource,threadKey:d.threadKey});else return b("Promise").resolve()})})}).then(function(a){})}f.call=a}),null);
__d("MAWBridgeThreadUpdatedHandler.bs",["LSBitOffset.bs","LSThreadCapabilityBitOffset.bs","MAWBridgeBuildThreadSnippet.bs","MAWFolder.bs","MAWFolderTypes","MAWGating","MAWThreadId.bs","MWV2DualSendMessageContent.bs","Promise","ReQL.bs","bs_caml_format","bs_caml_int64","bs_caml_obj","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function g(a,c){var d=b("MAWGating").isOccamadillo();if(c!==void 0&&!(d||c!==b("MAWFolderTypes").ARCHIVED))return b("LSBitOffset.bs").clear(b("bs_caml_int64").sub(b("LSThreadCapabilityBitOffset.bs").archiveThread,[0,64]),b("LSBitOffset.bs").set(b("bs_caml_int64").sub(b("LSThreadCapabilityBitOffset.bs").unarchiveThread,[0,64]),a));else return a}function h(a,c){var d=b("MAWGating").isOccamadillo();if(c!==void 0&&!(d||c!==b("MAWFolderTypes").INBOX))return b("LSBitOffset.bs").clear(b("bs_caml_int64").sub(b("LSThreadCapabilityBitOffset.bs").unarchiveThread,[0,64]),b("LSBitOffset.bs").set(b("bs_caml_int64").sub(b("LSThreadCapabilityBitOffset.bs").archiveThread,[0,64]),a));else return a}function i(a,c){if(c!==void 0&&c==="viewer_not_subscribed")return b("LSBitOffset.bs").clear(b("bs_caml_int64").sub(b("LSThreadCapabilityBitOffset.bs").leaveThread,[0,64]),a);else return a}function j(a,c,d){return b("MAWThreadId.bs").toThreadKeyMaybe(c,d.threadId).then(function(e){if(e!==void 0)return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("threads")),{hd:e,tl:0})).then(function(e){if(e!==void 0)return b("MAWBridgeBuildThreadSnippet.bs").buildBridgeThreadSnippet(a,c,d,e.snippet).then(function(a){var f=b("MWV2DualSendMessageContent.bs").isDualSend(a),j=d.snippetSenderContactId;j=j==null?e.snippetSenderContactId:b("bs_caml_format").caml_int64_of_string(j);var k=d.muteExpireTimeMs,l=b("MAWGating").isOccamadillo();l=!(k==null)&&!l?b("bs_caml_int64").of_float(k):e.muteExpireTimeMs;k=d.folder;var m=b("MAWGating").isOccamadillo();k=!(k==null)&&!m?b("MAWFolder.bs").messagingFolderTag(d.folder):e.folderName;m=d.folder;var n=b("MAWGating").isOccamadillo();m=!(m==null)&&!n?b("MAWFolder.bs").systemFolder(d.folder):e.parentThreadKey;n=d.cannotReplyReason;n=n==null?k==="inbox"?void 0:e.cannotReplyReason:n;var o=i(g(h(e.capabilities2,b("bs_caml_option").nullable_to_opt(d.folder)),b("bs_caml_option").nullable_to_opt(d.folder)),n),p=b("bs_caml_obj").caml_obj_dup(e);return c.table("threads").put((p.capabilities2=o,p.parentThreadKey=m,p.cannotReplyReason=n,p.snippetSenderContactId=j,p.snippet=f?e.snippet:a,p.muteExpireTimeMs=l,p.folderName=b("MAWGating").isOccamadillo()?e.folderName:k,p))});else return b("Promise").resolve()});else return b("Promise").resolve()})}function a(a,b,c){return j(a,b,c).then(function(a){})}f.call=a}),null);
__d("MAWBridgeThreadsLoadedHandler.bs",["MAWFolder.bs","MAWThreadId.bs","MAWTimeUtils","MAWTimeUtils.bs","Promise","ReQL.bs","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d;switch(c.TAG){case 0:d=b("MAWFolder.bs").clientSystemFolder(c._0.folderId);break;case 1:d=b("MAWFolder.bs").clientSystemFolder(c._0.folderId);break;case 2:d=b("MAWFolder.bs").clientSystemFolder(c._0.folderId);break}return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("threads_ranges_v2__generated")),{hd:d,tl:0})).then(function(e){if(e!==void 0)return a.table("threads_ranges_v2__generated")["delete"]({hd:e.parentThreadKey,tl:{hd:e.minThreadKey,tl:{hd:e.minLastActivityTimestampMs,tl:0}}}).then(function(f){switch(c.TAG){case 0:case 1:break;case 2:var d=c._0;return b("MAWThreadId.bs").toThreadKeyMaybe(a,d.minThreadId).then(function(c){if(c!==void 0)return a.table("threads_ranges_v2__generated").put({hasMoreAfter:e.hasMoreAfter,hasMoreBefore:d.hasMore,isLoadingAfter:e.isLoadingAfter,isLoadingBefore:!1,maxLastActivityTimestampMs:e.maxLastActivityTimestampMs,maxThreadKey:e.maxThreadKey,minLastActivityTimestampMs:b("MAWTimeUtils").millisTimeToTimestamp(d.minLastActivityTs),minThreadKey:c,parentThreadKey:e.parentThreadKey});else return b("Promise").resolve()})}return a.table("threads_ranges_v2__generated").put({hasMoreAfter:e.hasMoreAfter,hasMoreBefore:e.hasMoreBefore,isLoadingAfter:e.isLoadingAfter,isLoadingBefore:!1,maxLastActivityTimestampMs:e.maxLastActivityTimestampMs,maxThreadKey:e.maxThreadKey,minLastActivityTimestampMs:e.minLastActivityTimestampMs,minThreadKey:e.minThreadKey,parentThreadKey:e.parentThreadKey})});switch(c.TAG){case 0:return a.table("threads_ranges_v2__generated").put({hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxLastActivityTimestampMs:b("MAWTimeUtils.bs").maxTimestampMs,maxThreadKey:b("bs_caml_int64").zero,minLastActivityTimestampMs:b("MAWTimeUtils.bs").maxTimestampMs,minThreadKey:b("bs_caml_int64").zero,parentThreadKey:d});case 1:var f=c._0;return b("Promise").all([b("MAWThreadId.bs").toThreadKeyMaybe(a,f.minThreadId),b("MAWThreadId.bs").toThreadKeyMaybe(a,f.maxThreadId)]).then(function(c){var e=c[1];c=c[0];if(c!==void 0&&e!==void 0)return a.table("threads_ranges_v2__generated").add({hasMoreAfter:!1,hasMoreBefore:f.hasMore,isLoadingAfter:!1,isLoadingBefore:!1,maxLastActivityTimestampMs:b("MAWTimeUtils").millisTimeToTimestamp(f.maxLastActivityTs),maxThreadKey:e,minLastActivityTimestampMs:b("MAWTimeUtils").millisTimeToTimestamp(f.minLastActivityTs),minThreadKey:c,parentThreadKey:d});else return b("Promise").resolve()});case 2:return b("Promise").resolve()}})}f.call=a}),null);
__d("MAWBridgeUIEventsWrapper",["MAWBridgeTypesWrapper"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a.TAG){case 0:return{tag:"NewMsg",value:d("MAWBridgeTypesWrapper").bridgeMsgToJS(a._0)};case 1:return{tag:"MsgsStartCountdown",value:a._0};case 2:return{tag:"MsgClearCountdown",value:a._0};case 3:return{tag:"DropAllSecureThreads",value:a._0};case 4:return{tag:"VerifyThreadExists",value:a._0};case 5:return{tag:"MsgUpdated",value:d("MAWBridgeTypesWrapper").bridgeMsgToJS(a._0)};case 6:return{tag:"NewMedia",value:a._0};case 7:return{tag:"NewMediaRange",value:a._0};case 8:return{tag:"MediaExpired",value:a._0};case 9:return{tag:"XMAShareExpired",value:a._0};case 10:return{tag:"NewXMA",value:a._0};case 11:return{tag:"XMAShareTombstoned",value:a._0};case 12:return{tag:"ParticipantUpdated",value:a._0};case 13:return{tag:"ParticipantRemoved",value:a._0};case 14:return{tag:"UpdateE2EEMetadataParticipants",value:a._0};case 15:return{tag:"ReceivedReceipt",value:a._0};case 16:return{tag:"ThreadUpdated",value:a._0};case 17:return{tag:"GroupInfoUpdated",value:a._0};case 18:return{tag:"ThreadBumped",value:a._0};case 19:return{tag:"ThreadsLoaded",value:a._0};case 20:return{tag:"ThreadTimestampsUpdated",value:a._0};case 21:return{tag:"MsgsLoaded",value:a._0};case 22:return{tag:"InitSyncComplete",value:a._0};case 23:return{tag:"StartTrace",value:d("MAWBridgeTypesWrapper").bridgeStartTraceDataToJS(a._0)};case 24:return{tag:"UpdateTrace",value:a._0};case 25:return{tag:"ThreadHidden",value:a._0};case 26:return{tag:"SyncContacts",value:a._0};case 27:return{tag:"ReceivedChatState",value:a._0};case 28:return{tag:"ClockSkewUpdated",value:a._0};case 29:return{tag:"ABPropsUpdated",value:a._0};case 30:return{tag:"UpsertReaction",value:a._0};case 31:return{tag:"DeleteReaction",value:a._0};case 32:return{tag:"UploadMessage",value:a._0};case 33:return{tag:"UploadThread",value:a._0};case 34:return{tag:"CallFinishAddDevice",value:a._0};case 35:return{tag:"UploadAttachment",value:a._0};case 36:return{tag:"ResignAttachmentCDNUrl",value:a._0};case 37:return{tag:"DeleteMessages",value:a._0};case 38:return{tag:"RestoreMessageBatch",value:a._0};case 39:return{tag:"OneToOneMessageRequestLoaded",value:a._0};case 40:return{tag:"GroupInviteUpdate",value:a._0};case 41:return{tag:"InitOfflineQueueSyncStart",value:a._0};case 42:return{tag:"InitOfflineQueueSyncComplete",value:a._0};case 43:return{tag:"InitOfflineQueueSyncProgress",value:a._0};case 44:return{tag:"UpdateDyiStatus",value:a._0};case 45:return{tag:"DeleteGroupInvite",value:a._0};case 46:return{tag:"TraceRecordCheckpoint",value:a._0};case 47:return{tag:"DeleteMessageRangesV2",value:a._0};case 48:return{tag:"UpdateMinMessage",value:a._0};case 49:return{tag:"IssuePointQuery",value:a._0};case 50:return{tag:"ThreadBumpedServer",value:a._0};case 51:return{tag:"ParticipantsUpdated",value:a._0};case 52:return{tag:"StartTraceWithTraceId",value:a._0};case 53:return{tag:"UpdateClientRestoreStatus",value:a._0};case 54:return{tag:"NewMsgs",value:{msgs:a._0.msgs.map(d("MAWBridgeTypesWrapper").bridgeMsgToJS)}}}}function b(a){switch(a.tag){case"NewMsg":return{_0:d("MAWBridgeTypesWrapper").bridgeMsgToRE(a.value),TAG:0};case"MsgsStartCountdown":return{_0:a.value,TAG:1};case"MsgClearCountdown":return{_0:a.value,TAG:2};case"DropAllSecureThreads":return{_0:a.value,TAG:3};case"VerifyThreadExists":return{_0:a.value,TAG:4};case"MsgUpdated":return{_0:d("MAWBridgeTypesWrapper").bridgeMsgToRE(a.value),TAG:5};case"NewMedia":return{_0:a.value,TAG:6};case"NewMediaRange":return{_0:a.value,TAG:7};case"MediaExpired":return{_0:a.value,TAG:8};case"XMAShareExpired":return{_0:a.value,TAG:9};case"NewXMA":return{_0:a.value,TAG:10};case"XMAShareTombstoned":return{_0:a.value,TAG:11};case"ParticipantUpdated":return{_0:a.value,TAG:12};case"ParticipantRemoved":return{_0:a.value,TAG:13};case"UpdateE2EEMetadataParticipants":return{_0:a.value,TAG:14};case"ReceivedReceipt":return{_0:a.value,TAG:15};case"ThreadUpdated":return{_0:a.value,TAG:16};case"GroupInfoUpdated":return{_0:a.value,TAG:17};case"ThreadBumped":return{_0:a.value,TAG:18};case"ThreadsLoaded":return{_0:a.value,TAG:19};case"ThreadTimestampsUpdated":return{_0:a.value,TAG:20};case"MsgsLoaded":return{_0:a.value,TAG:21};case"InitSyncComplete":return{_0:a.value,TAG:22};case"StartTrace":return{_0:d("MAWBridgeTypesWrapper").bridgeStartTraceDataToRE(a.value),TAG:23};case"UpdateTrace":return{_0:a.value,TAG:24};case"ThreadHidden":return{_0:a.value,TAG:25};case"SyncContacts":return{_0:a.value,TAG:26};case"ReceivedChatState":return{_0:a.value,TAG:27};case"ClockSkewUpdated":return{_0:a.value,TAG:28};case"ABPropsUpdated":return{_0:a.value,TAG:29};case"UpsertReaction":return{_0:a.value,TAG:30};case"DeleteReaction":return{_0:a.value,TAG:31};case"UploadMessage":return{_0:a.value,TAG:32};case"UploadThread":return{_0:a.value,TAG:33};case"CallFinishAddDevice":return{_0:a.value,TAG:34};case"UploadAttachment":return{_0:a.value,TAG:35};case"ResignAttachmentCDNUrl":return{_0:a.value,TAG:36};case"DeleteMessages":return{_0:a.value,TAG:37};case"RestoreMessageBatch":return{_0:a.value,TAG:38};case"OneToOneMessageRequestLoaded":return{_0:a.value,TAG:39};case"GroupInviteUpdate":return{_0:a.value,TAG:40};case"InitOfflineQueueSyncStart":return{_0:a.value,TAG:41};case"InitOfflineQueueSyncComplete":return{_0:a.value,TAG:42};case"InitOfflineQueueSyncProgress":return{_0:a.value,TAG:43};case"UpdateDyiStatus":return{_0:a.value,TAG:44};case"DeleteGroupInvite":return{_0:a.value,TAG:45};case"TraceRecordCheckpoint":return{_0:a.value,TAG:46};case"DeleteMessageRangesV2":return{_0:a.value,TAG:47};case"UpdateMinMessage":return{_0:a.value,TAG:48};case"IssuePointQuery":return{_0:a.value,TAG:49};case"ThreadBumpedServer":return{_0:a.value,TAG:50};case"ParticipantsUpdated":return{_0:a.value,TAG:51};case"StartTraceWithTraceId":return{_0:a.value,TAG:52};case"UpdateClientRestoreStatus":return{_0:a.value,TAG:53};case"NewMsgs":return{_0:{msgs:a.value.msgs.map(d("MAWBridgeTypesWrapper").bridgeMsgToRE)},TAG:54}}}g.UIEventToJS=a;g.UIEventToRE=b}),98);
__d("MAWBridgeUIEventQPLLogger",["MAWBridgeUIEventsWrapper","QPLUserFlow","Random","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(){return Date.now()+Math.floor(d("Random").random()*1e4+1e4)}function b(a,b){b=d("MAWBridgeUIEventsWrapper").UIEventToJS(b).tag;if(b==="ClockSkewUpdated")return;c("QPLUserFlow").start(c("qpl")._(1056846089,"885"),{annotations:{bool:{dev:0},string:{event:b}},instanceKey:a})}function e(a){c("QPLUserFlow").endSuccess(c("qpl")._(1056846089,"885"),{instanceKey:a})}g.getInstanceKey=a;g.start=b;g.endSuccess=e}),98);
__d("MAWUpdateClientRestoreStatusOperationType.bs",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;f.upsertClientRestoreStatus=a;f.removeClientRestoreStatus=b}),null);
__d("MAWBridgeUpdateClientRestoreStatus.bs",["MAWUpdateClientRestoreStatusOperationType.bs","Promise","ReQL.bs","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return b("ReQL.bs").first(b("ReQL.bs").filter(b("ReQL.bs").fromTableAscending(a.table("encrypted_backups_client_restore_status")),function(a){return a.threadId===c})).then(function(c){if(c!==void 0)return a.table("encrypted_backups_client_restore_status")["delete"]({hd:c.threadId,tl:0}).then(function(a){});else return b("Promise").resolve()})}function a(a){return b("ReQL.bs").toArray(b("ReQL.bs").fromTableAscending(a.table("encrypted_backups_client_restore_status"))).then(function(c){return c.reduce(function(b,c){return b.then(function(b){return g(a,c.threadId)})},b("Promise").resolve())})}function c(a,c){var d=c.action;if(d===b("MAWUpdateClientRestoreStatusOperationType.bs").upsertClientRestoreStatus){d=c.threadId;return a.table("encrypted_backups_client_restore_status").put({lastUpdated:b("bs_caml_int64").of_float(Date.now()),threadId:d})}else return g(a,c.threadId)}f.truncateClientRestoreStatusTable=a;f.call=c}),null);
__d("MAWBridgeUpdateE2EEMetadataParticipantsHandler.bs",["LS.bs","LSUpdateE2EEMetadataParticipants","MAWThreadId.bs","Promise"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(c){if(c!==void 0)return b("LSUpdateE2EEMetadataParticipants")(c,b("LS.bs").make(a));else return b("Promise").resolve()})}f.call=a}),null);
__d("MAWBridgeUpdateMinMessageHandler.bs",["MAWThreadId.bs","Promise","ReQL.bs","ReQLTable.bs","bs_caml_int64","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=b("bs_caml_int64").of_float(c.minTimestampMs),e=c.minMessageId;return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(f){if(f!==void 0)return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("messages_ranges_v2__generated")),{hd:f,tl:0})).then(function(g){if(g===void 0)return;var h=c.hasMoreBefore,i=h!==void 0?h:g.hasMoreBefore;return b("ReQLTable.bs").update(a.table("messages_ranges_v2__generated"),{hd:f,tl:{hd:g.minTimestampMs,tl:{hd:g.minMessageId,tl:0}}},function(a){if(a!==void 0)return{hasMoreAfter:a.hasMoreAfter,hasMoreBefore:i,isLoadingAfter:a.isLoadingAfter,isLoadingBefore:a.isLoadingBefore,maxMessageId:a.maxMessageId,maxTimestampMs:a.maxTimestampMs,minMessageId:e,minTimestampMs:d,threadKey:a.threadKey};else return b("unrecoverableViolation")("Thread is missing in updating the min message in message range","messenger_e2ee_web")})});else return b("Promise").resolve()})}f.call=a}),null);
__d("MAWBridgeXMAShareExpiredHandler.bs",["MAWThreadId.bs","Promise","bs_belt_Option"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=String(c.xmaId);return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(e){if(e!==void 0)return a.table("attachments").get({hd:e,tl:{hd:c.msgId,tl:{hd:d,tl:0}}}).then(function(f){if(f===void 0)return b("Promise").resolve();f=[f.defaultCtaId,f.attachmentCta1Id,f.attachmentCta2Id,f.attachmentCta3Id].filter(b("bs_belt_Option").isSome).map(function(a){return a});f=f.map(function(b){return a.table("attachment_ctas")["delete"]({hd:b,tl:0})});return b("Promise").all(f).then(function(b){return a.table("attachments")["delete"]({hd:e,tl:{hd:c.msgId,tl:{hd:d,tl:0}}})})});else return b("Promise").resolve()})}f.call=a}),null);
__d("MAWBridgeXMAShareTombstonedHandler.bs",["MAWThreadId.bs","Promise","ReQL.bs","bs_belt_Option","bs_caml_obj","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=String(c.xmaId);return b("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(e){if(e!==void 0)return a.table("attachments").get({hd:e,tl:{hd:c.msgId,tl:{hd:d,tl:0}}}).then(function(f){if(f===void 0)return b("Promise").resolve();f=[f.defaultCtaId,f.attachmentCta1Id,f.attachmentCta2Id,f.attachmentCta3Id].filter(b("bs_belt_Option").isSome).map(function(a){return a});f=f.map(function(b){return a.table("attachment_ctas")["delete"]({hd:b,tl:0})});return b("Promise").all(f).then(function(f){return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("attachments")),{hd:e,tl:{hd:c.msgId,tl:{hd:d,tl:0}}})).then(function(c){if(c!==void 0){c=b("bs_caml_obj").caml_obj_dup(c);return a.table("attachments").put((c.previewHeightLarge=void 0,c.previewWidthLarge=void 0,c.maxSubtitleNumOfLines=void 0,c.maxTitleNumOfLines=void 0,c.subtitleText=void 0,c.titleText=void 0,c.previewHeight=void 0,c.previewWidth=void 0,c.cta3Type=void 0,c.cta3Title=void 0,c.attachmentCta3Id=void 0,c.cta2Type=void 0,c.cta2Title=void 0,c.attachmentCta2Id=void 0,c.cta1Type=void 0,c.cta1Title=void 0,c.attachmentCta1Id=void 0,c.defaultCtaTitle=void 0,c.defaultCtaId=void 0,c))}b("recoverableViolation")("Trying to tombstone a secure xma attachment but no existing attachment","messenger_e2ee_web");return b("Promise").resolve()})})});else return b("Promise").resolve()})}f.call=a}),null);
__d("MAWBridgeUIEventHandler.bs",["FBLogger","JSResource","LSTransaction.bs","MAWBridgeAbPropsUpdatedHandler.bs","MAWBridgeDeleteGroupInviteHandler","MAWBridgeDeleteMessageRangesV2Handler.bs","MAWBridgeDeleteMessagesHandler","MAWBridgeDeleteReactionHandler.bs","MAWBridgeDropAllSecureThreadsHandler.bs","MAWBridgeGroupInfoUpdatedHandler.bs","MAWBridgeGroupInviteUpdateHandler.bs","MAWBridgeInitOfflineQueueSyncCompleteHandler.bs","MAWBridgeInitOfflineQueueSyncProgressHandler.bs","MAWBridgeInitOfflineQueueSyncStartHandler.bs","MAWBridgeInitSyncCompleteHandler.bs","MAWBridgeMediaExpiredHandler.bs","MAWBridgeMsgClearCountdownHandler.bs","MAWBridgeMsgUpdatedHandler.bs","MAWBridgeMsgsLoadedHandler.bs","MAWBridgeMsgsStartCountdownHandler.bs","MAWBridgeNewMediaHandler.bs","MAWBridgeNewMediaRangeHandler.bs","MAWBridgeNewMsgHandler.bs","MAWBridgeNewXMAHandler.bs","MAWBridgeOneToOneMessageRequestLoadedHandler.bs","MAWBridgeParticipantRemovedHandler.bs","MAWBridgeParticipantUpdatedHandler.bs","MAWBridgeParticipantsUpdatedHandler.bs","MAWBridgeReactionUpsertHandler.bs","MAWBridgeReceivedChatStateHandler.bs","MAWBridgeReceivedReceiptHandler.bs","MAWBridgeSyncContacts.bs","MAWBridgeThreadBumpedHandler.bs","MAWBridgeThreadBumpedServerHandler","MAWBridgeThreadHiddenHandler.bs","MAWBridgeThreadTimestampsHandler.bs","MAWBridgeThreadUpdatedHandler.bs","MAWBridgeThreadsLoadedHandler.bs","MAWBridgeUIEventQPLLogger","MAWBridgeUpdateClientRestoreStatus.bs","MAWBridgeUpdateE2EEMetadataParticipantsHandler.bs","MAWBridgeUpdateMinMessageHandler.bs","MAWBridgeXMAShareExpiredHandler.bs","MAWBridgeXMAShareTombstonedHandler.bs","MAWDualSendSimplePermissionsManager.bs","MAWGating","Promise","Promise.bs","WATimeUtils","bs_caml_option","bs_curry","bs_js_exn","cr:2191","cr:9875","promiseDone","recoverableViolation","requireDeferred"],(function(a,b,c,d,e,f){"use strict";var g=(c=b("requireDeferred"))("MAWBridgeIssuePointQueryHandler.bs").__setRef("MAWBridgeUIEventHandler.bs"),h=c("MAWBridgeStartTraceHandler.bs").__setRef("MAWBridgeUIEventHandler.bs"),i=c("MAWBridgeStartTraceWithTraceIdHandler.bs").__setRef("MAWBridgeUIEventHandler.bs"),j=c("MAWBridgeTraceRecordCheckpointHandler.bs").__setRef("MAWBridgeUIEventHandler.bs"),k=c("MAWBridgeUpdateDyiStatus.bs").__setRef("MAWBridgeUIEventHandler.bs"),l=c("MAWBridgeUpdateTraceHandler.bs").__setRef("MAWBridgeUIEventHandler.bs"),m=c("MAWBridgeUploadMessageHandler.bs").__setRef("MAWBridgeUIEventHandler.bs"),n=c("MAWBridgeUploadThreadHandler.bs").__setRef("MAWBridgeUIEventHandler.bs");function a(a,c){a=a.then(function(a){return b("LSTransaction.bs").run(a,function(d){var e=b("MAWGating").isArmadillo(),f=b("MAWDualSendSimplePermissionsManager.bs").isDualSendUser(),o=e||f?function(c){switch(c.TAG){case 0:var e=c._0;if(e.isDualSend)return b("Promise").resolve();else return b("MAWBridgeNewMsgHandler.bs").call(a,d,e);case 1:return b("MAWBridgeMsgsStartCountdownHandler.bs").call(d,c._0);case 2:return b("MAWBridgeMsgClearCountdownHandler.bs").call(c._0);case 3:return b("MAWBridgeDropAllSecureThreadsHandler.bs").call(d);case 4:e=c._0;if(b("cr:2191")==null)return b("bs_curry")._2(b("cr:9875").call,d,e);else return b("bs_curry")._2(b("cr:2191").call,d,e);case 5:e=c._0;if(e.isDualSend)return b("Promise").resolve();else return b("MAWBridgeMsgUpdatedHandler.bs").call(a,d,e);case 6:return b("MAWBridgeNewMediaHandler.bs").call(d,c._0);case 7:return b("MAWBridgeNewMediaRangeHandler.bs").call(d,c._0);case 8:return b("MAWBridgeMediaExpiredHandler.bs").call(d,c._0);case 9:return b("MAWBridgeXMAShareExpiredHandler.bs").call(d,c._0);case 10:return b("MAWBridgeNewXMAHandler.bs").call(d,c._0);case 11:return b("MAWBridgeXMAShareTombstonedHandler.bs").call(d,c._0);case 12:return b("MAWBridgeParticipantUpdatedHandler.bs").call(d,c._0);case 13:return b("MAWBridgeParticipantRemovedHandler.bs").call(d,c._0);case 14:return b("MAWBridgeUpdateE2EEMetadataParticipantsHandler.bs").call(d,c._0);case 15:return b("MAWBridgeReceivedReceiptHandler.bs").call(d,c._0);case 16:return b("MAWBridgeThreadUpdatedHandler.bs").call(a,d,c._0);case 17:return b("MAWBridgeGroupInfoUpdatedHandler.bs").call(d,c._0);case 18:return b("MAWBridgeThreadBumpedHandler.bs").call(a,d,c._0);case 19:return b("MAWBridgeThreadsLoadedHandler.bs").call(d,c._0);case 20:return b("MAWBridgeThreadTimestampsHandler.bs").call(d,c._0);case 21:return b("MAWBridgeMsgsLoadedHandler.bs").call(d,c._0);case 22:return b("MAWBridgeInitSyncCompleteHandler.bs").call(d);case 23:var f=c._0;return h.load().then(function(a){return b("bs_curry")._2(a.call,d,f)});case 24:var o=c._0;return l.load().then(function(a){return b("bs_curry")._2(a.call,d,o)});case 25:return b("MAWBridgeThreadHiddenHandler.bs").call(d,c._0);case 26:return b("MAWBridgeSyncContacts.bs").call(d,c._0);case 27:return b("MAWBridgeReceivedChatStateHandler.bs").call(d,c._0);case 28:return window.Promise.resolve((b("WATimeUtils").setClockSkew(c._0),void 0));case 29:return b("MAWBridgeAbPropsUpdatedHandler.bs").call(c._0);case 30:return b("MAWBridgeReactionUpsertHandler.bs").call(d,c._0);case 31:return b("MAWBridgeDeleteReactionHandler.bs").call(d,c._0);case 32:var p=c._0;return m.load().then(function(a){return b("bs_curry")._2(a.call,d,p)});case 33:var q=c._0;return n.load().then(function(a){return b("bs_curry")._2(a.call,d,q)});case 34:var r=c._0;return b("JSResource")("MAWBridgeCallFinishAddDeviceHandler.bs").__setRef("MAWBridgeUIEventHandler.bs").load().then(function(a){return b("bs_curry")._2(a.call,d,r)});case 35:var s=c._0;return b("JSResource")("MAWBridgeUploadAttachmentHandler.bs").__setRef("MAWBridgeUIEventHandler.bs").load().then(function(a){return b("bs_curry")._2(a.call,d,s)});case 36:var t=c._0;return b("JSResource")("MAWBridgeResignAttachmentCDNUrlHandler.bs").__setRef("MAWBridgeUIEventHandler.bs").load().then(function(a){return b("bs_curry")._2(a.call,d,t)});case 37:return b("MAWBridgeDeleteMessagesHandler")(d,c._0);case 38:var u=c._0;return b("JSResource")("MAWBridgeRestoreMessageBatchHandler.bs").__setRef("MAWBridgeUIEventHandler.bs").load().then(function(a){return b("bs_curry")._2(a.call,d,u)});case 39:return b("MAWBridgeOneToOneMessageRequestLoadedHandler.bs").call(d,c._0);case 40:return b("MAWBridgeGroupInviteUpdateHandler.bs").call(d,c._0);case 41:return b("MAWBridgeInitOfflineQueueSyncStartHandler.bs").call(d,c._0);case 42:return b("MAWBridgeInitOfflineQueueSyncCompleteHandler.bs").call(d);case 43:return b("MAWBridgeInitOfflineQueueSyncProgressHandler.bs").call(d,c._0);case 44:var v=c._0;return k.load().then(function(a){return b("bs_curry")._2(a.call,d,v)});case 45:return b("MAWBridgeDeleteGroupInviteHandler")(d,c._0);case 46:var w=c._0;return j.load().then(function(a){return b("bs_curry")._2(a.call,d,w)});case 47:return b("MAWBridgeDeleteMessageRangesV2Handler.bs").call(d,c._0);case 48:return b("MAWBridgeUpdateMinMessageHandler.bs").call(d,c._0);case 49:var x=c._0;return g.load().then(function(a){return b("bs_curry")._2(a.call,d,x)});case 50:return b("MAWBridgeThreadBumpedServerHandler").call(d,c._0);case 51:return b("MAWBridgeParticipantsUpdatedHandler.bs").call(d,c._0);case 52:var y=c._0;return i.load().then(function(a){return b("bs_curry")._2(a.call,d,y)});case 53:return b("MAWBridgeUpdateClientRestoreStatus.bs").call(d,c._0);case 54:return b("MAWBridgeNewMsgHandler.bs").bulkCall(a,d,c._0.msgs)}}:(b("recoverableViolation")("User is neither part of armadillo QE and dual send QE but somehow loaded this handler","messenger_web_product"),function(a){return b("Promise").resolve()});return c.reduce(function(a,c){var d=b("MAWBridgeUIEventQPLLogger").getInstanceKey();return a.then(function(a){b("MAWBridgeUIEventQPLLogger").start(d,c);return b("bs_curry")._1(o,c)}).then(function(a){b("MAWBridgeUIEventQPLLogger").endSuccess(d);return a})},b("Promise").resolve())},"readWrite")});b("promiseDone")(a,void 0,function(a){a=a.RE_EXN_ID===b("Promise.bs").JsError||a.RE_EXN_ID===b("bs_js_exn").$$Error?b("bs_caml_option").some(a._1):a;b("FBLogger")("messenger_e2ee_web").catching(a).warn("Error handling UI Event")})}f.$MAWBridgeIssuePointQueryHandler$Deferred=g;f.$MAWBridgeOccamadilloVerifyThreadExistsHandler$OR$MAWBridgeVerifyThreadExistsHandler$requireCond=b("cr:9875");f.$MAWBridgeOccamadilloVerifyThreadExistsHandler$requireCondXplat=b("cr:2191");f.$MAWBridgeStartTraceHandler$Deferred=h;f.$MAWBridgeStartTraceWithTraceIdHandler$Deferred=i;f.$MAWBridgeTraceRecordCheckpointHandler$Deferred=j;f.$MAWBridgeUpdateDyiStatus$Deferred=k;f.$MAWBridgeUpdateTraceHandler$Deferred=l;f.$MAWBridgeUploadMessageHandler$Deferred=m;f.$MAWBridgeUploadThreadHandler$Deferred=n;f.handleEvents=a}),null);
__d("MAWBridgeUIEventHandler.re",["MAWBridgeUIEventHandler.bs"],(function(a,b,c,d,e,f){a=b("MAWBridgeUIEventHandler.bs").handleEvents;f.handleEvents=a}),null);
__d("MAWBridgeVerifyThreadExistsHandler.bs",["LSAuthorityLevel.bs","LSMailboxType.bs","LSNullstateDescriptionType.bs","LSRtcCallState.bs","MAWFolder.bs","MAWThemeConstant.bs","MAWThreadDefaults.bs","MAWThreadId.bs","MAWTimeUtils","MAWTimeUtils.bs","MessagingThreadType.bs","MessengerJoinableModeType.bs","Promise","ReQL.bs","ReQLTable.bs","bs_caml_format","bs_caml_int64","bs_caml_obj","bs_caml_option","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function g(a,c,d){return b("MAWThreadId.bs").toThreadKey_DEPRECATED(a,c.chatId).then(function(e){return b("ReQLTable.bs").update(a.table("threads"),{hd:d,tl:0},function(a){if(a===void 0)return b("unrecoverableViolation")("Optimistic thread is missing","messenger_e2ee_web");a=b("bs_caml_obj").caml_obj_dup(a);a.capabilities2=b("MAWThreadDefaults.bs").defaultThreadCapabilities_2;a.authorityLevel=b("LSAuthorityLevel.bs").authoritative;a.capabilities=c.isGroup?b("MAWThreadDefaults.bs").defaultGroupThreadCapabilities:b("MAWThreadDefaults.bs").defaultThreadCapabilities;a.cannotReplyReason=b("bs_caml_option").nullable_to_opt(c.cannotReplyReason);a.lastReadWatermarkTimestampMs=b("MAWTimeUtils").millisTimeToTimestamp(c.lastReadTs);a.lastActivityTimestampMs=b("MAWTimeUtils").millisTimeToTimestamp(c.lastActivityTs);a.threadType=c.isGroup?b("MessagingThreadType.bs").secureMessageOverWaGroup:b("MessagingThreadType.bs").secureMessageOverWaOneToOne;a.threadKey=e;return a}).then(function(a){})})}function h(a,c){return b("MAWThreadId.bs").toThreadKey_DEPRECATED(a,c.chatId).then(function(d){return a.table("threads").add({additionalThreadContext:void 0,authorityLevel:b("LSAuthorityLevel.bs").authoritative,avatarStickerId:void 0,avatarStickerInstructionKeyId:void 0,avatarStickerOriginalImageMimeType:void 0,avatarStickerOriginalImageUrl:void 0,avatarStickerThumbnailImageMimeType:void 0,avatarStickerThumbnailImageUrl:void 0,cannotReplyReason:b("bs_caml_option").nullable_to_opt(c.cannotReplyReason),cannotUnsendReason:void 0,capabilities:c.isGroup?b("MAWThreadDefaults.bs").defaultGroupThreadCapabilities:b("MAWThreadDefaults.bs").defaultThreadCapabilities,capabilities2:b("MAWThreadDefaults.bs").defaultThreadCapabilities_2,capabilities3:b("MAWThreadDefaults.bs").defaultThreadCapabilities_3,clientThreadKey:void 0,customEmoji:void 0,customEmojiImageUrl:void 0,disableComposerInput:!1,disappearingModeInitiator:void 0,disappearingThreadKey:void 0,draftMessage:void 0,eventEndTimestampMs:void 0,eventStartTimestampMs:void 0,folderName:b("MAWFolder.bs").messagingFolderTag(c.folder),hasPendingInvitation:void 0,hasPersistentMenu:!1,igFolder:void 0,inviterId:void 0,isAdminSnippet:!1,isAllUnreadMessageMissedCallXma:void 0,isCustomThreadPicture:!1,isDisappearingMode:!1,lastActivityTimestampMs:b("MAWTimeUtils").millisTimeToTimestamp(c.lastActivityTs),lastMessageCtaId:void 0,lastMessageCtaTimestampMs:void 0,lastMessageCtaType:void 0,lastNonMissedCallXmaMessageTimestampMs:void 0,lastReadWatermarkTimestampMs:b("MAWTimeUtils").millisTimeToTimestamp(c.lastReadTs),mailboxType:b("LSMailboxType.bs").tam,memberCount:void 0,muteCallsExpireTimeMs:b("bs_caml_int64").of_float(c.muteCallsExpireTimeMs),muteExpireTimeMs:b("bs_caml_int64").of_float(c.muteExpireTimeMs),needsAdminApprovalForNewParticipant:void 0,normalizedSearchTerms:void 0,nullstateDescriptionText1:b("MAWThreadDefaults.bs").nullstateDescriptionText1,nullstateDescriptionText2:void 0,nullstateDescriptionText3:void 0,nullstateDescriptionType1:b("LSNullstateDescriptionType.bs").default_,nullstateDescriptionType2:void 0,nullstateDescriptionType3:void 0,ongoingCallState:b("LSRtcCallState.bs").noOngoingCall,otidOfFirstMessage:void 0,outgoingBubbleColor:void 0,parentThreadKey:b("MAWFolder.bs").systemFolder(c.folder),proactiveWarningDismissTime:void 0,removeWatermarkTimestampMs:b("bs_caml_int64").zero,shouldRoundThreadPicture:void 0,snippet:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,snippetHasEmoji:!1,snippetSenderContactId:void 0,snippetStringArgument1:void 0,snippetStringHash:void 0,syncGroup:void 0,takedownState:void 0,themeFbid:b("MAWThemeConstant.bs").secureTheme,threadDescription:void 0,threadInviteLink:void 0,threadInvitesEnabled:b("MessengerJoinableModeType.bs").private_,threadInvitesEnabledV2:b("MessengerJoinableModeType.bs").private_,threadKey:d,threadName:void 0,threadPictureUrl:void 0,threadPictureUrlExpirationTimestampMs:void 0,threadPictureUrlFallback:void 0,threadTags:void 0,threadType:c.isGroup?b("MessagingThreadType.bs").secureMessageOverWaGroup:b("MessagingThreadType.bs").secureMessageOverWaOneToOne,unreadDisappearingMessageCount:b("bs_caml_int64").zero,unsendLimitMs:b("bs_caml_int64").zero,viewedPluginContext:void 0,viewedPluginKey:void 0}).then(function(c){return a.table("messages_ranges_v2__generated").add({hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:"",maxTimestampMs:b("MAWTimeUtils.bs").maxTimestampMs,minMessageId:"",minTimestampMs:b("MAWTimeUtils.bs").minTimestampMs,threadKey:d})}).then(function(a){})})}function i(a,c){return b("MAWThreadId.bs").toThreadKey_DEPRECATED(a,c.chatId).then(function(d){return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("threads")),{hd:d,tl:0})).then(function(d){if(d!==void 0)return b("Promise").resolve();else return h(a,c).then(function(a){})})})}function a(a,c){var d=c.clientThreadKey;if(d==null)return i(a,c);else{var e=b("bs_caml_format").caml_int64_of_string(d);return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("threads")),{hd:e,tl:0})).then(function(d){if(d!==void 0)return g(a,c,e).then(function(a){return b("Promise").resolve()});else return i(a,c)})}}f.call=a}),null);
__d("MAWBridgeOccamadilloVerifyThreadExistsHandler.bs",["LS.bs","LSAuthorityLevel.bs","LSCoreClientFolderType.bs","LSCreateE2EEMetadataThread","LSCreateOfflineThreadingID","MAWFolder.bs","MAWJidUtils.bs","MAWJids","MAWThreadDefaults.bs","MAWTimeUtils","MessagingThreadType.bs","Promise","ReQL.bs","ReQLTable.bs","WALogger.bs","WATimeUtils","bs_caml","bs_caml_format","bs_caml_int64","bs_caml_obj","bs_int64","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function g(a){return b("bs_caml_format").caml_int64_of_string(b("MAWJidUtils.bs").switchOnChatJidType(a,{group:b("MAWJids").groupIdFromJid,user:b("MAWJids").userIdFromJid}))}function h(a,c,d){return b("ReQLTable.bs").update(a.table("threads"),{hd:d,tl:0},function(a){if(a===void 0)return b("unrecoverableViolation")("Thread is missing in occamadillo verify thread exists","messenger_e2ee_web");var e=b("bs_caml").i64_eq(a.lastActivityTimestampMs,b("bs_caml_int64").zero)?(b("WALogger.bs").warn("[Occamadillo] Detected 0 for last activity timestamp from MI for thread: "+b("bs_int64").to_string(d)+", using local state timestamp: "+b("bs_int64").to_string(b("MAWTimeUtils").millisTimeToTimestamp(c.lastActivityTs))),b("MAWTimeUtils").millisTimeToTimestamp(c.lastActivityTs)):a.lastActivityTimestampMs,f=b("bs_caml_obj").caml_obj_dup(a);f.capabilities2=b("MAWThreadDefaults.bs").defaultThreadCapabilities_2;f.capabilities=c.isGroup?b("MAWThreadDefaults.bs").defaultGroupThreadCapabilities:b("MAWThreadDefaults.bs").defaultThreadCapabilities;var g=c.clientThreadKey;f.clientThreadKey=g==null?a.clientThreadKey:b("bs_caml_format").caml_int64_of_string(g);f.lastReadWatermarkTimestampMs=b("MAWTimeUtils").millisTimeToTimestamp(c.lastReadTs);f.lastActivityTimestampMs=e;f.threadKey=d;return f}).then(function(a){})}function i(a,c,d){c=c.clientThreadKey;if(c==null)return b("Promise").resolve();c=b("bs_caml_format").caml_int64_of_string(c);if(b("bs_int64").equal(c,d))return b("Promise").resolve();else return a.table("threads")["delete"]({hd:c,tl:0})}function j(a,c,d){return a.table("mi_act_mapping_table").put({clientThreadPk:b("bs_caml_int64").of_int32(d.chatId),jid:g(d.jid),serverThreadKey:c}).then(function(e){return b("Promise").all([h(a,d,c),i(a,d,c)]).then(function(a){})})}function a(a,c){var d=c.chatId;return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromIndexAscending(a.table("mi_act_mapping_table").index("chat_id")),{hd:b("bs_caml_int64").of_int32(d),tl:0})).then(function(e){var f=d.toString(),k=c.authoritativeThreadKey;if(e===void 0)if(k==null){b("WALogger.bs").log("[Occamadillo] 1. Optimistic thread or backfill thread, we need to upgrade to authoritative thread for chatId: "+f);var l=b("MAWFolder.bs").systemFolderToLSCoreClientFolder(c.folder);if(c.isDualSend)return b("Promise").resolve();var m;if(l!==void 0)m=l;else{l="[Occamadillo] no folder type was supplied to Occamadillo verify thread exists handler";b("WALogger.bs").error(l);b("WALogger.bs").warn(l+" for chatId: "+c.chatId.toString());m=b("LSCoreClientFolderType.bs").inbox}var n=b("LS.bs").make(a);l=c.clientThreadKey;l=l==null?b("LSCreateOfflineThreadingID")(b("bs_caml_int64").of_float(Date.now()),n).then(function(a){return a[0]}):b("Promise").resolve(b("bs_caml_format").caml_int64_of_string(l));return l.then(function(d){var e=g(c.jid),f=b("MAWTimeUtils").millisTimeToTimestamp(c.lastActivityTs),h=b("bs_int64").equal(f,b("bs_caml_int64").zero)?b("MAWTimeUtils").millisTimeToTimestamp(b("WATimeUtils").millisTime()):f,i=c.isGroup?b("MessagingThreadType.bs").secureMessageOverWaGroup:b("MessagingThreadType.bs").secureMessageOverWaOneToOne;return a.table("mi_act_mapping_table").put({clientThreadPk:b("bs_caml_int64").of_int32(c.chatId),jid:e,serverThreadKey:d}).then(function(a){b("WALogger.bs").log("[Occamadillo] Creating e2ee metadata optimistic thread key: "+b("bs_int64").to_string(d)+" bumpTimestampMs: "+b("bs_int64").to_string(h));return b("LSCreateE2EEMetadataThread")(e,d,i,m,h,n)})})}else{b("WALogger.bs").log("[Occamadillo] 2. Authoritative thread, we don't have it in miActMapping table yet for chatId: "+f);return j(a,b("bs_caml_format").caml_int64_of_string(k),c)}if(!(k==null)&&e.serverThreadKey!==b("bs_caml_format").caml_int64_of_string(k)){b("WALogger.bs").log("[Occamadillo] 3. Authoritative thread, we have it in the mapping but it still has the optimistic thread key for chatId: "+f);return j(a,b("bs_caml_format").caml_int64_of_string(k),c)}b("WALogger.bs").log("[Occamadillo] 4. Authoritative thread, we have it in the miActMapping table already for chatId: "+f);return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("threads")),{hd:e.serverThreadKey,tl:0})).then(function(d){if(d!==void 0&&b("bs_caml").i64_eq(d.authorityLevel,b("LSAuthorityLevel.bs").authoritative))return b("Promise").all([h(a,c,e.serverThreadKey),i(a,c,e.serverThreadKey)]).then(function(a){});else return b("Promise").resolve()})})}f.call=a}),null);
__d("MAWOccamadilloOnMutexChange",["LSDatabaseType.bs","LSDefaultSyncGroups","LSIntEnum","LSSyncGroupsUtils","MAWGating","Promise","WALogger","bs_caml_int64","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] Resetting sync cursor and network request"]);h=function(){return a};return a}function i(a){var c=d("LSDefaultSyncGroups").e2eeMetadataSyncGroup;if(d("MAWGating").isOccamadillo()&&!d("MAWGating").isOccamadilloResumeSyncEnabled()&&c!=null)return a.table("sync_groups").put(babelHelpers["extends"]({},d("LSSyncGroupsUtils").defaultSyncGroup,{groupId:d("LSIntEnum").ofNumber(c.groupId)}));else return b("Promise").resolve()}function j(a){if(d("MAWGating").isOccamadillo()&&!d("MAWGating").isOccamadilloResumeSyncEnabled())return a.table("network_requests").put({epochId:void 0,failureCount:c("bs_caml_int64").zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:c("bs_caml_int64").zero,lastSyncRequestTimestampMs:c("bs_caml_int64").zero,networkTaskIdentifier:void 0,syncDatabaseId:d("LSDatabaseType.bs").e2eeMessagingMetadataMailbox,taskQueueName:""});else return b("Promise").resolve()}function a(a){d("WALogger").LOG(h()),c("promiseDone")(a.runInTransaction(function(a){return b("Promise").all([i(a),j(a)])},"readwrite"))}g.onOccamadilloMutexChange=a}),98);
__d("LSInitSyncCompleteSubscription.re",["LSInitSyncCompleteSubscription.bs"],(function(a,b,c,d,e,f){a=b("LSInitSyncCompleteSubscription.bs").waitForSyncGroup;f.waitForSyncGroup=a;c=b("LSInitSyncCompleteSubscription.bs").use;f.use=c}),null);
__d("LSMessagingThreadAttributionType.re",["LSMessagingThreadAttributionType.bs"],(function(a,b,c,d,e,f){c=(a=b("LSMessagingThreadAttributionType.bs")).unknown;f.unknown=c;d=a.unknownTest;f.unknownTest=d;e=a.unknownFailureRetry;f.unknownFailureRetry=e;b=a.messengerInbox;f.messengerInbox=b;c=a.messengerInboxInThread;f.messengerInboxInThread=c;d=a.messengerInboxThreadList;f.messengerInboxThreadList=d;e=a.messengerInboxNestedFolder;f.messengerInboxNestedFolder=e;b=a.messengerInboxRecentThreads;f.messengerInboxRecentThreads=b;c=a.messengerInboxRemainingThreads;f.messengerInboxRemainingThreads=c;d=a.messengerInboxMessageSearch;f.messengerInboxMessageSearch=d;e=a.messengerInboxImageSending;f.messengerInboxImageSending=e;b=a.messengerInboxForward;f.messengerInboxForward=b;c=a.messengerInboxArchivedThreads;f.messengerInboxArchivedThreads=c;d=a.messengerInboxPendingRequests;f.messengerInboxPendingRequests=d;e=a.messengerInboxActiveContacts;f.messengerInboxActiveContacts=e;b=a.messengerUniversalSearch;f.messengerUniversalSearch=b;c=a.messengerUniversalSearchNullState;f.messengerUniversalSearchNullState=c;d=a.messengerUniversalSearchKeyPressed;f.messengerUniversalSearchKeyPressed=d;e=a.messengerUniversalSearchMessageSearch;f.messengerUniversalSearchMessageSearch=e;b=a.messengerUniversalSearchAdvancedContentSearch;f.messengerUniversalSearchAdvancedContentSearch=b;c=a.montageAndActiveNow;f.montageAndActiveNow=c;d=a.montageAndActiveNowMontageInboxUnit;f.montageAndActiveNowMontageInboxUnit=d;e=a.montageAndActiveNowActiveNow;f.montageAndActiveNowActiveNow=e;b=a.montageAndActiveNowInboxComposer;f.montageAndActiveNowInboxComposer=b;c=a.montageAndActiveNowActiveAndHasStory;f.montageAndActiveNowActiveAndHasStory=c;d=a.messengerActiveNowFriendsTab;f.messengerActiveNowFriendsTab=d;e=a.messengerActiveNowFriendsTabFriendsTab;f.messengerActiveNowFriendsTabFriendsTab=e;b=a.messengerActiveNowFriendsTabPlaceHolder;f.messengerActiveNowFriendsTabPlaceHolder=b;c=a.messengerActiveNowFriendsTabRecentActive;f.messengerActiveNowFriendsTabRecentActive=c;d=a.messengerActiveNowFriendsTabRecentActiveAndStory;f.messengerActiveNowFriendsTabRecentActiveAndStory=d;e=a.messengerActiveNowFriendsTabContentDiscovery;f.messengerActiveNowFriendsTabContentDiscovery=e;b=a.messengerPendingRequests;f.messengerPendingRequests=b;c=a.messengerPendingRequestsInboxThreadList;f.messengerPendingRequestsInboxThreadList=c;d=a.messengerPendingRequestsPendingRequestsPage;f.messengerPendingRequestsPendingRequestsPage=d;e=a.messengerBroadcastFlow;f.messengerBroadcastFlow=e;b=a.messengerBroadcastFlowFromMessenger;f.messengerBroadcastFlowFromMessenger=b;c=a.messengerBroadcastFlowFromFb;f.messengerBroadcastFlowFromFb=c;d=a.messengerBroadcastFlowFromExternal;f.messengerBroadcastFlowFromExternal=d;e=a.messengerBroadcastFlowFromFbNewsfeedSharesheet;f.messengerBroadcastFlowFromFbNewsfeedSharesheet=e;b=a.messengerBroadcastFlowFromFbNewsfeedGoodwillComposer;f.messengerBroadcastFlowFromFbNewsfeedGoodwillComposer=b;c=a.messengerBroadcastFlowFromFbShortsViewer;f.messengerBroadcastFlowFromFbShortsViewer=c;d=a.messengerBroadcastFlowForwardGutter;f.messengerBroadcastFlowForwardGutter=d;e=a.messengerBroadcastFlowForwardLongclick;f.messengerBroadcastFlowForwardLongclick=e;b=a.messengerBroadcastFlowMessengerPhotoView;f.messengerBroadcastFlowMessengerPhotoView=b;c=a.messengerOmnipicker;f.messengerOmnipicker=c;d=a.messengerOmnipickerNullState;f.messengerOmnipickerNullState=d;e=a.messengerOmnipickerKeyPressed;f.messengerOmnipickerKeyPressed=e;b=a.messengerNotification;f.messengerNotification=b;c=a.messengerNotificationInThreadReply;f.messengerNotificationInThreadReply=c;d=a.messengerNotificationLongpressReply;f.messengerNotificationLongpressReply=d;e=a.messengerNotificationLongpressReaction;f.messengerNotificationLongpressReaction=e;b=a.clickToMessengerAd;f.clickToMessengerAd=b;c=a.clickToMessengerAdFromNewsfeed;f.clickToMessengerAdFromNewsfeed=c;d=a.clickToMessengerAdSendMessageCta;f.clickToMessengerAdSendMessageCta=d;e=a.clickToMessengerAdViewAndMessage;f.clickToMessengerAdViewAndMessage=e;b=a.clickToMessengerAdSendMessageCtaNewsfeedCtmAdsCta;f.clickToMessengerAdSendMessageCtaNewsfeedCtmAdsCta=b;c=a.payments;f.payments=c;d=a.paymentsBubbleClick;f.paymentsBubbleClick=d;e=a.rtc;f.rtc=e;b=a.rtcVoipIncall;f.rtcVoipIncall=b;c=a.fbPage;f.fbPage=c;d=a.fbPageAboutCard;f.fbPageAboutCard=d;e=a.fbPageProfileHeaderMessageButton;f.fbPageProfileHeaderMessageButton=e;b=a.fbPageProfileFooterMessageButton;f.fbPageProfileFooterMessageButton=b;c=a.fbPageProfileMoreDrawer;f.fbPageProfileMoreDrawer=c;d=a.fbPageResponsivenessContextCard;f.fbPageResponsivenessContextCard=d;e=a.fbProfile;f.fbProfile=e;b=a.fbProfileTimelineMessageButton;f.fbProfileTimelineMessageButton=b;c=a.fbProfileFacebookProfile;f.fbProfileFacebookProfile=c;d=a.fbProfileMessageButton;f.fbProfileMessageButton=d;e=a.fbSearch;f.fbSearch=e;b=a.fbSearchContextualProfileActionBarFromSearch;f.fbSearchContextualProfileActionBarFromSearch=b;c=a.fbSearchSearchMessageButton;f.fbSearchSearchMessageButton=c;d=a.fbSearchFbMessageSearchResults;f.fbSearchFbMessageSearchResults=d;e=a.fbSearchHighConfidenceCard;f.fbSearchHighConfidenceCard=e;b=a.fbSearchMentions;f.fbSearchMentions=b;c=a.fbSearchNullstateCta;f.fbSearchNullstateCta=c;d=a.crypto;f.crypto=d;e=a.messengerMontageComposer;f.messengerMontageComposer=e;b=a.messengerMontageComposerFriendsTab;f.messengerMontageComposerFriendsTab=b;c=a.messengerMontageComposerFriendsTabStoryAndActiveNow;f.messengerMontageComposerFriendsTabStoryAndActiveNow=c;d=a.messengerMontageReply;f.messengerMontageReply=d;e=a.messengerMontageReplyInboxThreadListProfile;f.messengerMontageReplyInboxThreadListProfile=e;b=a.messengerMontageReplyReplyContext;f.messengerMontageReplyReplyContext=b;c=a.messengerMontageReplyThreadNavBar;f.messengerMontageReplyThreadNavBar=c;d=a.messengerMontageReplyInboxThreadListProfileAuthorProfile;f.messengerMontageReplyInboxThreadListProfileAuthorProfile=d;e=a.messengerMontageReplyReplyContextAuthorProfile;f.messengerMontageReplyReplyContextAuthorProfile=e;b=a.messengerMontageReplyThreadNavBarAuthorProfile;f.messengerMontageReplyThreadNavBarAuthorProfile=b;c=a.messengerMontageReplyOneToOneChatThreadStoryBubble;f.messengerMontageReplyOneToOneChatThreadStoryBubble=c;d=a.messengerThreadMembersList;f.messengerThreadMembersList=d;e=a.marketplace;f.marketplace=e;b=a.marketplaceActivityBanner;f.marketplaceActivityBanner=b;c=a.marketplaceSendMessage;f.marketplaceSendMessage=c;d=a.fbStory;f.fbStory=d;e=a.fbStoryViewerSheetMenu;f.fbStoryViewerSheetMenu=e;b=a.fbStoryViewerSheetRow;f.fbStoryViewerSheetRow=b;c=a.fbStoryStoriesJewelNotification;f.fbStoryStoriesJewelNotification=c;d=a.fbStoryStoriesPushNotification;f.fbStoryStoriesPushNotification=d;e=a.fbStoryStoriesViewerConsumerReply;f.fbStoryStoriesViewerConsumerReply=e;b=a.fbStoryStoriesViewerConsumerArtifact;f.fbStoryStoriesViewerConsumerArtifact=b;c=a.fbStoryStoriesPageStoryConversations;f.fbStoryStoriesPageStoryConversations=c;d=a.fbStorySocialContextConversations;f.fbStorySocialContextConversations=d;e=a.workspeed;f.workspeed=e;b=a.workspeedComposerLikeButton;f.workspeedComposerLikeButton=b;c=a.workspeedComposerGifPicker;f.workspeedComposerGifPicker=c;d=a.mdotme;f.mdotme=d;e=a.mdotmeOrganicPost;f.mdotmeOrganicPost=e;b=a.mdotmeMarketingEmail;f.mdotmeMarketingEmail=b;c=a.mdotmeMbsOffsiteEmail;f.mdotmeMbsOffsiteEmail=c;d=a.customerChatPlugin;f.customerChatPlugin=d;e=a.customerChatPluginMobileRedirect;f.customerChatPluginMobileRedirect=e;b=a.customerChatPluginUpgradeFlow;f.customerChatPluginUpgradeFlow=b;c=a.customerChatPluginReEngagement;f.customerChatPluginReEngagement=c;d=a.fbFeed;f.fbFeed=d;e=a.fbFeedOrganicPost;f.fbFeedOrganicPost=e;b=a.fbFeedOrganicPostViewAndMessage;f.fbFeedOrganicPostViewAndMessage=b;c=a.fbFeedQuestionTriggeredConvo;f.fbFeedQuestionTriggeredConvo=c;d=a.fbFeedDynamicHoverCard;f.fbFeedDynamicHoverCard=d;e=a.fbFeedOrganicPostNewsfeedPagePostCta;f.fbFeedOrganicPostNewsfeedPagePostCta=e;b=a.fbFeedOrganicPostNewsfeedBumperSmcta;f.fbFeedOrganicPostNewsfeedBumperSmcta=b;c=a.fbFeedBcfOpenChatButton;f.fbFeedBcfOpenChatButton=c;d=a.fbFeedReactorsListMessageButton;f.fbFeedReactorsListMessageButton=d;e=a.fbFeedReplyToAuthor;f.fbFeedReplyToAuthor=e;b=a.fbFeedUfiSendSuggestions;f.fbFeedUfiSendSuggestions=b;c=a.fbNotification;f.fbNotification=c;d=a.fbNotificationJewelNotif;f.fbNotificationJewelNotif=d;e=a.fbNotificationPushNotif;f.fbNotificationPushNotif=e;b=a.fbEvent;f.fbEvent=b;c=a.fbEventMessageHost;f.fbEventMessageHost=c;d=a.fbEventShareClassMaterials;f.fbEventShareClassMaterials=d;e=a.supportResources;f.supportResources=e;b=a.supportResourcesFrxAction;f.supportResourcesFrxAction=b;c=a.leadGenMessaging;f.leadGenMessaging=c;d=a.leadGenMessagingPreSubmission;f.leadGenMessagingPreSubmission=d;e=a.leadGenMessagingPostSubmission;f.leadGenMessagingPostSubmission=e;b=a.leadGenMessagingCrossChannelVerticalPresentAndroid;f.leadGenMessagingCrossChannelVerticalPresentAndroid=b;c=a.leadGenMessagingCrossChannelHscrollAndroid;f.leadGenMessagingCrossChannelHscrollAndroid=c;d=a.messengerGraph;f.messengerGraph=d;e=a.messengerGraphSelectContact;f.messengerGraphSelectContact=e;b=a.messengerChat;f.messengerChat=b;c=a.messengerChatFromJewelThreadList;f.messengerChatFromJewelThreadList=c;d=a.messengerChatInThread;f.messengerChatInThread=d;e=a.messengerChatForward;f.messengerChatForward=e;b=a.messengerArchivedThreads;f.messengerArchivedThreads=b;c=a.messengerArchivedThreadsArchivedThreadsFolder;f.messengerArchivedThreadsArchivedThreadsFolder=c;d=a.jewel;f.jewel=d;e=a.jewelThreadList;f.jewelThreadList=e;b=a.jewelSearch;f.jewelSearch=b;c=a.jewelNewMessage;f.jewelNewMessage=c;d=a.jewelNestedFolder;f.jewelNestedFolder=d;e=a.chatheads;f.chatheads=e;b=a.chatheadsRecentThreads;f.chatheadsRecentThreads=b;c=a.chatheadsOverflow;f.chatheadsOverflow=c;d=a.chatheadsNewMessage;f.chatheadsNewMessage=d;e=a.sidebar;f.sidebar=e;b=a.sidebarContactsList;f.sidebarContactsList=b;c=a.sidebarContactsSearch;f.sidebarContactsSearch=c;d=a.sidebarContactsGroups;f.sidebarContactsGroups=d;e=a.messengerCommunityMessaging;f.messengerCommunityMessaging=e;b=a.messengerCommunityMessagingCommunityChannel;f.messengerCommunityMessagingCommunityChannel=b;c=a.messengerCommunityMessagingFullscreenChat;f.messengerCommunityMessagingFullscreenChat=c;d=a.fbPlatformLogin;f.fbPlatformLogin=d;e=a.fbPlatformLoginLoginConnectWithMessenger;f.fbPlatformLoginLoginConnectWithMessenger=e;b=a.contactManager;f.contactManager=b;c=a.contactManagerContactShare;f.contactManagerContactShare=c;d=a.contactManagerPeopleTabContactList;f.contactManagerPeopleTabContactList=d;e=a.contactManagerPeopleTabContactSearch;f.contactManagerPeopleTabContactSearch=e;b=a.contactManagerIconContactList;f.contactManagerIconContactList=b;c=a.contactManagerIconContactSearch;f.contactManagerIconContactSearch=c;d=a.messagingInboxInBlue;f.messagingInboxInBlue=d;e=a.messagingInboxInBlueThreadList;f.messagingInboxInBlueThreadList=e;b=a.messagingInboxInBluePeoplePicker;f.messagingInboxInBluePeoplePicker=b;c=a.messagingInboxInBlueInboxIcon;f.messagingInboxInBlueInboxIcon=c;d=a.messagingInboxInBlueSwipeFromRight;f.messagingInboxInBlueSwipeFromRight=d;e=a.messagingInboxInBlueMibNotification;f.messagingInboxInBlueMibNotification=e;b=a.messagingInboxInBlueActiveNow;f.messagingInboxInBlueActiveNow=b;c=a.messagingInboxInBlueSuggestedChats;f.messagingInboxInBlueSuggestedChats=c;d=a.messagingInboxInBlueChatPreviewBanner;f.messagingInboxInBlueChatPreviewBanner=d;e=a.messagingInboxInBlueThreadViewCoreNullState;f.messagingInboxInBlueThreadViewCoreNullState=e;b=a.messagingInboxInBlueMessageRequests;f.messagingInboxInBlueMessageRequests=b;c=a.messagingInboxInBlueSpam;f.messagingInboxInBlueSpam=c;d=a.messagingInboxInBlueFbGroups;f.messagingInboxInBlueFbGroups=d;e=a.messagingInboxInBlueMessengerPeekStateButton;f.messagingInboxInBlueMessengerPeekStateButton=e;b=a.messagingInboxInBlueMessengerPeekStateTooltip;f.messagingInboxInBlueMessengerPeekStateTooltip=b;c=a.messagingInboxInBlueBroadcastFlow;f.messagingInboxInBlueBroadcastFlow=c;d=a.messagingInboxInBlueThreadViewHeader;f.messagingInboxInBlueThreadViewHeader=d;e=a.mibNotification;f.mibNotification=e;b=a.mibNotificationPushNotification;f.mibNotificationPushNotification=b;c=a.mibNotificationJewelNotification;f.mibNotificationJewelNotification=c;d=a.mibNotificationDirectPushNotif;f.mibNotificationDirectPushNotif=d;e=a.mibNotificationDirectJewelNotif;f.mibNotificationDirectJewelNotif=e;b=a.messengerRestrictedAccounts;f.messengerRestrictedAccounts=b;c=a.armadilloCutoverThreadLinkingMessage;f.armadilloCutoverThreadLinkingMessage=c;d=a.callsTab;f.callsTab=d;e=a.miniShopViewMenuButton;f.miniShopViewMenuButton=e;b=a.sharesheet;f.sharesheet=b;c=a.sharesheetGeneralizedBroadcastFlow;f.sharesheetGeneralizedBroadcastFlow=c;d=a.sharesheetOffPlatformSharingHScroll;f.sharesheetOffPlatformSharingHScroll=d;e=a.ufi;f.ufi=e;b=a.ufiGeneralizedBroadcastFlow;f.ufiGeneralizedBroadcastFlow=b;c=a.chatheadClickCollapsed;f.chatheadClickCollapsed=c;d=a.timelineMessageButton;f.timelineMessageButton=d;e=a.directReplyIntent;f.directReplyIntent=e;b=a.fbGroups;f.fbGroups=b;c=a.fbGroupsInbox;f.fbGroupsInbox=c;d=a.fbGroupsPickerExistingChat;f.fbGroupsPickerExistingChat=d;e=a.fbGroupsPickerJoinChat;f.fbGroupsPickerJoinChat=e;b=a.devices;f.devices=b;c=a.devicesStella;f.devicesStella=c;d=a.fbWellbeing;f.fbWellbeing=d;e=a.fbWellbeingIncallUnblockingNotification;f.fbWellbeingIncallUnblockingNotification=e;b=a.messengerDeepLinking;f.messengerDeepLinking=b;c=a.readOnlyCutoverThread;f.readOnlyCutoverThread=c;d=a.readOnlyCutoverThreadArmadilloThread;f.readOnlyCutoverThreadArmadilloThread=d;e=a.armadilloThread;f.armadilloThread=e;b=a.armadilloThreadReadOnlyCutoverThread;f.armadilloThreadReadOnlyCutoverThread=b;c=a.fbShorts;f.fbShorts=c;d=a.fbShortsProfile;f.fbShortsProfile=d;e=a.fbShortsReactorsListMessageButton;f.fbShortsReactorsListMessageButton=e;b=a.sendPlugin;f.sendPlugin=b;c=a.sendAsMessageFromNt;f.sendAsMessageFromNt=c;d=a.messengerPublicChatsMessaging;f.messengerPublicChatsMessaging=d}),null);
__d("MAWDBUsageMetrics",["gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=30*1e3,i=0,j=null;function a(){if(Date.now()>i+h){var a=navigator.storage;a==null?void 0:a.estimate==null?void 0:a.estimate().then(function(a){j=a});i=Date.now()}return j}c("gkx")("5444")&&a();g.getMAWDBUsageMetrics=a}),98);
__d("MWLogSend.re",["MWLogSend.bs"],(function(a,b,c,d,e,f){a=b("MWLogSend.bs").log;f.log=a}),null);
__d("MessagingBackend.re",["MessagingBackend.bs"],(function(a,b,c,d,e,f){a=b("MessagingBackend.bs").messengerInfra;f.messengerInfra=a;c=b("MessagingBackend.bs").whatsappInfra;f.whatsappInfra=c}),null);
__d("MessagingLoggingUtilsAttachmentTypeInt.re",["MessagingLoggingUtilsAttachmentTypeInt.bs"],(function(a,b,c,d,e,f){c=(a=b("MessagingLoggingUtilsAttachmentTypeInt.bs")).text;f.text=c;d=a.none;f.none=d;e=a.fbVoiceMessage;f.fbVoiceMessage=e;b=a.like;f.like=b;c=a.sticker;f.sticker=c;d=a.videoMessage;f.videoMessage=d;e=a.gif;f.gif=e;b=a.location;f.location=b;c=a.image;f.image=c;d=a.application;f.application=d;e=a.video;f.video=e;b=a.audio;f.audio=b;c=a.messengerInvite;f.messengerInvite=c;d=a.share;f.share=d;e=a.liveLocation;f.liveLocation=e;b=a.lightweightAction;f.lightweightAction=b;c=a.fakeNewsLink;f.fakeNewsLink=c;d=a.p2pPayment;f.p2pPayment=d;e=a.montageDirect;f.montageDirect=e;b=a.sphericalPhoto;f.sphericalPhoto=b;c=a.reaction;f.reaction=c;d=a.story;f.story=d;e=a.selfieSticker;f.selfieSticker=e;b=a.soundBite;f.soundBite=b;c=a.armadilloSysPacket;f.armadilloSysPacket=c;d=a.deleteForMe;f.deleteForMe=d;e=a.unsend;f.unsend=e;b=a.unsendReaction;f.unsendReaction=b;c=a.poll;f.poll=c;d=a.avatarLike;f.avatarLike=d;e=a.stack;f.stack=e}),null);
__d("ReStore.re",["ReStore.bs"],(function(a,b,c,d,e,f){a=b("ReStore.bs").toGenericStorage;f.toGenericStorage=a}),null);
__d("SendEventType.re",["SendEventType.bs"],(function(a,b,c,d,e,f){c=(a=b("SendEventType.bs")).sendAttempt;f.sendAttempt=c;d=a.sendAcknowledgement;f.sendAcknowledgement=d;e=a.appdataAttempt;f.appdataAttempt=e;b=a.appdataAcknowledgement;f.appdataAcknowledgement=b}),null);
__d("WAShiftTimer",[],(function(a,b,c,d,e,f){a=function(){function a(a){var b=this;this.$2=0;this.$3=0;this.ts=0;this.$4=0;this.$5=0;this.$6=0;this.$7=void 0;this.$8=function(){var a=b.$7,c=b.$1;b.$3=0;b.$2=0;b.ts=0;b.$4=0;b.$5=0;b.$6=0;b.$7=void 0;c(a)};this.onOrBefore=function(a,c){g(a);var d=Date.now();d=d+a;var e=b.$5;if(e!==0&&e<d)return;e=b.$6;if(e!==0&&d<e)return;b.$5=d;!b.$3&&(!b.$2||d<b.ts)&&b.$9(d,a,c)};this.forceRunNow=function(a){b.$2&&clearTimeout(b.$2),b.$3&&cancelAnimationFrame(b.$3),b.$7=a,b.$8()};this.cancel=function(){b.$2&&clearTimeout(b.$2),b.$3&&cancelAnimationFrame(b.$3),b.$2=0,b.$3=0,b.ts=0,b.$4=0,b.$5=0,b.$6=0,b.$7=void 0};this.$1=a}var b=a.prototype;b.onOrBeforeRepaint=function(a){if(this.$3)return;var b=Date.now(),c=this.$6;if(c!==0&&b<c)return;c=this.$5;(c===0||b<c)&&(this.$5=b);this.$2&&(clearTimeout(this.$2),this.$2=0);(!this.ts||this.ts>b)&&(this.ts=b);this.$7=a;this.$3=requestAnimationFrame(this.$8)};b.onOrAfter=function(a,b){g(a);var c=Date.now();c=c+a;var d=this.$6;if(d!==0&&c<d)return;d=this.$5;if(d!==0&&d<c)return;this.$6=c;(!this.$2||this.ts<c)&&this.$9(c,a,b)};b.debounce=function(a,b){g(a),this.$10(Date.now(),a,b)};b.debounceAndCap=function(a,b,c){g(a);g(b);var d=Date.now();b=d+b;var e=this.$6,f=this.$5;(e===0||e<=b)&&(f===0||b<f)&&(this.$5=b);this.$10(d,a,c)};b.forceRunNowIfScheduled=function(){this.$2?(clearTimeout(this.$2),this.$8()):this.$3&&(cancelAnimationFrame(this.$3),this.$8())};b.isScheduled=function(){return this.$2!==0||this.$3!==0};b.$10=function(a,b,c){var d=a+b,e=this.$6;if(e!==0&&d<e)return;e=this.ts;var f=this.$5;f!==0&&f<d?e<f&&this.$9(f,f-a,c):e<d&&this.$9(d,b,c)};b.$9=function(a,b,c){this.$3&&(cancelAnimationFrame(this.$3),this.$3=0);this.$7=c;this.ts=a;if(this.$2){c=a-this.$4;if(-16<c&&c<16)return;clearTimeout(this.$2)}this.$2=setTimeout(this.$8,b);this.$4=a};return a}();function g(a){if(!(a>=0))throw new Error("ShiftTimer must be given delay >= 0")}f.ShiftTimer=a}),66);
__d("WABridgeBatcher",["WAShiftTimer"],(function(a,b,c,d,e,f,g){var h=20,i=1e3;a=function(){function a(a,b){var c=this;this.$1=null;this.$4=h;this.$5=Date.now();this.$6=new(d("WAShiftTimer").ShiftTimer)(function(){var a=c.$1;if(a==null)return;c.$1=null;c.$2(a)});this.$2=b;this.$3=a}var b=a.prototype;b.addEvent=function(a){var b=this.$1;this.$1=b?this.$3(b,a):[a];if(this.$6.isScheduled())return;b=this.$4;if(b<1){a=Date.now();var c=Math.max(a-this.$5,0)/i;b=Math.min(b+c,h);this.$4=b;this.$5=a}b>=1?(c=0,this.$4=b-1):(c=Math.ceil(i*(1-b)),this.$4=0);this.$6.onOrBefore(c)};b.cancel=function(){this.$1=null,this.$6.cancel()};return a}();g.BridgeBatcher=a}),98);
__d("WAPromiseCallSync",["Promise"],(function(a,b,c,d,e,f){function a(a,c){try{for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];return b("Promise").resolve(a.apply(c,e))}catch(a){return b("Promise").reject(a)}}f.promiseCallSync=a}),66);
__d("WAPromiseManagement",["Promise","WAPromiseCallSync"],(function(a,b,c,d,e,f,g){function a(a){var b=null,c=function(){b||(b=d("WAPromiseCallSync").promiseCallSync(a)["finally"](function(){b=null}));return b};c.isPending=function(){return!!b};return c}function c(a,c){var d=new Map();return function(e){var f=a(e),g=d.get(f);if(g)return g;try{g=b("Promise").resolve(c(e))}catch(a){g=b("Promise").reject(a)}e=g["finally"](function(){return void d["delete"](f)});d.set(f,e);return e}}var h=new Set();function e(a){h.add(a),a["finally"](function(){h["delete"](a)})}g.nullaryCacheWhilePending=a;g.cacheWhilePending=c;g.preventGarbageCollection=e}),98);
__d("WACrossWorkerPortal",["Promise","WABridgeBatcher","WALogger","WAPromiseManagement"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["absorbPortal: transferring request #",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge unexpected non-result to call"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge unexpected result to cast"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge unrecognized result ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," response of ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," request for ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge queuing "," msgs"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge sending "," across (delayed)"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge received msg on old port"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge updating port"]);q=function(){return a};return a}var r=function(){function a(a,b,c){var e=this;this.port=null;this.$2=1;this.openRequests=new Map();this.listeners=new Set();this.$1=a;this.sendStream=new(d("WABridgeBatcher").BridgeBatcher)(b,function(a){e.$3(a)});c.forEach(function(b){a.setNamespaceHandler(b,e.$4(b))})}var c=a.prototype;c.addListener=function(a){var b=this;this.listeners.add(a);return function(){return b.listeners["delete"](a)}};c.setPort=function(a){var b=this;d("WALogger").LOG(q());this.port=a;this.sendStream.cancel();a.onmessage=function(c){if(b.port!==a){d("WALogger").WARN(p()).devConsole(c.data);return}c=c.data;if(!c)return;c.forEach(function(c){b.$5(c,"incoming"),b.$6(a,c)})};this.openRequests.forEach(function(a){a=a.request;d("WALogger").LOG(o(),a.name);b.sendStream.addEvent({type:"request",content:a})})};c.getBridge=function(){return this.$1};c.$4=function(a){var b=this;return function(c,d,e,f){b.$7(a,c,d,e,f)}};c.$7=function(a,b,c,d,e){var f=this.$2++;a={requestId:f,expectsResponse:!!d,namespace:a,name:b,arg:c,silentLog:e};this.openRequests.set(f,{request:a,resolver:d});this.sendStream.addEvent({type:"request",content:a})};c.$8=function(a,b){if(a!==this.port)return;this.sendStream.addEvent({type:"result",content:b})};c.$3=function(a){var b=this,c=this.port;if(!c){d("WALogger").LOG(n(),a.length);return}c.postMessage(a);a.forEach(function(a){return b.$5(a,"outgoing")})};c.$5=function(a,b){this.listeners.forEach(function(c){return c(a,b)})};c.$6=function(a,c){var e=this;if(c.type==="request"){var f=c.content,g=f.namespace,h=f.name,n=f.requestId,o=f.arg,p=f.expectsResponse,q=f.silentLog;q||d("WALogger").LOG(m(),n,h);f=this.$1;if(p){p=f.sendAndReceive(g,h,o,q).then(function(b){e.$8(a,{requestId:n,type:"success",result:b,silentLog:q})},function(b){e.$8(a,{requestId:n,type:"error",result:String(b),silentLog:q})});d("WAPromiseManagement").preventGarbageCollection(p)}else{f.fireAndForget(g,h,o,q);p={type:"result",content:{requestId:n,type:"handled",silentLog:q}};this.$5(p,"outgoing");a.postMessage([p])}}else{c.type;f=c.content;g=f.requestId;h=f.type;o=f.result;p=f.silentLog;p||d("WALogger").LOG(l(),g,h);c=this.openRequests.get(g);if(!c){d("WALogger").WARN(k(),g);return}switch(h){case"success":case"error":this.openRequests["delete"](g);f=c.resolver;f?f(h==="success"?o:b("Promise").reject(new Error(o))):d("WALogger").ERROR(j());break;case"handled":c.resolver?d("WALogger").ERROR(i()):this.openRequests["delete"](g);break}}};return a}();function a(a,b,c){a=new r(a,c,b);return a}function c(a){var b;(b=a.port)==null?void 0:b.close();a.port=null;a.sendStream.cancel();b=a.openRequests;a.openRequests=new Map();var c=a.getBridge();b.forEach(function(a){var b=a.request;a=a.resolver;var e=b.namespace,f=b.name,g=b.arg,i=b.silentLog;d("WALogger").LOG(h(),b.requestId);a?a(c.sendAndReceive(e,f,g,i)):c.fireAndForget(e,f,g,i)})}g.CrossWorkerPortal=r;g.attachPortal=a;g.killPortalAndSendPendingToBridge=c}),98);
__d("WADevToolMessageChannel",[],(function(a,b,c,d,e,f){var g=new MessageChannel();a=function(){g=new MessageChannel();return g};b=function(){return g};f.createNewChannel=a;f.getMostRecentChannel=b}),66);
__d("WADevToolsBridge",["WADynamicRouter"],(function(a,b,c,d,e,f,g){var h=new(d("WADynamicRouter").DynamicRouter)();function a(){return h}g.getDevToolBridge=a}),98);
__d("MAWCommonSetupBridge",["CurrentUser","ErrorTransport","I64","LSDatabaseDeferred.re","LSMessagingThreadAttributionType.re","MAWBridge","MAWChatJid.re","MAWCurrentUser","MAWDBUsageMetrics","MAWDbMedia","MAWEBSwitch","MAWGating","MAWJobActions","MAWMediaUtils","MAWThreadCutover.re","MWLogSend.re","MessagingBackend.re","MessagingLoggingUtilsAttachmentTypeInt.re","MessagingThreadType.re","ODS","Promise","QPLEvent","QPLUserFlow","ReStore.re","SendEventType.re","WACrossWorkerPortal","WADevToolMessageChannel","WADevToolsBridge","WADualSendMsgUtils","WAJids","cr:2036","err","gkx","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MAWMainThreadLogger").__setRef("MAWCommonSetupBridge"),i=c("gkx")("5444"),j=new Set([25312111,25299391,25311870]),k=new Map(),l=new Map([[d("MAWDbMedia").MEDIA_TYPE.IMAGE,c("MessagingLoggingUtilsAttachmentTypeInt.re").image],[d("MAWDbMedia").MEDIA_TYPE.VIDEO,c("MessagingLoggingUtilsAttachmentTypeInt.re").video],[d("MAWDbMedia").MEDIA_TYPE.GIF,c("MessagingLoggingUtilsAttachmentTypeInt.re").gif],[d("MAWDbMedia").MEDIA_TYPE.STICKER,c("MessagingLoggingUtilsAttachmentTypeInt.re").sticker],[d("MAWDbMedia").MEDIA_TYPE.PTT,c("MessagingLoggingUtilsAttachmentTypeInt.re").audio]]),m=new Set([25312150,25313100,25304093,1056840931,25299294]);function n(a,b){return a+"_"+b}function o(a,b,e){return d("LSDatabaseDeferred.re").db.then(function(f){f=d("ReStore.re").toGenericStorage(f);return d("MAWThreadCutover.re").isCutoverSecureThreadFromChatJid(f,a).then(function(a){c("QPLUserFlow").addAnnotations(b,{bool:{isCutover:a}},{instanceKey:e})})})}var p={fbErrorProxy:function(a){d("ErrorTransport").log(a)},log:function(a){var b=a.context,c=a.logLevel,d=a.logString;switch(c){case"log":h.onReadyImmediately(function(a){a=a.info;return a(d,b)});return;case"warn":h.onReadyImmediately(function(a){a=a.warn;return a(d,b)});return;case"logRestricted":h.onReadyImmediately(function(a){a=a.logRestricted;return a(d,b)});return;case"debug":break;case"error":break;default:break}},logError:function(a){var b=a.context,c=a.entriesToReport,d=a.framesToPop,e=a.logString,f=a.message,g=a.stack;h.onReadyImmediately(function(a){a=a.logError;return a(e,b,f,g,d,c)})},odsBumpEntityKey:function(a){var b=a.amount,e=a.entity;a=a.key;d("ODS").bumpEntityKey(3185,e,a+"."+(c("CurrentUser").getAppID()||"unknown"),b)},onJobFinished:function(a){a.type==="createGroup"&&a.originalArgs.key!=null&&d("MAWJobActions").recentFinishedJobsCache.set(a.originalArgs.key,a.result);switch(a.type){case"sendMsg":case"sendMediaMsg":case"sendReactionMsg":case"sendXMAShareMsg":var b=a.originalArgs.chatJid,e=a.type==="sendXMAShareMsg"?a.originalArgs.xmaMsgExternalId:a.originalArgs.externalId;k.set(n(b,e),a.originalArgs)}if(a.type==="sendWrittenMsg"){b=a.originalArgs.protocolMsgId;e=b.chat;var f=b.externalId;b=n(e,f);e=k.get(b);k["delete"](b);if(a.result.type==="success"&&e!=null){var g=e.args,h=e.chatJid;b=e.file;a=g.reactToAuthor!=null;var i;a&&(i=g.reaction!=null?c("MessagingLoggingUtilsAttachmentTypeInt.re").reaction:c("MessagingLoggingUtilsAttachmentTypeInt.re").unsendReaction);e=g.specialTextSize!=null;b=b!=null?d("MAWMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(b.type).mediaType:null;var j=(b=l.get(b))!=null?b:e?c("MessagingLoggingUtilsAttachmentTypeInt.re").like:a?i:c("MessagingLoggingUtilsAttachmentTypeInt.re").text,m=d("WAJids").switchOnMsgrChatJidType(h,{group:function(){return d("MessagingThreadType.re").secureMessageOverWaGroup},user:function(){return d("MessagingThreadType.re").secureMessageOverWaOneToOne}});c("promiseDone")(d("LSDatabaseDeferred.re").db.then(function(a){var b=d("ReStore.re").toGenericStorage(a);c("promiseDone")(c("MAWChatJid.re").toThreadKey(b,h).then(function(a){d("MWLogSend.re").log(b,a,m,f,[],d("I64").of_string(d("MAWCurrentUser").getID()),d("LSMessagingThreadAttributionType.re").unknown,j,g.quote!=null,d("SendEventType.re").sendAcknowledgement,d("MessagingBackend.re").whatsappInfra,d("I64").to_string(a),g==null?void 0:(a=g.ephemeralSetting)==null?void 0:a.ephemeralExpirationInSec,d("WADualSendMsgUtils").isDualSendJid(h)?["dst:8"]:void 0,void 0)}))}))}}},qplEvent:function(a){var e=a.action,f=a.annotations,g=a.event,h=a.instanceKey,k=a.nonTrackableAnnotations,l=a.timestamp;if(!c("CurrentUser").isEmployee()&&j.has(d("QPLEvent").getMarkerId(g)))return;var n=h||0;h=k==null?void 0:(a=k.string)==null?void 0:a.jid;k=h!=null?d("WAJids").validateChatJid(h):void 0;a=m.has(d("QPLEvent").getMarkerId(g))&&k!=null?o(k,g,n):b("Promise").resolve();switch(e.type){case"start":c("QPLUserFlow").start(g,{annotations:babelHelpers["extends"]({},f||{},{bool:babelHelpers["extends"]({},(f==null?void 0:f.bool)||{},{isDev:0,isEBEnabled:c("MAWEBSwitch").isEnabled(),isGifSearchEnbled:d("MAWGating").isGifSearchEnabled(),isOccamadillo:d("MAWGating").isOccamadillo(),isSkipDeviceNotifEnabled:d("MAWGating").isSkipDeviceNotifEnabled(),isTlcPublicUser:d("MAWGating").isTlcPublicUser()})}),instanceKey:n,timestamp:l});break;case"success":if(i){h=d("MAWDBUsageMetrics").getMAWDBUsageMetrics();k=(k=h==null?void 0:(k=h.usageDetails)==null?void 0:k.indexedDB)!=null?k:h==null?void 0:h.usage;k!=null&&c("QPLUserFlow").addAnnotations(g,{"int":{indexedDbSizeInBytes:k}},{instanceKey:n})}c("QPLUserFlow").addAnnotations(g,{bool:{isRelaxedDurability:!0}},{instanceKey:n});a["finally"](function(){c("QPLUserFlow").endSuccess(g,{annotations:f,instanceKey:n,timestamp:l})});break;case"point":c("QPLUserFlow").addPoint(g,e.name,{data:f,instanceKey:n,timestamp:l});break;case"failure":c("QPLUserFlow").addAnnotations(g,{bool:{isRelaxedDurability:!0}},{instanceKey:n});a["finally"](function(){c("QPLUserFlow").endFailure(g,e.name,{annotations:f,instanceKey:n,timestamp:l})});break;default:throw c("err")("Bridge sends unreachable qplEvent action type")}}},q=function(a,b){a.push(b);return a};a=function(a){var e=a.customizeEventHandlers;a=a.worker;var f=d("MAWBridge").getBridge();f.setHandlers("event",babelHelpers["extends"]({},p,e));e=d("WACrossWorkerPortal").attachPortal(f,["backend"],q);e.setPort(a);if(c("gkx")("5147")){var g=d("WADevToolsBridge").getDevToolBridge();a=new MessageChannel();var h=d("WACrossWorkerPortal").attachPortal(g,["backend"],q),i=d("WACrossWorkerPortal").attachPortal(g,["devtool"],q);h.setPort(d("WADevToolMessageChannel").getMostRecentChannel().port1);i.setPort(a.port1);b("cr:2036")==null?void 0:b("cr:2036").connectAddonPort(a.port2);e.addListener(function(a,b){return g.fireAndForget("devtool","bridgeMessage",{direction:b==="outgoing"?"toWorker":"toMain",msg:a},!0)})}return b("Promise").resolve(f)};g.commonBridgeEventHandlers=p;g.initBridge=a}),98);
__d("MAWSetupBridge",["LSDatabaseDeferred.re","LSInitSyncCompleteSubscription.re","MAWBridgeUIEventHandler.re","MAWBridgeUIEventsWrapper","MAWCommonSetupBridge","MAWCryptoAuthToken","cr:1265","regeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["presenceUpdated updated for ",": type: ",", last: ",""]);h=function(){return a};return a}var i=c("requireDeferred")("ArmadilloCutoverClientFalcoEvent").__setRef("MAWSetupBridge"),j=c("requireDeferred")("MAWSetupBridgeOfflineSnapshot").__setRef("MAWSetupBridge"),k=c("requireDeferred")("WALogger").__setRef("MAWSetupBridge"),l=d("LSDatabaseDeferred.re").db.then(d("LSInitSyncCompleteSubscription.re").use).then(function(){return d("LSDatabaseDeferred.re").db}),m=function(a){i.loadImmediately(function(b){b=b.log;return b(function(){return{armadillo_thread_id:a.armadilloThreadId,domain:a.domain,event:a.event,event_details:a.eventDetails,open_thread_id:a.openThreadId,success:a.success,trace_id:a.traceId}})})};function a(a){var c=a.dispatch,e=a.environment,f=a.logout;a=a.worker;return d("MAWCommonSetupBridge").initBridge({customizeEventHandlers:{logCutoverEvent:m,logout:f,offlineSnapshot:function(){var a=arguments;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(j.load());case 2:c.t0=void 0;c.t1=a;return c.abrupt("return",c.sent.apply(c.t0,c.t1));case 5:case"end":return c.stop()}},null,this)},receivePresence:function(a){var b=a.jid,c=a.last,d=a.type;k.loadImmediately(function(a){a.DEV(h(),b,d,c)});return},rotateCryptoAuthToken:function(){return d("MAWCryptoAuthToken").fetchAndSaveCAT(e)},uiUpdate:function(a){a=a.events;c&&a.forEach(function(a){return c(a)});b("cr:1265")==null?void 0:b("cr:1265").recordBridgeUIEvent(a);d("MAWBridgeUIEventHandler.re").handleEvents(l,a.map(d("MAWBridgeUIEventsWrapper").UIEventToRE))}},worker:a})}g.setupBridge=a}),98);
__d("WorkerBanzaiLazyQueueChannelClient",["BanzaiLazyQueue","WorkerFuncChannel","qex"],(function(a,b,c,d,e,f,g){"use strict";function a(a){c("qex")._("844"),d("WorkerFuncChannel").exportChannel(c("BanzaiLazyQueue"),a,"banzai_lazyqueue_channel")}g.init=a}),98);
__d("WorkerQPLChannel",["WorkerFuncChannel","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("WorkerFuncChannel").WorkerFuncChannel)(function(a){return{markerStartFromNavStart:null,markerStart:function(b,d,e){e===void 0&&(e=c("performanceAbsoluteNow")());return a.markerStart(b,d,e)},markerAnnotate:function(b,c,d){return a.markerAnnotate(b,c,d)},markerPoint:function(b,d,e){e=(e==null?void 0:e.timestamp)===void 0?babelHelpers["extends"]({},e,{timestamp:c("performanceAbsoluteNow")()}):e;return a.markerPoint(b,d,e)},markerEnd:function(b,d,e,f){f===void 0&&(f=c("performanceAbsoluteNow")());return a.markerEnd(b,d,e,f)}}},"qpl");function a(a){h.setMessagePort(a)}function b(a){h.setBackend(a)}g.setMessagePort=a;g.initQPL=b}),98);
__d("WorkerClient",["WorkerBanzaiLazyQueueChannelClient","WorkerFuncChannel","WorkerQPLChannel"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("WorkerFuncChannel").activateChannels(a,"client","worker"),d("WorkerBanzaiLazyQueueChannelClient").init(a),d("WorkerQPLChannel").setMessagePort(a),e(["QuickPerformanceLogger"],function(a){return d("WorkerQPLChannel").initQPL(a)})}g.init=a}),98);
__d("MAWCommonSetupWorker",["Promise","WADevToolMessageChannel","WALogger","WorkerClient","WorkerMessagePort","err","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["worker receive invalid message: ",""]);h=function(){return a};return a}e=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var e;e=a.call(this,b,c)||this;e.onmessage=null;e.$BridgeAdapter1=b;d("WorkerClient").init(babelHelpers.assertThisInitialized(e));e.onUnhandledMessage.add(function(a){e.onmessage&&e.onmessage({data:a})});return e}var c=b.prototype;c.getBridgePort=function(){return this};return b}(d("WorkerMessagePort").WorkerSyncedMessagePort);function a(a,e,f,g){return new(b("Promise"))(function(b,i){a.addMessageListener("worker-setup",function(e){if(e==null||e.type!=="worker-setup"){d("WALogger").WARN(h(),e);return}if(e.status==="success")b(a.getBridgePort());else if(e.status==="failure"){i(c("err")((e=e.msg)!=null?e:"Encountered an error setting up the armadillo web worker"))}else throw c("err")("received invalid message for worker")});if(c("gkx")("5147")){var j=d("WADevToolMessageChannel").createNewChannel();a.postMessage({content:{devToolMessageChannelPort2:j.port2,fbId:e,latestKeyVersionForEAR:f,vaultMaterials:g},type:"worker-setup"},[j.port2])}else a.postMessage({content:{fbId:e,latestKeyVersionForEAR:f,vaultMaterials:g},type:"worker-setup"})})}g.BridgeAdapter=e;g.initWorker=a}),98);
__d("MAWSetupWorker",["MAWCommonSetupWorker","MAWGating","MAWInit","MAWMainWebWorkerResource","Promise","WALogger","WorkerBundleResource","cr:3087","err","regeneratorRuntime","setTimeout","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["worker terminating"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["worker doesn't exist, no need to terminate"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["worker setting up"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MAWSetupWorker]: ",""]);k=function(){return a};return a}var l=null,m=o(),n=null;function o(){if(!m){var a=c("shouldUseMAWSharedWorker")();p();a?(a=d("WorkerBundleResource").createSharedWebWorker(c("MAWMainWebWorkerResource")),m=a.port):m=a=d("WorkerBundleResource").createDedicatedWebWorker(c("MAWMainWebWorkerResource"));a.onerror=function(a){d("WALogger").ERROR(k(),JSON.stringify(a==null?void 0:a.message))}}return m}function p(){d("MAWGating").getExtraWebWorkerMemoryToConsume(),d("MAWGating").shouldUseCondensedSchemas(),d("MAWGating").shouldUseCoalescedSchemas(),d("MAWGating").isLoggingDisabled()}function q(a,b,e){d("MAWInit").logPoint("create_worker_start");var f=o();d("MAWInit").logPoint("create_worker_end");if(f===null)throw c("err")("Client is starting bridge without a worker.");d("WALogger").LOG(j());var g=new(d("MAWCommonSetupWorker").BridgeAdapter)(f,"MAWMainWorker");l=g;return d("MAWInit").measurePerformance("maw_init_worker",function(){return d("MAWCommonSetupWorker").initWorker(g,a,b,e)})}function a(a,c,d,e){if(!l){a=q(a,c,d);b("cr:3087")!=null&&(n=b("cr:3087")(e));return a}return b("Promise").resolve(l.getBridgePort())}function e(){return m!=null}function f(){if(!l){d("WALogger").LOG(i());return}d("WALogger").LOG(h());l.close();l=null;m=null;n!=null&&n();n=null;return}function r(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:if(l){a.next=2;break}return a.abrupt("return");case 2:l.close();l=null;m=null;a.next=7;return b("regeneratorRuntime").awrap(s(45e3));case 7:return a.abrupt("return");case 8:case"end":return a.stop()}},null,this)}function s(a){return new(b("Promise"))(function(b){return c("setTimeout")(b,a)})}g.createWorkerIfNone=o;g.setupWorker=q;g.getOrSetupWorker=a;g.doesWorkerExist=e;g.terminateWorker=f;g.killWorkerForTest=r}),98);
__d("MAWSetup.react",["BaseHeadingContext","CometPlaceholder.react","CometRelay","CurrentUser","MAWCommonSetup","MAWSetupBridge","MAWSetupWorker","MAWStateContext.react","cr:127","cr:2808","cr:2809","cr:3487","cr:3663","cr:4630","cr:4631","cr:5015","deferredLoadComponent","promiseDone","react","requireDeferredForDisplay","shouldUseMAWSharedWorker","useCometLogout","useReStore","useSecretConversationsLogOut"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.useContext,j=e.useMemo,k=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MAWLoadingStateSpinner.react").__setRef("MAWSetup.react"));window.XPlatTesting=b("cr:2808");window.XPlatTestingGroups=b("cr:2809");var l=c("CurrentUser").getID();function m(a){var e=d("CometRelay").useRelayEnvironment(),f=c("useReStore")(),g=c("useSecretConversationsLogOut")(),i=j(function(){return function(){return c("promiseDone")(g())}},[g]),k=j(function(){return{doesWorkerExist:d("MAWSetupWorker").doesWorkerExist,getOrSetupWorker:d("MAWSetupWorker").getOrSetupWorker,logout:i,setupBridge:d("MAWSetupBridge").setupBridge,terminateWorker:d("MAWSetupWorker").terminateWorker}},[i]);d("MAWCommonSetup").useArmadillo(l,k);b("cr:4630")!=null?b("cr:4630")==null?void 0:b("cr:4630").makeAll(f):b("cr:4631")==null?void 0:b("cr:4631").useMAWContactSync();b("cr:3663")(f);b("cr:127")();return h.jsxs(h.Fragment,{children:[a.children,!c("shouldUseMAWSharedWorker")()&&b("cr:5015")?h.jsx(b("cr:5015"),{environment:e,fbId:l,platformSetupUtils:k}):null]})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var e=i(c("BaseHeadingContext"));return h.jsx(d("useCometLogout").CometLogoutProvider,{children:h.jsx(d("MAWStateContext.react").MAWStateContextProvider,{children:h.jsxs(c("BaseHeadingContext").Provider,{value:e+1,children:[h.jsx(m,babelHelpers["extends"]({},a)),h.jsx(c("CometPlaceholder.react"),{fallback:null,children:h.jsx(k,{})}),b("cr:3487")&&h.jsx(b("cr:3487"),{})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSetupMutex.react",["cr:2671","react"],(function(a,b,c,d,e,f,g){"use strict";d("react");function a(a){var c=a.environment,d=a.fbId;a=a.platformSetupUtils;b("cr:2671").useMutex(c,d,a);return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSetupMutexV2",["FBLogger","LSPersistedDbGating","LocalStorageMutex","MAWAppMutex","MAWBridge","MAWGating","MAWIndexedDb","MAWKeychainInit","MAWLocalStorage","MAWOccamadilloOnMutexChange","MAWVaultMaterials","MWChatBadgeCountUpdates.re","QPLUserCountEvent","QPLUserFlow","Run","WALogger","cr:1230","cr:2643","cr:917","qpl","react","regeneratorRuntime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["AppMutex - Reinitializing"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["AppMutex - Shouldn't reinitialize, worker already exists"]);i=function(){return a};return a}a=d("react");var j=a.useCallback,k=a.useEffect,l=a.useMemo,m=c("FBLogger")("messenger_e2ee_web"),n=!1,o=0;function p(a){if(document.visibilityState!=="visible")return!1;a=a();var b=window.indexedDB!=null,e=d("MAWLocalStorage").isLocalStorageAvailable();if(a){d("WALogger").DEV(i());return!1}if(!b){d("QPLUserCountEvent").fireQplUserCount(c("qpl")._(25299354,"201"));return!1}if(!e){d("QPLUserCountEvent").fireQplUserCount(c("qpl")._(25309925,"203"));return!1}return!0}function q(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(b("cr:917").makeEncryptionDB(a));case 2:return c.abrupt("return",d("MAWKeychainInit").initSetupKeychain());case 3:case"end":return c.stop()}},null,this)}function r(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:a=null;if(!(b("cr:2643")!=null&&d("LSPersistedDbGating").allTablesPersisted)){c.next=7;break}c.next=4;return b("regeneratorRuntime").awrap(b("cr:2643").setupVaultForPersistedLSDB());case 4:a=c.sent;c.next=8;break;case 7:a=d("MAWVaultMaterials").initializeVaultMaterials();case 8:return c.abrupt("return",a);case 9:case"end":return c.stop()}},null,this)}e=function(a,e,f){var g=f.doesWorkerExist,i=f.getOrSetupWorker,s=f.logout,t=f.setupBridge,u=f.terminateWorker,v=l(function(){return d("MAWAppMutex").use()},[]),w=c("useReStore")(),x=d("LSPersistedDbGating").allTablesPersisted,y=j(function(a){var b=v.takeoverFilter(a);if(!b||a.newValue===d("LocalStorageMutex").THIS_TAB||a.newValue==="")return;x||d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"DropAllSecureThreads",value:void 0}]});u();v.onMutexDeath()},[v,u,x]),z=j(function(){u(),v.onMutexDeath()},[v,u]),A=j(function(){var f,j,k,l,u,y;return b("regeneratorRuntime").async(function(z){while(1)switch(z.prev=z.next){case 0:f=p(g);if(!(!f||n)){z.next=3;break}return z.abrupt("return");case 3:n=!0;o++;z.prev=5;d("WALogger").LOG(h());c("QPLUserFlow").start(c("qpl")._(25310984,"169"),{instanceKey:o});c("QPLUserFlow").addAnnotations(c("qpl")._(25310984,"169"),{"int":{version:2}},{instanceKey:o});z.next=11;return b("regeneratorRuntime").awrap(v.init());case 11:j=z.sent;if(j){z.next=15;break}c("QPLUserFlow").endFailure(c("qpl")._(25310984,"169"),"mutex_no_premission_on_reinit",{instanceKey:o});return z.abrupt("return");case 15:z.next=17;return b("regeneratorRuntime").awrap(q(e));case 17:k=z.sent;if(k.success){z.next=21;break}c("QPLUserFlow").endFailure(c("qpl")._(25310984,"169"),"mutex_keychain_setup_failure_on_reinit",{instanceKey:o});return z.abrupt("return");case 21:z.next=23;return b("regeneratorRuntime").awrap(d("MAWIndexedDb").makeDB(e,b("cr:1230").getDbEncryptionKey));case 23:c("QPLUserFlow").addPoint(c("qpl")._(25310984,"169"),"db_init",{instanceKey:o});z.next=26;return b("regeneratorRuntime").awrap(r());case 26:l=z.sent;c("QPLUserFlow").addPoint(c("qpl")._(25310984,"169"),"vaulting_setup",{instanceKey:o});c("QPLUserFlow").addAnnotations(c("qpl")._(25310984,"169"),{bool:{will_vault:l!=null}},{instanceKey:o});z.next=31;return b("regeneratorRuntime").awrap(i(e,k.value,l,w));case 31:u=z.sent;c("QPLUserFlow").addPoint(c("qpl")._(25310984,"169"),"worker_setup",{instanceKey:o});z.next=35;return b("regeneratorRuntime").awrap(t({environment:a,logout:s,worker:u}));case 35:y=z.sent;c("QPLUserFlow").addPoint(c("qpl")._(25310984,"169"),"bridge_setup",{instanceKey:o});if(!(!x&&d("MAWGating").isOccamadillo())){z.next=41;break}d("MAWOccamadilloOnMutexChange").onOccamadilloMutexChange(w);z.next=44;break;case 41:if(x){z.next=44;break}z.next=44;return b("regeneratorRuntime").awrap(y.sendAndReceive("backend","initSync",{numMsgsPerThread:10,numThreads:d("MWChatBadgeCountUpdates.re").minSyncedThreads}));case 44:c("QPLUserFlow").endSuccess(c("qpl")._(25310984,"169"),{instanceKey:o});z.next=52;break;case 47:z.prev=47,z.t0=z["catch"](5),m.mustfix("AppMutex - failed to reinitialize worker"),m.catching(z.t0),c("QPLUserFlow").endFailure(c("qpl")._(25310984,"169"),"failed_to_reinitialize_worker",{error:z.t0,instanceKey:o});case 52:z.prev=52;n=!1;return z.finish(52);case 55:case"end":return z.stop()}},null,this,[[5,47,52,55]])},[a,e,v,g,i,t,w,s,x]);k(function(){window.addEventListener("storage",y);var a=d("Run").onBeforeUnload(z,!1),b=d("Run").onUnload(z);window.addEventListener("visibilitychange",A);return function(){window.removeEventListener("storage",y),a.remove(),b.remove(),window.removeEventListener("visibilitychange",A)}},[y,z,A])};g.useMutex=e}),98);
__d("useLegacyUserWatchdogNoop",[],(function(a,b,c,d,e,f){"use strict";function a(a){}f["default"]=a}),66);
__d("useDataLossCheckerNoop",[],(function(a,b,c,d,e,f){"use strict";function a(){}f["default"]=a}),66);/*FB_PKG_DELIM*/
__d("LSInsertOptimisticAttachment",["LSSetMessageDisplayedContentTypes"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e;return c.seq([function(d){return c.seq([function(b){return c.fe(c.ftr(c.db.table(16).fetch([[[a[0],a[2],a[4]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq([0,0],[0,0])&&b.messageId===a[2]&&b.attachmentFbid===a[4]&&c.i64.lt(b.authorityLevel,[0,20])}),function(a){return a["delete"]()})},function(b){return c.db.table(16).add({threadKey:a[0],messageId:a[2],attachmentFbid:a[4],timestampMs:a[1],offlineAttachmentId:a[3],attachmentType:a[5],filename:a[6],attributionAppId:a[7],hasMedia:a[8],isSharable:!1,hasXma:a[9],authorityLevel:[0,20]})},function(d){return c.sp(b("LSSetMessageDisplayedContentTypes"),a[0],a[2],a[1],e,!1,c.i64.eq(a[5],[0,1]))}])},function(a){return c.resolve(d)}])}e.exports=a}),null);
__d("LSIssueSendAttachmentMessageTask",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSIssueNewTaskAndGetTaskID","LSPredefineTraceForTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(e){return d[0]=c.i64.of_int32(a[5].length),c.i64.gt(d[0],[0,0])?c.loopAsync(d[0],function(e){return d[3]=e,c.seq([function(e){return c.ntop("Array",b("LSArrayGetObjectAt"),a[5],d[3]).then(function(a){return a=a,d[4]=a[0],d[5]=a[1],a})},function(b){return c.fe(c.ftr(c.db.table(16).fetch([[[a[1],a[3]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[3]&&c.i64.eq(b.attachmentIndex,d[3])&&c.i64.eq(b.authorityLevel,[0,20])}),function(a){var b=a.update;a.item;return b({attachmentFbid:c.i64.to_string(d[4])})})}])}):c.resolve()},function(e){return c.i64.eq(f,[0,12])?d[1]=[0,10]:(a[9]?d[3]=[0,9]:d[3]=[0,3],d[1]=d[3]),c.sp(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(a[1]),[0,46],"",f,f,[0,0],[0,0],[0,1],f,[0,0]).then(function(a){return a=a,d[2]=a[0],a})},function(e){return a[12]!==f?c.seq([function(e){return c.sp(b("LSPredefineTraceForTask"),a[12],d[2],c.i64.to_string([0,46]),a[3])},function(d){return c.sp(b("LSAppendDataTraceAddon"),a[12],[0,20],[0,1],f,f)}]):c.resolve()},function(b){return c.db.table(31).add({taskId:d[2],threadKey:a[1],offlineThreadingId:a[3],threadAttributionSource:a[6],platformRef:a[10],platformToken:a[11],replySourceId:a[7],replySourceType:a[8],sendType:d[1],markThreadRead:!1})}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSSetMessageViewFlags",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[],e;return b.seq([function(d){return b.seq([function(d){return b.ftr(b.db.table(12).fetch([[[a[0],a[2],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq([0,0],[0,0])&&b.i64.eq(c.timestampMs,a[2])&&c.messageId===a[1]}).next().then(function(a,b){var d=a.done;a=a.value;return d?(d=[[0,0],[0,0],[0,0],!1,"nonexistent",[0,20],e,[-1,4294967295],[-1,4294967295]],c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=d[6],c[7]=d[7],c[8]=d[8],d):(b=a.item,d=[b.timestampMs,b.senderId,b.viewFlags,b.isAdminMessage,b.messageId,b.authorityLevel,b.stickerId,b.primarySortKey,b.secondarySortKey==null?[-1,4294967295]:b.secondarySortKey],c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=d[6],c[7]=d[7],c[8]=d[8],d)})},function(d){return b.sb(b.ftr(b.db.table(12).fetch([[[a[0],{gt:c[7]}],[a[0],c[7]]],"messageDisplayOrder"]),function(d){return b.i64.eq(d.threadKey,a[0])&&d.messageId!==a[1]&&(b.i64.gt(d.primarySortKey,c[7])||b.i64.eq(d.primarySortKey,c[7])&&b.i64.ge(d.secondarySortKey==null?[-1,4294967295]:d.secondarySortKey,c[8]))}),[["timestampMs","ASC"]],["primarySortKey","secondarySortKey"]).next().then(function(a,b){var d=a.done;a=a.value;return d?(d=[[0,0],[0,0],[0,0],!1,"nonexistent",[0,20],e,[-1,4294967295],[-1,4294967295]],c[10]=d[0],c[11]=d[1],c[12]=d[2],c[13]=d[3],c[14]=d[4],c[15]=d[5],c[16]=d[6],c[17]=d[7],c[18]=d[8],d):(b=a.item,d=[b.timestampMs,b.senderId,b.viewFlags,b.isAdminMessage,b.messageId,b.authorityLevel,b.stickerId,[-1,4294967295],[-1,4294967295]],c[10]=d[0],c[11]=d[1],c[12]=d[2],c[13]=d[3],c[14]=d[4],c[15]=d[5],c[16]=d[6],c[17]=d[7],c[18]=d[8],d)})},function(d){return b.sb(b.ftr(b.db.table(12).fetchDesc([[[a[0],{lt:c[7]}],[a[0],c[7]]],"messageDisplayOrder"]),function(d){return b.i64.eq(d.threadKey,a[0])&&d.messageId!==a[1]&&(b.i64.lt(d.primarySortKey,c[7])||b.i64.eq(d.primarySortKey,c[7])&&b.i64.le(d.secondarySortKey==null?[-1,4294967295]:d.secondarySortKey,c[8]))}),[["timestampMs","DESC"]],["primarySortKey","secondarySortKey"]).next().then(function(a,b){var d=a.done;a=a.value;return d?(d=[[0,0],[0,0],[0,0],!1,"nonexistent",[0,20],e,[-1,4294967295],[-1,4294967295]],c[20]=d[0],c[21]=d[1],c[22]=d[2],c[23]=d[3],c[24]=d[4],c[25]=d[5],c[26]=d[6],c[27]=d[7],c[28]=d[8],d):(b=a.item,d=[b.timestampMs,b.senderId,b.viewFlags,b.isAdminMessage,b.messageId,b.authorityLevel,b.stickerId,[-1,4294967295],[-1,4294967295]],c[20]=d[0],c[21]=d[1],c[22]=d[2],c[23]=d[3],c[24]=d[4],c[25]=d[5],c[26]=d[6],c[27]=d[7],c[28]=d[8],d)})},function(d){return c[32]=b.i64.or_([0,2],b.i64.or_(!c[3]&&!a[3]?[0,4]:[0,0],b.i64.or_(c[3]?[0,0]:[0,1],b.i64.or_(b.i64.eq(c[5],[0,60])||b.i64.eq(c[5],[0,80])?[0,1048576]:[0,0],b.i64.neq(c[6],[85970,924785702])&&b.i64.neq(c[6],[85970,1004785694])&&b.i64.neq(c[6],[85970,1044785690])?[0,0]:[0,2097152])))),c[14]!=="nonexistent"?b.seq([function(d){return c[35]=b.i64.or_(b.i64.and_(c[12],[-1,4294967280]),b.i64.or_(b.i64.gt(b.i64.sub(c[10],c[0]),[0,6e5])?[0,2]:[0,0],b.i64.or_(b.i64.eq(c[11],c[1])&&!c[13]&&!c[3]&&!b.i64.gt(b.i64.sub(c[10],c[0]),[0,6e5])?[0,8]:[0,0],b.i64.or_(!a[3]&&!c[13]&&!(b.i64.eq(c[11],c[1])&&!c[13]&&!c[3]&&!b.i64.gt(b.i64.sub(c[10],c[0]),[0,6e5]))?[0,4]:[0,0],b.i64.and_(c[12],[0,1]))))),c[33]=b.i64.eq(b.i64.and_(c[35],[0,8]),[0,8]),c[34]=c[33]?b.i64.or_(c[32],[0,16]):c[32],b.fe(b.ftr(b.db.table(12).fetch([[[a[0],c[10],c[14]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq([0,0],[0,0])&&b.i64.eq(d.timestampMs,c[10])&&d.messageId===c[14]}),function(a){var b=a.update;a.item;return b({viewFlags:c[35]})})},function(a){return c[30]=c[33]?b.i64.and_(c[34],[-1,4294967294]):c[34]}]):b.resolve(c[30]=c[32])},function(d){return c[24]!=="nonexistent"?b.seq([function(d){return c[35]=b.i64.or_(b.i64.and_(c[30],[-1,4294967280]),b.i64.or_(b.i64.gt(b.i64.sub(c[0],c[20]),[0,6e5])?[0,2]:[0,0],b.i64.or_(b.i64.eq(c[1],c[21])&&!c[3]&&!c[23]&&!b.i64.gt(b.i64.sub(c[0],c[20]),[0,6e5])?[0,8]:[0,0],b.i64.or_(!a[3]&&!c[3]&&!(b.i64.eq(c[1],c[21])&&!c[3]&&!c[23]&&!b.i64.gt(b.i64.sub(c[0],c[20]),[0,6e5]))?[0,4]:[0,0],b.i64.and_(c[30],[0,1]))))),c[33]=b.i64.eq(b.i64.and_(c[35],[0,8]),[0,8]),c[34]=c[33]?b.i64.or_(c[22],[0,16]):c[22],b.fe(b.ftr(b.db.table(12).fetch([[[a[0],c[20],c[24]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq([0,0],[0,0])&&b.i64.eq(d.timestampMs,c[20])&&d.messageId===c[24]}),function(a){var d=a.update;a.item;return d({viewFlags:c[33]?b.i64.and_(c[34],[-1,4294967294]):c[34]})})},function(a){return c[31]=c[35]}]):b.resolve(c[31]=c[30])},function(d){return b.fe(b.ftr(b.db.table(12).fetch([[[a[0],c[0],c[4]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq([0,0],[0,0])&&b.i64.eq(d.timestampMs,c[0])&&d.messageId===c[4]}),function(a){var b=a.update;a.item;return b({viewFlags:c[31]})})}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSLocalApplyOptimisticMessage",["LSCreateOfflineThreadingID","LSGetViewerFBID","LSIssueNewError","LSSetMessageDisplayedContentTypes","LSSetMessageViewFlags","gkx"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(a){return d[7]=c.i64.of_float(Date.now()),f!==f?c.resolve(d[0]=f):c.seq([function(a){return c.sp(b("LSCreateOfflineThreadingID"),d[7]).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[0]=c.i64.to_string(d[9])}])},function(e){return d[8]=a[4]==null?a[3]:a[4],c.seq([function(a){return c.islc(c.db.table(9).fetchDesc([[[]],"lastActivityTimestampMs"]),0,c.i64.to_float([0,1])).next().then(function(a,b){var c=a.done;a=a.value;return c?d[9]=[-1,4294967295]:(b=a.item,d[9]=b.lastActivityTimestampMs)})},function(e){return d[11]=c.i64.add(d[9],[0,1]),d[13]=c.i64.gt(d[7],d[11])?d[7]:d[11],c.db.table(9).fetch([[[a[1]]]]).next().then(function(e,h){h=e.done;e=e.value;return h?c.seq([function(b){return function(a){c.logger(a).info(a)}("localApplyOptimisticMessage insert optimistic thread"),c.fe(c.ftr(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.lt(b.authorityLevel,[0,40])}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:a[1],mailboxType:[0,0],threadType:a[2],clientThreadKey:a[1],folderName:"inbox",parentThreadKey:[0,0],lastActivityTimestampMs:d[13],lastReadWatermarkTimestampMs:d[13],snippet:d[8],snippetHasEmoji:a[5]==null?!1:a[5],snippetSenderContactId:a[0],ongoingCallState:[0,0],authorityLevel:[0,40]})},function(b){return c.i64.eq(a[2],[0,13])||c.i64.eq(a[2],[0,7])||c.i64.eq(a[2],[0,1])?c.seq([function(b){return c.fe(c.ftr(c.db.table(14).fetch([[[a[1],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,a[1])&&c.i64.lt(b.authorityLevel,[0,20])}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[1],contactId:a[1],readWatermarkTimestampMs:[0,0],deliveredWatermarkTimestampMs:[0,0],authorityLevel:[0,20],isModerator:!1})}]):c.resolve()},function(a){return c.sb(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[14]=!1:(b=a.item,d[14]=b.errorShouldBeShown)})},function(a){return d[14]===!0?c.seq([function(a){return c.localizeV2Async([0,2285622730],f).then(function(a){return d[16]=a})},function(a){return c.localizeV2Async([0,1919524925],f).then(function(a){return d[17]=a})},function(a){return c.sp(b("LSIssueNewError"),f,[0,1545093],d[16],d[17],f)}]):c.resolve()}]):(e.item,c.fe(c.ftr(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(b.threadType,a[2])}),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:d[13],lastReadWatermarkTimestampMs:d[13],snippet:d[8],snippetHasEmoji:a[5]==null?!1:a[5],snippetSenderContactId:a[0],snippetStringHash:f,snippetStringArgument1:f,snippetAttribution:f,snippetAttributionStringHash:f})}))})}])},function(e){return c.seq([function(b){return c.islc(c.ftr(c.db.table(12).fetchDesc([[[a[1]]],"messageDisplayOrder"]),function(b){return c.i64.eq(b.threadKey,a[1])&&(c.i64.eq(b.authorityLevel,[0,80])||c.i64.eq(b.authorityLevel,[0,60])||c.i64.eq(b.authorityLevel,[0,40]))}),0,c.i64.to_float([0,1])).next().then(function(a,b){var e=a.done;a=a.value;return e?d[9]=c.i64.of_float(Date.now()):(b=a.item,d[9]=b.primarySortKey)})},function(e){return a[8]!==f&&(c.i64.eq(a[9],[0,1])||c.i64.eq(a[10],[0,1]))?c.seq([function(e){return c.ftr(c.db.table(12).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===(a[8]==null?"":a[8])}).next().then(function(e,h){var i=e.done;e=e.value;return i?(i=[a[8],f,f,[0,0],f,f,f,f,f,f,f,f,f,f,f,f],d[33]=i[0],d[34]=i[1],d[35]=i[2],d[36]=i[3],d[37]=i[4],d[38]=i[5],d[39]=i[6],d[40]=i[7],d[41]=i[8],d[42]=i[9],d[43]=i[10],d[44]=i[11],d[45]=i[12],d[46]=i[13],d[47]=i[14],d[48]=i[15],i):(h=e.item,c.seq([function(e){return d[55]=h.senderId,d[53]=h.stickerId,c.i64.neq(d[53],f)?(e=[d[53],[0,4]],d[56]=e[0],d[57]=e[1],e):(e=[f,f],d[56]=e[0],d[57]=e[1],e),e=[d[56],d[57]],d[50]=e[0],d[51]=e[1],e,d[54]=h.replyType==null?[0,0]:h.replyType,c.seq([function(e){return c.seq([function(a){return c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[57]=a[0],a})},function(e){return c.i64.eq(d[54],[0,1])?c.seq([function(e){return c.i64.eq(a[0],d[57])?c.seq([function(e){return c.i64.eq(d[55],d[57])?c.seq([function(a){return c.localizeV2Async([0,2421884758],f).then(function(a){return d[61]=a})},function(a){return d[60]=d[61]}]):c.seq([function(e){return c.seq([function(e){return d[64]=b("gkx")("7530"),d[64]?c.seq([function(a){return c.ftr(c.db.table(7).fetch([[[d[55]]]]),function(a){return c.i64.eq(a.id,d[55])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,2352696798],f).then(function(a){return d[68]=a})},function(a){return d[66]=d[68]}]):(e=b.item,d[66]=e.name)})},function(a){return d[65]=d[66]}]):c.seq([function(b){return c.ftr(c.db.table(14).fetch([[[a[1],d[55]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,d[55])}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[66]=f:(c=b.item,d[66]=c.nickname)})},function(a){return c.ftr(c.db.table(7).fetch([[[d[55]]]]),function(a){return c.i64.eq(a.id,d[55])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,14617150],f).then(function(a){return d[70]=a})},function(a){return d[68]=d[70]}]):(e=b.item,d[68]=e.firstName==null?e.name:e.firstName)})},function(a){return d[65]=d[66]==null?d[68]:d[66]}])},function(a){return d[61]=d[65]}])},function(a){return d[62]=c.createArray(),d[64]=(d[62].push(d[61]),d[62]),c.localizeV2Async([0,2676961947],d[62]).then(function(a){return d[63]=a})},function(a){return d[60]=d[63]}])},function(a){return d[59]=d[60]}]):c.seq([function(e){return c.seq([function(e){return d[62]=b("gkx")("7530"),d[62]?c.seq([function(b){return c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,2352696798],f).then(function(a){return d[66]=a})},function(a){return d[64]=d[66]}]):(e=b.item,d[64]=e.name)})},function(a){return d[63]=d[64]}]):c.seq([function(b){return c.ftr(c.db.table(14).fetch([[[a[1],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,a[0])}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[64]=f:(c=b.item,d[64]=c.nickname)})},function(b){return c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,14617150],f).then(function(a){return d[68]=a})},function(a){return d[66]=d[68]}]):(e=b.item,d[66]=e.firstName==null?e.name:e.firstName)})},function(a){return d[63]=d[64]==null?d[66]:d[64]}])},function(a){return d[60]=d[63]}])},function(e){return c.i64.eq(d[55],d[57])?c.seq([function(a){return d[62]=c.createArray(),d[64]=(d[62].push(d[60]),d[62]),c.localizeV2Async([0,3298086032],d[62]).then(function(a){return d[63]=a})},function(a){return d[61]=d[63]}]):c.seq([function(e){return c.i64.eq(a[0],d[55])?c.seq([function(a){return d[63]=c.createArray(),d[65]=(d[63].push(d[60]),d[63]),c.localizeV2Async([0,3873263038],d[63]).then(function(a){return d[64]=a})},function(a){return d[62]=d[64]}]):c.seq([function(e){return c.seq([function(e){return d[66]=b("gkx")("7530"),d[66]?c.seq([function(a){return c.ftr(c.db.table(7).fetch([[[d[55]]]]),function(a){return c.i64.eq(a.id,d[55])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,2352696798],f).then(function(a){return d[70]=a})},function(a){return d[68]=d[70]}]):(e=b.item,d[68]=e.name)})},function(a){return d[67]=d[68]}]):c.seq([function(b){return c.ftr(c.db.table(14).fetch([[[a[1],d[55]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,d[55])}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[68]=f:(c=b.item,d[68]=c.nickname)})},function(a){return c.ftr(c.db.table(7).fetch([[[d[55]]]]),function(a){return c.i64.eq(a.id,d[55])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,14617150],f).then(function(a){return d[72]=a})},function(a){return d[70]=d[72]}]):(e=b.item,d[70]=e.firstName==null?e.name:e.firstName)})},function(a){return d[67]=d[68]==null?d[70]:d[68]}])},function(a){return d[63]=d[67]}])},function(a){return d[64]=c.createArray(),d[66]=(d[64].push(d[60]),d[64]),d[66]=(d[64].push(d[63]),d[64]),c.localizeV2Async([0,2616853333],d[64]).then(function(a){return d[65]=a})},function(a){return d[62]=d[65]}])},function(a){return d[61]=d[62]}])},function(a){return d[59]=d[61]}])},function(a){return d[58]=d[59]}]):c.seq([function(e){return c.i64.eq(a[0],d[57])?c.seq([function(e){return c.i64.eq(d[55],d[57])?c.seq([function(a){return c.localizeV2Async([0,4002265907],f).then(function(a){return d[61]=a})},function(a){return d[60]=d[61]}]):c.seq([function(e){return c.seq([function(e){return d[64]=b("gkx")("7530"),d[64]?c.seq([function(a){return c.ftr(c.db.table(7).fetch([[[d[55]]]]),function(a){return c.i64.eq(a.id,d[55])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,2352696798],f).then(function(a){return d[68]=a})},function(a){return d[66]=d[68]}]):(e=b.item,d[66]=e.name)})},function(a){return d[65]=d[66]}]):c.seq([function(b){return c.ftr(c.db.table(14).fetch([[[a[1],d[55]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,d[55])}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[66]=f:(c=b.item,d[66]=c.nickname)})},function(a){return c.ftr(c.db.table(7).fetch([[[d[55]]]]),function(a){return c.i64.eq(a.id,d[55])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,14617150],f).then(function(a){return d[70]=a})},function(a){return d[68]=d[70]}]):(e=b.item,d[68]=e.firstName==null?e.name:e.firstName)})},function(a){return d[65]=d[66]==null?d[68]:d[66]}])},function(a){return d[61]=d[65]}])},function(a){return d[62]=c.createArray(),d[64]=(d[62].push(d[61]),d[62]),c.localizeV2Async([0,2663996736],d[62]).then(function(a){return d[63]=a})},function(a){return d[60]=d[63]}])},function(a){return d[59]=d[60]}]):c.seq([function(e){return c.seq([function(e){return d[62]=b("gkx")("7530"),d[62]?c.seq([function(b){return c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,2352696798],f).then(function(a){return d[66]=a})},function(a){return d[64]=d[66]}]):(e=b.item,d[64]=e.name)})},function(a){return d[63]=d[64]}]):c.seq([function(b){return c.ftr(c.db.table(14).fetch([[[a[1],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,a[0])}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[64]=f:(c=b.item,d[64]=c.nickname)})},function(b){return c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,14617150],f).then(function(a){return d[68]=a})},function(a){return d[66]=d[68]}]):(e=b.item,d[66]=e.firstName==null?e.name:e.firstName)})},function(a){return d[63]=d[64]==null?d[66]:d[64]}])},function(a){return d[60]=d[63]}])},function(e){return c.i64.eq(d[55],d[57])?c.seq([function(a){return d[62]=c.createArray(),d[64]=(d[62].push(d[60]),d[62]),c.localizeV2Async([0,2868699317],d[62]).then(function(a){return d[63]=a})},function(a){return d[61]=d[63]}]):c.seq([function(e){return c.i64.eq(a[0],d[55])?c.seq([function(a){return d[63]=c.createArray(),d[65]=(d[63].push(d[60]),d[63]),c.localizeV2Async([0,2688620547],d[63]).then(function(a){return d[64]=a})},function(a){return d[62]=d[64]}]):c.seq([function(e){return c.seq([function(e){return d[66]=b("gkx")("7530"),d[66]?c.seq([function(a){return c.ftr(c.db.table(7).fetch([[[d[55]]]]),function(a){return c.i64.eq(a.id,d[55])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,2352696798],f).then(function(a){return d[70]=a})},function(a){return d[68]=d[70]}]):(e=b.item,d[68]=e.name)})},function(a){return d[67]=d[68]}]):c.seq([function(b){return c.ftr(c.db.table(14).fetch([[[a[1],d[55]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,d[55])}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[68]=f:(c=b.item,d[68]=c.nickname)})},function(a){return c.ftr(c.db.table(7).fetch([[[d[55]]]]),function(a){return c.i64.eq(a.id,d[55])&&c.i64.eq([0,1],[0,1])}).next().then(function(b,e){var a=b.done;b=b.value;return a?c.seq([function(a){return c.localizeV2Async([0,14617150],f).then(function(a){return d[72]=a})},function(a){return d[70]=d[72]}]):(e=b.item,d[70]=e.firstName==null?e.name:e.firstName)})},function(a){return d[67]=d[68]==null?d[70]:d[68]}])},function(a){return d[63]=d[67]}])},function(a){return d[64]=c.createArray(),d[66]=(d[64].push(d[60]),d[64]),d[66]=(d[64].push(d[63]),d[64]),c.localizeV2Async([0,3544071775],d[64]).then(function(a){return d[65]=a})},function(a){return d[62]=d[65]}])},function(a){return d[61]=d[62]}])},function(a){return d[59]=d[61]}])},function(a){return d[58]=d[59]}])},function(a){return d[56]=d[58]}])},function(b){return d[52]=c.i64.eq(a[10],[0,1])?d[56]:""}])},function(b){return b=[a[8],a[9],a[10],[0,1],d[52],d[55],h.text,d[50],d[51],f,f,f,f,f,f,d[54]],d[33]=b[0],d[34]=b[1],d[35]=b[2],d[36]=b[3],d[37]=b[4],d[38]=b[5],d[39]=b[6],d[40]=b[7],d[41]=b[8],d[42]=b[9],d[43]=b[10],d[44]=b[11],d[45]=b[12],d[46]=b[13],d[47]=b[14],d[48]=b[15],b}]))})},function(a){return a=[d[33],d[34],d[35],d[36],d[37],d[38],d[39],d[40],d[41],d[42],d[43],d[44],d[45],d[46],d[47],d[48]],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4],d[16]=a[5],d[17]=a[6],d[18]=a[7],d[19]=a[8],d[20]=a[9],d[21]=a[10],d[22]=a[11],d[23]=a[12],d[24]=a[13],d[25]=a[14],d[26]=a[15],a}]):c.resolve((a[8]===f||c.i64.eq(a[9],[0,0])||c.i64.eq(a[10],[0,0])?(e=[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],d[33]=e[0],d[34]=e[1],d[35]=e[2],d[36]=e[3],d[37]=e[4],d[38]=e[5],d[39]=e[6],d[40]=e[7],d[41]=e[8],d[42]=e[9],d[43]=e[10],d[44]=e[11],d[45]=e[12],d[46]=e[13],d[47]=e[14],d[48]=e[15],e):(e=[a[8],a[9],a[10],[0,1],f,f,f,f,f,f,f,f,f,f,f,f],d[33]=e[0],d[34]=e[1],d[35]=e[2],d[36]=e[3],d[37]=e[4],d[38]=e[5],d[39]=e[6],d[40]=e[7],d[41]=e[8],d[42]=e[9],d[43]=e[10],d[44]=e[11],d[45]=e[12],d[46]=e[13],d[47]=e[14],d[48]=e[15],e),e=[d[33],d[34],d[35],d[36],d[37],d[38],d[39],d[40],d[41],d[42],d[43],d[44],d[45],d[46],d[47],d[48]],d[11]=e[0],d[12]=e[1],d[13]=e[2],d[14]=e[3],d[15]=e[4],d[16]=e[5],d[17]=e[6],d[18]=e[7],d[19]=e[8],d[20]=e[9],d[21]=e[10],d[22]=e[11],d[23]=e[12],d[24]=e[13],d[25]=e[14],d[26]=e[15],e))},function(b){return a[13]?d[27]=!1:d[27]=!0,d[27]?(b=[f,f,f,f],d[28]=b[0],d[29]=b[1],d[30]=b[2],d[31]=b[3],b):(d[33]=a[13].get("mention_offsets"),a[13],d[34]=a[13].get("mention_lengths"),a[13],d[35]=a[13].get("mention_ids"),a[13],d[36]=a[13].get("mention_types"),a[13],b=[d[33],d[34],d[35],d[36]],d[28]=b[0],d[29]=b[1],d[30]=b[2],d[31]=b[3],b),a[11]?d[32]=[0,3]:d[32]=d[13],c.i64.eq([0,20],[0,20])?c.db.table(12).add({threadKey:a[1],messageId:d[0],timestampMs:d[7],offlineThreadingId:d[0],primarySortKey:d[9],secondarySortKey:d[7],text:a[3],senderId:a[0],stickerId:a[6],hotEmojiSize:a[7],isForwarded:a[11],forwardScore:a[12],isAdminMessage:!1,sendStatus:[0,1],sendStatusV2:[0,1],authorityLevel:[0,20],replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[32],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],replyType:d[26],mentionOffsets:d[28],mentionLengths:d[29],mentionIds:d[30],mentionTypes:d[31]}):c.seq([function(a){return c.db.table(12).fetch([[[d[0]]],"optimistic"]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[d[9],d[7],f],d[33]=c[0],d[34]=c[1],d[35]=c[2],c):(b=a.item,c=[b.primarySortKey,b.secondarySortKey,b.localDataId],d[33]=c[0],d[34]=c[1],d[35]=c[2],c)})},function(a){return c.fe(c.ftr(c.db.table(12).fetch([[[d[0]]],"optimistic"]),function(a){return a.offlineThreadingId===d[0]&&c.i64.lt(a.authorityLevel,[0,20])}),function(a){return a["delete"]()})},function(b){return c.db.table(12).add({threadKey:a[1],messageId:d[0],timestampMs:d[7],offlineThreadingId:d[0],primarySortKey:d[33],secondarySortKey:d[34],text:a[3],senderId:a[0],stickerId:a[6],hotEmojiSize:a[7],isForwarded:a[11],forwardScore:a[12],isAdminMessage:!1,sendStatus:[0,1],sendStatusV2:[0,1],authorityLevel:[0,20],localDataId:d[35],replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[32],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],replyType:d[26],mentionOffsets:d[28],mentionLengths:d[29],mentionIds:d[30],mentionTypes:d[31]})}])}])},function(e){return d[1]=c.createArray(),d[2]=(d[1].push("LSMailboxLocalApplyOptimisticMessageStoredProcedure"),d[1]),d[3]=(d[1].push("localApplyOptimisticMessage"),d[1]),d[4]=(d[1].push(a[1]),d[1]),d[5]=(d[1].push(d[0]),d[1]),d[6]=c.toJSON(d[1]),function(a){c.logger(a).info(a)}(d[6]),a[14]?c.seq([function(e){return c.sp(b("LSSetMessageViewFlags"),a[1],d[0],d[7],c.i64.eq(a[2],[0,1]))},function(e){return c.sp(b("LSSetMessageDisplayedContentTypes"),a[1],d[0],d[7],a[3],!1,c.i64.neq(a[6],f))}]):c.resolve()},function(a){return a=[d[0],d[7]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSUpdateOptimisticAttachmentPreview",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d;return b.seq([function(c){return b.fe(b.ftr(b.db.table(16).fetch([[[a[0],a[1],a[2]]]]),function(c){return c.attachmentFbid===a[2]&&b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.authorityLevel,[0,20])}),function(b){var c=b.update;b.item;return c({playableUrl:a[3],playableUrlFallback:a[4],playableUrlExpirationTimestampMs:a[5],playableUrlMimeType:a[6],previewUrl:a[7],previewUrlFallback:a[8],previewUrlExpirationTimestampMs:a[9],previewUrlMimeType:a[10],previewWidth:a[11],previewHeight:a[12],imageUrl:d,imageUrlFallback:d,imageUrlExpirationTimestampMs:d,imageUrlMimeType:d})})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSOptimisticSendAttachmentForward",["LSInsertOptimisticAttachment","LSIssueNewTaskAndGetTaskID","LSLocalApplyOptimisticMessage","LSUpdateOptimisticAttachmentPreview"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return d[1]=a[3]===""?f:a[3],d[1]!==f?c.seq([function(b){return c.fe(c.ftr(c.db.table(16).fetch([[[a[1],d[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===d[1]&&c.i64.eq(b.authorityLevel,[0,20])}),function(b){var d=b.update;b.item;return d({attachmentFbid:c.i64.to_string(a[7])})})},function(a){return d[0]=d[1]}]):c.seq([function(e){return c.sp(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],a[4],a[5],a[6],f,f,f,f,[0,3],f,f,f,!0).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],a})},function(e){return c.ftr(c.db.table(16).fetch(),function(b){return b.attachmentFbid===c.i64.to_string(a[7])}).next().then(function(e,h){var i=e.done;e=e.value;return i?c.sp(b("LSInsertOptimisticAttachment"),a[1],d[3],d[2],d[2],c.i64.to_string(a[7]),[0,2],f,f,!0,!1):(h=e.item,c.seq([function(e){return c.sp(b("LSInsertOptimisticAttachment"),a[1],d[3],d[2],d[2],c.i64.to_string(a[7]),h.attachmentType,h.filename,h.attributionAppId,!0,!1)},function(e){return c.sp(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[2],c.i64.to_string(a[7]),h.playableUrl,h.playableUrlFallback,h.playableUrlExpirationTimestampMs,h.playableUrlMimeType,h.previewUrl,h.previewUrlFallback,h.previewUrlExpirationTimestampMs,h.previewUrlMimeType,h.previewWidth,h.previewHeight)}]))})},function(a){return d[0]=d[2]}])},function(e){return c.seq([function(e){return d[2]=c.createArray(),d[9]=(d[2].push(a[7]),d[2]),c.sp(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(a[1]),[0,46],"",f,f,[0,0],[0,0],[0,1],f,[0,0]).then(function(a){return a=a,d[3]=a[0],a})},function(b){return c.db.table(31).add({taskId:d[3],threadKey:a[1],offlineThreadingId:d[0],threadAttributionSource:a[8],sendType:[0,4],markThreadRead:!1,initiatingSource:a[9]})},function(b){return d[4]=c.createArray(),d[5]=(d[4].push("optimisticSendAttachmentForward"),d[4]),d[6]=(d[4].push(a[1]),d[4]),d[7]=(d[4].push(a[7]),d[4]),d[8]=c.toJSON(d[4]),function(a){c.logger(a).info(a)}(d[8])}])},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSOptimisticSendMessageForward",["LSInsertOptimisticAttachment","LSIssueNewTaskAndGetTaskID","LSLocalApplyOptimisticMessage","LSPredefineTraceForTask","LSUpdateOptimisticAttachmentPreview"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return c.ftr(c.db.table(12).fetch([[[a[3],a[4],a[5]]]]),function(b){return c.i64.eq(b.threadKey,a[3])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.timestampMs,a[4])&&b.messageId===a[5]&&c.i64.eq(b.authorityLevel,[0,80])}).next().then(function(e,h){var i=e.done;e=e.value;return i?(d[2]=c.createArray(),d[3]=(d[2].push("optimisticSendMessageForward msg not found"),d[2]),d[4]=(d[2].push(a[5]),d[2]),d[5]=c.toJSON(d[2]),function(a){c.logger(a).mustfix(a)}(d[5]),d[0]=""):(h=e.item,c.seq([function(e){return d[8]=h.forwardScore,d[2]=h.text,d[3]=d[8],c.sp(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],d[2],f,f,h.stickerId,h.hotEmojiSize,f,f,[0,3],f,d[3],f,!0).then(function(a){return a=a,d[4]=a[0],d[5]=a[1],a})},function(e){return c.fe(c.db.table(16).fetch([[[h.threadKey,h.messageId]]]),function(e){var h=e.item;return c.seq([function(e){return d[13]=h.attachmentFbid,d[9]=c.createArray(),d[10]=(d[9].push(d[13]),d[9]),d[11]=(d[9].push(d[4]),d[9]),d[12]=c.toJSON(d[9]),c.sp(b("LSInsertOptimisticAttachment"),a[1],d[5],d[4],d[13],d[12],h.attachmentType,h.filename,f,h.hasMedia,h.hasXma)},function(e){return c.sp(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[4],d[12],h.playableUrl,h.playableUrlFallback,h.playableUrlExpirationTimestampMs,h.playableUrlMimeType,h.previewUrl,h.previewUrlFallback,h.previewUrlExpirationTimestampMs,h.previewUrlMimeType,h.previewWidth,h.previewHeight)}])})},function(e){return c.sp(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(a[1]),[0,46],"",f,f,[0,0],[0,0],[0,1],f,[0,0]).then(function(a){return a=a,d[6]=a[0],a})},function(a){return f!==f?c.sp(b("LSPredefineTraceForTask"),f,d[6],c.i64.to_string([0,46]),d[4]):c.resolve()},function(b){return c.db.table(31).add({taskId:d[6],threadKey:a[1],offlineThreadingId:d[4],messageId:a[5],threadAttributionSource:a[6],sendType:[0,5],markThreadRead:!1,initiatingSource:a[7]})},function(b){return d[9]=new c.Map(),d[10]=d[9].set("optimisticSendMessageForward",a[1]),d[11]=d[9].set("fwdMsgID",a[5]),d[12]=c.toJSON(d[9]),d[7]=d[12],function(a){c.logger(a).info(a)}(d[7]),d[0]=d[4]}]))})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSAppendDataTraceAddon.bs",["LS.bs","LSAppendDataTraceAddon","bs_belt_Option","killswitch"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h){if(b("killswitch")("MESSENGER_WEB_DATA_TRACE_ID"))return window.Promise.resolve();else return b("LSAppendDataTraceAddon")(d,e,f,b("bs_belt_Option").getWithDefault(g,""),b("bs_belt_Option").getWithDefault(h,""),b("LS.bs").make(a))}f.call=a}),null);
__d("LSAppendDataTraceAddon.re",["LSAppendDataTraceAddon.bs"],(function(a,b,c,d,e,f){a=b("LSAppendDataTraceAddon.bs").call;f.call=a}),null);
__d("LSAppendDataTraceAddon.nop",["LSAppendDataTraceAddon.re"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,c,e,f,g,h){return d("LSAppendDataTraceAddon.re").call(a,b,c,e,f,g,h)};g["default"]=a}),98);
__d("LSOptimisticSendMessage",["LSAppendDataTraceAddon.nop","LSInsertOptimisticAttachment","LSIssueNewTaskAndGetTaskID","LSLocalApplyOptimisticMessage","LSLogEventAnnotate.nop","LSOptimisticMarkThreadReadV2","LSPredefineTraceForTask","LSUpdateOptimisticAttachmentPreview"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return c.sp(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],a[4],a[5],a[6],a[7],a[8],a[14],a[15],a[16],a[17],a[18],a[19],a[21]).then(function(a){return a=a,d[0]=a[0],d[1]=a[1],a})},function(e){return d[10]=a[9]===""?f:a[9],d[10]!==f?c.seq([function(e){return c.sp(b("LSInsertOptimisticAttachment"),a[1],d[1],d[0],d[0],d[0],[0,3],d[10],a[10],!0,!1)},function(e){return a[22]?d[11]=!1:d[11]=!0,d[11]?c.resolve():(d[12]=a[22].get("playable_url"),a[22],d[13]=a[22].get("playable_url_fallback"),a[22],d[14]=a[22].get("playable_url_expiration_timestamp_ms"),a[22],d[15]=a[22].get("playable_url_mime_type"),a[22],d[16]=a[22].get("preview_url"),a[22],d[17]=a[22].get("preview_url_fallback"),a[22],d[18]=a[22].get("preview_url_expiration_timestamp_ms"),a[22],d[19]=a[22].get("preview_url_mime_type"),a[22],d[20]=a[22].get("preview_width"),a[22],d[21]=a[22].get("preview_height"),a[22],d[22]=a[22].get("image_url"),a[22],d[23]=a[22].get("image_url_fallback"),a[22],d[24]=a[22].get("image_url_expiration_timestamp_ms"),a[22],d[25]=a[22].get("image_url_mime_type"),a[22],c.sp(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[0],d[0],d[12],d[13],d[14],d[15],d[16],d[17],d[18],d[19],d[20],d[21]))},function(a){return d[2]=[0,7]}]):c.seq([function(e){return c.i64.neq(a[7],f)?c.seq([function(e){return c.i64.neq(a[7],[53057,267535043])&&c.i64.neq(a[7],[85970,924785702])&&c.i64.neq(a[7],[85970,1004785694])&&c.i64.neq(a[7],[85970,1044785690])?c.seq([function(e){return d[13]=c.i64.to_string(a[7]),c.sp(b("LSInsertOptimisticAttachment"),a[1],d[1],d[0],c.i64.to_string(a[7]),d[13],[0,1],f,f,!0,!1)},function(e){return a[22]?d[12]=!1:d[12]=!0,d[12]?c.resolve():(d[14]=a[22].get("playable_url"),a[22],d[15]=a[22].get("playable_url_fallback"),a[22],d[16]=a[22].get("playable_url_expiration_timestamp_ms"),a[22],d[17]=a[22].get("playable_url_mime_type"),a[22],d[18]=a[22].get("preview_url"),a[22],d[19]=a[22].get("preview_url_fallback"),a[22],d[20]=a[22].get("preview_url_expiration_timestamp_ms"),a[22],d[21]=a[22].get("preview_url_mime_type"),a[22],d[22]=a[22].get("preview_width"),a[22],d[23]=a[22].get("preview_height"),a[22],d[24]=a[22].get("image_url"),a[22],d[25]=a[22].get("image_url_fallback"),a[22],d[26]=a[22].get("image_url_expiration_timestamp_ms"),a[22],d[27]=a[22].get("image_url_mime_type"),a[22],c.sp(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[0],d[13],d[14],d[15],d[16],d[17],d[18],d[19],d[20],d[21],d[22],d[23]))}]):c.resolve()},function(a){return d[11]=[0,2]}]):c.resolve(d[11]=[0,1])},function(a){return d[2]=d[11]}])},function(e){return c.sp(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(a[1]),[0,46],"",f,f,[0,0],[0,0],[0,1],f,[0,0]).then(function(a){return a=a,d[3]=a[0],a})},function(e){return a[24]!==f?c.seq([function(e){return c.sp(b("LSPredefineTraceForTask"),a[24],d[3],c.i64.to_string([0,46]),d[0])},function(d){return c.nop(b("LSAppendDataTraceAddon.nop"),a[24],[0,20],[0,1],f,f)}]):c.resolve()},function(b){return c.db.table(31).add({taskId:d[3],threadKey:a[1],offlineThreadingId:d[0],threadAttributionSource:a[11],externalAttachmentUrl:a[9],platformRef:a[12],platformToken:a[13],replySourceId:a[14],replySourceType:a[15],sendType:d[2],markThreadRead:a[20]==null?!1:a[20],initiatingSource:a[23],skipUrlPreviewGen:a[25]})},function(e){return(a[20]==null?!1:a[20])?c.sp(b("LSOptimisticMarkThreadReadV2"),a[1],d[1]):c.resolve()},function(e){return d[4]=c.createArray(),d[5]=(d[4].push("optimisticSendMessage"),d[4]),d[6]=(d[4].push(a[1]),d[4]),d[7]=(d[4].push(d[0]),d[4]),d[8]=c.toJSON(d[4]),function(a){c.logger(a).info(a)}(d[8]),d[9]=new c.Map(),d[9].set("offline_threading_id",d[0]),d[9].set("task_id",d[3]),d[9].set("task_queue_name",c.i64.to_string(a[1])),d[9].set("task_label",c.i64.to_string([0,1])),c.nop(b("LSLogEventAnnotate.nop"),[0,16],[0,23],[0,0],d[9])},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSGetMessageAttributionParams",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[],e;return b.seq([function(f){return b.seq([function(d){return b.ftr(b.db.table(31).fetch(),function(b){return b.offlineThreadingId===a[0]}).next().then(function(a,b){var d=a.done;a=a.value;return d?(d=[e,e,e],c[0]=d[0],c[1]=d[1],c[2]=d[2],d):(b=a.item,d=[b.threadAttributionSource,b.platformRef,b.platformToken],c[0]=d[0],c[1]=d[1],c[2]=d[2],d)})},function(a){return a=[c[0],c[1],c[2]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSInsertPhase2PendingTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[],e;return b.seq([function(f){return b.seq([function(d){return b.db.table(12).fetch([[[a[0]]],"optimistic"]).next().then(function(a,b){var d=a.done;a=a.value;return d?c[0]=e:(b=a.item,c[0]=b.threadKey)})},function(d){return b.i64.neq(c[0],e)?b.seq([function(d){return b.db.table(2).add({taskId:void 0,taskValue:a[0],queueName:[b.i64.to_string(c[0]),"_multi_media"].join(""),context:"4",enqueueTimestampMs:b.i64.of_float(Date.now()),pluginType:a[1]})},function(a){return c[2]=e}]):b.resolve(c[2]=[0,1002])},function(a){return d[0]=c[2]}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSMarkSubJobCompletedV2",["LSArrayGetObjectAt"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return d[0]=c.createArray(),c.db.table(51).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?0:(b=a.item,d[3]=new c.Map(),d[3].set("offline_attachment_id",b.offlineAttachmentId),d[3].set("offline_threading_id",b.offlineThreadingId),d[3].set("in_message_index",b.inMessageIndex),d[3].set("attachment_type",b.attachmentType),d[3].set("should_transcode",b.shouldTranscode),d[3].set("use_double_phase",b.useDoublePhase),d[3].set("send_by_server",b.sendByServer),d[3].set("is_secure",b.isSecure),d[3].set("state",b.state),d[3].set("fbid",b.fbid),d[3].set("metadata",b.metadata),d[3].set("error",b.error),d[3].set("message_id",b.messageId),d[4]=(d[0].push(d[3]),d[0]))})},function(e){return d[2]=c.i64.of_int32(d[0].length),c.i64.neq(d[2],[0,0])?c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[0],[0,0]).then(function(a){return a=a,d[3]=a[0],d[4]=a[1],a})},function(b){return d[5]=d[3].get("state"),d[3],c.i64.neq(a[1],f)?a[2]!==f?(c.i64.eq(d[5],[-1,4294967293])?(d[7]=[-1,4294967295],d[6]=d[7]):(c.i64.eq(d[5],[0,1])?d[7]=[0,2]:(c.i64.eq(d[5],[0,3])?d[8]=[0,4]:(c.i64.eq(d[5],[0,5])?d[9]=[0,6]:(c.i64.eq(d[5],[0,13])?d[10]=[0,14]:(c.i64.eq(d[5],[0,7])?d[11]=[0,8]:(c.i64.eq(d[5],[0,9])?d[12]=[0,10]:(c.i64.eq(d[5],[0,11])?d[13]=[0,12]:d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.fe(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],fbid:a[1],messageId:a[2],metadata:a[3]})})):(c.i64.eq(d[5],[-1,4294967293])?(d[7]=[-1,4294967295],d[6]=d[7]):(c.i64.eq(d[5],[0,1])?d[7]=[0,2]:(c.i64.eq(d[5],[0,3])?d[8]=[0,4]:(c.i64.eq(d[5],[0,5])?d[9]=[0,6]:(c.i64.eq(d[5],[0,13])?d[10]=[0,14]:(c.i64.eq(d[5],[0,7])?d[11]=[0,8]:(c.i64.eq(d[5],[0,9])?d[12]=[0,10]:(c.i64.eq(d[5],[0,11])?d[13]=[0,12]:d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.fe(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],fbid:a[1],metadata:a[3]})})):c.i64.neq(a[4],f)?(c.i64.eq(d[5],[-1,4294967293])?(d[7]=[-1,4294967295],d[6]=d[7]):(c.i64.eq(d[5],[0,1])?d[7]=[0,2]:(c.i64.eq(d[5],[0,3])?d[8]=[0,4]:(c.i64.eq(d[5],[0,5])?d[9]=[0,6]:(c.i64.eq(d[5],[0,13])?d[10]=[0,14]:(c.i64.eq(d[5],[0,7])?d[11]=[0,8]:(c.i64.eq(d[5],[0,9])?d[12]=[0,10]:(c.i64.eq(d[5],[0,11])?d[13]=[0,12]:d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.fe(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],error:a[4]})})):(c.i64.eq(d[5],[-1,4294967293])?(d[7]=[-1,4294967295],d[6]=d[7]):(c.i64.eq(d[5],[0,1])?d[7]=[0,2]:(c.i64.eq(d[5],[0,3])?d[8]=[0,4]:(c.i64.eq(d[5],[0,5])?d[9]=[0,6]:(c.i64.eq(d[5],[0,13])?d[10]=[0,14]:(c.i64.eq(d[5],[0,7])?d[11]=[0,8]:(c.i64.eq(d[5],[0,9])?d[12]=[0,10]:(c.i64.eq(d[5],[0,11])?d[13]=[0,12]:d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.fe(c.db.table(51).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({state:d[6]})}))}]):c.resolve()}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSRemoveMediaSendJobs",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.ftr(b.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSResumeMediaSendJob",["LSGetMessageAttributionParams","LSInsertPhase2PendingTask","LSIssueSendAttachmentMessageTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(b){return d[0]=new c.Map(),d[1]=new c.Map(),d[1].set("main_job_succeeded",!1),d[1].set("resume_failed",!1),d[1].set("error",f),d[1].set("running_sub_job_states",d[0]),d[2]=new c.Map(),d[2].set("should_transcode",!1),d[2].set("use_double_phase",!1),d[2].set("send_by_server",!1),d[2].set("is_secure",!1),d[2].set("should_dedupe",!1),c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["state","ASC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?0:(b=a.item,d[2].set("should_transcode",b.shouldTranscode),d[2].set("use_double_phase",b.useDoublePhase),d[2].set("send_by_server",b.sendByServer),d[2].set("is_secure",b.isSecure))})},function(b){return d[4]=new c.Map(),c.fe(c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[13]=a.offlineAttachmentId,d[11]=a.state,d[12]=a.error,c.i64.eq(d[11],[-1,4294967293])?d[10]=!0:(c.i64.eq(d[11],[0,1])?d[14]=!0:(c.i64.eq(d[11],[0,3])?d[15]=!0:(c.i64.eq(d[11],[0,5])?d[16]=!0:(c.i64.eq(d[11],[0,13])?d[17]=!0:(c.i64.eq(d[11],[0,7])?d[18]=!0:(c.i64.eq(d[11],[0,9])?d[19]=!0:(c.i64.eq(d[11],[0,11])?d[20]=!0:d[20]=!1,d[19]=d[20]),d[18]=d[19]),d[17]=d[18]),d[16]=d[17]),d[15]=d[16]),d[14]=d[15]),d[10]=d[14]),d[10]?c.resolve(c.i64.eq(d[11],[0,5])||c.i64.eq(d[11],[0,11])?0:d[4].set(d[13],d[11])):c.i64.neq(d[12],f)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[12]))):(c.i64.eq(d[11],[-1,4294967295])?d[14]=[0,5]:(c.i64.eq(d[11],[-1,4294967294])?(d[16]=d[2].get("should_transcode"),d[2],d[15]=d[16]?[0,1]:[0,3]):(c.i64.eq(d[11],[0,2])?d[16]=[0,3]:(c.i64.eq(d[11],[0,4])?(d[18]=d[2].get("send_by_server"),d[2],d[19]=d[2].get("use_double_phase"),d[2],d[17]=d[18]?d[19]?[0,13]:f:[0,5]):(c.i64.eq(d[11],[0,6])?(d[19]=d[2].get("use_double_phase"),d[2],d[18]=d[19]?[0,13]:f):(c.i64.eq(d[11],[0,14])?(d[20]=d[2].get("use_double_phase"),d[2],d[21]=d[2].get("should_transcode"),d[2],d[19]=d[20]?d[21]?[0,7]:[0,9]:f):(c.i64.eq(d[11],[0,8])?d[20]=[0,9]:(c.i64.eq(d[11],[0,10])?(d[22]=d[2].get("send_by_server"),d[2],d[21]=d[22]?f:[0,11]):(c.i64.eq(d[11],[0,12])?d[22]=f:d[22]=f,d[21]=d[22]),d[20]=d[21]),d[19]=d[20]),d[18]=d[19]),d[17]=d[18]),d[16]=d[17]),d[15]=d[16]),d[14]=d[15]),c.i64.neq(d[14],f)?c.seq([function(a){return c.fe(c.db.table(51).fetch([[[d[13]]]]),function(a){var b=a.update;a.item;return b({state:d[14]})})},function(a){return c.i64.eq(d[14],[0,5])||c.i64.eq(d[14],[0,11])?0:d[4].set(d[13],d[14])}]):c.resolve())})},function(b){return c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["state","ASC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[5]=f:(b=a.item,d[5]=b.state)})},function(e){return c.i64.neq(d[5],f)?(d[10]=d[2].get("send_by_server"),d[2],d[11]=d[2].get("use_double_phase"),d[2],d[12]=d[2].get("use_double_phase"),d[2],(d[10]?d[11]?c.i64.eq(d[5],[0,10]):c.i64.eq(d[5],[0,4]):d[12]?c.i64.eq(d[5],[0,12]):c.i64.eq(d[5],[0,6]))?c.resolve(d[1].set("main_job_succeeded",!0)):c.i64.eq(d[5],[0,5])?c.seq([function(b){return d[13]=f,c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[15]=a.error,c.i64.eq(d[15],f)?(c.i64.neq(a.fbid,f)?d[16]=f:d[16]=[0,9],d[14]=d[16]):d[14]=d[15],c.i64.neq(d[14],f)?d[13]=d[14]:0})},function(e){return c.i64.neq(d[13],f)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[13]))):c.seq([function(e){return d[14]=d[2].get("is_secure"),d[2],d[14]?c.seq([function(b){return d[16]=c.createArray(),d[17]=!1,d[18]=[0,0],c.fe(c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[23]=a.fbid,d[18]=c.i64.add(d[18],[0,1]),c.i64.neq(d[23],f)?d[24]=(d[16].push(d[23]),d[16]):0})},function(b){return d[19]=c.createArray(),c.fe(c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[23]=a.metadata,d[23]!==f?d[24]=(d[19].push(d[23]),d[19]):0})},function(a){return d[20]=c.i64.of_int32(d[16].length),d[21]=c.i64.of_int32(d[19].length),c.i64.neq(d[20],d[18])||c.i64.neq(d[21],d[18])?d[22]=[0,11]:(function(a){c.logger(a).debug(a)}("[TincanLS][LSSecureMailboxSendSecureMediaMessageStoredProcedure] Started"),function(a){c.logger(a).debug(a)}("[TincanLS][LSSecureMailboxSendSecureMediaMessageStoredProcedure] Completed"),d[22]=f),d[15]=d[22]}]):c.seq([function(e){return c.seq([function(b){return d[17]=c.createArray(),d[18]=!1,d[19]=[0,0],c.fe(c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[22]=a.fbid,d[19]=c.i64.add(d[19],[0,1]),c.i64.neq(d[22],f)?d[23]=(d[17].push(d[22]),d[17]):0})},function(e){return d[20]=c.i64.of_int32(d[17].length),c.i64.neq(d[20],d[19])||c.i64.eq(d[19],[0,0])?c.resolve(d[21]=[0,10002]):c.seq([function(b){return c.db.table(12).fetch([[[a[0]]],"optimistic"]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[f,f,f,f,f],d[22]=c[0],d[23]=c[1],d[24]=c[2],d[25]=c[3],d[26]=c[4],c):(b=a.item,c=[b.threadKey,b.senderId,b.text,b.replySourceId,b.replySourceTypeV2],d[22]=c[0],d[23]=c[1],d[24]=c[2],d[25]=c[3],d[26]=c[4],c)})},function(e){return c.i64.eq(d[22],f)||c.i64.eq(d[23],f)?c.resolve((c.i64.eq(d[22],f)?d[29]=[0,10003]:d[29]=[0,10004],d[28]=d[29])):c.seq([function(a){return c.db.table(9).fetch([[[d[22]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[29]=f:(b=a.item,d[29]=b.threadType)})},function(b){return c.ftr(c.db.table(31).fetch(),function(b){return b.offlineThreadingId===a[0]}).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[f,f,f,f],d[31]=c[0],d[32]=c[1],d[33]=c[2],d[34]=c[3],c):(b=a.item,c=[b.platformRef,b.platformToken,b.initiatingSource,f],d[31]=c[0],d[32]=c[1],d[33]=c[2],d[34]=c[3],c)})},function(e){return c.i64.neq(d[29],f)?c.seq([function(e){return c.sp(b("LSGetMessageAttributionParams"),a[0]).then(function(a){return a=a,d[37]=a[0],d[38]=a[1],d[39]=a[2],a})},function(e){return c.i64.neq(d[37],f)?d[40]=d[37]:d[40]=[0,0],c.sp(b("LSIssueSendAttachmentMessageTask"),d[23],d[22],d[29],a[0],d[24],d[17],d[40],d[25],d[26],d[18],d[31],d[32],a[2])},function(a){return c.i64.ge([0,0],[0,0])?d[41]=f:d[41]=[0,10006],d[36]=d[41]}]):c.resolve(d[36]=[0,10005])},function(a){return d[28]=d[36]}])},function(a){return d[21]=d[28]}])},function(a){return d[16]=d[21]}])},function(b){return c.i64.eq(d[16],f)?c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:[0,6]})}):c.resolve()},function(a){return d[15]=d[16]}])},function(b){return c.i64.eq(d[15],f)?(d[16]=d[2].get("send_by_server"),d[2],d[17]=d[2].get("use_double_phase"),d[2],d[18]=d[2].get("use_double_phase"),d[2],(d[16]?d[17]?c.i64.eq([0,6],[0,10]):c.i64.eq([0,6],[0,4]):d[18]?c.i64.eq([0,6],[0,12]):c.i64.eq([0,6],[0,6]))?c.resolve(d[1].set("main_job_succeeded",!0)):(c.i64.eq([0,6],[-1,4294967295])?d[19]=[0,5]:(c.i64.eq([0,6],[-1,4294967294])?(d[21]=d[2].get("should_transcode"),d[2],d[20]=d[21]?[0,1]:[0,3]):(c.i64.eq([0,6],[0,2])?d[21]=[0,3]:(c.i64.eq([0,6],[0,4])?(d[23]=d[2].get("send_by_server"),d[2],d[24]=d[2].get("use_double_phase"),d[2],d[22]=d[23]?d[24]?[0,13]:f:[0,5]):(c.i64.eq([0,6],[0,6])?(d[24]=d[2].get("use_double_phase"),d[2],d[23]=d[24]?[0,13]:f):(c.i64.eq([0,6],[0,14])?(d[25]=d[2].get("use_double_phase"),d[2],d[26]=d[2].get("should_transcode"),d[2],d[24]=d[25]?d[26]?[0,7]:[0,9]:f):(c.i64.eq([0,6],[0,8])?d[25]=[0,9]:(c.i64.eq([0,6],[0,10])?(d[27]=d[2].get("send_by_server"),d[2],d[26]=d[27]?f:[0,11]):(c.i64.eq([0,6],[0,12])?d[27]=f:d[27]=f,d[26]=d[27]),d[25]=d[26]),d[24]=d[25]),d[23]=d[24]),d[22]=d[23]),d[21]=d[22]),d[20]=d[21]),d[19]=d[20]),c.i64.neq(d[19],f)?c.seq([function(b){return c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:d[19]})})},function(b){return c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[4].set(a.offlineAttachmentId,a.state)})}]):c.resolve())):c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[15])))}])}]):c.i64.eq(d[5],[0,11])?c.seq([function(b){return d[13]=f,c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[14]=a.error,c.i64.neq(d[14],f)?d[13]=d[14]:0})},function(a){return c.i64.neq(d[13],f)?(d[1].set("resume_failed",!0),d[1].set("error",d[13])):d[1].set("main_job_succeeded",!0)}]):c.i64.eq(d[5],[0,13])?c.seq([function(e){return c.sp(b("LSInsertPhase2PendingTask"),a[0],a[1]).then(function(a){return a=a,d[13]=a[0],a})},function(b){return c.i64.neq(d[13],f)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[13]))):c.seq([function(b){return c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:[0,14]})})},function(b){return d[1].set("main_job_succeeded",!0),c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[4].set(a.offlineAttachmentId,a.state)})}])}]):c.resolve(0)):c.resolve((d[1].set("resume_failed",!0),d[1].set("error",[0,11])))},function(a){return d[7]=d[1].get("main_job_succeeded"),d[1],d[8]=d[1].get("resume_failed"),d[1],d[9]=d[1].get("error"),d[1],a=[d[7],d[8],d[9],d[4]],e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("MWChatForwardDialogQuery$Parameters",["MWChatForwardDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWChatForwardDialogQuery_facebookRelayOperation"),metadata:{},name:"MWChatForwardDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWConsole",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){}g.log=a}),98);
__d("MWBaseTheme.bs",[],(function(a,b,c,d,e,f){"use strict";a={};b={};c={dark:b,light:a,type:"VARIABLES"};d={};f.empty=c;f.Provider=d}),null);
__d("MWCombineThemeConfigs.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return{dark:Object.assign(a.dark,b.dark),light:Object.assign(a.light,b.light),type:b.type}}f.combine=a}),null);
__d("MWSeparatorContainer.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b,d=h.Children.toArray(a.children).filter(Boolean);return d.length===0?null:h.jsxs(h.Fragment,{children:[(b=a.beforeContent)!=null?b:null,h.jsx("div",{className:c("stylex")(a.xstyle),children:d.map(function(b,c){return h.jsxs(h.Fragment,{children:[c!==0&&a.separator,b]},"item-"+c)})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSMessagingThreadAttributionType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,65536];b=[0,65537];var g=[0,65538],h=[0,65539],i=[0,65540],j=[0,65541],k=[0,65542],l=[0,65543],m=[0,65544],n=[0,65545],o=[0,65546],p=[0,65547],q=[0,131072],r=[0,131073],s=[0,131074],t=[0,131075],u=[0,131076],v=[0,196608],w=[0,196609],x=[0,196610],y=[0,196611],z=[0,196612],A=[0,262144],B=[0,262145],C=[0,262146],D=[0,262147],E=[0,262148],F=[0,262149],G=[0,327680],H=[0,327681],I=[0,327682],J=[0,393216],K=[0,393217],L=[0,393218],M=[0,393219],N=[0,393220],O=[0,393221],P=[0,393222],Q=[0,393223],R=[0,393224],S=[0,393225],T=[0,458752],U=[0,458753],V=[0,458754],W=[0,524288],X=[0,524289],Y=[0,524290],Z=[0,524291],$=[0,589824],aa=[0,589825],ba=[0,589826],ca=[0,589827],da=[0,589828],ea=[0,655360],fa=[0,655361],ga=[0,720896],ha=[0,720897],ia=[0,786432],ja=[0,786433],ka=[0,786434],la=[0,786435],ma=[0,786436],na=[0,786437],oa=[0,851968],pa=[0,851969],qa=[0,851970],ra=[0,851971],sa=[0,917504],ta=[0,917505],ua=[0,917506],va=[0,917507],wa=[0,917508],xa=[0,917509],ya=[0,917510],za=[0,983040],Aa=[0,1048576],Ba=[0,1048577],Ca=[0,1048578],Da=[0,1114112],Ea=[0,1114113],Fa=[0,1114114],Ga=[0,1114115],Ha=[0,1114116],Ia=[0,1114117],Ja=[0,1114118],Ka=[0,1114119],La=[0,1179648],Ma=[0,1245184],Na=[0,1245185],Oa=[0,1245186],Pa=[0,1310720],Qa=[0,1310721],Ra=[0,1310722],Sa=[0,1310723],Ta=[0,1310724],Ua=[0,1310725],Va=[0,1310726],Wa=[0,1310727],Xa=[0,1310728],Ya=[0,1376256],Za=[0,1376257],$a=[0,1376258],ab=[0,1441792],bb=[0,1441793],cb=[0,1441794],db=[0,1441795],eb=[0,1507328],fb=[0,1507329],gb=[0,1507330],hb=[0,1507331],ib=[0,1572864],jb=[0,1572865],kb=[0,1572866],lb=[0,1572867],mb=[0,1572868],nb=[0,1572869],ob=[0,1572870],pb=[0,1572871],qb=[0,1572872],rb=[0,1572873],sb=[0,1572874],tb=[0,1638400],ub=[0,1638401],vb=[0,1638402],wb=[0,1703936],xb=[0,1703937],yb=[0,1703938],zb=[0,1769472],Ab=[0,1769473],Bb=[0,1835008],Cb=[0,1835009],Db=[0,1835010],Eb=[0,1835011],Fb=[0,1835012],Gb=[0,1900544],Hb=[0,1900545],Ib=[0,1966080],Jb=[0,1966081],Kb=[0,1966082],Lb=[0,1966083],Mb=[0,2031616],Nb=[0,2031617],Ob=[0,2097152],Pb=[0,2097153],Qb=[0,2097154],Rb=[0,2097155],Sb=[0,2097156],Tb=[0,2162688],Ub=[0,2162689],Vb=[0,2162690],Wb=[0,2162691],Xb=[0,2228224],Yb=[0,2228225],Zb=[0,2228226],$b=[0,2228227],ac=[0,2293760],bc=[0,2293761],cc=[0,2293762],dc=[0,2359296],ec=[0,2359297],fc=[0,2424832],gc=[0,2424833],hc=[0,2424834],ic=[0,2424835],jc=[0,2424836],kc=[0,2424837],lc=[0,2490368],mc=[0,2490369],nc=[0,2490370],oc=[0,2490371],pc=[0,2490372],qc=[0,2490373],rc=[0,2490374],sc=[0,2490375],tc=[0,2490376],uc=[0,2490377],vc=[0,2490378],wc=[0,2490379],xc=[0,2490380],yc=[0,2490381],zc=[0,2490382],Ac=[0,2490383],Bc=[0,2490384],Cc=[0,2555904],Dc=[0,2555905],Ec=[0,2555906],Fc=[0,2555907],Gc=[0,2555908],Hc=[0,2621440],Ic=[0,2686976],Jc=[0,2752512],Kc=[0,2818048],Lc=[0,2883584],Mc=[0,2883585],Nc=[0,2883586],Oc=[0,2949120],Pc=[0,2949121],Qc=[0,3014656],Rc=[0,3080192],Sc=[0,3145728],Tc=[0,3211264],Uc=[0,3211265],Vc=[0,3211266],Wc=[0,3211267],Xc=[0,3276800],Yc=[0,3276801],Zc=[0,3342336],$c=[0,3342337],ad=[0,3407872],bd=[0,3473408],cd=[0,3473409],dd=[0,3538944],ed=[0,3538945],fd=[0,3604480],gd=[0,3604481],hd=[0,3604482],id=[0,3670016],jd=[0,3735552],kd=[0,3801088];f.unknown=a;f.unknownTest=c;f.unknownFailureRetry=d;f.messengerInbox=e;f.messengerInboxInThread=b;f.messengerInboxThreadList=g;f.messengerInboxNestedFolder=h;f.messengerInboxRecentThreads=i;f.messengerInboxRemainingThreads=j;f.messengerInboxMessageSearch=k;f.messengerInboxImageSending=l;f.messengerInboxForward=m;f.messengerInboxArchivedThreads=n;f.messengerInboxPendingRequests=o;f.messengerInboxActiveContacts=p;f.messengerUniversalSearch=q;f.messengerUniversalSearchNullState=r;f.messengerUniversalSearchKeyPressed=s;f.messengerUniversalSearchMessageSearch=t;f.messengerUniversalSearchAdvancedContentSearch=u;f.montageAndActiveNow=v;f.montageAndActiveNowMontageInboxUnit=w;f.montageAndActiveNowActiveNow=x;f.montageAndActiveNowInboxComposer=y;f.montageAndActiveNowActiveAndHasStory=z;f.messengerActiveNowFriendsTab=A;f.messengerActiveNowFriendsTabFriendsTab=B;f.messengerActiveNowFriendsTabPlaceHolder=C;f.messengerActiveNowFriendsTabRecentActive=D;f.messengerActiveNowFriendsTabRecentActiveAndStory=E;f.messengerActiveNowFriendsTabContentDiscovery=F;f.messengerPendingRequests=G;f.messengerPendingRequestsInboxThreadList=H;f.messengerPendingRequestsPendingRequestsPage=I;f.messengerBroadcastFlow=J;f.messengerBroadcastFlowFromMessenger=K;f.messengerBroadcastFlowFromFb=L;f.messengerBroadcastFlowFromExternal=M;f.messengerBroadcastFlowFromFbNewsfeedSharesheet=N;f.messengerBroadcastFlowFromFbNewsfeedGoodwillComposer=O;f.messengerBroadcastFlowFromFbShortsViewer=P;f.messengerBroadcastFlowForwardGutter=Q;f.messengerBroadcastFlowForwardLongclick=R;f.messengerBroadcastFlowMessengerPhotoView=S;f.messengerOmnipicker=T;f.messengerOmnipickerNullState=U;f.messengerOmnipickerKeyPressed=V;f.messengerNotification=W;f.messengerNotificationInThreadReply=X;f.messengerNotificationLongpressReply=Y;f.messengerNotificationLongpressReaction=Z;f.clickToMessengerAd=$;f.clickToMessengerAdFromNewsfeed=aa;f.clickToMessengerAdSendMessageCta=ba;f.clickToMessengerAdViewAndMessage=ca;f.clickToMessengerAdSendMessageCtaNewsfeedCtmAdsCta=da;f.payments=ea;f.paymentsBubbleClick=fa;f.rtc=ga;f.rtcVoipIncall=ha;f.fbPage=ia;f.fbPageAboutCard=ja;f.fbPageProfileHeaderMessageButton=ka;f.fbPageProfileFooterMessageButton=la;f.fbPageProfileMoreDrawer=ma;f.fbPageResponsivenessContextCard=na;f.fbProfile=oa;f.fbProfileTimelineMessageButton=pa;f.fbProfileFacebookProfile=qa;f.fbProfileMessageButton=ra;f.fbSearch=sa;f.fbSearchContextualProfileActionBarFromSearch=ta;f.fbSearchSearchMessageButton=ua;f.fbSearchFbMessageSearchResults=va;f.fbSearchHighConfidenceCard=wa;f.fbSearchMentions=xa;f.fbSearchNullstateCta=ya;f.crypto=za;f.messengerMontageComposer=Aa;f.messengerMontageComposerFriendsTab=Ba;f.messengerMontageComposerFriendsTabStoryAndActiveNow=Ca;f.messengerMontageReply=Da;f.messengerMontageReplyInboxThreadListProfile=Ea;f.messengerMontageReplyReplyContext=Fa;f.messengerMontageReplyThreadNavBar=Ga;f.messengerMontageReplyInboxThreadListProfileAuthorProfile=Ha;f.messengerMontageReplyReplyContextAuthorProfile=Ia;f.messengerMontageReplyThreadNavBarAuthorProfile=Ja;f.messengerMontageReplyOneToOneChatThreadStoryBubble=Ka;f.messengerThreadMembersList=La;f.marketplace=Ma;f.marketplaceActivityBanner=Na;f.marketplaceSendMessage=Oa;f.fbStory=Pa;f.fbStoryViewerSheetMenu=Qa;f.fbStoryViewerSheetRow=Ra;f.fbStoryStoriesJewelNotification=Sa;f.fbStoryStoriesPushNotification=Ta;f.fbStoryStoriesViewerConsumerReply=Ua;f.fbStoryStoriesViewerConsumerArtifact=Va;f.fbStoryStoriesPageStoryConversations=Wa;f.fbStorySocialContextConversations=Xa;f.workspeed=Ya;f.workspeedComposerLikeButton=Za;f.workspeedComposerGifPicker=$a;f.mdotme=ab;f.mdotmeOrganicPost=bb;f.mdotmeMarketingEmail=cb;f.mdotmeMbsOffsiteEmail=db;f.customerChatPlugin=eb;f.customerChatPluginMobileRedirect=fb;f.customerChatPluginUpgradeFlow=gb;f.customerChatPluginReEngagement=hb;f.fbFeed=ib;f.fbFeedOrganicPost=jb;f.fbFeedOrganicPostViewAndMessage=kb;f.fbFeedQuestionTriggeredConvo=lb;f.fbFeedDynamicHoverCard=mb;f.fbFeedOrganicPostNewsfeedPagePostCta=nb;f.fbFeedOrganicPostNewsfeedBumperSmcta=ob;f.fbFeedBcfOpenChatButton=pb;f.fbFeedReactorsListMessageButton=qb;f.fbFeedReplyToAuthor=rb;f.fbFeedUfiSendSuggestions=sb;f.fbNotification=tb;f.fbNotificationJewelNotif=ub;f.fbNotificationPushNotif=vb;f.fbEvent=wb;f.fbEventMessageHost=xb;f.fbEventShareClassMaterials=yb;f.supportResources=zb;f.supportResourcesFrxAction=Ab;f.leadGenMessaging=Bb;f.leadGenMessagingPreSubmission=Cb;f.leadGenMessagingPostSubmission=Db;f.leadGenMessagingCrossChannelVerticalPresentAndroid=Eb;f.leadGenMessagingCrossChannelHscrollAndroid=Fb;f.messengerGraph=Gb;f.messengerGraphSelectContact=Hb;f.messengerChat=Ib;f.messengerChatFromJewelThreadList=Jb;f.messengerChatInThread=Kb;f.messengerChatForward=Lb;f.messengerArchivedThreads=Mb;f.messengerArchivedThreadsArchivedThreadsFolder=Nb;f.jewel=Ob;f.jewelThreadList=Pb;f.jewelSearch=Qb;f.jewelNewMessage=Rb;f.jewelNestedFolder=Sb;f.chatheads=Tb;f.chatheadsRecentThreads=Ub;f.chatheadsOverflow=Vb;f.chatheadsNewMessage=Wb;f.sidebar=Xb;f.sidebarContactsList=Yb;f.sidebarContactsSearch=Zb;f.sidebarContactsGroups=$b;f.messengerCommunityMessaging=ac;f.messengerCommunityMessagingCommunityChannel=bc;f.messengerCommunityMessagingFullscreenChat=cc;f.fbPlatformLogin=dc;f.fbPlatformLoginLoginConnectWithMessenger=ec;f.contactManager=fc;f.contactManagerContactShare=gc;f.contactManagerPeopleTabContactList=hc;f.contactManagerPeopleTabContactSearch=ic;f.contactManagerIconContactList=jc;f.contactManagerIconContactSearch=kc;f.messagingInboxInBlue=lc;f.messagingInboxInBlueThreadList=mc;f.messagingInboxInBluePeoplePicker=nc;f.messagingInboxInBlueInboxIcon=oc;f.messagingInboxInBlueSwipeFromRight=pc;f.messagingInboxInBlueMibNotification=qc;f.messagingInboxInBlueActiveNow=rc;f.messagingInboxInBlueSuggestedChats=sc;f.messagingInboxInBlueChatPreviewBanner=tc;f.messagingInboxInBlueThreadViewCoreNullState=uc;f.messagingInboxInBlueMessageRequests=vc;f.messagingInboxInBlueSpam=wc;f.messagingInboxInBlueFbGroups=xc;f.messagingInboxInBlueMessengerPeekStateButton=yc;f.messagingInboxInBlueMessengerPeekStateTooltip=zc;f.messagingInboxInBlueBroadcastFlow=Ac;f.messagingInboxInBlueThreadViewHeader=Bc;f.mibNotification=Cc;f.mibNotificationPushNotification=Dc;f.mibNotificationJewelNotification=Ec;f.mibNotificationDirectPushNotif=Fc;f.mibNotificationDirectJewelNotif=Gc;f.messengerRestrictedAccounts=Hc;f.armadilloCutoverThreadLinkingMessage=Ic;f.callsTab=Jc;f.miniShopViewMenuButton=Kc;f.sharesheet=Lc;f.sharesheetGeneralizedBroadcastFlow=Mc;f.sharesheetOffPlatformSharingHScroll=Nc;f.ufi=Oc;f.ufiGeneralizedBroadcastFlow=Pc;f.chatheadClickCollapsed=Qc;f.timelineMessageButton=Rc;f.directReplyIntent=Sc;f.fbGroups=Tc;f.fbGroupsInbox=Uc;f.fbGroupsPickerExistingChat=Vc;f.fbGroupsPickerJoinChat=Wc;f.devices=Xc;f.devicesStella=Yc;f.fbWellbeing=Zc;f.fbWellbeingIncallUnblockingNotification=$c;f.messengerDeepLinking=ad;f.readOnlyCutoverThread=bd;f.readOnlyCutoverThreadArmadilloThread=cd;f.armadilloThread=dd;f.armadilloThreadReadOnlyCutoverThread=ed;f.fbShorts=fd;f.fbShortsProfile=gd;f.fbShortsReactorsListMessageButton=hd;f.sendPlugin=id;f.sendAsMessageFromNt=jd;f.messengerPublicChatsMessaging=kd}),null);
__d("LSThreadAttributionTypeUtil.bs",["LSMessagingThreadAttributionType.bs","LSThreadAttributionStore.bs","bs_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c){c=b("LSThreadAttributionStore.bs").getSource({_0:c,TAG:1},b("bs_int64").to_string(a));if(c.TAG===0)return c._0;a=c._0;if(a==="communityFriendsDialog"||a==="pagesHomeFriendsDialog"||a==="mutualFriendsDialog"||a==="birthday"||a==="groupMembers"||a==="fundraiserSupportersList"||a==="memories"||a==="feedPoll"||a==="reactorList"||a==="friendsList"||a==="pagesPrivateReply")return b("LSMessagingThreadAttributionType.bs").fbFeedOrganicPost;else if(a==="inboxPendingRequests")return b("LSMessagingThreadAttributionType.bs").messengerInboxPendingRequests;else if(a==="fullscreenChat")return b("LSMessagingThreadAttributionType.bs").messengerCommunityMessagingFullscreenChat;else if(a==="sidebarGroupsList")return b("LSMessagingThreadAttributionType.bs").sidebarContactsGroups;else if(a==="jewel")return b("LSMessagingThreadAttributionType.bs").jewelThreadList;else if(a==="shop")return b("LSMessagingThreadAttributionType.bs").miniShopViewMenuButton;else if(a==="chatheadsOverflow")return b("LSMessagingThreadAttributionType.bs").chatheads;else if(a==="hovercard"||a==="feedDynamicHoverCard")return b("LSMessagingThreadAttributionType.bs").fbFeedDynamicHoverCard;else if(a==="search"||a==="messengerUniversalSearch")return b("LSMessagingThreadAttributionType.bs").messengerUniversalSearch;else if(a==="story"||a==="storyAggregatedUsers"||a==="storySeenByList")return b("LSMessagingThreadAttributionType.bs").fbStory;else if(a==="timeline"||a==="feedOrganicPost")return b("LSMessagingThreadAttributionType.bs").fbFeedOrganicPost;else if(a==="pageAboutCard")return b("LSMessagingThreadAttributionType.bs").fbPageAboutCard;else if(a==="inboxInThread")return b("LSMessagingThreadAttributionType.bs").messengerInboxInThread;else if(a==="notificationInThreadReply")return b("LSMessagingThreadAttributionType.bs").messengerNotificationInThreadReply;else if(a==="archieve")return b("LSMessagingThreadAttributionType.bs").messengerArchivedThreads;else if(a==="storyViewerSheetRow")return b("LSMessagingThreadAttributionType.bs").fbStoryViewerSheetRow;else if(a==="chatheadsNewMessage")return b("LSMessagingThreadAttributionType.bs").chatheadsNewMessage;else if(a==="event")return b("LSMessagingThreadAttributionType.bs").fbEvent;else if(a==="jewelSearch")return b("LSMessagingThreadAttributionType.bs").jewelSearch;else if(a==="inboxSpam"||a==="inboxThreadList"||a==="inboxRestricted")return b("LSMessagingThreadAttributionType.bs").messengerInbox;else if(a==="jewelNewMessage")return b("LSMessagingThreadAttributionType.bs").jewelNewMessage;else if(a==="pendingRequests")return b("LSMessagingThreadAttributionType.bs").messengerPendingRequestsInboxThreadList;else if(a==="sidebarSearch")return b("LSMessagingThreadAttributionType.bs").sidebarContactsSearch;else if(a==="inboxRemainingThreads")return b("LSMessagingThreadAttributionType.bs").messengerInboxRemainingThreads;else if(a==="pagesHeader")return b("LSMessagingThreadAttributionType.bs").fbPageProfileHeaderMessageButton;else if(a==="inboxRecentThreads")return b("LSMessagingThreadAttributionType.bs").messengerInboxRecentThreads;else if(a==="chatheads")return b("LSMessagingThreadAttributionType.bs").chatheadsRecentThreads;else if(a==="pageResponsivenessCard")return b("LSMessagingThreadAttributionType.bs").fbPageResponsivenessContextCard;else if(a==="inboxSearch")return b("LSMessagingThreadAttributionType.bs").messengerInboxMessageSearch;else if(a==="jewelNestedFolder")return b("LSMessagingThreadAttributionType.bs").jewelNestedFolder;else if(a==="marketplace")return b("LSMessagingThreadAttributionType.bs").marketplaceSendMessage;else if(a==="feedOrganicPostViewAndMessage")return b("LSMessagingThreadAttributionType.bs").fbFeedOrganicPostViewAndMessage;else if(a==="adsCta")return b("LSMessagingThreadAttributionType.bs").clickToMessengerAdSendMessageCta;else if(a==="chatInThread")return b("LSMessagingThreadAttributionType.bs").messengerChatInThread;else if(a==="payments")return b("LSMessagingThreadAttributionType.bs").payments;else if(a==="inboxFolder")return b("LSMessagingThreadAttributionType.bs").messengerInboxNestedFolder;else if(a==="inboxArchived")return b("LSMessagingThreadAttributionType.bs").messengerInboxArchivedThreads;else if(a==="inboxActiveContacts")return b("LSMessagingThreadAttributionType.bs").messengerInboxActiveContacts;else if(a==="sidebarContactsList")return b("LSMessagingThreadAttributionType.bs").sidebarContactsList;else return b("LSMessagingThreadAttributionType.bs").unknown}f.getSource=a}),null);
__d("LSMessagingInitiatingSource.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];f.facebookChat=a;f.facebookInbox=c;f.roomsSideChat=d;f.facebookFullscreen=e}),null);
__d("LSMessagingInitiatingSourceHook.bs",["LSMessagingInitiatingSource.bs","MWLSThreadDisplayContext.bs","bs_belt_Option"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("bs_belt_Option").map(b("MWLSThreadDisplayContext.bs").useHook(),function(a){if(a==="Inbox")return b("LSMessagingInitiatingSource.bs").facebookInbox;else if(a==="FullscreenChat")return b("LSMessagingInitiatingSource.bs").facebookFullscreen;else if(a==="ChatTab")return b("LSMessagingInitiatingSource.bs").facebookChat;else return b("LSMessagingInitiatingSource.bs").roomsSideChat})}f.useHook=a}),null);
__d("MWLSSendMessageUtils.bs",["MWChatMessageId.bs","bs_belt_Option"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("bs_belt_Option").flatMap(a,function(a){a=a.content;switch(a.TAG){case 0:case 1:case 2:return b("MWChatMessageId.bs").getMessageId(a._0.messageID)}})}f.getReplySourceId=a}),null);
__d("LSMessageReplySourceType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7];f.none=a;f.message=c;f.story=d;f.forward=e;f.fbStoryShare=b;f.igStoryShare=g;f.lightweightStatus=h;f.lightweightStatusReaction=i}),null);
__d("LSMessageReplySourceTypeV2.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12];f.none=a;f.message=c;f.story=d;f.forward=e;f.fbStoryShare=b;f.igStoryShare=g;f.storyBase64Encoded=h;f.lightweightStatus=i;f.closeFriends=j;f.xma=k;f.igNote=l;f.closeFriendsNoteReply=m;f.lightweightStatusReaction=n}),null);
__d("WorkChatMessageType.bs",[],(function(a,b,c,d,e,f){"use strict";a="text";b="gif";c="sticker";d="audio";e="file";f.text=a;f.gif=b;f.sticker=c;f.audio=d;f.file=e}),null);
__d("MWLSSendStickerMessage.bs",["LS.bs","LSDict","LSMailboxType.bs","LSMessageReplySourceType.bs","LSMessageReplySourceTypeV2.bs","LSOptimisticSendMessage","LSThreadAttributionTypeUtil.bs","LSTransaction.bs","MWLSSendMessageUtils.bs","MWPActor.bs","MWThread_DEPRECATED.bs","MessagingThreadType.bs","WorkChatMessageType.bs","bs_caml_format","bs_caml_int64","bs_caml_option","bs_curry","promiseDone","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a,c,d,e){var f=a!==void 0?a:"unknown",g=c!==void 0?b("bs_caml_option").valFromOption(c):void 0,i=b("useReStore")(),j=b("MWPActor.bs").useActor();return h.useCallback(function(a){return function(c,e,h){var k=b("LSTransaction.bs").run(i,function(d){var i=b("MWThread_DEPRECATED.bs").toThreadKey(a),k=b("LSThreadAttributionTypeUtil.bs").getSource(i,f);return b("LSOptimisticSendMessage")(j,i,b("MessagingThreadType.bs").oneToOne,b("LSMailboxType.bs").messenger,void 0,void 0,!1,b("bs_caml_format").caml_int64_of_string(c),void 0,void 0,void 0,k,void 0,void 0,b("bs_caml_option").option_get(b("MWLSSendMessageUtils.bs").getReplySourceId(e)),b("LSMessageReplySourceType.bs").message,b("LSMessageReplySourceTypeV2.bs").message,void 0,void 0,void 0,!0,!0,b("LSDict").fromObject({playable_url:void 0,playable_url_expiration_timestamp_ms:void 0,playable_url_fallback:void 0,playable_url_mime_type:void 0,preview_height:b("bs_caml_int64").zero,preview_url:h,preview_url_expiration_timestamp_ms:void 0,preview_url_fallback:void 0,preview_url_mime_type:void 0,preview_width:b("bs_caml_int64").zero}),g!==void 0?b("bs_caml_option").valFromOption(g):void 0,void 0,void 0,b("LS.bs").make(d))},"readWrite");b("promiseDone")(k,function(a){if(d!==void 0)return b("bs_curry")._3(d,b("WorkChatMessageType.bs").sticker,1,a[0])})}},[i,j])}f.useSendStickerMessage=a}),null);
__d("MWChatForwardDialog.entrypoint",["JSResourceForInteraction","MWChatForwardDialogQuery$Parameters","MWXacGating.re","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{queries:{forwardQueryReference:{parameters:b("MWChatForwardDialogQuery$Parameters"),variables:{scale:d("WebPixelRatio").get(),suppress_xac_groups:!c("MWXacGating.re").isGroupsEnabled()}}}}},root:c("JSResourceForInteraction")("MWChatForwardDialog.react").__setRef("MWChatForwardDialog.entrypoint")};g["default"]=a}),98);
__d("MWChatInteractionLog.bs",["QPLUserFlow"],(function(a,b,c,d,e,f){"use strict";var g=new Map();function a(a,c){var d=Date.now()|0;g.set(c,d);b("QPLUserFlow").start(a,{cancelOnUnload:!0,instanceKey:d,timeoutInMs:6e4})}function c(a,c,d){c=g.get(c);if(!(c==null)){b("QPLUserFlow").endFailure(a,d,{instanceKey:c});return}}function d(a,c){c=g.get(c);if(!(c==null)){b("QPLUserFlow").endSuccess(a,{instanceKey:c});return}}function e(a,c,d){c=g.get(c);if(!(c==null)){b("QPLUserFlow").addPoint(a,d,{instanceKey:c});return}}f.logStartUserFlow=a;f.logFailUserFlow=c;f.logSuccessUserFlow=d;f.logPointUserFlow=e}),null);
__d("MWLSForwardMessage.bs",["LS.bs","LSMediaUrl.bs","LSMessagingInitiatingSourceHook.bs","LSMessagingSource.bs","LSMessagingThreadAttributionType.bs","LSMessagingThreadTypeUtil.bs","LSOptimisticSendAttachmentForward","LSOptimisticSendMessageForward","LSTransaction.bs","MWChatInteractionLog.bs","MWChatThreadId.bs","MWLSSendStickerMessage.bs","MWLSThreadDisplayContext.bs","MWPActor.bs","MWThread_DEPRECATED.bs","ODS","Promise","ReQL.bs","bs_caml_format","bs_caml_option","bs_curry","bs_int64","promiseDone","qpl","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a){a=b("MWLSThreadDisplayContext.bs").useHook();if(a!==void 0)if(a==="Inbox")return b("LSMessagingThreadAttributionType.bs").messengerInboxForward;else if(a==="ChatTab")return b("LSMessagingThreadAttributionType.bs").messengerChatForward;else return b("LSMessagingThreadAttributionType.bs").messengerBroadcastFlow;else return b("LSMessagingThreadAttributionType.bs").messengerBroadcastFlow}function a(a){var c=b("useReStore")(),d=b("MWPActor.bs").useActor(),e=b("LSMessagingInitiatingSourceHook.bs").useHook(),f=i();a=b("LSMessagingSource.bs").useHook();var g=b("MWLSSendStickerMessage.bs").useSendStickerMessage(a,b("bs_caml_option").some(e));return h.useCallback(function(a){return function(h){var i=b("LSMessagingThreadTypeUtil.bs").ofThreadId(a),j=b("MWThread_DEPRECATED.bs").toThreadKey(a);switch(h.TAG){case 0:case 1:return;case 2:h=h._0;var k=h.timestamp,l=h.messageId,m=h.threadId;b("ODS").bumpEntityKey(3185,"mw_forward","send");b("MWChatInteractionLog.bs").logPointUserFlow(b("qpl")._(25298392,"4881"),l,"sending");var n=function(a){return b("LSTransaction.bs").run(c,function(a){return b("LSOptimisticSendMessageForward")(d,j,i,m,k,l,f,e!==void 0?b("bs_caml_option").valFromOption(e):void 0,b("LS.bs").make(a))},"readWrite").then(function(a){})};b("promiseDone")(b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("messages")),{hd:m,tl:{hd:k,tl:{hd:l,tl:0}}})).then(function(d){if(d===void 0)return n();var e=d.stickerId;if(e!==void 0)return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("attachments")),{hd:m,tl:{hd:l,tl:0}})).then(function(c){c=c!==void 0?b("LSMediaUrl.bs").Attachment.previewUrl(c):void 0;b("bs_curry")._4(g,a,b("bs_int64").to_string(e),void 0,c);return b("Promise").resolve()});else return n()}),function(a){b("ODS").bumpEntityKey(3185,"mw_forward","success");return b("MWChatInteractionLog.bs").logSuccessUserFlow(b("qpl")._(25298392,"4881"),l)},function(a){b("ODS").bumpEntityKey(3185,"mw_forward","failure");return b("MWChatInteractionLog.bs").logFailUserFlow(b("qpl")._(25298392,"4881"),l,"ls_error")});return}}},[c,JSON.stringify(d),e,f,g])}function c(a){var c=b("useReStore")(),d=b("MWPActor.bs").useActor(),e=b("LSMessagingInitiatingSourceHook.bs").useHook(),f=i();return h.useMemo(function(){return function(a,g,h){b("ODS").bumpEntityKey(3185,"mw_forward","send");h!==void 0&&b("MWChatInteractionLog.bs").logPointUserFlow(b("qpl")._(25298392,"4881"),h,"sending");var i=b("LSMessagingThreadTypeUtil.bs").ofThreadId(a),j=b("MWThread_DEPRECATED.bs").toThreadKey(a);b("promiseDone")(b("LSTransaction.bs").run(c,function(a){return b("LSOptimisticSendAttachmentForward")(d,j,i,void 0,void 0,void 0,void 0,b("bs_caml_format").caml_int64_of_string(g),f,e!==void 0?b("bs_caml_option").valFromOption(e):void 0,b("LS.bs").make(a))},"readWrite"),function(a){b("ODS").bumpEntityKey(3185,"mw_forward","success");if(h!==void 0)return b("MWChatInteractionLog.bs").logSuccessUserFlow(b("qpl")._(25298392,"4881"),h)},function(a){h!==void 0&&b("MWChatInteractionLog.bs").logFailUserFlow(b("qpl")._(25298392,"4881"),h,"ls_error"),b("ODS").bumpEntityKey(3185,"mw_forward","failure")})}},[c,JSON.stringify(d),e,f])}d=b("MWChatThreadId.bs").getFBID;f.useForwardMessage=a;f.useForwardAttachment=c;f.targetIdString=d}),null);
__d("MWV2ForwardMessage.bs",["LSDatabaseDeferred.bs","LSInt64.bs","LSMessagingThreadTypeUtil.bs","MAWThreadId.bs","MAWVerifyThreadCutover.bs","MWChatMessageId.bs","MWLSForwardMessage.bs","MWPActor.bs","MWThread_DEPRECATED.bs","Promise","ReQL.bs","ReQLSubscription.bs","bs_caml","bs_curry","bs_int64","cr:11272","cr:1564","cr:1746","cr:4175","promiseDone","react","unrecoverableViolation","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a,c){return b("ReQLSubscription.bs").useFirstExn(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("threads")),{hd:c.threadKey,tl:0})},[a,JSON.stringify(c.threadKey)]))}function j(a,c){return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("threads")),{hd:c,tl:0}))}function k(a,c,d){var e;return(e=b("ReQL.bs")).first(e.filter(e.mergeJoin(e.getKeyRange(e.fromTableAscending(a.table("participants")),{hd:c,tl:0}),e.fromTableAscending(a.table("contacts"))),function(a){return b("bs_caml").i64_neq(a[1].id,d)}))}function l(a,c){return b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("attachments")),{hd:c.threadKey,tl:{hd:c.messageId,tl:0}})},[a,JSON.stringify(c.threadKey),c.messageId]))}function a(a){var c=b("useReStore")(),d=i(c,a),e=l(c,a),f=b("LSMessagingThreadTypeUtil.bs").isSecure(d.threadType),g=b("MWPActor.bs").useActor(),m=b("bs_caml").i64_neq(g,a.senderId),n=b("MWLSForwardMessage.bs").useForwardMessage(),o=b("cr:11272")==null?void 0:b("bs_curry")._1(b("cr:11272").useForwardMessage,c),p=b("cr:1564")==null?void 0:b("bs_curry")._1(b("cr:1564").useForwardMessage,c),q=b("cr:1746")==null?void 0:b("bs_curry")._1(b("cr:1746").useForwardMessage,c),r=b("MWChatMessageId.bs").makeSent(b("bs_int64").to_string(a.threadKey),a.messageId,b("bs_int64").to_string(a.timestampMs)),s=b("cr:4175")==null?void 0:b("bs_curry")._2(b("cr:4175").call,c,g),t=function(f){var h=b("MWThread_DEPRECATED.bs").toThreadKey(f),i=b("Promise").all([b("MAWThreadId.bs").isSecureThreadId(c,h),j(c,h),k(c,h,g)]).then(function(c){var i=c[2],j=c[1],k=c[0];return b("MAWVerifyThreadCutover.bs").verifyThreadCutover(b("LSDatabaseDeferred.bs").db,h).then(function(c){c=k||c;if(q!==void 0&&!c)return b("bs_curry")._6(q,f,d,a,m,e,g);if(o!==void 0)if(s!==void 0&&j!==void 0){b("bs_curry")._2(o,f,a.messageId);return b("bs_curry")._2(s,j,i)}else return b("bs_curry")._2(o,f,a.messageId);else return b("unrecoverableViolation")("We won't reach to this step, if you are in QE, you should use secure forward","messenger_web_product")})});b("promiseDone")(i)},u=function(f){var h=b("MWThread_DEPRECATED.bs").toThreadKey(f),i=b("Promise").all([b("MAWThreadId.bs").isSecureThreadId(c,h),j(c,h),k(c,h,g)]).then(function(c){var g=c[2],i=c[1],j=c[0];return b("MAWVerifyThreadCutover.bs").verifyThreadCutover(b("LSDatabaseDeferred.bs").db,h).then(function(c){c=j||c;if(p!==void 0&&c)if(s!==void 0&&i!==void 0){b("bs_curry")._5(p,f,d,a,m,e);return b("bs_curry")._2(s,i,g)}else return b("bs_curry")._5(p,f,d,a,m,e);else return b("bs_curry")._2(n,f,r)})});b("promiseDone")(i)};return h.useMemo(function(){if(f)return t;else return u},[f,t,u,b("LSInt64.bs").string(d.threadKey),a.messageId])}f.$MAWAcceptMessageRequest$requireCond=b("cr:4175");f.$MAWForwardMessage$requireCond=b("cr:11272");f.$MAWForwardMessageFromSecureThread$requireCond=b("cr:1746");f.$MAWFowardMessageFromOpenThread$requireCond=b("cr:1564");f.useForwardMessage=a}),null);
__d("MWChatInteractionLog.re",["MWChatInteractionLog.bs"],(function(a,b,c,d,e,f){a=b("MWChatInteractionLog.bs").logStartUserFlow;f.logStartUserFlow=a}),null);
__d("useMWChatForward",["MWChatForwardDialog.entrypoint","MWChatInteractionLog.re","MWChatMessageId.re","qpl","react","useCometEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useRef;function a(a){var b=a.dropToggle,e=a.forwardDialogType,f=a.messageID,g=a.onClose,j=a.onSend;a=i(null);var k=c("useCometEntryPointDialog")(c("MWChatForwardDialog.entrypoint"),{}),l=k[0];k=h(function(){var a=d("MWChatMessageId.re").getMessageId(f);a!=null&&d("MWChatInteractionLog.re").logStartUserFlow(c("qpl")._(25298392,"4881"),a);l({dropToggle:b,forwardDialogType:e,messageID:f,onSend:j},g)},[j,l,f,g,e,b]);return{onClick:k,triggerRef:a}}g["default"]=a}),98);
__d("LsTargetType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").neg_one;c=b("bs_caml_int64").zero;d=b("bs_caml_int64").one;e=[0,2];b=[0,3];var g=[0,4],h=[0,5],i=[0,6],j=[0,7],k=[0,8],l=[0,9],m=[0,10],n=[0,11],o=[0,12],p=[0,13],q=[0,14],r=[0,15],s=[0,16],t=[0,17],u=[0,18],v=[0,19],w=[0,20],x=[0,21],y=[0,22],z=[0,23],A=[0,24],B=[0,25],C=[0,26],D=[0,27],E=[0,28],F=[0,29],G=[0,30],H=[0,31],I=[0,32],J=[0,33],K=[0,34],L=[0,35],M=[0,36],N=[0,37],O=[0,38],P=[0,39],Q=[0,40],R=[0,41],S=[0,42],T=[0,43],U=[0,44],V=[0,45],W=[0,46],X=[0,47],Y=[0,48],Z=[0,49],$=[0,50],aa=[0,51],ba=[0,52],ca=[0,53],da=[0,54],ea=[0,55],fa=[0,56],ga=[0,57],ha=[0,58],ia=[0,59],ja=[0,60],ka=[0,61],la=[0,62],ma=[0,63],na=[0,64],oa=[0,65],pa=[0,66],qa=[0,67],ra=[0,68],sa=[0,69],ta=[0,70],ua=[0,71],va=[0,72],wa=[0,73],xa=[0,74],ya=[0,75],za=[0,76],Aa=[0,77],Ba=[0,78],Ca=[0,79],Da=[0,80],Ea=[0,81];f.cymkAdd=a;f.cymkViewProfile=c;f.cymkWave=d;f.inboxleft=e;f.inboxleftCall=b;f.inboxleftCamera=g;f.inboxleftRtc=h;f.inboxright=i;f.inboxrightDelete=j;f.inboxrightMore=k;f.inboxrightMute=l;f.inboxrightUnmute=m;f.instantGamePlayGame=n;f.messageRequestAccept=o;f.messageRequestDecline=p;f.messengerAdsCta=q;f.rtcCanonicalCallAgain=r;f.rtcCanonicalCallBack=s;f.rtcGroupCallJoinCall=t;f.rtcGroupJoinVideoChat=u;f.rtcScheduledCall=v;f.seeAll=w;f.reaction=x;f.reactionPlus=y;f.mention=z;f.replyMessage=A;f.replyButton=B;f.phoneNumber=C;f.attachmentVideo=D;f.attachmentImage=E;f.attachmentGif=F;f.voiceClip=G;f.tombstoneView=H;f.messageBubble=I;f.attachmentAudio=J;f.attachmentKeyframe=K;f.xmaWebUrl=L;f.xmaRtcMissedVideo=M;f.xmaRtcMissedAudio=N;f.xmaLiveLocation=O;f.xmaLocationSharing=P;f.forwardIcon=Q;f.xmaOpenNative=R;f.sticker=S;f.address=T;f.forwardButton=U;f.removeButton=V;f.removeForYouself=W;f.removeForEveryone=X;f.moreButton=Y;f.copyButton=Z;f.callPhoneNumber=$;f.copyPhoneNumber=aa;f.messageProfileIcon=ba;f.viewFacebookProfile=ca;f.viewIgProfile=da;f.gotToChat=ea;f.xmaRtcVideoEnded=fa;f.xmaRtxAudioEnded=ga;f.saveButton=ha;f.confirmRemove=ia;f.cancelRemove=ja;f.xmaShopsPdp=ka;f.inboxrightArchive=la;f.reactionIcon=ma;f.xmaContactShare=na;f.xmaCustomerInformationTemplate=oa;f.xmaRtcMissedGroupVideo=pa;f.xmaRtcMissedGroupAudio=qa;f.xmaRtcNewAudioDefault=ra;f.xmaAppointmentRequested=sa;f.xmaAppointmentConfirmed=ta;f.messengerThread=ua;f.inboxrightFavorite=va;f.inboxrightUnfavorite=wa;f.inboxrightUnbump=xa;f.longpressinboxUnbump=ya;f.longpressinboxMute=za;f.longpressinboxFavorite=Aa;f.longpressinboxUnfavorite=Ba;f.dismissMaxFavorite=Ca;f.xmaPollPreview=Da;f.xmaFbVideoMediaViewer=Ea}),null);
__d("MWChatColors.bs",[],(function(a,b,c,d,e,f){"use strict";a={incoming:{color:"xzsf02u"},incomingForwarded:{color:"x12scifz"},outgoing:{color:"x14ctfv"},outgoingForwarded:{color:"xkxfvhb"},replyToOriginal:{backgroundColor:"xmd5bsh",color:"xi81zsa"}};b={action:{alignContent:"xc26acl",alignItems:"x6s0dn4",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",cursor:"x1ypdohk",display:"x78zum5",flexShrink:"x2lah0s",height:"xxk0z11",justifyContent:"xl56j7k",marginEnd:"x11i5rnm",marginStart:"x1mh8g0r",position:"x1n2onr6",textAlign:"x2b8uid",width:"xvy4d1p",":hover":{backgroundColor:"x15vn3sj"}},icon:{height:"x17rw0jw",opacity:"x197sbye",width:"x17z2i9w",":active":{opacity:"x4gyw5p"},":hover":{opacity:"x1o7uuvo"}},svgFill:{fill:"x148u3ch"},svgStroke:{fill:"xbh8q5q",stroke:"xmb71p3"}};c={styles:b};f.styles=a;f.MessageActions=c}),null);
__d("LsActionCategory.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9];f.unknown=a;f.impression=c;f.click=d;f.longClick=e;f.swipe=b;f.scroll=g;f.reactionPlus=h;f.doubleClick=i;f.lock=j;f.raiseDevice=k}),null);
__d("UseMWChatForward.re",["useMWChatForward"],(function(a,b,c,d,e,f){a=b("useMWChatForward");f.useMWChatForwardTypeChecked=a;c=a;f.useMWChatForward=c}),null);
__d("MWChatForwardAction.bs",["CometPressable.react","LsTargetType.bs","MWChatColors.bs","MWLSLogMessageClick.bs","MWTooltip.react","ODS","UseMWChatForward.re","bs_caml_option","bs_curry","gkx","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j=b("MWChatColors.bs").MessageActions.styles,k={icon:{opacity:"x1hc1fzr"}};function l(a){}var m=i.jsx("svg",{height:"22px",viewBox:"0 0 36 36",width:"22px",children:i.jsxs("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",children:[i.jsx("polygon",{points:"0 36 36 36 36 0 0 0"}),i.jsx("path",{className:(h||(h=b("stylex")))(j.svgFill),d:"M22.001,11.0081937 L19,11.0081937 L19,23.007676 C19,23.5599911 18.5525,24.0073413 18,24.0073413 C17.448,24.0073413 17,23.5599911 17,23.007676 L17,11.0081937 L13.998,11.0081937 C13.199,11.0081937 12.7225,10.1169921 13.166,9.45171483 L17.1675,3.44572576 C17.5635,2.85142475 18.436,2.85142475 18.832,3.44572576 L22.8335,9.45171483 C23.2765,10.1169921 22.8,11.0081937 22.001,11.0081937 M24,31 L12,31 C9.791,31 8,29.2105991 8,27.0028383 L8,18.0103492 C8,15.8030883 9.791,14.0131875 12,14.0131875 L14,14.0131875 C14.5525,14.0131875 15,14.4610376 15,15.0128528 C15,15.5646681 14.5525,16.0120183 14,16.0120183 L12,16.0120183 C10.8955,16.0120183 10,16.9067187 10,18.0103492 L10,27.0028383 C10,28.1064688 10.8955,29.0011693 12,29.0011693 L24,29.0011693 C25.1045,29.0011693 26,28.1064688 26,27.0028383 L26,18.0103492 C26,16.9067187 25.1045,16.0120183 24,16.0120183 L22,16.0120183 C21.448,16.0120183 21,15.5646681 21,15.0128528 C21,14.4610376 21.448,14.0131875 22,14.0131875 L24,14.0131875 C26.2095,14.0131875 28,15.8030883 28,18.0103492 L28,27.0028383 C28,29.2105991 26.2095,31 24,31"})]})});function n(a,c){b("ODS").bumpEntityKey(3185,"mwchat_actions","forward");b("MWLSLogMessageClick.bs").logMessageClicked(a,b("LsTargetType.bs").forwardIcon);if(c!==void 0)return b("bs_curry")._1(c.onClick)}function a(a){var c=a.label,d=a.messageID,e=a.onForward,f=a.forwardDialogType;a=a.dropToggle;f=f!==void 0?f:"open_";a=a!==void 0?a:!1;a=b("UseMWChatForward.re").useMWChatForward({dropToggle:a,forwardDialogType:f,messageID:d,onClose:l,onSend:b("bs_curry").__1(e)});var g=a==null?void 0:b("bs_caml_option").some(a);return i.jsx(b("MWTooltip.react"),{align:"middle",position:"above",tooltip:c,children:i.jsx("div",{className:(h||(h=b("stylex")))(j.action),children:i.jsx(b("CometPressable.react"),{"aria-label":c,expanding:!0,onPress:function(a){return n(d,g)},overlayDisabled:!0,role:b("gkx")("1224637")?"menuitem":"button",testid:void 0,children:i.jsx("div",{className:h(j.icon,k.icon),children:m})})})})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.sharedStyles=j;f.styles=k;f.noop=l;f.icon=m;f.onOpenForwardDialog=n;f.make=c}),null);
__d("MWMessageCellKeyCommands.bs",["CometComponentWithKeyCommands.react","MWV2MessageRowActionsContext.bs","bs_curry","cometGetKeyCommandConfig","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c;a=a.children;var d=h.useContext((c=b("MWV2MessageRowActionsContext.bs")).context),e=d.openReactionsMenu,f=h.useCallback(function(a){return b("bs_curry")._1(e.current)},[e]);d=h.useContext(c.context);var g=d.replyToMessage,i=h.useCallback(function(a){return b("bs_curry")._1(g.current)},[g]);d=h.useContext(c.context);var j=d.forwardMessage,k=h.useCallback(function(a){return b("bs_curry")._1(j.current)},[j]);d=h.useContext(c.context);var l=d.removeMessage,m=h.useCallback(function(a){return b("bs_curry")._1(l.current)},[l]);c=h.useMemo(function(){var a,c=[],d=(a=b("cometGetKeyCommandConfig")).getCometAndGeminiKeyCommandConfig("chats","likeMessage",f);c.push(d);d=a.getCometAndGeminiKeyCommandConfig("chats","replyToMessage",i);c.push(d);d=a.getCometAndGeminiKeyCommandConfig("chats","forwardMessage",k);c.push(d);d=a.getCometAndGeminiKeyCommandConfig("chats","removeMessage",m);c.push(d);return c},[f,i,k,m]);return h.jsx(b("CometComponentWithKeyCommands.react"),{commandConfigs:c,xstyle:!1,children:a})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.keyCommands=c}),null);
__d("LSMessageContentType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").one;c=[0,2];d=[0,4];e=[0,8];b=[0,16];var g=[0,32],h=[0,64],i=[0,128],j=[0,256],k=[0,512],l=[0,1024],m=[0,2048],n=[0,4096],o=[0,8192],p=[0,16384],q=[0,32768],r=[0,65536],s=[0,131072],t=[0,262144];f.text=a;f.mediaPreview=c;f.audioClip=d;f.xmaFallback=e;f.lwaWave=b;f.admin=g;f.fileAttachment=h;f.glyph=i;f.tombstone=j;f.storyReply=k;f.singleXma=l;f.hscrollXma=m;f.sticker=n;f.forwardIndicator=o;f.animatedImage=p;f.nullState=q;f.encryptionPlaceholder=r;f.futureproofPlaceholder=s;f.unavailablePlaceholder=t}),null);
__d("MWPBaseMessageListRowActions.bs",["react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={incoming:{flexDirection:"x1q0g3np"},outgoing:{flexDirection:"x15zctf7"},root:{alignItems:"x6s0dn4",display:"x78zum5",width:"x1ll7btr"}};function k(a){var c=a.children;a=a.outgoing;return i.jsx("div",{className:(h||(h=b("stylex")))(j.root,a?j.outgoing:j.incoming),role:"none",children:c})}k.displayName=k.name+" [from "+e.id+"]";d={make:k};function a(a){a=a.children;return i.jsx("div",{children:a})}a.displayName=a.name+" [from "+e.id+"]";a={make:a};var l={incoming:{paddingStart:"x1t2a60a"},moveUpToAccountForReactions:{paddingBottom:"x1hhzuzn"},outgoing:{paddingEnd:"x1mpkggp"},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"x2lah0s",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1ll7btr",zIndex:"x1n327nk"}};function c(a){var c=a.children,d=a.hasReactions,e=a.outgoing;a=a.ariaHidden;a=a!==void 0?a:!1;return i.jsx("div",{"aria-hidden":a,className:(h||(h=b("stylex")))(l.root,d?l.moveUpToAccountForReactions:!1,e?l.outgoing:l.incoming),children:i.jsx(k,{outgoing:e,children:c})})}c.displayName=c.name+" [from "+e.id+"]";e={make:c,styles:l};f.ActionsList=d;f.ActionsListItem=a;f.Container=e}),null);
__d("MDSContextualMenuIcon.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){return h.jsxs("svg",{height:"22px",viewBox:"0 0 22 22",width:"22px",children:[h.jsx("circle",{cx:"11",cy:"6",fill:"var(--placeholder-icon)",r:"2",strokeWidth:"1px"}),h.jsx("circle",{cx:"11",cy:"11",fill:"var(--placeholder-icon)",r:"2",strokeWidth:"1px"}),h.jsx("circle",{cx:"11",cy:"16",fill:"var(--placeholder-icon)",r:"2",strokeWidth:"1px"})]})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.make=c}),null);
__d("MWPCanRemoveMessageGlobally.bs",["LSMessageThreadUnsendabilityStatus.bs","bs_belt_Option","bs_caml"],(function(a,b,c,d,e,f){"use strict";function a(a,c){a=b("bs_belt_Option").mapWithDefault(a.cannotUnsendReason,!0,function(a){return b("bs_caml").i64_eq(a,b("LSMessageThreadUnsendabilityStatus.bs").canUnsend)});c=b("bs_belt_Option").mapWithDefault(c.cannotUnsendReason,!0,function(a){return b("bs_caml").i64_eq(a,b("LSMessageThreadUnsendabilityStatus.bs").canUnsend)});if(a)return c;else return!1}f.make=a}),null);
__d("MWV2LogMessageClick.bs",["LSDatabaseDeferred.bs","LSMessagingThreadTypeUtil.bs","LsActionCategory.bs","Promise","ReQL.bs","UserAgentData","bs_caml_int64","bs_caml_option","bs_int64","promiseDone","requireDeferred"],(function(a,b,c,d,e,f){"use strict";var g=b("requireDeferred")("LsMessageClickFalcoEvent").__setRef("MWV2LogMessageClick.bs");function a(a,c,d,e){var f=d!==void 0?b("bs_caml_option").valFromOption(d):void 0;e=b("LSDatabaseDeferred.bs").db.then(function(d){var e=a.threadKey;d=b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("threads")),{hd:e,tl:0})).then(function(d){d!==void 0&&!b("LSMessagingThreadTypeUtil.bs").isSecure(d.threadType)&&g.onReady(function(d){d.log(function(){var d={};f!==void 0&&(d.action=f);d.browserName=b("UserAgentData").browserName;return{click:{category:b("bs_caml_int64").to_int32(b("LsActionCategory.bs").click)},click_target:{type:b("bs_caml_int64").to_int32(c)},extra:JSON.stringify(d),message:{id:a.messageId,sender_id:void 0,sent_time:b("bs_caml_int64").to_float(a.timestampMs)},thread:{id:b("bs_int64").to_string(a.threadKey),key:void 0,type:void 0},xma:void 0}})});return b("Promise").resolve()});b("promiseDone")(d);return b("Promise").resolve()});b("promiseDone")(e)}f.logger=g;f.log=a}),null);
__d("MWV2MessageRowIsRowFocusedContext.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){}function c(a){}e={isDialogOpened:!1,setFocused:a,setIsDialogOpened:c};var i=h.createContext(e);function d(a){var b=a.children;a=a.value;return h.createElement(i.Provider,{children:b,value:a})}b={make:d};f.emptyValue=e;f.context=i;f.Provider=b}),null);
__d("MWV2ContextualActionsButton.bs",["fbt","CometDeferredPopoverTrigger.react","CometPressable.react","JSResourceForInteraction","LSContactBitOffset.bs","LSContactCapabilityBitOffset.bs","LSMessagingThreadTypeUtil.bs","LSThreadBitOffset.bs","LSThreadCapabilityBitOffset.bs","LsTargetType.bs","MAWGating","MDSContextualMenuIcon.bs","MWCMThreadTypes.bs","MWLSFeatureLimitedStatus.bs","MWPActor.bs","MWPCanRemoveMessageGlobally.bs","MWTooltip.react","MWV2LogMessageClick.bs","MWV2MessageRowActionsContext.bs","MWV2MessageRowIsRowFocusedContext.bs","ReQL.bs","ReQLSubscription.bs","SortedAsyncIterable.bs","bs_belt_Option","bs_caml","bs_caml_obj","bs_caml_option","bs_curry","gkx","qex","react","requireDeferred","stylex","useCometLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=b("requireDeferred")("MWV2ContextualActionsMenuDeferred.react").__setRef("MWV2ContextualActionsButton.bs"),k=h||(h=b("react")),l={action:{alignContent:"xc26acl",alignItems:"x6s0dn4",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",cursor:"x1ypdohk",display:"x78zum5",flexShrink:"x2lah0s",height:"xxk0z11",justifyContent:"xl56j7k",marginEnd:"x11i5rnm",marginStart:"x1mh8g0r",position:"x1n2onr6",textAlign:"x2b8uid",width:"xvy4d1p",":hover":{backgroundColor:"x15vn3sj"}},icon:{height:"x17rw0jw",opacity:"x197sbye",width:"x17z2i9w",":active":{opacity:"x4gyw5p"},":hover":{opacity:"x1o7uuvo"}}};function m(a){}function a(a){var c=a.canRemoveMessageGlobally,d=a.closeActionsMenu,e=a.message,f=a.setMoreMenuOpen,h=a.showForwardActionInContextualMenu,n=a.showReplyActionInContextualMenu,o=a.thread;a=a.extraActions;a=a!==void 0?b("bs_caml_option").valFromOption(a):null;var p=b("useReStore")(),q=g._("__JHASH__I1DdCdLzOkz__JHASH__"),r=b("MWPCanRemoveMessageGlobally.bs").make(o,e),s=b("MWCMThreadTypes.bs").isJoinedCMThread(o.threadType),t=b("ReQLSubscription.bs").useFirst(k.useMemo(function(){if(s)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(p.table("participants")),{hd:o.threadKey,tl:{hd:e.senderId,tl:0}});else return b("SortedAsyncIterable.bs").empty()},[p,JSON.stringify(o.threadKey)])),u=b("ReQLSubscription.bs").useFirst(k.useMemo(function(){if(s)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(p.table("contacts")),{hd:e.senderId,tl:0});else return b("SortedAsyncIterable.bs").empty()},[JSON.stringify(e.senderId),p])),v=b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").adminRecallMessage,o),w=b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").reportMessageToAdmin,o),x=b("LSMessagingThreadTypeUtil.bs").isSecure(o.threadType),y=(!x||b("MAWGating").isFeatureLimitEnabled())&&b("MWLSFeatureLimitedStatus.bs").useIsReadOnlyFeatureLimited(),z=!y&&b("gkx")("1840885"),A=b("MWPActor.bs").useActor();u=u!==void 0?b("bs_belt_Option").getWithDefault(b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").isCommunityBotPage,u),!1):!1;var B=b("qex")._("898")===!0&&b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").pinnedMessagesV2,o)&&!e.isUnsent,C=e.isUnsent;C=s?C?!1:r?!0:v:x?!y&&(b("MAWGating").isUnsendGlobalEnabled()&&b("bs_caml").i64_eq(e.senderId,A)&&!e.isUnsent||b("MAWGating").isUnsendLocallyEnabled()):z;r=b("useCometLazyDialog")(b("JSResourceForInteraction")("MWV2RemoveMessageDialog").__setRef("MWV2ContextualActionsButton.bs"));var D=r[0];v=t!==void 0?b("bs_belt_Option").getWithDefault(t.isAdmin,!1):!1;x=e.unsentTimestampMs;y=x!==void 0;z=b("MWCMThreadTypes.bs").isJoinedCMThread(o.threadType)&&w&&!v&&b("bs_caml").i64_neq(A,e.senderId)&&!y&&!u;r=b("MWCMThreadTypes.bs").isJoinedCMThread(o.threadType)&&b("bs_caml").i64_neq(A,e.senderId)&&!y;t=k.useCallback(function(a){a={message:e,onClose:m,thread:o};return D(a,m)},[e,D]);x=k.useContext(b("MWV2MessageRowActionsContext.bs").context);var E=x.removeMessage;C?E.current=t:E.current=m;var F=k.useCallback(function(a){if(b("gkx")("3417")){E.current=m;return}},[E]);k.useEffect(function(){return F},[F]);w=k.useContext(b("MWV2MessageRowIsRowFocusedContext.bs").context);if(!(h||n||B||C||r||b("bs_caml_obj").caml_notequal(a,null)))return null;var G=w.setFocused;return k.jsx(b("CometDeferredPopoverTrigger.react"),{align:"middle",onVisibilityChange:function(a){b("bs_curry")._1(f,function(b){return a});return b("bs_curry")._1(G,function(b){return a})},popoverProps:{canRemoveMessageGlobally:c,closeActionsMenu:d,extraActions:a,message:e,showForwardActionInContextualMenu:h,showPinMessageActionInContextualMenu:B,showReplyActionInContextualMenu:n,showReportCommunityMessageToAdmin:z,showReportCommunityMessageToFacebook:r,showUnsendInContextualMenu:C},popoverResource:j,popoverType:"menu",position:"above",children:function(a,c){var d=function(a){b("bs_curry")._1(c);return b("MWV2LogMessageClick.bs").log(e,b("LsTargetType.bs").moreButton)};return k.jsx(b("MWTooltip.react"),{align:"middle",position:"above",tooltip:q,children:k.jsx(b("CometPressable.react"),{"aria-label":q,expanding:!0,onPress:d,overlayDisabled:!0,ref:a,testid:void 0,children:k.jsx("div",{className:(i||(i=b("stylex")))(l.action),children:k.jsx("div",{className:i(l.icon),children:k.jsx(b("MDSContextualMenuIcon.bs").make,{})})})})})}})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.contextualActionsMenuDeferred=j;f.styles=l;f.noop=m;f.make=c}),null);
__d("MWV2ForwardMessageButton.bs",["fbt","LSBitFlag.bs","LSMessageContentType.bs","LSMessagingThreadTypeUtil.bs","MAWGating","MWChatForwardAction.bs","MWChatMessageId.bs","MWV2ForwardMessage.bs","ReQL.bs","ReQLSubscription.bs","bs_caml_format","bs_caml_obj","bs_int64","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function j(a,c){var d=b("useReStore")();return b("ReQLSubscription.bs").useFirstExn(i.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("threads")),{hd:c.threadKey,tl:0})},[d,JSON.stringify(c.threadKey)]))}function a(a){a=a.message;var c=b("useReStore")();c=j(c,a);var d=b("MAWGating").isForwardEnabled()&&b("LSMessagingThreadTypeUtil.bs").isSecure(c.threadType),e=b("MAWGating").isCrossForwardEnabled();d=d?e?"cross_transport":"secure":e?"cross_transport":"open_";e=b("MWChatMessageId.bs").makeSent(b("bs_int64").to_string(a.threadKey),a.messageId,b("bs_int64").to_string(a.timestampMs));var f=b("MWV2ForwardMessage.bs").useForwardMessage(a);c=!b("LSMessagingThreadTypeUtil.bs").isSecure(c.threadType);a=b("LSBitFlag.bs").has(b("LSMessageContentType.bs").text,a.displayedContentTypes)||b("LSBitFlag.bs").has(b("LSMessageContentType.bs").animatedImage,a.displayedContentTypes)||b("LSBitFlag.bs").has(b("LSMessageContentType.bs").mediaPreview,a.displayedContentTypes)||b("LSBitFlag.bs").has(b("LSMessageContentType.bs").audioClip,a.displayedContentTypes)||b("LSBitFlag.bs").has(b("LSMessageContentType.bs").storyReply,a.displayedContentTypes)||b("bs_caml_obj").caml_equal(a.stickerId,b("bs_caml_format").caml_int64_of_string("369239263222822"))||b("bs_caml_obj").caml_equal(a.stickerId,b("bs_caml_format").caml_int64_of_string("369239343222814"))||b("bs_caml_obj").caml_equal(a.stickerId,b("bs_caml_format").caml_int64_of_string("369239383222810"));c=c&&!a;return i.jsx(b("MWChatForwardAction.bs").make,{dropToggle:c,forwardDialogType:d,label:g._("__JHASH__GvPr2MwluxY__JHASH__"),messageID:e,onForward:f})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.make=c}),null);
__d("MWV2MessageReactionButton.bs",["LSMessagingThreadTypeUtil.bs","MAWGating","MAWPSendOrRemoveReaction.bs","MWCMThreadTypes.bs","MWChatMessageId.bs","MWChatReactionsAction.bs","MWLSFeatureLimitedStatus.bs","MWPActor.bs","ReQL.bs","ReQLSubscription.bs","bs_curry","bs_int64","gkx","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a){var c=b("useReStore")(),d=b("MWPActor.bs").useActor(),e=b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("reactions")),{hd:a.threadKey,tl:{hd:a.messageId,tl:{hd:d,tl:0}}})},[c,a.messageId,JSON.stringify(a.threadKey),d]));if(e!==void 0)return e.reaction}function a(a){var c=a.closeActionsMenu,d=a.message,e=a.setReactionsMenuOpen;a=a.thread;var f=i(d),g=b("LSMessagingThreadTypeUtil.bs").isSecure(a.threadType),j=b("MAWPSendOrRemoveReaction.bs").useSendOrRemoveReaction(d,g,"reaction_tray"),k=(!g||b("MAWGating").isFeatureLimitEnabled())&&b("MWLSFeatureLimitedStatus.bs").useIsReadOnlyFeatureLimited(),l=b("bs_int64").to_string(a.threadKey),m=h.useMemo(function(){return b("MWChatMessageId.bs").makeSent(l,d.messageId,b("bs_int64").to_string(d.timestampMs))},[l,d.messageId,b("bs_int64").to_string(d.timestampMs)]),n=h.useCallback(function(a){return function(c){return b("bs_curry")._3(j,d.messageId,c?void 0:a,c?"remove_reaction":"reaction")}},[l,j,d.messageId]),o=h.useCallback(function(a){return b("bs_curry")._1(e,function(b){return a})},[e]);a=b("gkx")("8026")&&b("MWCMThreadTypes.bs").isBroadcastThread(a.threadType);if(k)return null;else return h.jsx(b("MWChatReactionsAction.bs").make,{closeActionsMenu:c,disableCustomReactions:a,isSecure:g,messageID:m,onVisibilityChange:o,selectedReaction:f,sendReaction:n})}c=a;f.make=c}),null);
__d("MWV2OneToOneThreadBlockedContext.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=h.createContext(!1);function a(a){return h.useContext(i)}function c(a){var b=a.blocked;a=a.children;return h.createElement(i.Provider,{children:a,value:b})}d=c;f.context=i;f.useIsBlocked=a;f.make=d}),null);
__d("MDSReplyActionSvgIcon.bs",["react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={icon:{fill:"x148u3ch"}};function a(a){return i.jsx("svg",{height:"22px",viewBox:"1 1 21 21",width:"22px",children:i.jsx("g",{className:(h||(h=b("stylex")))(j.icon),fillRule:"evenodd",strokeWidth:"1",children:i.jsx("path",{d:"M10.8932368,14.7625445 C10.8932368,15.535432 10.0849567,15.996442 9.48116675,15.5677995 L4.03193175,11.696707 C3.49257425,11.313742 3.49287675,10.4694645 4.03193175,10.0864995 L9.48116675,6.2157095 C10.0849567,5.7867645 10.8932368,6.248077 10.8932368,7.020662 L10.8938418,9.0755445 C15.2129368,9.0755445 18.1517243,11.027577 18.1523293,15.7226795 C18.1523293,16.0820495 17.9036743,16.3349395 17.5273643,16.3349395 C17.2487618,16.3349395 17.0164418,16.1746145 16.8527893,15.680027 C16.1588543,13.584307 14.1063918,12.7049395 10.8938418,12.7049395 L10.8932368,14.7625445 Z"})})})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.styles=j;f.make=c}),null);
__d("MWV2MessageListIsRowModalContext.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){}var i=h.createContext(a);function c(a){var b=a.children;a=a.value;return h.createElement(i.Provider,{children:b,value:a})}d={make:c};f.emptyValue=a;f.context=i;f.Provider=d}),null);
__d("MWV2ReplyButton.bs",["fbt","CometPressable.react","MDSReplyActionSvgIcon.bs","MWPReplyContext.bs","MWTooltip.react","MWV2MessageListIsRowModalContext.bs","MWV2MessageRowActionsContext.bs","bs_curry","gkx","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={action:{alignContent:"xc26acl",alignItems:"x6s0dn4",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",cursor:"x1ypdohk",display:"x78zum5",flexShrink:"x2lah0s",height:"xxk0z11",justifyContent:"xl56j7k",marginEnd:"x11i5rnm",marginStart:"x1mh8g0r",position:"x1n2onr6",textAlign:"x2b8uid",width:"xvy4d1p",":hover":{backgroundColor:"x15vn3sj"}},icon:{height:"x17rw0jw",opacity:"x197sbye",width:"x17z2i9w",":active":{opacity:"x4gyw5p"},":hover":{opacity:"x1o7uuvo"}}};function l(a){}function a(a){var c=a.message;a=g._("__JHASH__xFCj85w6vra__JHASH__");var d=j.useContext(b("MWPReplyContext.bs").context),e=d.setReply,f=j.useContext(b("MWV2MessageListIsRowModalContext.bs").context),h=function(a){b("bs_curry")._2(e,{messageId:c.messageId,offlineThreadingId:c.offlineThreadingId,sendStatusV2:c.sendStatusV2,timestampMs:c.timestampMs},c.threadKey);return b("bs_curry")._1(f,function(a){return""})};d=j.useContext(b("MWV2MessageRowActionsContext.bs").context);var m=d.replyToMessage;m.current=h;var n=j.useCallback(function(a){if(b("gkx")("3417")){m.current=l;return}},[m]);j.useEffect(function(){return n},[n]);return j.jsx(b("MWTooltip.react"),{align:"middle",position:"above",tooltip:a,children:j.jsx("div",{className:(i||(i=b("stylex")))(k.action),children:j.jsx(b("CometPressable.react"),{"aria-label":a,expanding:!0,onPress:function(a){return h()},overlayDisabled:!0,testid:void 0,children:j.jsx("div",{className:i(k.icon),children:j.jsx(b("MDSReplyActionSvgIcon.bs").make,{})})})})})}a.displayName=a.name+" [from "+e.id+"]";c=24;d=a;f.minMessageHeight=c;f.styles=k;f.noop=l;f.make=d}),null);
__d("MWV2UseMessageForwardAction.bs",["LSBitFlag.bs","LSMessageContentType.bs","LSMessagingThreadTypeUtil.bs","LsTargetType.bs","MAWGating","MWChatMessageId.bs","MWV2ForwardMessage.bs","MWV2LogMessageClick.bs","MWV2MessageRowIsRowFocusedContext.bs","UseMWChatForward.re","bs_caml_format","bs_caml_obj","bs_curry","bs_int64","gkx","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a,c){var d=b("gkx")("1224637"),e=!d&&b("MAWGating").isForwardEnabled()&&b("LSMessagingThreadTypeUtil.bs").isSecure(a.threadType);d=!d&&b("MAWGating").isCrossForwardEnabled();e=e?d?"cross_transport":"secure":d?"cross_transport":"open_";d=b("MWChatMessageId.bs").makeSent(b("bs_int64").to_string(c.threadKey),c.messageId,b("bs_int64").to_string(c.timestampMs));var f=b("MWV2ForwardMessage.bs").useForwardMessage(c),g=h.useContext(b("MWV2MessageRowIsRowFocusedContext.bs").context),i=g.setIsDialogOpened,j=g.setFocused;g=!b("LSMessagingThreadTypeUtil.bs").isSecure(a.threadType);a=b("LSBitFlag.bs").has(b("LSMessageContentType.bs").text,c.displayedContentTypes)||b("LSBitFlag.bs").has(b("LSMessageContentType.bs").animatedImage,c.displayedContentTypes)||b("LSBitFlag.bs").has(b("LSMessageContentType.bs").mediaPreview,c.displayedContentTypes)||b("LSBitFlag.bs").has(b("LSMessageContentType.bs").audioClip,c.displayedContentTypes)||b("LSBitFlag.bs").has(b("LSMessageContentType.bs").storyReply,c.displayedContentTypes)||b("bs_caml_obj").caml_equal(c.stickerId,b("bs_caml_format").caml_int64_of_string("369239263222822"))||b("bs_caml_obj").caml_equal(c.stickerId,b("bs_caml_format").caml_int64_of_string("369239343222814"))||b("bs_caml_obj").caml_equal(c.stickerId,b("bs_caml_format").caml_int64_of_string("369239383222810"));var k=b("UseMWChatForward.re").useMWChatForward({dropToggle:g&&!a,forwardDialogType:e,messageID:d,onClose:function(a){b("bs_curry")._1(i,function(a){return!1});return b("bs_curry")._1(j,function(a){return!0})},onSend:f});return function(a){b("MWV2LogMessageClick.bs").log(c,b("LsTargetType.bs").forwardButton);if(!(k==null)){b("bs_curry")._1(i,function(a){return!0});return b("bs_curry")._1(k.onClick)}}}f.useHook=a}),null);
__d("MessagingAttachmentType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,12];f.none=a;f.sticker=c;f.image=d;f.animatedImage=e;f.video=b;f.audio=g;f.file=h;f.xma=i;f.ephemeralImage=j;f.ephemeralVideo=k;f.selfieSticker=l;f.soundBite=m}),null);
__d("MWMessageRowActions.bs",["LSAuthorityLevel.bs","LSBitFlag.bs","LSContactBitOffset.bs","LSContactCapabilityBitOffset.bs","LSMessageContentType.bs","LSMessageSendStatusV2.bs","LSMessagingThreadTypeUtil.bs","LSThreadBitOffset.bs","LSThreadCapabilityBitOffset.bs","MAWGating","MAWMsg.bs","MWCMThreadTypes.bs","MWLSFeatureLimitedStatus.bs","MWPBaseMessageListRowActions.bs","MWTooltipGroup.react","MWV2ContextualActionsButton.bs","MWV2ForwardMessageButton.bs","MWV2MessageReactionButton.bs","MWV2MessageRowActionsContext.bs","MWV2OneToOneThreadBlockedContext.bs","MWV2ReplyButton.bs","MWV2UseMessageForwardAction.bs","MessagingAttachmentType.bs","ReQL.bs","ReQLSubscription.bs","ReQLSuspense","SortedAsyncIterable.bs","bs_belt_Option","bs_caml","bs_caml_int64","bs_caml_option","cr:10871","gkx","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a){}function j(a){var c=b("useReStore")();return b("ReQLSubscription.bs").useFirstExn(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("threads")),{hd:a.threadKey,tl:0})},[c,JSON.stringify(a.threadKey)]))}var k=b("cr:10871")==null?void 0:b("bs_caml_option").some(b("cr:10871"));function l(a){var c=a.alwaysShowForwardForMediaMessages,d=a.canRemoveMessageGlobally,e=a.closeActionsMenu,f=a.interactedWith,g=a.message,l=a.outgoing,m=a.setMoreMenuOpen,n=a.setReactionsMenuOpen;a=a.extraActions;a=a!==void 0?b("bs_caml_option").valFromOption(a):null;var o=j(g),p=b("MWV2OneToOneThreadBlockedContext.bs").useIsBlocked(),q=b("useReStore")(),r=o.threadKey,s=b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(q.table("contacts")),{hd:r,tl:0})},[JSON.stringify(r),q]));s=s!==void 0?b("bs_belt_Option").getWithDefault(b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").restrictPlaced,s),!1):!1;var t=g.ephemeralDurationInSec;t=t!==void 0?b("bs_caml").i64_gt(t,b("bs_caml_int64").zero):!1;var u=b("LSMessagingThreadTypeUtil.bs").isSecure(o.threadType),v=b("MWLSFeatureLimitedStatus.bs").useIsReadOnlyFeatureLimited()&&(!u||b("MAWGating").isFeatureLimitEnabled()),w=b("bs_caml").i64_eq(g.displayedContentTypes,b("LSMessageContentType.bs").sticker),x=b("bs_caml").i64_eq(g.displayedContentTypes,b("LSMessageContentType.bs").singleXma),y=b("bs_caml").i64_neq(g.displayedContentTypes,b("LSMessageContentType.bs").text),z=b("MWCMThreadTypes.bs").isAnyCMThread(o.threadType)&&b("bs_caml").i64_eq(g.sendStatusV2,b("LSMessageSendStatusV2.bs").nonRetriableError),A=b("ReQLSuspense").useFirst(function(){if(y)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(q.table("attachments")),{hd:g.threadKey,tl:{hd:g.messageId,tl:0}});else return b("SortedAsyncIterable.bs").empty()},[q,g.messageId,y]);t=(u?b("MAWGating").isForwardEnabled()&&!t&&!w&&!x:!0)&&b("gkx")("1844772")&&!p&&!s&&!v&&!g.isUnsent&&!z&&!b("MAWMsg.bs").isPlaceholder(g)&&b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").messageForward,o)&&b("bs_caml").i64_gt(g.authorityLevel,b("LSAuthorityLevel.bs").optimistic)&&(A!==void 0&&b("bs_caml").i64_eq(A.attachmentType,b("MessagingAttachmentType.bs").xma)&&(A.attachmentCta1Id!==void 0||A.attachmentCta2Id!==void 0||A.attachmentCta3Id!==void 0||A.defaultCtaId!==void 0)?A.isSharable:!0);w=!p&&!s&&!z&&b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").messageReply,o)&&!g.isUnsent;x=!p&&!s&&!g.isUnsent&&!z&&b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").reactions,o)&&(u?b("MAWGating").isReactionsEnabled():!0);v=b("gkx")("8026")&&b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").reactionsV2,o);A=w&&!c&&f;p=c&&t;s=f&&(x||v);z=u&&b("bs_caml").i64_eq(g.sendStatusV2,b("LSMessageSendStatusV2.bs").retriableError);c=b("MWV2UseMessageForwardAction.bs").useHook(o,g);x=h.useContext(b("MWV2MessageRowActionsContext.bs").context);var B=x.forwardMessage;t&&(B.current=c);var C=h.useCallback(function(a){if(b("gkx")("3417")){B.current=i;return}},[B]);h.useEffect(function(){return C},[C]);return h.jsxs(b("MWPBaseMessageListRowActions.bs").ActionsList.make,{outgoing:l,children:[p?h.jsx(b("MWPBaseMessageListRowActions.bs").ActionsListItem.make,{children:h.jsx(b("MWV2ForwardMessageButton.bs").make,{message:g})}):null,s?h.jsx(b("MWPBaseMessageListRowActions.bs").ActionsListItem.make,{children:h.jsx(b("MWV2MessageReactionButton.bs").make,{closeActionsMenu:e,message:g,setReactionsMenuOpen:n,thread:o})}):null,!(b("cr:10871")==null)&&z?h.jsx(b("MWPBaseMessageListRowActions.bs").ActionsListItem.make,{children:h.jsx(k.make,{message:g})}):null,A?h.jsx(b("MWPBaseMessageListRowActions.bs").ActionsListItem.make,{children:h.jsx(b("MWV2ReplyButton.bs").make,{message:g})}):null,f?h.jsx(b("MWPBaseMessageListRowActions.bs").ActionsListItem.make,{children:h.jsx(b("MWV2ContextualActionsButton.bs").make,{canRemoveMessageGlobally:d,closeActionsMenu:e,extraActions:a,message:g,setMoreMenuOpen:m,showForwardActionInContextualMenu:!p&&t,showReplyActionInContextualMenu:!A&&w,thread:o})}):null]})}l.displayName=l.name+" [from "+e.id+"]";c={make:l};function a(a){var c=a.focused,d=a.hasReactions,e=a.hovered,f=a.message,g=a.outgoing,j=a.ariaHidden,k=a.canRemoveMessageGlobally;a=a.extraActions;j=j!==void 0?j:!1;k=k!==void 0?k:!0;a=a!==void 0?b("bs_caml_option").valFromOption(a):null;var m=h.useState(function(){return!1}),n=h.useState(function(){return!1}),o=b("LSBitFlag.bs").has(b("LSMessageContentType.bs").mediaPreview,f.displayedContentTypes);e=e||c||n[0]||m[0];return h.jsx(b("MWTooltipGroup.react"),{children:h.jsx(b("MWPBaseMessageListRowActions.bs").Container.make,{ariaHidden:j,hasReactions:d,outgoing:g,children:e||o?h.jsx(l,{alwaysShowForwardForMediaMessages:o,canRemoveMessageGlobally:k,closeActionsMenu:i,extraActions:a,interactedWith:e,message:f,outgoing:g,setMoreMenuOpen:n[1],setReactionsMenuOpen:m[1]}):null})})}a.displayName=a.name+" [from "+e.id+"]";d=a;f.noop=i;f.$MAWMessageRetryButton$requireCond=b("cr:10871");f.ActionsList=c;f.make=d}),null);
__d("MWV2TombstonedMessage.bs",["bs_caml_option","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={connectBottom:{borderBottomEndRadius:"x5pf9jr",borderBottomStartRadius:"xo71vjh"},connectTop:{borderTopEndRadius:"x13lgxp2",borderTopStartRadius:"x168nmei"},root:{borderTop:"x1n2xptk",borderEnd:"xkbpzyx",borderBottom:"xdppsyt",borderStart:"x1rr5fae",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",borderTopEndRadius:"x1g8br2z",borderTopStartRadius:"x1tlxs6b",color:"x1dntmbh",maxWidth:"x193iq5w",paddingTop:"x889kno",paddingEnd:"x1iji9kk",paddingBottom:"x1a8lsjc",paddingStart:"x1sln4lm",wordBreak:"x13faqbe"}};function a(a){var c=a.ariaLabel,d=a.children,e=a.connectTop,f=a.connectBottom;a=a.xstyle;e=e!==void 0?e:!1;f=f!==void 0?f:!1;a=a!==void 0?b("bs_caml_option").valFromOption(a):!1;return i.jsx("div",{"aria-label":c,className:(h||(h=b("stylex")))(j.root,e?j.connectTop:!1,f?j.connectBottom:!1,a),children:d})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.styles=j;f.make=c}),null);
__d("MWV2ChatErrorBubble.bs",["fbt","MWV2TombstonedMessage.bs","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={vr:{height:"x36qwtl",width:"xh8yej3"},withBackground:{backgroundColor:"xcrg951"},withRepliedMessage:{zIndex:"x1vjfegm"}};function a(a){a=a.isReply;return j.jsxs("div",{className:(i||(i=b("stylex")))(a?k.withRepliedMessage:k.withBackground),children:[a?null:j.jsx("div",{className:(i||(i=b("stylex")))(k.vr,k.withBackground)}),j.jsx(b("MWV2TombstonedMessage.bs").make,{xstyle:k.withBackground,children:g._("__JHASH__i7dsmazT6Cf__JHASH__")})]})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.styles=k;f.make=c}),null);
__d("MWV2MessageRowSimple.bs",["FocusWithinHandler.react","MWMessageTableFocusTable.bs","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={row:{position:"x1n2onr6"},rowFocusVisible:{zIndex:"x1vjfegm"}};function a(a){var c=a.children;a=a.domElementRef;return i.jsx(b("MWMessageTableFocusTable.bs").Table_.Row.make,{children:i.jsx("div",{ref:a,role:"row",children:i.jsx(b("MWMessageTableFocusTable.bs").Table_.Cell.make,{children:i.jsx(b("FocusWithinHandler.react"),{children:function(a,d){return i.jsx("div",{className:(h||(h=b("stylex")))(j.row,d?j.rowFocusVisible:!1),"data-release-focus-from":"CLICK","data-scope":b("MWMessageTableFocusTable.bs").scopeID,role:"gridcell",tabIndex:0,children:c})}})})})})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.styles=j;f.make=c}),null);
__d("MWAdminTextLayout.bs",["CometTextWithEntities.react","MWChatTextTransform.bs","bs_caml_option","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=a.cta;a=a.message;a=a.text;if(a!==void 0)if(c!==void 0)return h.jsxs(h.Fragment,{children:[h.jsx(b("CometTextWithEntities.react"),{text:a,transforms:b("MWChatTextTransform.bs").epdTextTransforms})," ",b("bs_caml_option").valFromOption(c)]});else return h.jsx(b("CometTextWithEntities.react"),{text:a,transforms:b("MWChatTextTransform.bs").epdTextTransforms});else if(c!==void 0)return b("bs_caml_option").valFromOption(c);else return null}c=a;f.make=c}),null);
__d("MWPColorUtils.re",["MWPColorUtils.bs"],(function(a,b,c,d,e,f){a=b("MWPColorUtils.bs").int64ToHex;f.int64ToHex=a}),null);
__d("MWPThreadTheme.re",["MWPThreadTheme.bs"],(function(a,b,c,d,e,f){a=b("MWPThreadTheme.bs").make;f.make=a;c=b("MWPThreadTheme.bs").useHook;f.useHook=c;d=b("MWPThreadTheme.bs").useBottom;f.useBottom=d}),null);
__d("MWAdminMsgCtaLink.react",["CometLink.react","MWPColorUtils.re","MWPThreadTheme.re","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.children,e=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","xstyle"]);var f=d("MWPThreadTheme.re").useHook();f=f.threadTheme.fallbackColor;return h.jsx(c("CometLink.react"),babelHelpers["extends"]({style:{color:d("MWPColorUtils.re").int64ToHex(f)},weight:"bold",xstyle:e},a,{children:b}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWAdminMsgCtaLink.bs",["MWAdminMsgCtaLink.react"],(function(a,b,c,d,e,f){"use strict";a=b("MWAdminMsgCtaLink.react");f.make=a}),null);
__d("InstantGameCustomUpdateMuteManagementUserActionType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;f.mute=a;f.unmute=c}),null);
__d("MWNotificationMessageInstantGameCustomUpdateMuteManagementAdminMsgCta.bs",["CometLink.react","InstantGameCustomUpdateMuteManagementUserActionType.bs","LS.bs","LSCustomUpdateMuteManagement","LSTransaction.bs","MWAdminTextLayout.bs","ReQL.bs","ReQLSubscription.bs","bs_belt_Option","bs_caml_array","bs_caml_format","bs_caml_option","bs_int64","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=a.message,d=a.shouldMute;a=function(a){var e=b("useReStore")();a=h.useMemo(function(){return b("ReQL.bs").take(b("ReQL.bs").filter(b("ReQL.bs").fromTableAscending(e.table("admin_message_ctas")),function(a){return a.messageId===c.messageId}),1)},[e,c.threadKey]);a=b("bs_caml_array").get(b("ReQLSubscription.bs").useArray(a),0).targetId;var f=b("bs_int64").to_string(c.threadKey),g=b("bs_int64").to_string(b("bs_belt_Option").getExn(a)),i=d?b("InstantGameCustomUpdateMuteManagementUserActionType.bs").mute:b("InstantGameCustomUpdateMuteManagementUserActionType.bs").unmute;return h.useCallback(function(a){b("LSTransaction.bs").run(e,function(a){return b("LSCustomUpdateMuteManagement")(b("bs_caml_format").caml_int64_of_string(f),b("bs_caml_format").caml_int64_of_string(g),i,b("LS.bs").make(a))},"readWrite")},[e,f,i])};var e=c.adminMsgCtaTitle,f={message:c};a=e!==void 0?b("bs_caml_option").some(h.jsx(b("CometLink.react"),{color:"blueLink",onClick:a(),target:"_blank",children:e})):void 0;a!==void 0&&(f.cta=b("bs_caml_option").valFromOption(a));return h.jsx(b("MWAdminTextLayout.bs").make,babelHelpers["extends"]({},f))}a.displayName=a.name+" [from "+e.id+"]";c=a;f.make=c}),null);
__d("InstantGameBotMessageSubscriptionManagementUserActionType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;f.subscribe=a;f.unsubscribe=c}),null);
__d("MWNotificationMessageInstantGameSubscriptionManagementAdminMsgCta.bs",["CometLink.react","InstantGameBotMessageSubscriptionManagementUserActionType.bs","LS.bs","LSTransaction.bs","LSUpdateBotSubscription","MWAdminTextLayout.bs","bs_caml_format","bs_caml_option","bs_int64","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=a.message,d=a.shouldSubscribe;a=function(a){var e=b("useReStore")(),f=b("bs_int64").to_string(c.threadKey),g=d?b("InstantGameBotMessageSubscriptionManagementUserActionType.bs").subscribe:b("InstantGameBotMessageSubscriptionManagementUserActionType.bs").unsubscribe;return h.useCallback(function(a){b("LSTransaction.bs").run(e,function(a){return b("LSUpdateBotSubscription")(b("bs_caml_format").caml_int64_of_string(f),g,b("LS.bs").make(a))},"readWrite")},[e,f,g])};var e=c.adminMsgCtaTitle,f={message:c};a=e!==void 0?b("bs_caml_option").some(h.jsx(b("CometLink.react"),{color:"blueLink",onClick:a(),target:"_blank",children:e})):void 0;a!==void 0&&(f.cta=b("bs_caml_option").valFromOption(a));return h.jsx(b("MWAdminTextLayout.bs").make,babelHelpers["extends"]({},f))}a.displayName=a.name+" [from "+e.id+"]";c=a;f.make=c}),null);
__d("MWNotificationMessageManageNotificationsLazyDialogTrigger.bs",["CometLazyDialogTrigger.react","JSResourceForInteraction","bs_curry","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=a.isOptOut,d=a.renderer,e=a.targetId;a=a.threadKey;var f=h.useRef(null);return h.jsx(b("CometLazyDialogTrigger.react"),{dialogProps:{isOptOut:c,targetId:e,threadKey:a},dialogResource:b("JSResourceForInteraction")("MWNotificationMessagesManageNotificationsDialog.react",{"class":"fluid",name:"MWNotificationMessagesManageNotificationsDialog"}).__setRef("MWNotificationMessageManageNotificationsLazyDialogTrigger.bs"),children:function(a){return b("bs_curry")._2(d,a,f)}})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.make=c}),null);
__d("MWNotificationMessageManageNotificationsAdminMsgCta.bs",["CometPressable.react","CometTextWithEntities.react","MWNotificationMessageManageNotificationsLazyDialogTrigger.bs","bs_curry","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=a.isOptOut,d=a.targetId,e=a.threadKey,f=a.title;a=function(a,c){return h.jsx(b("CometPressable.react"),{onPress:function(c){return b("bs_curry")._1(a)},children:h.jsx(b("CometTextWithEntities.react"),{text:f})})};return h.jsx(b("MWNotificationMessageManageNotificationsLazyDialogTrigger.bs").make,{isOptOut:c,renderer:a,targetId:d,threadKey:e})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.make=c}),null);
__d("P2bDifferentiationPrivacyDisclosureOpenClickWebFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("3008");c=b("FalcoLoggerInternal").create("p2b_differentiation_privacy_disclosure_open_click_web",a);e.exports=c}),null);
__d("MWV2AdminMsgCta.bs",["CometLink.react","CurrentEnvironment","JSResource","JSResourceForInteraction","MDSLockSvgIcon.bs","MWAdminMsgCtaLink.bs","MWAdminTextLayout.bs","MWInboxRouteBuilder.bs","MWNotificationMessageInstantGameCustomUpdateMuteManagementAdminMsgCta.bs","MWNotificationMessageInstantGameSubscriptionManagementAdminMsgCta.bs","MWNotificationMessageManageNotificationsAdminMsgCta.bs","MWPBumpEntityKey.bs","P2bDifferentiationPrivacyDisclosureOpenClickWebFalcoEvent","ReQL.bs","ReQLSubscription.bs","SortedAsyncIterable.bs","WALogger.bs","XInstagramHelpDotComContentControllerRouteBuilder","XMessengerDotComHelpContentControllerRouteBuilder","XPolarisDirectInboxControllerRouteBuilder","bs_caml_option","bs_curry","bs_int64","cr:4069","react","stylex","useCometLazyDialog","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j=b("cr:4069")==null?void 0:b("bs_caml_option").some(b("cr:4069")),k={adminTextCta:{color:"xz94kzr",display:"x1rg5ohu",fontWeight:"xo1l8bm"}};function a(a){a=a.message;var c=a.adminMsgCtaTitle,d={message:a};a=c!==void 0&&!(b("cr:4069")==null)?b("bs_caml_option").some(i.jsx("div",{className:(h||(h=b("stylex")))(k.adminTextCta),children:i.jsx(j.make,{threadKey:a.threadKey,title:c})})):void 0;a!==void 0&&(d.cta=b("bs_caml_option").valFromOption(a));return i.jsx(b("MWAdminTextLayout.bs").make,babelHelpers["extends"]({},d))}a.displayName=a.name+" [from "+e.id+"]";a={make:a,styles:k};var l={adminTextCta:{display:"x1rg5ohu",fontWeight:"x1s688f"}};function c(a){var c=a.isOptOut,d=a.message,e=b("useReStore")();a=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=d.adminMsgCtaId;if(a!==void 0)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(e.table("admin_message_ctas")),{hd:d.threadKey,tl:{hd:d.messageId,tl:{hd:a,tl:0}}});else return b("SortedAsyncIterable.bs").empty()},[e,d]));var f=d.adminMsgCtaTitle,g={message:d};f=f!==void 0&&a!==void 0?b("bs_caml_option").some(i.jsx("div",{className:(h||(h=b("stylex")))(l.adminTextCta),children:i.jsx(b("MWNotificationMessageManageNotificationsAdminMsgCta.bs").make,{threadKey:d.threadKey,title:f,targetId:a.targetId,isOptOut:c})})):void 0;f!==void 0&&(g.cta=b("bs_caml_option").valFromOption(f));return i.jsx(b("MWAdminTextLayout.bs").make,babelHelpers["extends"]({},g))}c.displayName=c.name+" [from "+e.id+"]";c={make:c,styles:l};function d(a){var c=a.message,d=b("useReStore")();a=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=c.adminMsgCtaId;if(a!==void 0)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("admin_message_ctas")),{hd:c.threadKey,tl:{hd:c.messageId,tl:{hd:a,tl:0}}});else return b("SortedAsyncIterable.bs").empty()},[d,c]));if(a!==void 0){var e=a.title;if(e!==void 0){a=a.actionUrl;a=a!==void 0?b("bs_caml_option").some(i.jsx(b("CometLink.react"),{href:a,color:"blueLink",target:"_blank",children:e})):void 0}else a=void 0}else a=void 0;e={message:c};a!==void 0&&(e.cta=b("bs_caml_option").valFromOption(a));return i.jsx(b("MWAdminTextLayout.bs").make,babelHelpers["extends"]({},e))}d.displayName=d.name+" [from "+e.id+"]";d={make:d};function m(a){var c=a.message,d=b("useReStore")();a=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=c.adminMsgCtaId;if(a!==void 0)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("admin_message_ctas")),{hd:c.threadKey,tl:{hd:c.messageId,tl:{hd:a,tl:0}}});else return b("SortedAsyncIterable.bs").empty()},[d,c]));var e=b("useCometLazyDialog")(b("JSResource")("MWPrivacyDisclosureDialog.react").__setRef("MWV2AdminMsgCta.bs")),f=e[0];if(a!==void 0){e=a.title;a=e!==void 0?b("bs_caml_option").some(i.jsx(b("CometLink.react"),{color:"blueLink",onClick:function(a){f({entryPoint:"ADMIN_TEXT",onClose:function(a){},threadKey:c.threadKey},function(a){}),b("P2bDifferentiationPrivacyDisclosureOpenClickWebFalcoEvent").log(function(a){return{consumer_id:"0",entry_point:"ADMIN_TEXT",page_id:b("bs_int64").to_string(c.threadKey)}})},children:e})):void 0}else a=void 0;e={message:c};a!==void 0&&(e.cta=b("bs_caml_option").valFromOption(a));return i.jsx(b("MWAdminTextLayout.bs").make,babelHelpers["extends"]({},e))}m.displayName=m.name+" [from "+e.id+"]";m={make:m};function n(a){var c=a.message,d=b("useReStore")();a=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=c.adminMsgCtaId;if(a!==void 0)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("admin_message_ctas")),{hd:c.threadKey,tl:{hd:c.messageId,tl:{hd:a,tl:0}}});else return b("SortedAsyncIterable.bs").empty()},[d,c]));var e=b("useCometLazyDialog")(b("JSResource")("MWServicesLegalLiabilityDisclaimer.react").__setRef("MWV2AdminMsgCta.bs")),f=e[0];if(a!==void 0){e=a.title;a=e!==void 0?b("bs_caml_option").some(i.jsx(b("CometLink.react"),{color:"blueLink",onClick:function(a){return f({entryPoint:"ADMIN_TEXT",onClose:function(a){},threadKey:c.threadKey},function(a){})},children:e})):void 0}else a=void 0;e={message:c};a!==void 0&&(e.cta=b("bs_caml_option").valFromOption(a));return i.jsx(b("MWAdminTextLayout.bs").make,babelHelpers["extends"]({},e))}n.displayName=n.name+" [from "+e.id+"]";n={make:n};var o={adminTextCta:{color:"xz94kzr",display:"x1rg5ohu",fontWeight:"xk50ysn"},lockIcon:{bottom:"x1o583il",display:"x1rg5ohu",position:"x1n2onr6",right:"x3lmqil"}};function p(a){var c=a.message,d=b("useReStore")();a=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=c.adminMsgCtaId;if(a!==void 0)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("admin_message_ctas")),{hd:c.threadKey,tl:{hd:c.messageId,tl:{hd:a,tl:0}}});else return b("SortedAsyncIterable.bs").empty()},[d,c]));if(a!==void 0){a=a.title;a=a!==void 0?b("bs_caml_option").some(i.jsx("div",{className:(h||(h=b("stylex")))(o.adminTextCta),children:i.jsx(b("CometLink.react"),{href:b("CurrentEnvironment").instagramdotcom?b("XInstagramHelpDotComContentControllerRouteBuilder").buildUri({cms_id:"491565145294150"}).setDomain("help.instagram.com").setProtocol("https").toString():b("XMessengerDotComHelpContentControllerRouteBuilder").buildUri({cms_id:"786613221989782"}).toString(),target:"_blank",children:a})})):void 0}else a=void 0;var e={message:c};a!==void 0&&(e.cta=b("bs_caml_option").valFromOption(a));return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:(h||(h=b("stylex")))(o.lockIcon),children:i.jsx(b("MDSLockSvgIcon.bs").make,{color:"tertiary",size:String(16)})}),i.jsx(b("MWAdminTextLayout.bs").make,babelHelpers["extends"]({},e))]})}p={make:p,styles:o};var q={adminTextCta:{color:"xz94kzr",display:"x1rg5ohu",fontWeight:"xk50ysn"},lockIcon:{bottom:"x1o583il",display:"x1rg5ohu",position:"x1n2onr6",right:"x3lmqil"}};function r(a){var c=a.message,d=b("useReStore")();a=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("mi_act_mapping_table")),{hd:c.threadKey,tl:0}),function(a){return b("bs_int64").to_string(a.jid)})},[d,JSON.stringify(c.threadKey)]));a=a!==void 0?b("CurrentEnvironment").instagramdotcom?b("XPolarisDirectInboxControllerRouteBuilder").buildExtraURL("/direct/t/{?thread_key}/",{thread_key:a}):b("bs_curry")._1(b("MWInboxRouteBuilder.bs").buildURL,{thread_key:a}):(b("WALogger.bs").log("Failed to generate the url, thread is missing in mi_act_mapping table for threadKey "+b("bs_int64").to_string(c.threadKey)),b("bs_curry")._1(b("MWInboxRouteBuilder.bs").buildHomeURL,{}));var e=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=c.adminMsgCtaId;if(a!==void 0)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("admin_message_ctas")),{hd:c.threadKey,tl:{hd:c.messageId,tl:{hd:a,tl:0}}});else return b("SortedAsyncIterable.bs").empty()},[d,c]));if(e!==void 0){e=e.title;a=e!==void 0?b("bs_caml_option").some(i.jsx("div",{className:(h||(h=b("stylex")))(q.adminTextCta),children:i.jsx(b("CometLink.react"),{href:a,target:"_self",children:e})})):void 0}else a=void 0;e={message:c};a!==void 0&&(e.cta=b("bs_caml_option").valFromOption(a));return i.jsx(b("MWAdminTextLayout.bs").make,babelHelpers["extends"]({},e))}r.displayName=r.name+" [from "+e.id+"]";r={make:r,styles:q};function s(a){var c=a.message;a=a.shouldSubscribe;return i.jsx(b("MWNotificationMessageInstantGameSubscriptionManagementAdminMsgCta.bs").make,{message:c,shouldSubscribe:a})}s.displayName=s.name+" [from "+e.id+"]";s={make:s};function t(a){var c=a.message;a=a.shouldMute;return i.jsx(b("MWNotificationMessageInstantGameCustomUpdateMuteManagementAdminMsgCta.bs").make,{message:c,shouldMute:a})}t.displayName=t.name+" [from "+e.id+"]";t={make:t};function u(a){var c=a.message,d=b("useReStore")();a=b("useCometLazyDialog")(b("JSResourceForInteraction")("MWPinnedMessagesDialog.react").__setRef("MWV2AdminMsgCta.bs"));var e=a[0];a=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=c.adminMsgCtaId;if(a!==void 0)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("admin_message_ctas")),{hd:c.threadKey,tl:{hd:c.messageId,tl:{hd:a,tl:0}}});else return b("SortedAsyncIterable.bs").empty()},[d,c]));var f=function(a){b("MWPBumpEntityKey.bs").bumpEntityKeyWithAppId("mw_pinned_messages","see_all_admin_msg_cta");return e({onClose:function(a){},threadKey:c.threadKey},function(a){})};if(a!==void 0){a=a.title;f=a!==void 0?b("bs_caml_option").some(i.jsx(b("MWAdminMsgCtaLink.bs").make,{onClick:f,children:a})):void 0}else f=void 0;a={message:c};f!==void 0&&(a.cta=b("bs_caml_option").valFromOption(f));return i.jsx(b("MWAdminTextLayout.bs").make,babelHelpers["extends"]({},a))}u.displayName=u.name+" [from "+e.id+"]";e={make:u};f.$MAWEphemeralAdminMsgCta$requireCondXplat=b("cr:4069");f.AdminMsgArmadilloEphemeralChangeDuration=a;f.AdminMsgNotificationMessageManageNotifications=c;f.AdminMsgWebUrl=d;f.AdminMsgP2bPrivacyDisclosure=m;f.AdminMsgServiceBookingLegalDisclaimer=n;f.AdminMsgE2EEDescription=p;f.AdminMsgCutoverRollback=r;f.AdminMsgInstantGameBotMessageSubscriptionManagement=s;f.AdminMsgInstantGameCustomUpdateMuteManagement=t;f.AdminMsgShowPinnedMessages=e}),null);
__d("MWV2ChatAdminMessage.bs",["MAWGating","MWAdminTextLayout.bs","MWText.react","MWV2AdminMsgCta.bs","bs_curry","cr:4082","cr:4084","cr:4093","gkx","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react");function j(a){if(a!==void 0)return a.isAdminMessage;else return!1}var k={container:{paddingEnd:"xc73u3c",paddingStart:"x5ib6vp",paddingTop:"xyamay9",paddingBottom:"x1l90r2v"},containerThatPrecedesAdminMessage:{paddingBottom:"x1a8lsjc"},containerThatProceedsAdminMessage:{paddingTop:"x889kno"},content:{marginTop:"xr1yuqi",marginEnd:"xkrivgy",marginBottom:"x4ii5y1",marginStart:"x1gryazu",maxWidth:"x1ekjcvx",textAlign:"x2b8uid",wordBreak:"x13faqbe"}};function l(a){var c=a.children,d=a.nextMessage;a=a.prevMessage;return i.jsx("div",{className:(h||(h=b("stylex")))(k.container,j(a)?k.containerThatProceedsAdminMessage:!1,j(d)?k.containerThatPrecedesAdminMessage:!1),children:i.jsx("div",{className:h(k.content),children:c})})}l.displayName=l.name+" [from "+e.id+"]";c={make:l,styles:k};function a(a){var c=a.message,d=a.nextMessage;a=a.prevMessage;var e=!(b("cr:4082")==null)&&!(b("cr:4093")==null)?b("bs_curry")._3(b("cr:4082").buildLocalizedString,[],[],b("cr:4093").currentUserAddedDevice):"";e=b("MAWGating").isAdminMsgOptEnabled()&&c.text===e&&!(b("cr:4084")==null)?i.jsx(b("cr:4084").make,{}):null;var f=c.adminMsgCtaType,g,h=0;f!==void 0?f==="admin_msg_armadillo_ephemeral_change_duration"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgArmadilloEphemeralChangeDuration.make,{message:c}):f==="admin_msg_web_url"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgWebUrl.make,{message:c}):f==="admin_msg_p2b_privacy_disclosure"&&b("gkx")("2386")?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgP2bPrivacyDisclosure.make,{message:c}):f==="admin_notification_messages_opt_out"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgNotificationMessageManageNotifications.make,{isOptOut:!0,message:c}):f==="admin_notification_messages_opt_in"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgNotificationMessageManageNotifications.make,{isOptOut:!1,message:c}):f==="admin_msg_thread_level_cutover"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgE2EEDescription.make,{message:c}):f==="admin_msg_e2ee_thread"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgE2EEDescription.make,{message:c}):f==="admin_msg_cutover_rollback"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgCutoverRollback.make,{message:c}):f==="xmat_instant_game_bot_message_subscribe"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgInstantGameBotMessageSubscriptionManagement.make,{message:c,shouldSubscribe:!0}):f==="xmat_instant_game_bot_message_unsubscribe"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgInstantGameBotMessageSubscriptionManagement.make,{message:c,shouldSubscribe:!1}):f==="admin_msg_view_pin_msgs_v2"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgShowPinnedMessages.make,{message:c}):f==="xmat_instant_game_custom_update_message_mute"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgInstantGameCustomUpdateMuteManagement.make,{message:c,shouldMute:!0}):f==="xmat_instant_game_custom_update_message_unmute"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgInstantGameCustomUpdateMuteManagement.make,{message:c,shouldMute:!1}):f==="admin_message_service_booking_legal_disclaimer"?g=i.jsx(b("MWV2AdminMsgCta.bs").AdminMsgServiceBookingLegalDisclaimer.make,{message:c}):h=1:h=1;h===1&&(g=i.jsxs("div",{children:[i.jsx(b("MWAdminTextLayout.bs").make,{message:c}),e]}));return i.jsx(l,{nextMessage:d,prevMessage:a,children:i.jsx(b("MWText.react"),{color:"tertiary",type:"meta4",children:g})})}a.displayName=a.name+" [from "+e.id+"]";d=a;f.Container=c;f.$MAWAdminMsg$requireCondXplat=b("cr:4082");f.$MAWAdminViewLogins$requireCondXplat=b("cr:4084");f.$MAWLocalizationType$requireCondXplat=b("cr:4093");f.make=d}),null);
__d("MWV2MessageStartOfGroupContent.bs",["MWPDateBreak.bs","MWPMessageListColumn.bs","MWV2ChatAdminMessage.bs","MWV2MessageRowSimple.bs","bs_caml_int64","bs_int64","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a,c){if(c!==void 0)return b("bs_int64").compare(b("bs_int64").abs(b("bs_caml_int64").sub(a.timestampMs,c.timestampMs)),[0,9e5])>0;else return!0}function j(a){var c=a.domElementRef,d=a.message;a=a.prevMessage;if(i(d,a))return h.jsx(b("MWV2MessageRowSimple.bs").make,{domElementRef:c,children:h.jsx(b("MWPMessageListColumn.bs").Shrinkwrap.make,{children:h.jsx(b("MWV2ChatAdminMessage.bs").Container.make,{nextMessage:d,prevMessage:a,children:h.jsx(b("MWPDateBreak.bs").make,{timestamp:b("bs_caml_int64").to_float(d.timestampMs)})})})});else return null}c={make:j};function a(a){var b=a.domElementRef,c=a.message;a=a.prevMessage;return h.jsx(j,{domElementRef:b,message:c,prevMessage:a})}a.displayName=a.name+" [from "+e.id+"]";d=a;f.Datebreak=c;f.make=d}),null);
__d("MWV2MessageActionsVisibility.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){return h.useRef(function(a){})}f.useStopHoveringRef=a}),null);
__d("MAWEphemeralMessageTimer.bs",["fbt","CometScreenReaderText.react","MAWEphemeralConsts.bs","MWText.react","WATimeUtils","bs_caml_int32","bs_caml_int64","bs_curry","react","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function j(a){if(a<b("MAWEphemeralConsts.bs").oneMinuteInSeconds)return g._("__JHASH__hRyyGvVfwlZ__JHASH__",[g._param("seconds",String(a).concat("s"))]);else if(a<b("MAWEphemeralConsts.bs").oneHourInSeconds)return g._("__JHASH__ObtD_ZW4dqo__JHASH__",[g._param("minutes",String(b("bs_caml_int32").div(a,b("MAWEphemeralConsts.bs").oneMinuteInSeconds)).concat("m"))]);else if(a<b("MAWEphemeralConsts.bs").oneDayInSeconds)return g._("__JHASH__kfAHv6U0oM7__JHASH__",[g._param("hours",String(b("bs_caml_int32").div(a,b("MAWEphemeralConsts.bs").oneHourInSeconds)).concat("h"))]);else return g._("__JHASH__pQj617aM9Jj__JHASH__",[g._param("days",String(b("bs_caml_int32").div(a,b("MAWEphemeralConsts.bs").oneDayInSeconds)).concat("d"))])}function k(a){return g._("__JHASH__y-wqFg4O-A0__JHASH__",[g._param("time",a)])}function l(a,c){a=b("bs_caml_int64").to_int32(b("bs_caml_int64").sub(a,b("bs_caml_int64").of_float(b("WATimeUtils").unixTime())));if(c!==void 0&&a>b("bs_caml_int64").to_int32(c))return b("bs_caml_int64").to_int32(c);else return a}function a(a){var c=a.ephemeralDurationInSec,d=a.expirationTimestamp;a=i.useState(function(){return l(d,c)});var e=a[1],f=a[0];a=j(f);var g=k(a);i.useEffect(function(){f>0&&b("setTimeout")(function(a){return b("bs_curry")._1(e,function(a){return f-1|0})},b("MAWEphemeralConsts.bs").msPerSec)},[f,d]);return i.jsxs("div",{className:"xbkr7qi x2b8uid",children:[i.jsx(b("CometScreenReaderText.react"),{text:g}),i.jsx("div",{"aria-hidden":!0,children:i.jsx(b("MWText.react"),{type:"meta1",children:a})})]})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.getScreenReaderText=k;f.getRemainingTimeInSec=l;f.make=c}),null);
__d("MWPCombineTextRenderers.bs",["bs_js_dict"],(function(a,b,c,d,e,f){"use strict";function a(a){var c={};a.forEach(function(a){if(a===void 0)return;var d=a[1];a=a[0];var e=b("bs_js_dict").get(c,a);e!==void 0?c[a]=e.concat([d]):c[a]=[d]});return c}f.useHook=a}),null);
__d("MWPUseLinkRendererFactory.bs",["LSThreadCapabilityBitOffset.bs","MWPThreadCapabilitiesContext.bs","MWTextWithEntities.bs","bs_curry","gkx"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=a!==void 0?a:!1;c=b("MWPThreadCapabilitiesContext.bs").useHook();var e=b("gkx")("1886144")&&b("bs_curry")._1(c,b("LSThreadCapabilityBitOffset.bs").disableLinks);return function(a,c,f){if(e)return;else return[f,b("MWTextWithEntities.bs").linkPlugin(a,void 0,c,d)]}}f.useHook=a}),null);
__d("MWUseTextRenderers.bs",["CometCardedDialogLoadingState.re","CometEntryPointDialogTrigger.react","CometErrorBoundary.re","CometLink.react","GroupsCometJoinChatDialog.entrypoint","MWCMThreadTypes.bs","MWCMUseFolder.bs","MWCMUseShouldGoToFullScreenChat.bs","MWChatTextFormatting","MWInboxCommunityThreadsRouteBuilder.bs","MWLSThread.bs","MWMessageCellFocusTable.bs","MWPCombineTextRenderers.bs","MWPUseLinkRendererFactory.bs","MWV2OpenTabOrThread.bs","bs_belt_Option","bs_curry","bs_int64","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={bold:{fontWeight:"x1s688f"},highlight:{backgroundColor:"xacajkf",borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",paddingTop:"x1nn3v0j",paddingEnd:"x4uap5",paddingBottom:"x1120s5i",paddingStart:"xkhd6sd"},underline:{color:"x1heor9g",textDecoration:"x1bvjpef"}};function k(a){var c=a.folder,d=a.node,e=a.thread;a=b("MWV2OpenTabOrThread.bs").useHook();var f=b("bs_curry")._1(a.openTabOrInbox,!0);a=b("bs_belt_Option").getWithDefault(e.hasPendingInvitation,!1);var g=b("MWCMUseShouldGoToFullScreenChat.bs").useHook();return i.jsx(b("MWMessageCellFocusTable.bs").Table_.Cell.make,{children:i.jsx(b("CometEntryPointDialogTrigger.react"),{dialogEntryPoint:b("GroupsCometJoinChatDialog.entrypoint"),fallback:function(a){return i.jsx(b("CometCardedDialogLoadingState.re").make,{})},otherProps:{invited:a,shouldGoToMessenger:g},preloadParams:{groupID:b("bs_int64").to_string(c.fbGroupId),threadID:b("bs_int64").to_string(e.threadKey)},children:function(a){return i.jsx("span",{className:(h||(h=b("stylex")))(j.bold),role:"gridcell",children:i.jsx(b("CometLink.react"),{onClick:function(c){if(b("MWCMThreadTypes.bs").isUnjoinedCMThread(e.threadType))return b("bs_curry")._1(a);else return b("bs_curry")._2(f,{clientThreadKey:e.clientThreadKey,threadKey:e.threadKey,threadType:e.threadType},"mention")},children:d})})}},b("bs_int64").to_string(e.threadKey))})}k.displayName=k.name+" [from "+e.id+"]";c={make:k};function l(a){var c=a.communityLinkFallback,d=a.node;a=a.threadKey;var e=b("MWLSThread.bs").useThreadExn(a),f=b("MWCMUseFolder.bs").useHook(e);if(f===void 0)return c;a=i.useCallback(function(a){return b("bs_curry")._1(b("MWInboxCommunityThreadsRouteBuilder.bs").buildURL,{folder_id:b("bs_int64").to_string(f.folderId),thread_key:b("bs_int64").to_string(e.threadKey)})},[JSON.stringify(f.folderId)]);return i.jsx(b("MWV2OpenTabOrThread.bs").Provider.make,{value:a,children:i.jsx(k,{folder:f,node:d,thread:e})})}l.displayName=l.name+" [from "+e.id+"]";d={make:l};var m=["Command",function(a,c){return i.jsx(b("MWMessageCellFocusTable.bs").Table_.Cell.make,{children:i.jsx("span",{className:(h||(h=b("stylex")))(j.bold),role:"gridcell",children:a})})}],n=["CommunityChannel",function(a,c){var d=i.jsx(b("MWMessageCellFocusTable.bs").Table_.Cell.make,{children:i.jsx("span",{className:(h||(h=b("stylex")))(j.bold),role:"gridcell",children:a})});return i.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return d},children:i.jsx(l,{communityLinkFallback:d,node:a,threadKey:c.threadKey})})}];function a(a,c){c=a!==void 0?a:!1;var d=c;a=function(a){return b("MWPUseLinkRendererFactory.bs").useHook(d,a)};return b("MWPCombineTextRenderers.bs").useHook([b("bs_curry")._4(a,void 0,[j.underline],"chat_message_regular_link","Link"),b("bs_curry")._4(a,void 0,[j.bold],"profile_link","Profile"),b("bs_curry")._4(a,void 0,[j.highlight],"highlight","Highlight"),m,n,["MessengerTextFormatting",b("MWChatTextFormatting").messageRenderer]])}f.styles=j;f.CommunityChannelLink=c;f.CommunityChannelLinkContainer=d;f.commandRenderer=m;f.communityChannelRenderer=n;f.useHook=a}),null);
__d("MessageProfileRangeType.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==="p")return"p";else if(a==="thread"||a==="t")return"t";else if(a==="thread_active"||a==="a")return"a";else if(a==="s")return"s";else if(a==="c")return"cc";else return"n"}f.ofString=a}),null);
__d("MWV2ChatTextParserUtils.bs",["EmojiRenderer","EmoticonRenderer","FBID.bs","LSContactTypeExact.bs","MWChatTextFormatting","MWLSContactTypeExactUtils.bs","MessageProfileRangeType.bs","ReQL.bs","ReQLSuspense","XCometVanityURLControllerRouteBuilder","bs_caml","bs_caml_array","bs_caml_format","getURLRanges","gkx"],(function(a,b,c,d,e,f){"use strict";var g=new RegExp("/^[ \\r\\n\\s]*$/");function a(a){var c=b("EmojiRenderer").parse(a).map(function(a){return{length:a.length,offset:a.offset}}),d=b("gkx")("1839834")?b("EmoticonRenderer").parse(a).map(function(a){return{length:a.chars.length,offset:a.offset}}):[];c=c.concat(d).sort(function(a,b){return a.offset-b.offset|0});if(c.length===0)return!1;var e={contents:0},f={contents:0};d=c.some(function(b){e.contents===b.offset?(e.contents=e.contents+b.length|0,f.contents=e.contents):f.contents=b.offset;var c=a.substring(e.contents,f.contents);e.contents=b.offset+b.length|0;return g.test(c)===!1});c=e.contents!==a.length&&!g.test(a.substring(f.contents));if(d)return!1;else return!c}function c(a){var c=b("getURLRanges")(a),d=[];a=b("MWChatTextFormatting").getFormattingRanges(a);c.forEach(function(a){a={entity:{__typename:"Link",uri:a.entity.url},length:a.length,offset:a.offset};d.push(a)});return d.concat(a)}function h(a){if(b("gkx")("1968579"))return"/t/"+a;else return"/messages/t/"+a}function i(a,c){try{a=b("ReQLSuspense").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("contacts")),{hd:b("bs_caml_format").caml_int64_of_string(c),tl:0}))}catch(b){a=void 0}if(a===void 0)return h(c);var d=a.contactTypeExact;if(b("bs_caml").i64_eq(d,b("LSContactTypeExact.bs").fbUser))return"https://www.facebook.com"+b("XCometVanityURLControllerRouteBuilder").buildURL({vanity:b("FBID.bs").ofStringExn(c)});if(!b("MWLSContactTypeExactUtils.bs").isIgContact(a))return h(c);d=a.secondaryName;if(d!==void 0)return"https://www.instagram.com/"+d+"/";else return h(c)}function d(a,c,d,e,f){c=c.split(",");var g=d.split(","),j=e.split(","),k=f.split(",");return c.reduce(function(c,d,e){var f=b("MessageProfileRangeType.bs").ofString(b("bs_caml_array").get(k,e));f==="t"||f==="a"?c.push({entity:{__typename:"Profile",id:b("FBID.bs").ofStringExn(d),uri:h(d)},length:b("bs_caml_format").caml_int_of_string(b("bs_caml_array").get(g,e)),offset:b("bs_caml_format").caml_int_of_string(b("bs_caml_array").get(j,e))}):f==="p"?c.push({entity:{__typename:"Profile",id:b("FBID.bs").ofStringExn(d),uri:i(a,d)},length:b("bs_caml_format").caml_int_of_string(b("bs_caml_array").get(g,e)),offset:b("bs_caml_format").caml_int_of_string(b("bs_caml_array").get(j,e))}):f==="cc"?c.push({entity:{__typename:"CommunityChannel",threadKey:b("bs_caml_format").caml_int64_of_string(d)},length:b("bs_caml_format").caml_int_of_string(b("bs_caml_array").get(g,e)),offset:b("bs_caml_format").caml_int_of_string(b("bs_caml_array").get(j,e))}):f==="s"&&c.push({entity:{__typename:"Command"},length:b("bs_caml_format").caml_int_of_string(b("bs_caml_array").get(g,e)),offset:b("bs_caml_format").caml_int_of_string(b("bs_caml_array").get(j,e))});return c},[])}f.utf16RegexSpaces=g;f.isEmojiOnlyMessage=a;f.findRanges=c;f.createURIForThread=h;f.createProfileURIForMention=i;f.findRangesForMentions=d}),null);
__d("MWPGating.bs",["qex"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("qex")._("105")===!0}f.isDualColumnMessageListEnabled=a}),null);
__d("MWPOpenComposerUtils.bs",["LSRemoveMediaSendJobs","LSResumeMediaSendJob","MWConsole","Promise","bs_caml_int64","bs_caml_option","bs_curry"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return a.table("media_staging").get({hd:c,tl:0}).then(function(d){if(d!==void 0)return a.table("media_staging")["delete"]({hd:c,tl:0});else return b("Promise").resolve()})}function c(a,c,d){return a.table("media_staging").get({hd:c,tl:0}).then(function(c){if(c!==void 0)return a.table("media_staging").put(b("bs_curry")._1(d,c));else return b("Promise").resolve()})}function d(a,c,d,e,f){return a.table("attachments").get({hd:c,tl:{hd:d,tl:{hd:e,tl:0}}}).then(function(g){if(g!==void 0)return a.table("attachments").upsert({hd:c,tl:{hd:d,tl:{hd:e,tl:0}}},b("bs_curry")._1(f,g));else return b("Promise").resolve()})}function e(a,c,d){return b("LSResumeMediaSendJob")(c,b("bs_caml_int64").zero,d!==void 0?b("bs_caml_option").valFromOption(d):void 0,a).then(function(d){d=d[0];if(d)return b("LSRemoveMediaSendJobs")(c,a);else return b("Promise").resolve()})}f.deleteMediaStaging=a;f.updateMediaStaging=c;f.updateAttachment=d;f.resumeSendJob=e}),null);
__d("MWPComposerMediaUploadUtil.bs",["FBLogger","MessagingAttachmentType.bs","URI","XComposerPhotoUploader","bs_belt_Array","bs_caml","bs_caml_int64","bs_caml_obj","bs_caml_option","bs_curry","cometIsMimeTypeForMedia","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c,d,e,f,h){a=a!==void 0?a:function(a,b){};var i=d!==void 0?d:function(a,b){};d=e!==void 0?e:!1;e=new(b("XComposerPhotoUploader"))({concurrentLimit:3,onUploadFailure:function(a,c){b("bs_curry")._2(i,a,c);return!0},onUploadProgress:b("bs_curry").__2(a),onUploadStart:function(a){},onUploadSuccess:function(a,d){d=d.response.payload.metadata;var e;if(d==null)b("FBLogger")("messenger_browser_clients").warn("Empty payload"),e={};else{d=b("bs_belt_Array").get(d,0);d!==void 0?e=b("bs_caml_option").valFromOption(d):(b("FBLogger")("messenger_browser_clients").warn("Empty metadata"),e={})}d=e.fbid;var f=e.video_id,g=e.audio_id,h=e.gif_id;e=e.file_id;d=d!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(d)):f!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(f)):g!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(g)):h!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(h)):e!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(e)):void 0;d!==void 0?b("bs_curry")._2(c,a,d):b("unrecoverableViolation")("Unrecognized file upload success payload","messenger_comet")},retryLimit:1,uploadEndpoint:new(g||(g=b("URI")))("/ajax/mercury/upload.php")});a=d?{data:{voice_clip:!0}}:void 0;e.getAsyncFileUploadRequest(f,h,a).send()}function c(a){a=a.type;if(b("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a))return b("MessagingAttachmentType.bs").image;else if(a==="audio/wav")return b("MessagingAttachmentType.bs").audio;else if(a==="image/gif")return b("MessagingAttachmentType.bs").animatedImage;else if(b("cometIsMimeTypeForMedia").isMimeTypeForVideo(a))return b("MessagingAttachmentType.bs").video;else return b("MessagingAttachmentType.bs").file}function d(a,c,d){return{action_url:void 0,attachment_fbid:a,attachment_index:b("bs_caml_int64").zero,attachment_type:b("MessagingAttachmentType.bs").audio,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,description_text:void 0,filename:void 0,filesize:void 0,has_media:!0,has_xma:!1,image_url:void 0,mini_preview:void 0,offline_attachment_id:a,original_file_hash:void 0,playable_duration_ms:b("bs_caml_int64").of_float(d*1e3),playable_url:URL.createObjectURL(c),playable_url_mime_type:c.type,preview_height:void 0,preview_url:void 0,preview_url_mime_type:void 0,preview_width:void 0,source_text:void 0,subtitle_text:void 0,title_text:void 0,xma_layout_type:void 0,xmas_template_type:void 0}}function e(a,c){a=a.map(function(a){return{action_url:void 0,attachment_fbid:a.offlineAttachmentId,attachment_index:b("bs_caml_int64").zero,attachment_type:a.attachmentType,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,description_text:void 0,filename:a.filename,filesize:void 0,has_media:!0,has_xma:!1,image_url:void 0,mini_preview:void 0,offline_attachment_id:a.offlineAttachmentId,original_file_hash:void 0,playable_duration_ms:void 0,playable_url:a.previewUrl,playable_url_mime_type:a.mimeType,preview_height:[0,200],preview_url:a.previewUrl,preview_url_mime_type:void 0,preview_width:[0,200],source_text:void 0,subtitle_text:void 0,title_text:void 0,xma_layout_type:void 0,xmas_template_type:void 0}});var d=[],e=[];a.forEach(function(a){b("bs_caml").i64_eq(a.attachment_type,b("MessagingAttachmentType.bs").image)&&!c?e.push(a):d.push([a])});e.length>0&&d.unshift(e);return d.map(function(a){return a.map(function(a,c){a=b("bs_caml_obj").caml_obj_dup(a);a.attachment_index=b("bs_caml_int64").of_int32(c);return a})})}f.startUpload=a;f.getAttachmentType=c;f.getAudioAttachment=d;f.createPartitionedAttachments=e}),null);
__d("MWPAccessibleEyebrowsText.bs",["MWPAccessibleEyebrowsText.react"],(function(a,b,c,d,e,f){"use strict";a=b("MWPAccessibleEyebrowsText.react");f.make=a}),null);
__d("MWPBaseMessageListRowCountdown.bs",["MAWEphemeralMessageTimer.bs","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={moveUpToAccountForReactions:{paddingBottom:"x1hhzuzn"},root:{backgroundColor:"xcrg951",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1c4vz4f",justifyContent:"xl56j7k",paddingEnd:"x1sxyh0",paddingStart:"xurb0ha",zIndex:"x1vjfegm"}};function a(a){var c=a.ephemeralDurationInSec,d=a.expirationTimestamp,e=a.hasReactions;a=a.ariaHidden;a=a!==void 0?a:!1;return i.jsx("div",{"aria-hidden":a,className:(h||(h=b("stylex")))(j.root,e?j.moveUpToAccountForReactions:!1),children:i.jsx(b("MAWEphemeralMessageTimer.bs").make,{ephemeralDurationInSec:c,expirationTimestamp:d})})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.make=c}),null);
__d("MWPBaseMessageListRow.bs",["BaseThemeProvider.react","LSMessageContentType.bs","MWCombineThemeConfigs.bs","MWMessageDeliveryStatus.bs","MWPBaseMessageListRowCountdown.bs","MWPMessageIsReply.bs","MWPMessageListColumn.bs","MWPMessageParsingUtils.bs","bs_caml","bs_caml_int64","bs_caml_option","bs_curry","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react");function a(a){var c=a.children,d=a.message;a=a.prevMessage;d=b("MWPMessageParsingUtils.bs").isStartOfGroup(d,a);if(d)return b("bs_curry")._1(c);else return null}a={make:a};function j(a){return b("bs_caml").i64_eq(b("bs_caml_int64").and_(a.displayedContentTypes,b("LSMessageContentType.bs").hscrollXma),b("bs_caml_int64").zero)}var k={container:{display:"x78zum5"},inner:{display:"x78zum5",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"xeuugli"},innerOutgoing:{flexDirection:"x15zctf7"}};function c(a){var c=a.children,d=a.hasReactions,e=a.message,f=a.outgoing,g=a.renderGutterItem,l=a.renderMessageActions;a=a.renderProfile;var m=b("MWPMessageIsReply.bs").make(e),n=e.ephemeralExpirationTs,o=e.ephemeralDurationInSec,p=e.isUnsent,q=b("MWMessageDeliveryStatus.bs").getFromSendStatus(e.sendStatusV2);q=q.TAG===1?!0:!1;return i.jsxs("div",{className:(h||(h=b("stylex")))(k.container),role:"none",children:[i.jsxs(b("MWPMessageListColumn.bs").Profile.make,{children:[f?null:b("bs_curry")._1(a),d?i.jsx(b("MWPMessageListColumn.bs").VerticalRhythm.make,{height:18}):null]}),i.jsxs("div",{className:h(k.inner,f?k.innerOutgoing:!1),"data-testid":void 0,role:"none",children:[i.jsx(b("MWPMessageListColumn.bs").Bubble.make,{makeSpaceForActions:j(e),paint:!f||m,children:c}),n!==void 0&&!p?i.jsx(b("MWPBaseMessageListRowCountdown.bs").make,{ephemeralDurationInSec:o,expirationTimestamp:n,hasReactions:d}):null,j(e)?i.jsx(b("MWPMessageListColumn.bs").Shrinkwrap.make,{children:q?null:b("bs_curry")._1(l)}):null,i.jsx(b("MWPMessageListColumn.bs").Grow.make,{children:i.jsx(b("MWPMessageListColumn.bs").HorizontalSpacer.make,{})})]}),i.jsxs(b("MWPMessageListColumn.bs").Shrinkwrap.make,{children:[b("bs_curry")._1(g),d?i.jsx(b("MWPMessageListColumn.bs").VerticalRhythm.make,{height:18}):null]})]})}c.displayName=c.name+" [from "+e.id+"]";c={make:c,styles:k};function d(a){var c=a.children,d=a.message,e=a.nextMessage;a=a.showContent;a=a!==void 0?a:!1;d=b("MWPMessageParsingUtils.bs").isEndOfGroup(d,e);if(d||a)return b("bs_curry")._1(c);else return null}d={make:d};var l={"mwp-reply-background-color":"var(--comment-footer-background)"},m={"mwp-reply-background-color":"var(--comment-footer-background)"},n={dark:m,light:l,type:"VARIABLES"};function o(a){var c=a.xstyle,d=a.children,e=a.domElementRef,f=a.role,g=a.setHovered,j=a.stopHoveringRef;a=a.theme;var k=c!==void 0?b("bs_caml_option").valFromOption(c):!1,l=a!==void 0?a:n,m=i.useCallback(function(a){return b("bs_curry")._1(g,function(a){return!1})},[g]);return i.jsx(b("BaseThemeProvider.react"),{config:i.useMemo(function(){return b("MWCombineThemeConfigs.bs").combine(n,l)},[l]),children:function(a,c){return i.jsx("div",{className:(h||(h=b("stylex")))(a,k),onMouseLeave:function(a){if(j.current===m){b("bs_curry")._1(m);j.current=function(a){};return}},onMouseOver:function(a){b("bs_curry")._1(j.current),b("bs_curry")._1(g,function(a){return!0}),j.current=m},ref:e,role:f,style:c,children:d})}})}o.displayName=o.name+" [from "+e.id+"]";m=o;f.BeforeContent=a;f.Body=c;f.Footer=d;f.defaultTheme=n;f.make=m}),null);
__d("MWPBaseMessageRowHeader.bs",["BaseHeading.react","LSMessageReplySourceTypeV2.bs","MWPAccessibleEyebrowsText.bs","MWPMessageIsReply.bs","MWPMessageListColumn.bs","bs_caml_obj","bs_caml_option","bs_curry","cr:3891","cr:3892","cr:4434","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={alignEnd:{alignItems:"xuk3077"},header:{display:"x78zum5",flexDirection:"xdt5ytf"},spaceBetween:{display:"x78zum5",justifyContent:"x1qughib"},timestamp:{marginTop:"x1anpbxc",paddingEnd:"x11eofan"},timestampWithSnippet:{marginTop:"x1ok221b",paddingEnd:"x11eofan"}};c=b("cr:3891")==null?void 0:b("bs_caml_option").some(b("cr:3891"));d=b("cr:3892")==null?void 0:b("bs_caml_option").some(b("cr:3892"));e=b("cr:4434")==null?void 0:b("bs_caml_option").some(b("cr:4434"));function k(a,c,d,e){var f=a.replySnippet;f=f!==void 0?f!=="":!1;var g=b("bs_caml_obj").caml_equal(a.replySourceTypeV2,b("LSMessageReplySourceTypeV2.bs").forward);if(f){f=b("bs_curry")._2(d,a,e);if(f!==null)return b("bs_caml_option").some(f);else return}if(!g)return;d=b("bs_curry")._2(c,a,e);if(d!==null)return b("bs_caml_option").some(d)}function a(a){var c=a.isFirstMessageInGroup,d=a.isGroupThread,e=a.message,f=a.outgoing,g=a.renderForwardSnippet,l=a.renderPinnedText,m=a.renderReplySnippet,n=a.renderSenderName,o=a.renderTextWrapper,p=a.renderTimestamp;a=a.alwaysRenderSenderName;a=a!==void 0?a:!1;var q=b("MWPMessageIsReply.bs").make(e);g=k(e,g,m,f);m=a||d&&c&&!f&&!q;a=p!==void 0?j.spaceBetween:!1;var r;d=0;var s;g!==void 0?r=i.jsx("div",{role:"none",className:(h||(h=b("stylex")))(j.header,f?j.alignEnd:!1),children:i.jsx(b("MWPMessageListColumn.bs").WithGutters.make,{shrinkwrap:!0,children:b("bs_caml_option").valFromOption(g)})}):b("cr:3891")==null?b("cr:4434")==null?r=m?b("bs_curry")._1(n,e):i.jsx(b("MWPAccessibleEyebrowsText.bs").make,{message:e,outgoing:f}):(s=b("cr:4434"),d=1):(s=b("cr:3891"),d=1);d===1&&(r=i.jsx(s.make,{message:e,outgoing:f,renderPinnedText:function(a){return b("bs_curry")._2(l,a.message,a.showDivider)},renderTextWrapper:o,shouldRenderSenderName:m}));q=i.jsx(i.Fragment,{children:r});n=g!==void 0?j.timestampWithSnippet:j.timestamp;d=i.jsx(i.Fragment,{children:!(b("cr:3892")==null)&&p!==void 0?i.jsx(b("cr:3892").make,{message:e,renderText:o,renderTimestamp:p,xstyle:n}):null});if(c)return i.jsxs(b("BaseHeading.react"),{xstyle:a,children:[q,d]});else return q}a=a;f.styles=j;f.mWMessageEyebrows=c;f.$MWPBaseMessageRowHeaderTimestamp$requireCond=b("cr:3892");f.mwpBaseMessageRowHeaderTimestamp=d;f.$MWPMessageEyebrows$requireCond=b("cr:4434");f.mwMessageEyebrowsForCmBot=e;f.useSnippet=k;f.make=a}),null);
__d("MWPMessageListRowWithKeyboardInteractions.bs",["fbt","BaseHeadingContextWrapper.re","CometPressable.react","CometScreenReaderText.react","CometTimestamp.react","FocusInertRegion.react","FocusRegion.react","FocusWithinHandler.react","KeyCommandHandler.react","MDSTextPairing.react","MWMessageCellFocusTable.bs","MWMessageCellKeyCommands.bs","MWMessageTableFocusTable.bs","MWPBaseMessageListRow.bs","MWPGating.bs","MWPMessageAuthor.bs","MWV2MessageListIsRowModalContext.bs","MWV2MessageRowActionsContext.bs","MWV2MessageRowIsRowFocusedContext.bs","ReactDOMComet","StylexHelpers.bs","bs_caml_int64","bs_caml_option","bs_curry","focusScopeQueries","gkx","react","setTimeout","stylex","useCometTheme","useCometUniqueID","useServerTime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={cell:{display:"x78zum5",flexDirection:"xdt5ytf",position:"x1n2onr6"},cellFocusVisible:{zIndex:"x1vjfegm"},cellModal:{outline:"x1k66dxp",outlineOffset:"x1g40iwv","@media (-webkit-min-device-pixel-ratio: 0)":{outline:"x1bkw7pg"}},enterModalButton:{backgroundColor:"x1h0vfkc",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxShadow:"x152obne",end:"xlr8s2x",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",position:"x10l6tqk",top:"x1qiirwl",transform:"x105ttfm",zIndex:"x1vjfegm"},enterModalButtonVisible:{opacity:"x1hc1fzr"},row:{position:"x1n2onr6"}};function l(a){}function m(a){var b=a.key;if(b==="ArrowUp"||b==="ArrowDown"||b==="ArrowLeft"||b==="ArrowRight"||b==="PageUp"||b==="PageDown"||b==="Home"||b==="End"){a.preventDefault();return}}var n=g._("__JHASH__U5V4JiyTDSI__JHASH__"),o=g._("__JHASH__oYKnPpg2Bpz__JHASH__"),p=g._("__JHASH__ctLNxPXr8we__JHASH__"),q=j.forwardRef(function(a,c){var d=a.text,e=a.xstyle,f=a.focusable,g=a.ariaLabel,h=a.onPress;a=b("useCometTheme")("invert");var i=a[1];g={"aria-label":g,children:j.jsx(b("MDSTextPairing.react"),{body:d,level:4,bodyColor:"primary"}),focusable:f,onPress:function(a){return b("bs_curry")._1(h)},xstyle:function(a){return[i,k.enterModalButton,e]}};d=c==null?void 0:b("bs_caml_option").some(c);d!==void 0&&(g.ref=b("bs_caml_option").valFromOption(d));return b("bs_curry")._1(a[0],{children:j.jsx(b("CometPressable.react"),babelHelpers["extends"]({},g))})});c={make:q};function a(a){var c=a.children,d=a.domElementRef,e=a.isDialogOpened,f=a.isFocused,h=a.isModal,r=a.message,s=a.messageDomID,t=a.nextMessage,u=a.outgoing,v=a.prevMessage,w=a.setFocused,x=a.setHovered,y=a.setIsDialogOpened,z=a.stopHoveringRef;a=a.theme;var A=j.useContext(b("MWV2MessageListIsRowModalContext.bs").context),B=j.useRef(null),C=b("useCometUniqueID")(),D=j.useCallback(function(a){b("bs_curry")._1(A,function(a){return r.messageId}),b("setTimeout")(function(a){b("FocusRegion.react").focusRegionById(C,b("focusScopeQueries").tabbableScopeQuery)},0)},[A,r.messageId,C]),E=function(a){b("bs_curry")._1(A,function(a){return""});a=B.current;if(!(a==null))return a.focus()},F=b("CometTimestamp.react").getTimestamp(b("useServerTime")(),new Date(b("bs_caml_int64").to_float(r.timestampMs))),G=b("MWPMessageAuthor.bs").useAuthorName(r);G=G[0];u=u?g._("__JHASH__g90cYI08lR4__JHASH__"):G!==void 0?G:g._("__JHASH__I4KHPAQ-RAf__JHASH__");var H=b("useCometUniqueID")(),I=j.jsx(b("CometScreenReaderText.react"),{text:g._("__JHASH__BGN2Md9i0L4__JHASH__",[g._param("Stringified timestamp of the incoming message",F),g._param("Name of the author of the incoming message",u)]),id:H}),J=b("useCometUniqueID")(),K=j.useRef(null),L=b("MWPGating.bs").isDualColumnMessageListEnabled()||b("gkx")("5093"),M=b("gkx")("3598"),N=j.useRef(l),O=j.useRef(l),P=j.useRef(l),Q=j.useRef(l);G=j.useMemo(function(){return{isDialogOpened:e,setFocused:w,setIsDialogOpened:y}},[w,y,e]);F=j.useMemo(function(){return{forwardMessage:P,openReactionsMenu:N,removeMessage:Q,replyToMessage:O}},[N,O]);u={children:j.jsx(b("MWMessageTableFocusTable.bs").Table_.Row.make,{children:j.jsx(b("FocusWithinHandler.react"),{onFocusChange:function(a){if(f!==a){b("bs_curry")._1(w,function(b){return a});return b("bs_curry")._1(A,function(b){if((a||e)&&h)return r.messageId;else return""})}},onFocusVisibleChange:function(c){f!==c&&b("bs_curry")._1(w,function(a){return c});var a=K.current;if(c&&!(a==null)){b("setTimeout")(function(b){try{return a.scrollIntoView({behavior:"smooth",block:"nearest"})}catch(b){return a.scrollIntoView(!1)}},0);return}},children:function(a,d){a=j.jsx(b("MWMessageTableFocusTable.bs").Table_.Cell.make,{children:j.jsx("div",{ref:B,role:"gridcell",tabIndex:0,"data-scope":b("MWMessageTableFocusTable.bs").scopeID,"data-release-focus-from":"CLICK",className:(i||(i=b("stylex")))(k.cell,h?k.cellModal:!1,d?k.cellFocusVisible:!1),children:j.jsx(b("FocusInertRegion.react"),{disabled:h,focusQuery:b("focusScopeQueries").tabbableScopeQuery,children:h?j.jsxs(j.Fragment,{children:[j.jsx(b("FocusRegion.react").FocusRegion,{autoFocusQuery:b("focusScopeQueries").tabbableScopeQuery,autoRestoreFocus:!0,containFocusQuery:b("focusScopeQueries").tabbableScopeQuery,recoverFocusQuery:b("focusScopeQueries").tabbableScopeQuery,id:C,children:j.jsx(b("KeyCommandHandler.react"),{onKeyDown:m,children:j.jsxs("div",{role:"dialog","aria-describedby":s,"aria-labelledby":H,id:J,children:[c,h?I:null,j.jsx(q,{ariaLabel:o,focusable:!0,onPress:E,text:g._("__JHASH__PEyi9JodUw1__JHASH__"),xstyle:k.enterModalButtonVisible})]})})}),b("ReactDOMComet").createPortal(j.jsx("div",{"aria-owns":J}),document.body)]}):j.jsxs(j.Fragment,{children:[c,L?null:j.jsx(q,{ariaLabel:n,focusable:!0,onPress:D,ref:K,text:p,xstyle:d?k.enterModalButtonVisible:b("StylexHelpers.bs").styles.visuallyHidden})]})})})});return j.jsxs(j.Fragment,{children:[j.jsx(b("MWMessageCellFocusTable.bs").keyCommands,{onEscape:h?E:void 0,onEnter:h?void 0:D,onSpace:h?void 0:D,children:M?j.jsx(b("MWMessageCellKeyCommands.bs").keyCommands,{message:r,children:a}):a}),L?j.jsx("div",{role:"gridcell",children:j.jsx(q,{ariaLabel:h?g._("__JHASH__C-7ahaHTUI7__JHASH__"):n,focusable:h,onPress:D,ref:K,text:h?g._("__JHASH__C-7ahaHTUI7__JHASH__"):p,xstyle:d&&!h?k.enterModalButtonVisible:b("StylexHelpers.bs").styles.visuallyHidden})}):null]})}})}),message:r,nextMessage:t,prevMessage:v,role:"row",setHovered:x,stopHoveringRef:z,xstyle:k.row};d!==void 0&&(u.domElementRef=b("bs_caml_option").valFromOption(d));a!==void 0&&(u.theme=b("bs_caml_option").valFromOption(a));return j.jsx(b("BaseHeadingContextWrapper.re").make,{children:j.jsx(b("MWV2MessageRowIsRowFocusedContext.bs").Provider.make,{value:G,children:j.jsx(b("MWV2MessageRowActionsContext.bs").Provider.make,{value:F,children:j.jsx(b("MWPBaseMessageListRow.bs").make,babelHelpers["extends"]({},u))})})})}a.displayName=a.name+" [from "+e.id+"]";d=a;f.styles=k;f.noop=l;f.onKeyDown=m;f.enterModalLabel=n;f.exitModalLabel=o;f.enterLabel=p;f.ModalButton=c;f.make=d}),null);
__d("MWPMessageListText.bs",["BaseTheme.react","CometTextWithEntities.react","LSMessageReplySourceTypeV2.bs","MWBaseTheme.bs","MWChatTextTransform.bs","MWPVisibleMessageContext.bs","bs_caml_obj","bs_caml_option","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={forwarded:{borderStartStyle:"x26u7qi",borderStartWidth:"x7g060r",fontSize:"x1nxh6w3",lineHeight:"x1sibtaa",marginTop:"x1gslohp",marginEnd:"x11i5rnm",marginBottom:"x12nagc",marginStart:"x1mh8g0r",paddingEnd:"x1pi30zi",paddingStart:"x1swvt13",whiteSpace:"x126k92a",wordWrap:"x1vvkbs"},forwardedIncoming:{borderStartColor:"xa7jiu",color:"x12scifz"},forwardedOutgoing:{borderStartColor:"x16b4vue",color:"xkxfvhb"},regular:{fontSize:"x6prxxf",lineHeight:"x1fc57z9",textAlign:"x1yc453h",whiteSpace:"x126k92a"},regularIncoming:{color:"xzsf02u"},regularOutgoing:{color:"x14ctfv"}};d={"mw-blockquote-border-start-color":"var(--placeholder-text)"};var k={"mw-blockquote-border-start-color":"var(--placeholder-text)"},l={dark:k,light:d,type:"VARIABLES"};function a(a){if(a)return b("MWBaseTheme.bs").empty;else return l}function c(a){var c=a.message,d=a.outgoing,e=a.ranges,f=a.renderers,g=a.text,k=a.transforms,m=a.xstyleForText;a=a.xstyleForForwarded;k=k!==void 0?k:b("MWChatTextTransform.bs").epdTextTransforms;m=m!==void 0?b("bs_caml_option").valFromOption(m):!1;a=a!==void 0?b("bs_caml_option").valFromOption(a):!1;b("MWPVisibleMessageContext.bs").useHook();c=b("bs_caml_obj").caml_equal(c.replySourceTypeV2,b("LSMessageReplySourceTypeV2.bs").forward);var n=d?b("MWBaseTheme.bs").empty:l;if(g!==void 0)if(c){c={ranges:e,text:g,transforms:k,withParagraphs:!1};f!==void 0&&(c.renderers=b("bs_caml_option").valFromOption(f));a=i.jsx("blockquote",{className:(h||(h=b("stylex")))(j.forwarded,d?j.forwardedOutgoing:j.forwardedIncoming,a),dir:"auto",children:i.jsx(b("CometTextWithEntities.react"),babelHelpers["extends"]({},c))})}else{c={ranges:e,text:g,transforms:k,withParagraphs:!1};f!==void 0&&(c.renderers=b("bs_caml_option").valFromOption(f));a=i.jsx("div",{className:(h||(h=b("stylex")))(j.regular,d?j.regularOutgoing:j.regularIncoming,m),dir:"auto",role:"none",children:i.jsx(b("CometTextWithEntities.react"),babelHelpers["extends"]({},c))})}else a=null;return i.jsx(b("BaseTheme.react"),{config:n,role:"none",children:a})}c.displayName=c.name+" [from "+e.id+"]";k=b("MWBaseTheme.bs").empty;d=c;f.styles=j;f.ougtoingTheme=k;f.incomingTheme=l;f.getTheme=a;f.make=d}),null);
__d("MWPMessageSenderName.bs",["fbt","MWPMessageAuthor.bs","MWPMessageListColumn.bs","gkx","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={container:{color:"xi81zsa",fontSize:"x1ncwhqj",lineHeight:"x15smj1u",marginTop:"x1k70j0n",paddingBottom:"x1120s5i",paddingStart:"x53iox2"}};function l(a){a=a.children;return j.jsx("div",{className:(i||(i=b("stylex")))(k.container),"data-testid":void 0,children:a})}l.displayName=l.name+" [from "+e.id+"]";c={make:l,styles:k};function a(a){a=a.message;var c=b("MWPMessageAuthor.bs").useAuthorName(a);c=c[0];var d=g._("__JHASH__RNW_2o_rk9o__JHASH__"),e=b("gkx")("4365");a=a.takedownState;return a!==void 0&&e?j.jsx(b("MWPMessageListColumn.bs").Shrinkwrap.make,{children:j.jsx(l,{children:d})}):j.jsx(j.Fragment,{children:c!==void 0?j.jsx(b("MWPMessageListColumn.bs").Shrinkwrap.make,{children:j.jsx(l,{children:c})}):null})}d=a;f.GroupHeading=c;f.make=d}),null);
__d("MWPSolidMessageBubble.bs",["bs_belt_Option","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={bubble:{borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",color:"x14ctfv",maxWidth:"x1okitfd",overflowX:"x6ikm8r",overflowY:"x10wlt62",overflowWrap:"x1mzt3pk",paddingTop:"x1y1aw1k",paddingEnd:"xn6708d",paddingBottom:"xwib8y2",paddingStart:"x1ye3gou",position:"x1n2onr6",wordBreak:"x13faqbe",zIndex:"x1vjfegm"},incoming_connect_bot:{borderBottomStartRadius:"x10y3i5r"},incoming_connect_top:{borderTopStartRadius:"x1lcm9me"},outgoing_connect_bot:{borderBottomEndRadius:"xrt01vj"},outgoing_connect_top:{borderTopEndRadius:"x1yr5g0i"},precedes_xma:{borderBottomEndRadius:"x5pf9jr",borderBottomStartRadius:"xo71vjh",boxSizing:"x9f619",maxWidth:"x16it46q",width:"xh8yej3"}};function a(a){var c=a.precedesXMA,d=a.children,e=a.connectBottom,f=a.connectTop,g=a.outgoing,k=a.style;a=a.xstyle;c=c!==void 0?c:!1;return i.jsx("div",{className:(h||(h=b("stylex")))(j.bubble,f?g?j.outgoing_connect_top:j.incoming_connect_top:!1,!c&&e?g?j.outgoing_connect_bot:j.incoming_connect_bot:!1,c?j.precedes_xma:!1,b("bs_belt_Option").getWithDefault(a,!1)),"data-testid":void 0,role:"none",style:k,children:d})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.styles=j;f.make=c}),null);
__d("MessagingBackend.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;f.messengerInfra=a;f.whatsappInfra=c}),null);
__d("MessagingLoggingUtilsAttachmentTypeInt.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,15],r=[0,16],s=[0,17],t=[0,18],u=[0,19],v=[0,20],w=[0,21],x=[0,22],y=[0,23],z=[0,24],A=[0,25],B=[0,26],C=[0,27],D=[0,28],E=[0,29],F=[0,30];f.text=a;f.none=c;f.fbVoiceMessage=d;f.like=e;f.sticker=b;f.videoMessage=g;f.gif=h;f.$$location=i;f.image=j;f.application=k;f.video=l;f.audio=m;f.messengerInvite=n;f.share=o;f.liveLocation=p;f.lightweightAction=q;f.fakeNewsLink=r;f.p2pPayment=s;f.montageDirect=t;f.sphericalPhoto=u;f.reaction=v;f.story=w;f.selfieSticker=x;f.soundBite=y;f.armadilloSysPacket=z;f.deleteForMe=A;f.unsend=B;f.unsendReaction=C;f.poll=D;f.avatarLike=E;f.stack=F}),null);
__d("SendEventType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];f.sendAttempt=a;f.sendAcknowledgement=c;f.appdataAttempt=d;f.appdataAcknowledgement=e}),null);/*FB_PKG_DELIM*/
__d("CometTwoButtonDialogImpl.react",["fbt","CometDialog.react","CometDialogConfirmationFooter.react","CometDialogHeader.react","CometTrackingNodeProvider.react","TetraText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j={dialog:"comet-two-button-dialog",primary:"comet-two-button-dialog-primary",secondary:"comet-two-button-dialog-secondary"};function a(a){var b=a.body,d=a.disabled;d=d===void 0?!1:d;var e=a.onClose,f=a.primary,g=a.secondary,k=a.testids;k=k===void 0?j:k;a=a.title;return i.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:163,children:i.jsx(c("CometDialog.react"),{footer:i.jsx(c("CometDialogConfirmationFooter.react"),{primary:{disabled:d,label:(f=f)!=null?f:h._("__JHASH__dV9Vz_8TRow__JHASH__"),onPress:function(){return e("PRIMARY")},testid:k.primary},secondary:{disabled:d,label:(f=g)!=null?f:h._("__JHASH__vfZ0qXC5Zmr__JHASH__"),onPress:function(){return e("SECONDARY")},testid:k.secondary}}),header:i.jsx(c("CometDialogHeader.react"),{onClose:function(){return e("EXIT")},text:a,withCloseButton:!0}),label:a,onClose:function(){return e("EXIT")},testid:void 0,children:i.jsx("div",{className:"x1n2onr6 x1swvt13 xsag5q8 x1pi30zi xz9dl7a",children:i.jsx(c("TetraText.react"),{type:"body3",children:b})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometConfirmationDialogImpl.react",["CometTwoButtonDialogImpl.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.body,d=a.cancel,e=a.confirm,f=a.disabled;f=f===void 0?!1:f;var g=a.onClose;a=a.title;return h.jsx(c("CometTwoButtonDialogImpl.react"),{body:b,disabled:f,onClose:function(a){return g(a==="PRIMARY")},primary:e,secondary:d,testids:{dialog:"CometConfirmationDialogImpl",primary:"CometConfirmationDialogConfirmButton",secondary:"CometConfirmationDialogCancelButton"},title:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometToast.react",["fbt","ix","CometCircleButton.react","CometPressable.react","CometRow.react","CometRowItem.react","CometTheme.react","TetraText.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=d("react").useMemo,l={icon:{minWidth:"xnei2rj"},pressable:{display:"x1lliihq"},root:{backgroundColor:"x1jx94hy",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxShadow:"xdy0x9s",maxWidth:"x193iq5w",minWidth:"xp33xtk"}};function a(a){var b=a.action,e=a.href,f=a.icon,g=a.impressionLoggingRef,m=a.message,n=a.onDismiss,o=a.supressCloseButton;o=o===void 0?!1:o;var p=a.target,q=a.testid;q=a.truncateText;q=q===void 0?!0:q;a=babelHelpers.objectWithoutPropertiesLoose(a,["action","href","icon","impressionLoggingRef","message","onDismiss","supressCloseButton","target","testid","truncateText"]);var r=k(function(){return e!=null?{target:p,url:e}:void 0},[e,p]);g=j.jsxs(c("CometRow.react"),{paddingHorizontal:16,paddingVertical:16,ref:g,spacing:12,testid:void 0,verticalAlign:"center",children:[f!=null?j.jsx(c("CometRowItem.react"),{xstyle:l.icon,children:f}):null,j.jsx(c("CometRowItem.react"),{"aria-atomic":!0,expanding:!0,role:"alert",children:j.jsx(c("TetraText.react"),{color:"primary",numberOfLines:q?4:void 0,type:"body3",children:m})}),b!=null?j.jsx(c("CometRowItem.react"),{children:j.jsx(c("CometPressable.react"),{onPress:function(a){n(),b.onPress(a)},testid:void 0,children:j.jsx(c("TetraText.react"),{color:"blueLink",numberOfLines:1,type:"body3",children:b.label})})}):null,o!==!0&&j.jsx(c("CometRowItem.react"),{children:j.jsx(c("CometCircleButton.react"),{icon:d("fbicon")._(i("478231"),12),label:h._("__JHASH__cCrSTii9yXy__JHASH__"),onPress:n,size:24})})]});(a.onPress!=null||r!=null)&&(g=j.jsx(c("CometPressable.react"),babelHelpers["extends"]({},a,{expanding:!0,linkProps:r,xstyle:l.pressable,children:g})));return j.jsx(c("CometTheme.react"),{testid:void 0,theme:"invert",xstyle:l.root,children:g})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometFeedUnitLoadingIndicatorMask.react",["CometProgressIndicator.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(){return h.jsx("div",{className:"x1vjfegm x13vifvy x17qophe x10l6tqk xl56j7k xdt5ytf xds687c x78zum5 x1ey2m1c x1h0vfkc x6s0dn4",children:h.jsx(c("CometProgressIndicator.react"),{})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("EventListenerImplForCacheStorage",["cr:1351741"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:1351741")}),98);
__d("ThriftTypes",[],(function(a,b,c,d,e,f){a=Object.freeze({STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,STRUCT:12,MAP:13,SET:14,LIST:15,FLOAT:19});b=a;f["default"]=b}),66);
__d("TWriteBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(b){b===void 0&&(b=a.DEFAULT_BYTE_BUFFER_SIZE),this.$1=new DataView(new ArrayBuffer(b)),this.$2=0}var b=a.prototype;b.write=function(a){this.$2+a.length>this.$1.byteLength&&this.$3(this.$2+a.length);for(var b=0;b<a.length;b++)this.$1.setUint8(this.$2+b,a[b]);this.$2+=a.length;return a.length};b.writeByte=function(a){this.$2+1>this.$1.byteLength&&this.$3(this.$2+1);this.$1.setUint8(this.$2,a);this.$2++;return 1};b.writeFloatBE=function(a){this.$2+Float32Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float32Array.BYTES_PER_ELEMENT);this.$1.setFloat32(this.$2,a);this.$2+=Float32Array.BYTES_PER_ELEMENT;return Float32Array.BYTES_PER_ELEMENT};b.writeDoubleBE=function(a){this.$2+Float64Array.BYTES_PER_ELEMENT>this.$1.byteLength&&this.$3(this.$2+Float64Array.BYTES_PER_ELEMENT);this.$1.setFloat64(this.$2,a);this.$2+=Float64Array.BYTES_PER_ELEMENT;return Float64Array.BYTES_PER_ELEMENT};b.toByteArray=function(){var a=new Uint8Array(this.$1.buffer,0,this.$2);return a};b.currentSize=function(){return this.$2};b.getUnderlyingDataView=function(){return this.$1};b.$3=function(a){a=a*2;if(!Number.isSafeInteger(a))throw new Error("unable to resize");a=new DataView(new ArrayBuffer(a));for(var b=0;b<this.$2;b++)a.setUint8(b,this.$1.getUint8(b));this.$1=a};b.readByte=function(){throw new Error("operation not supported")};b.readBytes=function(a){throw new Error("operation not supported")};b.readFloatBE=function(){throw new Error("operation not supported")};b.readDoubleBE=function(){throw new Error("operation not supported")};return a}();a.DEFAULT_BYTE_BUFFER_SIZE=16;f["default"]=a}),66);
__d("StringToUtf8",["TWriteBuffer"],(function(a,b,c,d,e,f,g){a=function(a){var b=new(c("TWriteBuffer"))(a.length),d;for(var e=0;e<a.length;e++){d=a.charCodeAt(e);if(d<128)b.writeByte(d);else if(d<2048)b.writeByte(d>>6|192),b.writeByte(d&63|128);else if((d&64512)==55296){if(e+1>=a.length)throw new Error("UTF-16 string is truncated: ["+d.toString(16)+"]");if((a.charCodeAt(e+1)&64512)!==56320)throw new Error("Invalid UTF-16 string: ["+d.toString(16)+", "+a.charCodeAt(e+1).toString(16)+"]");d=65536+((d&1023)<<10)+(a.charCodeAt(++e)&1023);b.writeByte(d>>18|240);b.writeByte(d>>12&63|128);b.writeByte(d>>6&63|128);b.writeByte(d&63|128)}else b.writeByte(d>>12|224),b.writeByte(d>>6&63|128),b.writeByte(d&63|128)}return b.toByteArray()};g.StringToUtf8=a}),98);
__d("Utf8ToString",[],(function(a,b,c,d,e,f){var g=function(a,b){throw new Error(a+": ["+b.map(function(a){return a.toString(16)}).toString()+"]")},h=function(a){g("Invalid UTF-8 sequence",a)},i=function(a,b){g("Not enough bytes for "+a+"-byte sequence",b)};a=function(a){var b=0,c=[];while(b<a.length){var d=a[b++];if(d<128)c.push(String.fromCharCode(d));else if(d>=128&&d<194)h([d]);else if(d>=194&&d<224){b>=a.length&&i(2,[d]);var e=a[b++];(e&192)!==128&&h([d,e]);c.push(String.fromCharCode((d&31)<<6|e&63))}else if(d>=240&&d<245){b+2>=a.length&&i(4,[d]);e=a[b++];var f=a[b++],g=a[b++];(d==240&&(!(e>=144&&e<192)||(f&192)!==128||(g&192)!==128)||d>=241&&d<244&&((e&192)!==128||(f&192)!==128||(g&192)!==128)||d==244&&(!(e>=128&&e<144)||(f&192)!==128||(g&192)!==128))&&h([d,e,f,g]);e=((d&7)<<18|(e&63)<<12|(f&63)<<6|g&63)-65536;c.push(String.fromCharCode(55296+(e>>10)));c.push(String.fromCharCode(56320+(e&1023)))}else if(d>=245)h([d]);else{b+1>=a.length&&i(3,[d]);f=a[b++];g=a[b++];d==224?f>=160&&f<192||h([d,f,g]):d>=225&&d<237?f>=128&&f<192||h([d,f,g]):d==237?f>=128&&f<160||h([d,f,g]):d>=238&&d<240&&(f>=128&&f<192||h([d,f,g]));g>=128&&g<192||h([d,f,g]);c.push(String.fromCharCode((d&15)<<12|(f&63)<<6|g&63))}}return c.join("")};f.Utf8ToString=a}),66);
__d("jsbi",[],(function(a,b,c,d,e,f){(function(a,b){"object"==typeof f&&"undefined"!=typeof e?e.exports=b():"function"==typeof define&&define.amd?define(b):a.JSBI=b()})(this,function(){"use strict";function a(b){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},a(b)}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function d(a,b,d){return b&&c(a.prototype,b),d&&c(a,d),a}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&g(a,b)}function f(a){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},f(a)}function g(a,b){return g=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},g(a,b)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function i(){return i=h()?Reflect.construct:function(a,b,c){var d=[null];d.push.apply(d,b);b=Function.bind.apply(a,d);a=new b;return c&&g(a,c.prototype),a},i.apply(null,arguments)}function j(a){return-1!==Function.toString.call(a).indexOf("[native code]")}function k(a){var b="function"==typeof Map?new Map:void 0;return k=function(a){function c(){return i(a,arguments,f(this).constructor)}if(null===a||!j(a))return a;if("function"!=typeof a)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof b){if(b.has(a))return b.get(a);b.set(a,c)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),g(c,a)},k(a)}function l(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function m(a,b){return b&&("object"==typeof b||"function"==typeof b)?b:l(a)}var n=function(c){var h=Math.abs,i=Math.max,j=Math.imul,k=Math.clz32;function g(a,c){if(b(this,g),a>g.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return a=m(this,f(g).call(this,a)),a.sign=c,a}return e(g,c),d(g,[{key:"toDebugString",value:function(){var a=["BigInt["],b=!0,c=!1,d=void 0;try{for(var e,e,f=this[Symbol.iterator]();!(b=(e=f.next()).done);b=!0)e=e.value,a.push((e?(e>>>0).toString(16):e)+", ")}catch(a){c=!0,d=a}finally{try{b||null==f["return"]||f["return"]()}finally{if(c)throw d}}return a.push("]"),a.join("")}},{key:"toString",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;if(2>a||36<a)throw new RangeError("toString() radix argument must be between 2 and 36");return 0===this.length?"0":0==(a&a-1)?g.__toStringBasePowerOfTwo(this,a):g.__toStringGeneric(this,a,!1)}},{key:"__copy",value:function(){for(var a=new g(this.length,this.sign),b=0;b<this.length;b++)a[b]=this[b];return a}},{key:"__trim",value:function(){for(var a=this.length,b=this[a-1];0===b;)a--,b=this[a-1],this.pop();return 0===a&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var a=0;a<this.length;a++)this[a]=0}},{key:"__clzmsd",value:function(){return k(this[this.length-1])}},{key:"__inplaceMultiplyAdd",value:function(a,b,c){c>this.length&&(c=this.length);for(var d=65535&a,a=a>>>16,e=0,f=65535&b,b=b>>>16,i=0;i<c;i++){var n=this.__digit(i),m=65535&n;n=n>>>16;var o=j(m,d);m=j(m,a);var p=j(n,d);n=j(n,a);var q=f+(65535&o);o=b+e+(q>>>16)+(o>>>16)+(65535&m)+(65535&p);f=(m>>>16)+(p>>>16)+(65535&n)+(o>>>16),e=f>>>16,f&=65535,b=n>>>16;this.__setDigit(i,65535&q|o<<16)}if(0!==e||0!==f||0!==b)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(a,b,c){for(var d,e=0,f=0;f<c;f++)d=this.__halfDigit(b+f)+a.__halfDigit(f)+e,e=d>>>16,this.__setHalfDigit(b+f,d);return e}},{key:"__inplaceSub",value:function(a,b,c){var d=0;if(1&b){b>>=1;for(var e=this.__digit(b),f=65535&e,k=0;k<c-1>>>1;k++){var l=a.__digit(k),m=(e>>>16)-(65535&l)-d;d=1&m>>>16,this.__setDigit(b+k,m<<16|65535&f),e=this.__digit(b+k+1),f=(65535&e)-(l>>>16)-d,d=1&f>>>16}m=a.__digit(k);l=(e>>>16)-(65535&m)-d;d=1&l>>>16,this.__setDigit(b+k,l<<16|65535&f);if(b+k+1>=this.length)throw new RangeError("out of bounds");0==(1&c)&&(e=this.__digit(b+k+1),f=(65535&e)-(m>>>16)-d,d=1&f>>>16,this.__setDigit(b+a.length,4294901760&e|65535&f))}else{b>>=1;for(var l=0;l<a.length-1;l++){k=this.__digit(b+l);m=a.__digit(l);e=(65535&k)-(65535&m)-d;d=1&e>>>16;f=(k>>>16)-(m>>>16)-d;d=1&f>>>16,this.__setDigit(b+l,f<<16|65535&e)}k=this.__digit(b+l);m=a.__digit(l);f=(65535&k)-(65535&m)-d;d=1&f>>>16;e=0;0==(1&c)&&(e=(k>>>16)-(m>>>16)-d,d=1&e>>>16),this.__setDigit(b+l,e<<16|65535&f)}return d}},{key:"__inplaceRightShift",value:function(a){if(0!==a){for(var b,c=this.__digit(0)>>>a,d=this.length-1,e=0;e<d;e++)b=this.__digit(e+1),this.__setDigit(e,b<<32-a|c),c=b>>>a;this.__setDigit(d,c)}}},{key:"__digit",value:function(a){return this[a]}},{key:"__unsignedDigit",value:function(a){return this[a]>>>0}},{key:"__setDigit",value:function(a,b){this[a]=0|b}},{key:"__setDigitGrow",value:function(a,b){this[a]=0|b}},{key:"__halfDigitLength",value:function(){var a=this.length;return 65535>=this.__unsignedDigit(a-1)?2*a-1:2*a}},{key:"__halfDigit",value:function(a){return 65535&this[a>>>1]>>>((1&a)<<4)}},{key:"__setHalfDigit",value:function(a,b){var c=a>>>1,d=this.__digit(c);a=1&a?65535&d|b<<16:4294901760&d|65535&b;this.__setDigit(c,a)}}],[{key:"BigInt",value:function(b){var c=Math.floor,d=Number.isFinite;if("number"==typeof b){if(0===b)return g.__zero();if((0|b)===b)return 0>b?g.__oneDigit(-b,!0):g.__oneDigit(b,!1);if(!d(b)||c(b)!==b)throw new RangeError("The number "+b+" cannot be converted to BigInt because it is not an integer");return g.__fromDouble(b)}if("string"==typeof b){d=g.__fromString(b);if(null===d)throw new SyntaxError("Cannot convert "+b+" to a BigInt");return d}if("boolean"==typeof b)return!0===b?g.__oneDigit(1,!1):g.__zero();if("object"===a(b)){if(b.constructor===g)return b;c=g.__toPrimitive(b);return g.BigInt(c)}throw new TypeError("Cannot convert "+b+" to a BigInt")}},{key:"toNumber",value:function(a){var b=a.length;if(0===b)return 0;if(1===b){var c=a.__unsignedDigit(0);return a.sign?-c:c}c=a.__digit(b-1);var d=k(c),e=32*b-d;if(1024<e)return a.sign?-Infinity:1/0;e=e-1;c=c;b=b-1;d=d+1;var f=32===d?0:c<<d;f>>>=12;var h=d-12,i=12<=d?0:c<<20+d;d=20+d;0<h&&0<b&&(b--,c=a.__digit(b),f|=c>>>32-h,i=c<<h,d=h),0<d&&0<b&&(b--,c=a.__digit(b),i|=c>>>32-d,d-=32);h=g.__decideRounding(a,d,b,c);if((1===h||0===h&&1==(1&i))&&(i=i+1>>>0,0===i&&(f++,0!=f>>>20&&(f=0,e++,1023<e))))return a.sign?-Infinity:1/0;d=a.sign?-2147483648:0;return e=e+1023<<20,g.__kBitConversionInts[1]=d|e|f,g.__kBitConversionInts[0]=i,g.__kBitConversionDouble[0]}},{key:"unaryMinus",value:function(a){if(0===a.length)return a;var b=a.__copy();return b.sign=!a.sign,b}},{key:"bitwiseNot",value:function(a){return a.sign?g.__absoluteSubOne(a).__trim():g.__absoluteAddOne(a,!0)}},{key:"exponentiate",value:function(a,b){if(b.sign)throw new RangeError("Exponent must be positive");if(0===b.length)return g.__oneDigit(1,!1);if(0===a.length)return a;if(1===a.length&&1===a.__digit(0))return a.sign&&0==(1&b.__digit(0))?g.unaryMinus(a):a;if(1<b.length)throw new RangeError("BigInt too big");b=b.__unsignedDigit(0);if(1===b)return a;if(b>=g.__kMaxLengthBits)throw new RangeError("BigInt too big");if(1===a.length&&2===a.__digit(0)){var c=1+(b>>>5),d=a.sign&&0!=(1&b);d=new g(c,d);d.__initializeDigits();var e=1<<(31&b);return d.__setDigit(c-1,e),d}c=null;e=a;for(0!=(1&b)&&(c=a),b>>=1;0!==b;b>>=1)e=g.multiply(e,e),0!=(1&b)&&(null===c?c=e:c=g.multiply(c,e));return c}},{key:"multiply",value:function(a,b){if(0===a.length)return a;if(0===b.length)return b;var c=a.length+b.length;32<=a.__clzmsd()+b.__clzmsd()&&c--;c=new g(c,a.sign!==b.sign);c.__initializeDigits();for(var d=0;d<a.length;d++)g.__multiplyAccumulate(b,a.__digit(d),c,d);return c.__trim()}},{key:"divide",value:function(a,b){if(0===b.length)throw new RangeError("Division by zero");if(0>g.__absoluteCompare(a,b))return g.__zero();var c=a.sign!==b.sign,d=b.__unsignedDigit(0);if(1===b.length&&65535>=d){if(1===d)return c===a.sign?a:g.unaryMinus(a);d=g.__absoluteDivSmall(a,d,null)}else d=g.__absoluteDivLarge(a,b,!0,!1);return d.sign=c,d.__trim()}},{key:"remainder",value:function(a,b){if(0===b.length)throw new RangeError("Division by zero");if(0>g.__absoluteCompare(a,b))return a;var c=b.__unsignedDigit(0);if(1===b.length&&65535>=c){if(1===c)return g.__zero();c=g.__absoluteModSmall(a,c);return 0===c?g.__zero():g.__oneDigit(c,a.sign)}c=g.__absoluteDivLarge(a,b,!1,!0);return c.sign=a.sign,c.__trim()}},{key:"add",value:function(a,b){var c=a.sign;return c===b.sign?g.__absoluteAdd(a,b,c):0<=g.__absoluteCompare(a,b)?g.__absoluteSub(a,b,c):g.__absoluteSub(b,a,!c)}},{key:"subtract",value:function(a,b){var c=a.sign;return c===b.sign?0<=g.__absoluteCompare(a,b)?g.__absoluteSub(a,b,c):g.__absoluteSub(b,a,!c):g.__absoluteAdd(a,b,c)}},{key:"leftShift",value:function(a,b){return 0===b.length||0===a.length?a:b.sign?g.__rightShiftByAbsolute(a,b):g.__leftShiftByAbsolute(a,b)}},{key:"signedRightShift",value:function(a,b){return 0===b.length||0===a.length?a:b.sign?g.__leftShiftByAbsolute(a,b):g.__rightShiftByAbsolute(a,b)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(a,b){return 0>g.__compareToBigInt(a,b)}},{key:"lessThanOrEqual",value:function(a,b){return 0>=g.__compareToBigInt(a,b)}},{key:"greaterThan",value:function(a,b){return 0<g.__compareToBigInt(a,b)}},{key:"greaterThanOrEqual",value:function(a,b){return 0<=g.__compareToBigInt(a,b)}},{key:"equal",value:function(a,b){if(a.sign!==b.sign)return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a.__digit(c)!==b.__digit(c))return!1;return!0}},{key:"notEqual",value:function(a,b){return!g.equal(a,b)}},{key:"bitwiseAnd",value:function(a,b){if(!a.sign&&!b.sign)return g.__absoluteAnd(a,b).__trim();if(a.sign&&b.sign){var c=i(a.length,b.length)+1;c=g.__absoluteSubOne(a,c);var d=g.__absoluteSubOne(b);return c=g.__absoluteOr(c,d,c),g.__absoluteAddOne(c,!0,c).__trim()}if(a.sign){d=[b,a];a=d[0],b=d[1]}return g.__absoluteAndNot(a,g.__absoluteSubOne(b)).__trim()}},{key:"bitwiseXor",value:function(a,b){if(!a.sign&&!b.sign)return g.__absoluteXor(a,b).__trim();if(a.sign&&b.sign){var c=i(a.length,b.length);c=g.__absoluteSubOne(a,c);var d=g.__absoluteSubOne(b);return g.__absoluteXor(c,d,c).__trim()}d=i(a.length,b.length)+1;if(a.sign){c=[b,a];a=c[0],b=c[1]}c=g.__absoluteSubOne(b,d);return c=g.__absoluteXor(c,a,c),g.__absoluteAddOne(c,!0,c).__trim()}},{key:"bitwiseOr",value:function(a,b){var c=i(a.length,b.length);if(!a.sign&&!b.sign)return g.__absoluteOr(a,b).__trim();if(a.sign&&b.sign){var d=g.__absoluteSubOne(a,c),e=g.__absoluteSubOne(b);return d=g.__absoluteAnd(d,e,d),g.__absoluteAddOne(d,!0,d).__trim()}if(a.sign){e=[b,a];a=e[0],b=e[1]}d=g.__absoluteSubOne(b,c);return d=g.__absoluteAndNot(d,a,d),g.__absoluteAddOne(d,!0,d).__trim()}},{key:"asIntN",value:function(a,b){if(0===b.length)return b;if(0===a)return g.__zero();if(a>=g.__kMaxLengthBits)return b;var c=a+31>>>5;if(b.length<c)return b;var d=b.__unsignedDigit(c-1),e=1<<(31&a-1);if(b.length===c&&d<e)return b;if(!((d&e)===e))return g.__truncateToNBits(a,b);if(!b.sign)return g.__truncateAndSubFromPowerOfTwo(a,b,!0);if(0==(d&e-1)){for(var f=c-2;0<=f;f--)if(0!==b.__digit(f))return g.__truncateAndSubFromPowerOfTwo(a,b,!1);return b.length===c&&d===e?b:g.__truncateToNBits(a,b)}return g.__truncateAndSubFromPowerOfTwo(a,b,!1)}},{key:"asUintN",value:function(a,b){if(0===b.length)return b;if(0===a)return g.__zero();if(b.sign){if(a>g.__kMaxLengthBits)throw new RangeError("BigInt too big");return g.__truncateAndSubFromPowerOfTwo(a,b,!1)}if(a>=g.__kMaxLengthBits)return b;var c=a+31>>>5;if(b.length<c)return b;var d=31&a;if(b.length==c){if(0==d)return b;c=b.__digit(c-1);if(0==c>>>d)return b}return g.__truncateToNBits(a,b)}},{key:"ADD",value:function(a,b){if(a=g.__toPrimitive(a),b=g.__toPrimitive(b),"string"==typeof a)return"string"!=typeof b&&(b=b.toString()),a+b;if("string"==typeof b)return a.toString()+b;if(a=g.__toNumeric(a),b=g.__toNumeric(b),g.__isBigInt(a)&&g.__isBigInt(b))return g.add(a,b);if("number"==typeof a&&"number"==typeof b)return a+b;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(a,b){return g.__compare(a,b,0)}},{key:"LE",value:function(a,b){return g.__compare(a,b,1)}},{key:"GT",value:function(a,b){return g.__compare(a,b,2)}},{key:"GE",value:function(a,b){return g.__compare(a,b,3)}},{key:"EQ",value:function(b,c){for(;;){if(g.__isBigInt(b))return g.__isBigInt(c)?g.equal(b,c):g.EQ(c,b);if("number"==typeof b){if(g.__isBigInt(c))return g.__equalToNumber(c,b);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("string"==typeof b){if(g.__isBigInt(c))return b=g.__fromString(b),null!==b&&g.equal(b,c);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("boolean"==typeof b){if(g.__isBigInt(c))return g.__equalToNumber(c,+b);if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("symbol"===a(b)){if(g.__isBigInt(c))return!1;if("object"!==a(c))return b==c;c=g.__toPrimitive(c)}else if("object"===a(b)){if("object"===a(c)&&c.constructor!==g)return b==c;b=g.__toPrimitive(b)}else return b==c}}},{key:"NE",value:function(a,b){return!g.EQ(a,b)}},{key:"__zero",value:function(){return new g(0,!1)}},{key:"__oneDigit",value:function(a,b){b=new g(1,b);return b.__setDigit(0,a),b}},{key:"__decideRounding",value:function(a,b,c,d){if(0<b)return-1;if(0>b)b=-b-1;else{if(0===c)return-1;c--,d=a.__digit(c),b=31}b=1<<b;if(0==(d&b))return-1;if(b-=1,0!=(d&b))return 1;for(;0<c;)if(c--,0!==a.__digit(c))return 1;return 0}},{key:"__fromDouble",value:function(a){g.__kBitConversionDouble[0]=a;var b,c=2047&g.__kBitConversionInts[1]>>>20;c=c-1023;var d=(c>>>5)+1;a=new g(d,0>a);var e=1048575&g.__kBitConversionInts[1]|1048576,f=g.__kBitConversionInts[0],k=20;c=31&c;var n=0;if(c<k){var m=k-c;n=m+32,b=e>>>m,e=e<<32-m|f>>>m,f<<=32-m}else if(c===k)n=32,b=e,e=f;else{m=c-k;n=32-m,b=e<<m|f>>>32-m,e=f<<m}a.__setDigit(d-1,b);for(var c=d-2;0<=c;c--)0<n?(n-=32,b=e,e=f):b=0,a.__setDigit(c,b);return a.__trim()}},{key:"__isWhitespace",value:function(a){return!!(13>=a&&9<=a)||(159>=a?32==a:131071>=a?160==a||5760==a:196607>=a?(a&=131071,10>=a||40==a||41==a||47==a||95==a||4096==a):65279==a)}},{key:"__fromString",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=0,d=a.length,e=0;if(e===d)return g.__zero();for(var f=a.charCodeAt(e);g.__isWhitespace(f);){if(++e===d)return g.__zero();f=a.charCodeAt(e)}if(43===f){if(++e===d)return null;f=a.charCodeAt(e),c=1}else if(45===f){if(++e===d)return null;f=a.charCodeAt(e),c=-1}if(0===b){if(b=10,48===f){if(++e===d)return g.__zero();if(f=a.charCodeAt(e),88===f||120===f){if(b=16,++e===d)return null;f=a.charCodeAt(e)}else if(79===f||111===f){if(b=8,++e===d)return null;f=a.charCodeAt(e)}else if(66===f||98===f){if(b=2,++e===d)return null;f=a.charCodeAt(e)}}}else if(16===b&&48===f){if(++e===d)return g.__zero();if(f=a.charCodeAt(e),88===f||120===f){if(++e===d)return null;f=a.charCodeAt(e)}}for(;48===f;){if(++e===d)return g.__zero();f=a.charCodeAt(e)}var m=d-e,i=g.__kMaxBitsPerChar[b],j=g.__kBitsPerCharTableMultiplier-1;if(m>1073741824/i)return null;var k=i*m+j>>>g.__kBitsPerCharTableShift,l=new g(k+31>>>5,!1),n=10>b?b:10,o=10<b?b-10:0;if(0==(b&b-1)){i>>=g.__kBitsPerCharTableShift;var p=[],q=[],r=!1;do{for(var s,t=0,u=0;;){if(void 0,f-48>>>0<n)s=f-48;else if((32|f)-97>>>0<o)s=(32|f)-87;else{r=!0;break}if(u+=i,t=t<<i|s,++e===d){r=!0;break}if(f=a.charCodeAt(e),32<u+i)break}p.push(t),q.push(u)}while(!r);g.__fillFromParts(l,p,q)}else{l.__initializeDigits();var v=!1,w=0;do{for(var x,y=0,z=1;;){if(void 0,f-48>>>0<n)x=f-48;else if((32|f)-97>>>0<o)x=(32|f)-87;else{v=!0;break}var A=z*b;if(4294967295<A)break;if(z=A,y=y*b+x,w++,++e===d){v=!0;break}f=a.charCodeAt(e)}j=32*g.__kBitsPerCharTableMultiplier-1;var B=i*w+j>>>g.__kBitsPerCharTableShift+5;l.__inplaceMultiplyAdd(z,y,B)}while(!v)}if(e!==d){if(!g.__isWhitespace(f))return null;for(e++;e<d;e++)if(f=a.charCodeAt(e),!g.__isWhitespace(f))return null}return 0!==c&&10!==b?null:(l.sign=-1===c,l.__trim())}},{key:"__fillFromParts",value:function(a,b,c){for(var d=0,e=0,f=0,k=b.length-1;0<=k;k--){var l=b[k],m=c[k];e|=l<<f,f+=m,32===f?(a.__setDigit(d++,e),f=0,e=0):32<f&&(a.__setDigit(d++,e),f-=32,e=l>>>m-f)}if(0!==e){if(d>=a.length)throw new Error("implementation bug");a.__setDigit(d++,e)}for(;d<a.length;d++)a.__setDigit(d,0)}},{key:"__toStringBasePowerOfTwo",value:function(a,b){var c=a.length,d=b-1;d=(85&d>>>1)+(85&d),d=(51&d>>>2)+(51&d),d=(15&d>>>4)+(15&d);d=d;b=b-1;var e=a.__digit(c-1),f=k(e);f=0|(32*c-f+d-1)/d;if(a.sign&&f++,268435456<f)throw new Error("string too long");for(var h=Array(f),f=f-1,l=0,n=0,o=0;o<c-1;o++){var p=a.__digit(o),q=(l|p<<n)&b;h[f--]=g.__kConversionChars[q];q=d-n;for(l=p>>>q,n=32-q;n>=d;)h[f--]=g.__kConversionChars[l&b],l>>>=d,n-=d}p=(l|e<<n)&b;for(h[f--]=g.__kConversionChars[p],l=e>>>d-n;0!==l;)h[f--]=g.__kConversionChars[l&b],l>>>=d;if(a.sign&&(h[f--]="-"),-1!==f)throw new Error("implementation bug");return h.join("")}},{key:"__toStringGeneric",value:function(a,b,c){var d=a.length;if(0===d)return"";if(1===d){var e=a.__unsignedDigit(0).toString(b);return!1===c&&a.sign&&(e="-"+e),e}e=32*d-k(a.__digit(d-1));d=g.__kMaxBitsPerChar[b];d=d-1;e=e*g.__kBitsPerCharTableMultiplier;e+=d-1,e=0|e/d;var f;d=e+1>>1;e=g.exponentiate(g.__oneDigit(b,!1),g.__oneDigit(d,!1));var h=e.__unsignedDigit(0);if(1===e.length&&65535>=h){f=new g(a.length,!1),f.__initializeDigits();for(var i,j=0,l=2*a.length-1;0<=l;l--)i=j<<16|a.__halfDigit(l),f.__setHalfDigit(l,0|i/h),j=0|i%h;i=j.toString(b)}else{h=g.__absoluteDivLarge(a,e,!0,!0);f=h.quotient;l=h.remainder.__trim();i=g.__toStringGeneric(l,b,!0)}f.__trim();for(var j=g.__toStringGeneric(f,b,!0);i.length<d;)i="0"+i;return!1===c&&a.sign&&(j="-"+j),j+i}},{key:"__unequalSign",value:function(a){return a?-1:1}},{key:"__absoluteGreater",value:function(a){return a?-1:1}},{key:"__absoluteLess",value:function(a){return a?1:-1}},{key:"__compareToBigInt",value:function(a,b){var c=a.sign;if(c!==b.sign)return g.__unequalSign(c);a=g.__absoluteCompare(a,b);return 0<a?g.__absoluteGreater(c):0>a?g.__absoluteLess(c):0}},{key:"__compareToNumber",value:function(a,b){if(!0|b){var c=a.sign,d=0>b;if(c!==d)return g.__unequalSign(c);if(0===a.length){if(d)throw new Error("implementation bug");return 0===b?0:-1}if(1<a.length)return g.__absoluteGreater(c);d=h(b);var e=a.__unsignedDigit(0);return e>d?g.__absoluteGreater(c):e<d?g.__absoluteLess(c):0}return g.__compareToDouble(a,b)}},{key:"__compareToDouble",value:function(a,b){if(b!==b)return b;if(b===1/0)return-1;if(b===-Infinity)return 1;var c=a.sign;if(c!==0>b)return g.__unequalSign(c);if(0===b)throw new Error("implementation bug: should be handled elsewhere");if(0===a.length)return-1;g.__kBitConversionDouble[0]=b;b=2047&g.__kBitConversionInts[1]>>>20;if(2047==b)throw new Error("implementation bug: handled elsewhere");b=b-1023;if(0>b)return g.__absoluteGreater(c);var d=a.length,e=a.__digit(d-1),f=k(e),l=32*d-f;b=b+1;if(l<b)return g.__absoluteLess(c);if(l>b)return g.__absoluteGreater(c);b=1048576|1048575&g.__kBitConversionInts[1];var m=g.__kBitConversionInts[0],o=20;f=31-f;if(f!==(l-1)%31)throw new Error("implementation bug");var p;l=0;if(f<o){var q=o-f;l=q+32,p=b>>>q,b=b<<32-q|m>>>q,m<<=32-q}else if(f===o)l=32,p=b,b=m;else{q=f-o;l=32-q,p=b<<q|m>>>32-q,b=m<<q}if(e>>>=0,p>>>=0,e>p)return g.__absoluteGreater(c);if(e<p)return g.__absoluteLess(c);for(var f=d-2;0<=f;f--){0<l?(l-=32,p=b>>>0,b=m,m=0):p=0;o=a.__unsignedDigit(f);if(o>p)return g.__absoluteGreater(c);if(o<p)return g.__absoluteLess(c)}if(0!==b||0!==m){if(0===l)throw new Error("implementation bug");return g.__absoluteLess(c)}return 0}},{key:"__equalToNumber",value:function(a,b){return b|0===b?0===b?0===a.length:1===a.length&&a.sign===0>b&&a.__unsignedDigit(0)===h(b):0===g.__compareToDouble(a,b)}},{key:"__comparisonResultToBool",value:function(a,b){switch(b){case 0:return 0>a;case 1:return 0>=a;case 2:return 0<a;case 3:return 0<=a}throw new Error("unreachable")}},{key:"__compare",value:function(a,b,c){if(a=g.__toPrimitive(a),b=g.__toPrimitive(b),"string"==typeof a&&"string"==typeof b)switch(c){case 0:return a<b;case 1:return a<=b;case 2:return a>b;case 3:return a>=b}if(g.__isBigInt(a)&&"string"==typeof b)return b=g.__fromString(b),null!==b&&g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if("string"==typeof a&&g.__isBigInt(b))return a=g.__fromString(a),null!==a&&g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if(a=g.__toNumeric(a),b=g.__toNumeric(b),g.__isBigInt(a)){if(g.__isBigInt(b))return g.__comparisonResultToBool(g.__compareToBigInt(a,b),c);if("number"!=typeof b)throw new Error("implementation bug");return g.__comparisonResultToBool(g.__compareToNumber(a,b),c)}if("number"!=typeof a)throw new Error("implementation bug");if(g.__isBigInt(b))return g.__comparisonResultToBool(g.__compareToNumber(b,a),2^c);if("number"!=typeof b)throw new Error("implementation bug");return 0===c?a<b:1===c?a<=b:2===c?a>b:3===c?a>=b:void 0}},{key:"__absoluteAdd",value:function(a,b,c){if(a.length<b.length)return g.__absoluteAdd(b,a,c);if(0===a.length)return a;if(0===b.length)return a.sign===c?a:g.unaryMinus(a);var d=a.length;(0===a.__clzmsd()||b.length===a.length&&0===b.__clzmsd())&&d++;for(var d=new g(d,c),c=0,e=0;e<b.length;e++){var f=b.__digit(e),h=a.__digit(e),m=(65535&h)+(65535&f)+c;h=(h>>>16)+(f>>>16)+(m>>>16);c=h>>>16,d.__setDigit(e,65535&m|h<<16)}for(;e<a.length;e++){f=a.__digit(e);m=(65535&f)+c;h=(f>>>16)+(m>>>16);c=h>>>16,d.__setDigit(e,65535&m|h<<16)}return e<d.length&&d.__setDigit(e,c),d.__trim()}},{key:"__absoluteSub",value:function(a,b,c){if(0===a.length)return a;if(0===b.length)return a.sign===c?a:g.unaryMinus(a);for(var c=new g(a.length,c),d=0,e=0;e<b.length;e++){var f=a.__digit(e),l=b.__digit(e),m=(65535&f)-(65535&l)-d;d=1&m>>>16;f=(f>>>16)-(l>>>16)-d;d=1&f>>>16,c.__setDigit(e,65535&m|f<<16)}for(;e<a.length;e++){l=a.__digit(e);m=(65535&l)-d;d=1&m>>>16;f=(l>>>16)-d;d=1&f>>>16,c.__setDigit(e,65535&m|f<<16)}return c.__trim()}},{key:"__absoluteAddOne",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length;null===c?c=new g(d,b):c.sign=b;for(var e=!0,f=0;f<d;f++){var k=a.__digit(f),l=-1===k;e&&(k=0|k+1),e=l,c.__setDigit(f,k)}return e&&c.__setDigitGrow(d,1),c}},{key:"__absoluteSubOne",value:function(a,b){var c=a.length;b=b||c;for(var d=new g(b,!1),e=!0,f=0;f<c;f++){var k=a.__digit(f),l=0===k;e&&(k=0|k-1),e=l,d.__setDigit(f,k)}for(var l=c;l<b;l++)d.__setDigit(l,0);return d}},{key:"__absoluteAnd",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,e,b=m,n}var k=f;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)&b.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteAndNot",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;d<e&&(f=d);var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)&~b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteOr",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,d=e,b=m,n}var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)|b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteXor",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=a.length,e=b.length,f=e;if(d<e){f=d;var m=a,n=d;a=b,d=e,b=m,n}var k=d;null===c?c=new g(k,!1):k=c.length;for(var l=0;l<f;l++)c.__setDigit(l,a.__digit(l)^b.__digit(l));for(;l<d;l++)c.__setDigit(l,a.__digit(l));for(;l<k;l++)c.__setDigit(l,0);return c}},{key:"__absoluteCompare",value:function(a,b){var c=a.length-b.length;if(0!=c)return c;for(var c=a.length-1;0<=c&&a.__digit(c)===b.__digit(c);)c--;return 0>c?0:a.__unsignedDigit(c)>b.__unsignedDigit(c)?1:-1}},{key:"__multiplyAccumulate",value:function(a,b,c,d){if(0!==b){for(var e=65535&b,b=b>>>16,f=0,g=0,k=0,l=0;l<a.length;l++,d++){var m=c.__digit(d),n=65535&m,o=m>>>16,p=a.__digit(l),q=65535&p;p=p>>>16;var r=j(q,e);q=j(q,b);var s=j(p,e);p=j(p,b);n+=g+(65535&r),o+=k+f+(n>>>16)+(r>>>16)+(65535&q)+(65535&s),f=o>>>16,g=(q>>>16)+(s>>>16)+(65535&p)+f,f=g>>>16,g&=65535,k=p>>>16,m=65535&n|o<<16,c.__setDigit(d,m)}for(;0!==f||0!==g||0!==k;d++){r=c.__digit(d);q=(65535&r)+g;s=(r>>>16)+(q>>>16)+k+f;g=0,k=0,f=s>>>16,r=65535&q|s<<16,c.__setDigit(d,r)}}}},{key:"__internalMultiplyAdd",value:function(a,b,c,d,e){for(var c=c,f=0,h=0;h<d;h++){var l=a.__digit(h),m=j(65535&l,b),n=(65535&m)+f+c;c=n>>>16;l=j(l>>>16,b);m=(65535&l)+(m>>>16)+c;c=m>>>16,f=l>>>16,e.__setDigit(h,m<<16|65535&n)}if(e.length>d)for(e.__setDigit(d++,c+f);d<e.length;)e.__setDigit(d++,0);else if(0!==c+f)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(a,b,c){null===c&&(c=new g(a.length,!1));for(var d=0,e=2*a.length-1;0<=e;e-=2){var f=(d<<16|a.__halfDigit(e))>>>0,k=0|f/b;d=0|f%b,f=(d<<16|a.__halfDigit(e-1))>>>0;var l=0|f/b;d=0|f%b,c.__setDigit(e>>>1,k<<16|l)}return c}},{key:"__absoluteModSmall",value:function(a,b){for(var c,d=0,e=2*a.length-1;0<=e;e--)c=(d<<16|a.__halfDigit(e))>>>0,d=0|c%b;return d}},{key:"__absoluteDivLarge",value:function(a,b,c,d){var f=b.__halfDigitLength(),e=b.length,n=a.__halfDigitLength()-f,i=null;c&&(i=new g(n+2>>>1,!1),i.__initializeDigits());var l=new g(f+2>>>1,!1);l.__initializeDigits();var m=g.__clz16(b.__halfDigit(f-1));0<m&&(b=g.__specialLeftShift(b,m,0));for(var a=g.__specialLeftShift(a,m,1),k=b.__halfDigit(f-1),o=0,n=n;0<=n;n--){var p=65535,q=a.__halfDigit(n+f);if(q!==k){q=(q<<16|a.__halfDigit(n+f-1))>>>0;p=0|q/k;for(var q=0|q%k,r=b.__halfDigit(f-2),s=a.__halfDigit(n+f-2);j(p,r)>>>0>(q<<16|s)>>>0&&(p--,q+=k,!(65535<q)););}g.__internalMultiplyAdd(b,p,0,e,l);r=a.__inplaceSub(l,n,f+1);0!==r&&(r=a.__inplaceAdd(b,n,f),a.__setHalfDigit(n+f,a.__halfDigit(n+f)+r),p--),c&&(1&n?o=p<<16:i.__setDigit(n>>>1,o|p))}return d?(a.__inplaceRightShift(m),c?{quotient:i,remainder:a}:a):c?i:void 0}},{key:"__clz16",value:function(a){return k(a)-16}},{key:"__specialLeftShift",value:function(a,b,c){var e=a.length,d=new g(e+c,!1);if(0===b){for(var f=0;f<e;f++)d.__setDigit(f,a.__digit(f));return 0<c&&d.__setDigit(e,0),d}for(var j,f=0,l=0;l<e;l++)j=a.__digit(l),d.__setDigit(l,j<<b|f),f=j>>>32-b;return 0<c&&d.__setDigit(e,f),d}},{key:"__leftShiftByAbsolute",value:function(a,b){b=g.__toShiftAmount(b);if(0>b)throw new RangeError("BigInt too big");var c=b>>>5;b=31&b;var d=a.length,e=0!==b&&0!=a.__digit(d-1)>>>32-b,f=d+c+(e?1:0),m=new g(f,a.sign);if(0===b){for(var n=0;n<c;n++)m.__setDigit(n,0);for(;n<f;n++)m.__setDigit(n,a.__digit(n-c))}else{for(var n=0,f=0;f<c;f++)m.__setDigit(f,0);for(var o,f=0;f<d;f++)o=a.__digit(f),m.__setDigit(f+c,o<<b|n),n=o>>>32-b;if(e)m.__setDigit(d+c,n);else if(0!==n)throw new Error("implementation bug")}return m.__trim()}},{key:"__rightShiftByAbsolute",value:function(a,b){var c=a.length,d=a.sign;b=g.__toShiftAmount(b);if(0>b)return g.__rightShiftByMaximum(d);var e=b>>>5;b=31&b;var f=c-e;if(0>=f)return g.__rightShiftByMaximum(d);var i=!1;if(d)if(0!=(a.__digit(e)&(1<<b)-1))i=!0;else for(var m=0;m<e;m++)if(0!==a.__digit(m)){i=!0;break}if(i&&0===b){m=a.__digit(c-1);0==~m&&f++}m=new g(f,d);if(0===b)for(var f=e;f<c;f++)m.__setDigit(f-e,a.__digit(f));else{for(var n,d=a.__digit(e)>>>b,f=c-e-1,c=0;c<f;c++)n=a.__digit(c+e+1),m.__setDigit(c,n<<32-b|d),d=n>>>b;m.__setDigit(f,d)}return i&&(m=g.__absoluteAddOne(m,!0,m)),m.__trim()}},{key:"__rightShiftByMaximum",value:function(a){return a?g.__oneDigit(1,!0):g.__zero()}},{key:"__toShiftAmount",value:function(a){if(1<a.length)return-1;a=a.__unsignedDigit(0);return a>g.__kMaxLengthBits?-1:a}},{key:"__toPrimitive",value:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";if("object"!==a(b))return b;if(b.constructor===g)return b;var d=b[Symbol.toPrimitive];if(d){var e=d(c);if("object"!==a(e))return e;throw new TypeError("Cannot convert object to primitive value")}var f=b.valueOf;if(f){var k=f.call(b);if("object"!==a(k))return k}var l=b.toString;if(l){var m=l.call(b);if("object"!==a(m))return m}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(a){return g.__isBigInt(a)?a:+a}},{key:"__isBigInt",value:function(b){return"object"===a(b)&&b.constructor===g}},{key:"__truncateToNBits",value:function(a,b){for(var c=a+31>>>5,d=new g(c,b.sign),c=c-1,e=0;e<c;e++)d.__setDigit(e,b.__digit(e));e=b.__digit(c);if(0!=(31&a)){b=32-(31&a);e=e<<b>>>b}return d.__setDigit(c,e),d.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(a,b,c){for(var d=Math.min,e=a+31>>>5,c=new g(e,c),f=0,e=e-1,h=0,d=d(e,b.length);f<d;f++){var j=b.__digit(f),l=0-(65535&j)-h;h=1&l>>>16;j=0-(j>>>16)-h;h=1&j>>>16,c.__setDigit(f,65535&l|j<<16)}for(;f<e;f++)c.__setDigit(f,0|-h);l=e<b.length?b.__digit(e):0;j=31&a;if(0===j){d=0-(65535&l)-h;h=1&d>>>16;f=0-(l>>>16)-h;b=65535&d|f<<16}else{a=32-j;l=l<<a>>>a;d=1<<32-a;f=(65535&d)-(65535&l)-h;h=1&f>>>16;j=(d>>>16)-(l>>>16)-h;b=65535&f|j<<16,b&=d-1}return c.__setDigit(e,b),c.__trim()}},{key:"__digitPow",value:function(a,b){for(var c=1;0<b;)1&b&&(c*=a),b>>>=1,a*=a;return c}}]),g}(k(Array));return n.__kMaxLength=33554432,n.__kMaxLengthBits=n.__kMaxLength<<5,n.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],n.__kBitsPerCharTableShift=5,n.__kBitsPerCharTableMultiplier=1<<n.__kBitsPerCharTableShift,n.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.__kBitConversionBuffer=new ArrayBuffer(8),n.__kBitConversionDouble=new Float64Array(n.__kBitConversionBuffer),n.__kBitConversionInts=new Int32Array(n.__kBitConversionBuffer),n})}),null);
__d("TCompactProtocolPolyfill",["StringToUtf8","ThriftTypes","Utf8ToString","jsbi"],(function(a,b,c,d,e,f,g){var h=Object.freeze({CT_STOP:0,CT_BOOLEAN_TRUE:1,CT_BOOLEAN_FALSE:2,CT_BYTE:3,CT_I16:4,CT_I32:5,CT_I64:6,CT_DOUBLE:7,CT_BINARY:8,CT_LIST:9,CT_SET:10,CT_MAP:11,CT_STRUCT:12,CT_FLOAT:13}),i=Object.freeze({NONE:-1,CT_BOOLEAN_TRUE:h.CT_BOOLEAN_TRUE,CT_BOOLEAN_FALSE:h.CT_BOOLEAN_FALSE}),j=[h.CT_STOP,0,h.CT_BOOLEAN_TRUE,h.CT_BYTE,h.CT_DOUBLE,0,h.CT_I16,0,h.CT_I32,0,h.CT_I64,h.CT_BINARY,h.CT_STRUCT,h.CT_MAP,h.CT_SET,h.CT_LIST,0,0,0,h.CT_FLOAT],k=Math.pow(2,7)-1,l=-1*Math.pow(2,7),m=Math.pow(2,15)-1,n=-1*Math.pow(2,15),o=Math.pow(2,31)-1,p=-1*Math.pow(2,31),q=Math.pow(2,32)-1,r=c("jsbi").BigInt("9223372036854775807"),s=c("jsbi").BigInt("-9223372036854775808"),t=c("jsbi").BigInt("18446744073709551615"),u=c("jsbi").BigInt(63),v=c("jsbi").BigInt(1),w=c("jsbi").BigInt(0),x=c("jsbi").BigInt(7),y=c("jsbi").BigInt(70),z=c("jsbi").BigInt(127),A=c("jsbi").BigInt(128),B=Math.pow(2,4);a=function(){function a(a){this.$4=null,this.$5=null,this.$1=a,this.$2=[],this.$3=0,this.$6=new DataView(new ArrayBuffer(1))}var b=a.prototype;b.readStructBegin=function(){this.$2.push(this.$3),this.$3=0};b.readStructEnd=function(){this.$3=this.$2.pop();return 0};b.writeStructBegin=function(a){this.$2.push(this.$3);this.$3=0;return 0};b.writeStructEnd=function(){this.$3=this.$2.pop();return 0};b.writeFieldBegin=function(a){if(a.ftype===c("ThriftTypes").BOOL){this.$4={fid:a.fid,fname:a.fname,ftype:a.ftype};return 0}else return this.$7(a,i.NONE)};b.writeListBegin=function(a){return this.$8(a)};b.writeListEnd=function(){return 0};b.writeSetBegin=function(a){return this.$8(a)};b.writeSetEnd=function(){return 0};b.writeMapBegin=function(a){var b=0;if(a.size===0)b+=this.$1.writeByte(0);else{b+=this.writeVarint32(a.size);if(a.ktype!=null&&a.vtype!=null)b+=this.$1.writeByte(this.$9(a.ktype)<<4|this.$9(a.vtype));else throw new Error("received invalid map info: "+JSON.stringify(a))}return b};b.writeMapEnd=function(){return 0};b.$7=function(a,b){var c=0;b=b===i.NONE?this.$9(a.ftype):b;a.fid>this.$3&&a.fid-this.$3<=B-1?c+=this.$1.writeByte(a.fid-this.$3<<4|b):(c+=this.$1.writeByte(b),c+=this.writeI16(a.fid));this.$3=a.fid;return c};b.$8=function(a){var b=0,c=this.$9(a.etype);a.size<=B-2?b+=this.$1.writeByte(a.size<<4|c):(b+=this.$1.writeByte(240|c),b+=this.writeVarint32(a.size));return b};b.readFieldBegin=function(){var a=this.$1.readByte(),b=a&15;if(b===c("ThriftTypes").STOP)return{ftype:c("ThriftTypes").STOP,fid:0};a=(a&240)>>>4;var d;a===0?d=this.readI16():d=this.$3+a;a=this.$10(b);(b===h.CT_BOOLEAN_TRUE||b===h.CT_BOOLEAN_FALSE)&&(this.$5=b===h.CT_BOOLEAN_TRUE);this.$3=d;return{ftype:a,fid:d}};b.readListBegin=function(){return this.$11()};b.readListEnd=function(){return 0};b.readSetBegin=function(){return this.$11()};b.readSetEnd=function(){return 0};b.readMapBegin=function(){var a=this.readVarint32();if(a>0){var b=this.$1.readByte(),c=this.$12(b>>4,"readMapBegin:key");b=this.$12(b&15,"readMapBegin:value");return{ktype:this.$10(c),vtype:this.$10(b),size:a}}return{size:a}};b.readMapEnd=function(){return 0};b.$12=function(a,b){if(a<0||a>13)throw new Error(b+" read invalid compact type: "+a);return a};b.$11=function(){var a=this.$1.readByte(),b=this.$12(a&15,"_readListOrSetBegin");b=this.$10(b);a=a>>4&15;a===15&&(a=this.readVarint32());return{etype:b,size:a}};b.readFieldEnd=function(){return 0};b.readByte=function(){this.$6.setUint8(0,this.$1.readByte());return this.$6.getInt8(0)};b.writeByte=function(a){if(a<l||a>k)throw new Error("byte to write is out of range: "+a);this.$6.setInt8(0,a);return this.$1.writeByte(this.$6.getUint8(0))};b.readFloat=function(){return this.$1.readFloatBE()};b.writeFloat=function(a){return this.$1.writeFloatBE(a)};b.readDouble=function(){return this.$1.readDoubleBE()};b.writeDouble=function(a){return this.$1.writeDoubleBE(a)};b.writeString=function(a){return this.writeBinary(d("StringToUtf8").StringToUtf8(a))};b.skip=function(a){switch(a){case c("ThriftTypes").STOP:return;case c("ThriftTypes").BOOL:this.readBool();break;case c("ThriftTypes").BYTE:this.readByte();break;case c("ThriftTypes").DOUBLE:this.readDouble();break;case c("ThriftTypes").I16:this.readI16();break;case c("ThriftTypes").I32:this.readI32();break;case c("ThriftTypes").I64:this.readI64();break;case c("ThriftTypes").STRING:this.readString();break;case c("ThriftTypes").STRUCT:this.readStructBegin();var b;while(!0){b=this.readFieldBegin();if(b.ftype===c("ThriftTypes").STOP)break;this.skip(b.ftype)}this.readStructEnd();break;case c("ThriftTypes").MAP:b=this.readMapBegin();if(b.size>0&&b.ktype!=null&&b.vtype!=null){var d=b.ktype,e=b.vtype;for(var f=0;f<b.size;f++)this.skip(d),this.skip(e)}break;case c("ThriftTypes").SET:case c("ThriftTypes").LIST:f=this.$11();for(var d=0;d<f.size;d++)this.skip(f.etype);break;case c("ThriftTypes").FLOAT:this.readFloat();break;default:throw new Error("encoutered unknow thrift type: "+a+" in skip")}};b.toByteArray=function(){return this.$1.toByteArray()};b.writeFieldEnd=function(){return 0};b.writeFieldStop=function(){return this.$1.writeByte(c("ThriftTypes").STOP)};b.writeI16=function(a){if(a<n||a>m)throw new Error("trying to write i16 out of range: "+a);return this.writeVarint32(this.i32ToZigzag(a))};b.readI16=function(){var a=this.zigzagToI32(this.readVarint32());if(a<n||a>m)throw new Error("read invalid i16: "+a);return a};b.writeI32=function(a){if(a<p||a>o)throw new Error("i32 out of range: "+a);return this.writeVarint32(this.i32ToZigzag(a))};b.readI32=function(){return this.zigzagToI32(this.readVarint32())};b.writeI64=function(a){return this.writeVarint64(this.i64ToZigzag(a))};b.readI64=function(){return this.zigzagToI64(this.readVarint64())};b.readBool=function(){var a;this.$5!=null?(a=this.$5,this.$5=null):a=this.$1.readByte()===h.CT_BOOLEAN_TRUE;return a};b.writeBool=function(a){var b=0;this.$4!=null?(b+=this.$7(this.$4,a?i.CT_BOOLEAN_TRUE:i.CT_BOOLEAN_FALSE),this.$4=null):b+=this.$1.writeByte(a?h.CT_BOOLEAN_TRUE:h.CT_BOOLEAN_FALSE);return b};b.readBinary=function(){var a=this.readVarint32();return a===0?new Uint8Array(0):this.$1.readBytes(a)};b.writeBinary=function(a){var b=0;b+=this.writeVarint32(a.length);b+=this.$1.write(a);return b};b.i32ToZigzag=function(a){if(a<p||a>o)throw new Error("number: "+a+" is out of range of i32");return(a<<1^(a<0?4294967295:0))>>>0};b.zigzagToI32=function(a){if(a<0||a>q)throw new Error("number: "+a+" is out of range of uint32");return a>>>1^-1*(a&1)};b.i64ToZigzag=function(a){if(c("jsbi").greaterThan(a,r)||c("jsbi").lessThan(a,s))throw new Error("i64 out of range: "+a.toString());return c("jsbi").bitwiseXor(c("jsbi").signedRightShift(a,u),c("jsbi").leftShift(a,v))};b.zigzagToI64=function(a){if(c("jsbi").lessThan(a,0)||c("jsbi").greaterThan(a,t))throw new Error("invalid uint64: "+a.toString());return c("jsbi").equal(c("jsbi").bitwiseAnd(a,v),v)?c("jsbi").bitwiseNot(c("jsbi").signedRightShift(a,v)):c("jsbi").signedRightShift(a,v)};b.writeVarint32=function(a){if(a<0||a>q)throw new Error("writeVarint32 received out of range uint32: "+a);a=a;var b=0;while(!0)if(a>>>7===0){this.$1.writeByte(a);b++;break}else this.$1.writeByte(a&127|128),b++,a>>>=7;return b};b.readVarint32=function(){var a=0,b=0,c;while(!0){c=this.$1.readByte();a=(a|(c&127)<<b)>>>0;b+=7;if((c&128)==0){if(b===35&&(c&240)!=0)throw new Error("result exceeded 32 bit limit");break}if(b>28)throw new Error("result exceeded 32 bit limit")}return a};b.writeVarint64=function(a){if(c("jsbi").lessThan(a,w)||c("jsbi").greaterThan(a,t))throw new Error("invalid uint64: "+a.toString());a=a;var b=0;while(!0)if(c("jsbi").equal(c("jsbi").signedRightShift(a,x),w)){this.$1.writeByte(c("jsbi").toNumber(a));b++;break}else{var d=c("jsbi").toNumber(c("jsbi").bitwiseOr(c("jsbi").bitwiseAnd(a,z),A));this.$1.writeByte(d);b++;a=c("jsbi").signedRightShift(a,x)}return b};b.readVarint64=function(){var a=w,b=w,d;while(!0){d=c("jsbi").BigInt(this.$1.readByte());a=c("jsbi").bitwiseOr(a,c("jsbi").leftShift(c("jsbi").bitwiseAnd(d,z),b));b=c("jsbi").add(b,x);if(c("jsbi").equal(c("jsbi").bitwiseAnd(d,A),w)){if(c("jsbi").equal(b,y)&&c("jsbi").notEqual(d,v))throw new Error("result exceeded 64 bit limit");break}if(c("jsbi").greaterThan(b,u))throw new Error("result exceeded 64 bit limit")}return a};b.readString=function(){return d("Utf8ToString").Utf8ToString(this.readBinary())};b.getLastFieldId=function(){return this.$3};b.getLastField=function(){return this.$2};b.getBooleanFieldInfo=function(){return this.$4};b.getBooleanValue=function(){return this.$5};b.$9=function(a){return j[a]};b.$10=function(a){switch(a){case h.CT_STOP:return c("ThriftTypes").STOP;case h.CT_BOOLEAN_FALSE:case h.CT_BOOLEAN_TRUE:return c("ThriftTypes").BOOL;case h.CT_BYTE:return c("ThriftTypes").BYTE;case h.CT_I16:return c("ThriftTypes").I16;case h.CT_I32:return c("ThriftTypes").I32;case h.CT_I64:return c("ThriftTypes").I64;case h.CT_DOUBLE:return c("ThriftTypes").DOUBLE;case h.CT_FLOAT:return c("ThriftTypes").FLOAT;case h.CT_BINARY:return c("ThriftTypes").STRING;case h.CT_LIST:return c("ThriftTypes").LIST;case h.CT_SET:return c("ThriftTypes").SET;case h.CT_MAP:return c("ThriftTypes").MAP;case h.CT_STRUCT:return c("ThriftTypes").STRUCT;default:throw new Error("don't know what type")}};return a}();g["default"]=a}),98);
__d("TNoOpWriteBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(){this.$1=0}var b=a.prototype;b.write=function(a){this.$1+=a.length;return a.length};b.writeByte=function(a){this.$1++;return 1};b.writeFloatBE=function(a){this.$1+=Float32Array.BYTES_PER_ELEMENT;return Float32Array.BYTES_PER_ELEMENT};b.writeDoubleBE=function(a){this.$1+=Float64Array.BYTES_PER_ELEMENT;return Float64Array.BYTES_PER_ELEMENT};b.toByteArray=function(){throw new Error("operation not supported")};b.currentSize=function(){return this.$1};b.readByte=function(){throw new Error("operation not supported")};b.readBytes=function(a){throw new Error("operation not supported")};b.readFloatBE=function(){throw new Error("operation not supported")};b.readDoubleBE=function(){throw new Error("operation not supported")};return a}();f["default"]=a}),66);
__d("TReadBuffer",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=a,this.$2=0}var b=a.prototype;b.readByte=function(){if(this.$2<this.$1.length)return this.$1[this.$2++];throw new Error("no available byte to read")};b.readBytes=function(a){if(a<0)throw new Error("cannot readBytes of negative length: "+a);if(a+this.$2>this.$1.length)throw new Error("not enough bytes to read");var b=new Uint8Array(this.$1.buffer,this.$3(),a);this.$2+=a;return b};b.readFloatBE=function(){if(Float32Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var a=new DataView(this.$1.buffer).getFloat32(this.$3());this.$2+=Float32Array.BYTES_PER_ELEMENT;return a};b.readDoubleBE=function(){if(Float64Array.BYTES_PER_ELEMENT+this.$2>this.$1.length)throw new Error("not enough bytes to read");var a=new DataView(this.$1.buffer).getFloat64(this.$3());this.$2+=Float64Array.BYTES_PER_ELEMENT;return a};b.$3=function(){return this.$2+this.$1.byteOffset};b.getCurrentCursor=function(){return this.$2};b.writeByte=function(a){throw new Error("operation not supported")};b.write=function(a){throw new Error("operation not supported")};b.toByteArray=function(){throw new Error("operation not supported")};b.writeFloatBE=function(a){throw new Error("operation not supported")};b.writeDoubleBE=function(a){throw new Error("operation not supported")};return a}();f["default"]=a}),66);
__d("CompactSerializerPolyfill",["TCompactProtocolPolyfill","TNoOpWriteBuffer","TReadBuffer","TWriteBuffer"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){a=new(c("TReadBuffer"))(a);a=new(c("TCompactProtocolPolyfill"))(a);return b(a)}function a(a,b,c){try{return h(a,b)}catch(a){c!=null&&c(a)}return null}function i(a,b,d){d===void 0&&(d=!1);if(d){d=new(c("TNoOpWriteBuffer"))();var e=new(c("TCompactProtocolPolyfill"))(d);b(a,e);e=new(c("TWriteBuffer"))(d.currentSize())}else e=new(c("TWriteBuffer"))();d=new(c("TCompactProtocolPolyfill"))(e);b(a,d);return d.toByteArray()}function b(a,b,c,d){c===void 0&&(c=!1);try{return i(a,b,c)}catch(a){d!=null&&d(a)}return null}g.deserialize=h;g.deserializeNoThrow=a;g.serialize=i;g.serializeNoThrow=b}),98);
__d("CacheStorage",["ErrorGuard","EventListenerImplForCacheStorage","ExecutionEnvironment","FBJSON","WebStorage","emptyFunction","err","killswitch"],(function(a,b,c,d,e,f,g){var h="_@_",i="3b",j="CacheStorageVersion",k={length:0,getItem:c("emptyFunction"),setItem:c("emptyFunction"),clear:c("emptyFunction"),removeItem:c("emptyFunction"),key:c("emptyFunction")};a=function(){function a(a){this._store=a}var b=a.prototype;b.getStore=function(){return this._store};b.keys=function(){var a=[];for(var b=0;b<this._store.length;b++){var c=this._store.key(b);c!=null&&a.push(c)}return a};b.get=function(a){return this._store.getItem(a)};b.set=function(a,b){this._store.setItem(a,b)};b.remove=function(a){this._store.removeItem(a)};b.clear=function(){this._store.clear()};b.clearWithPrefix=function(a){a=a||"";var b=this.keys();for(var c=0;c<b.length;c++){var d=b[c];d!=null&&d.startsWith(a)&&this.remove(d)}};return a}();b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;return a.call(this,(b=c("WebStorage").getLocalStorage())!=null?b:k)||this}b.available=function(){return!!c("WebStorage").getLocalStorage()};return b}(a);e=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;return a.call(this,(b=c("WebStorage").getSessionStorage())!=null?b:k)||this}b.available=function(){return!!c("WebStorage").getSessionStorage()};return b}(a);var l=function(){function a(){this._store={}}var b=a.prototype;b.getStore=function(){return this._store};b.keys=function(){return Object.keys(this._store)};b.get=function(a){return this._store[a]===void 0?null:this._store[a]};b.set=function(a,b){this._store[a]=b};b.remove=function(a){a in this._store&&delete this._store[a]};b.clear=function(){this._store={}};b.clearWithPrefix=function(a){a=a||"";var b=this.keys();for(var c=0;c<b.length;c++){var d=b[c];d.startsWith(a)&&this.remove(d)}};a.available=function(){return!0};return a}(),m={memory:l,localstorage:b,sessionstorage:e};g=function(){function a(a,b){this._changeCallbacks=[];this._key_prefix="_cs_";this._exception=null;b&&(this._key_prefix=b);a==="AUTO"||!a?b="memory":b=a;b&&(!m[b]||!m[b].available()?(c("ExecutionEnvironment").canUseDOM,this._backend=new l()):this._backend=new m[b]());a=this.useBrowserStorage();a&&c("EventListenerImplForCacheStorage").listen(window,"storage",this._onBrowserValueChanged.bind(this));b=a?this._backend.getStore().getItem(j):this._backend.getStore()[j];b!==i&&(c("killswitch")("CACHE_STORAGE_MODULE_CLEAR_OWN_KEYS")?this.clear():this.clearOwnKeys())}var b=a.prototype;b.useBrowserStorage=function(){return this._backend.getStore()===c("WebStorage").getLocalStorage()||this._backend.getStore()===c("WebStorage").getSessionStorage()};b.addValueChangeCallback=function(a){var b=this;this._changeCallbacks.push(a);return{remove:function(){b._changeCallbacks.slice(b._changeCallbacks.indexOf(a),1)}}};b._onBrowserValueChanged=function(a){this._changeCallbacks&&String(a.key).startsWith(this._key_prefix)&&this._changeCallbacks.forEach(function(b){b(a.key,a.oldValue,a.newValue)})};b.keys=function(){var a=this,b=[];c("ErrorGuard").guard(function(){if(a._backend){var c=a._backend.keys(),d=a._key_prefix.length;for(var e=0;e<c.length;e++)c[e].substr(0,d)==a._key_prefix&&b.push(c[e].substr(d))}},{name:"CacheStorage"})();return b};b.set=function(b,e,f){if(this._backend){if(this.useBrowserStorage()&&a._persistentWritesDisabled){this._exception=c("err")("writes disabled");return!1}var g;typeof e==="string"?g=h+e:!f?(g={__t:Date.now(),__v:e},g=d("FBJSON").stringify(g)):g=d("FBJSON").stringify(e);f=this._backend;e=this._key_prefix+b;b=!0;var i=null;while(b)try{i=null,f.set(e,g),b=!1}catch(a){i=a;var j=f.keys().length;this._evictCacheEntries();b=f.keys().length<j}if(i!==null){this._exception=i;return!1}else{this._exception=null;return!0}}this._exception=c("err")("no back end");return!1};b.getLastSetExceptionMessage=function(){return this._exception?this._exception.message:null};b.getLastSetException=function(){return this._exception};b.getStorageKeyCount=function(){var a=this._backend;return a?a.keys().length:0};b._evictCacheEntries=function(){var b=[],c=this._backend;c.keys().forEach(function(e){if(e===j)return;var g=c.get(e);if(g===void 0){c.remove(e);return}if(a._hasMagicPrefix(g))return;try{g=d("FBJSON").parse(g,f.id)}catch(a){c.remove(e);return}g&&g.__t!==void 0&&g.__v!==void 0&&b.push([e,g.__t])});b.sort(function(a,b){return a[1]-b[1]});for(var e=0;e<Math.ceil(b.length/2);e++)c.remove(b[e][0])};b.get=function(b,e){var g;if(this._backend){c("ErrorGuard").applyWithGuard(function(){g=this._backend.get(this._key_prefix+b)},this,[],{onError:function(){g=null},name:"CacheStorage:get"});if(g!=null)if(a._hasMagicPrefix(g))g=g.substr(h.length);else try{g=d("FBJSON").parse(g,f.id),g&&g.__t!==void 0&&g.__v!==void 0&&(g=g.__v)}catch(a){g=void 0}else g=void 0}g===void 0&&e!==void 0&&(g=e,this.set(b,g));return g};b.remove=function(a){this._backend&&c("ErrorGuard").applyWithGuard(this._backend.remove,this._backend,[this._key_prefix+a],{name:"CacheStorage:remove"})};b._setVersion=function(){var a=this;c("ErrorGuard").applyWithGuard(function(){a.useBrowserStorage()?a._backend.getStore().setItem(j,i):a._backend.getStore()[j]=i},this,[],{name:"CacheStorage:setVersion"})};b.clear=function(){this._backend&&(c("ErrorGuard").applyWithGuard(this._backend.clear,this._backend,[],{name:"CacheStorage:clear"}),this._setVersion())};b.clearOwnKeys=function(){this._backend&&(c("ErrorGuard").applyWithGuard(this._backend.clearWithPrefix,this._backend,[this._key_prefix],{name:"CacheStorage:clearOwnKeys"}),this._setVersion())};a.getAllStorageTypes=function(){return Object.keys(m)};a._hasMagicPrefix=function(a){return a.substr(0,h.length)===h};a.disablePersistentWrites=function(){a._persistentWritesDisabled=!0};return a}();g._persistentWritesDisabled=!1;f.exports=g}),34);
__d("CrossWindowEventEmitter",["CacheStorage","EventEmitter","FBJSON"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this)||this;e.$CrossWindowEventEmitter2=b;e.$CrossWindowEventEmitter1=new(c("CacheStorage"))("localstorage",b+":");e.$CrossWindowEventEmitter1.addValueChangeCallback(function(b,c,f){c=b.split(":")[1];try{b=d("FBJSON").parse(f)}catch(a){b=void 0}if(b&&b.__v){(f=a.prototype.emit).call.apply(f,[babelHelpers.assertThisInitialized(e),c].concat(b.__v))}});return e}var e=b.prototype;e.emit=function(b){var c;for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];this.emitRemote.apply(this,[b].concat(e));(c=a.prototype.emit).call.apply(c,[this,b].concat(e))};e.emitRemote=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$CrossWindowEventEmitter1.set(a,c)};return b}(c("EventEmitter"));g["default"]=a}),98);
__d("isFastRefreshEnabledForCurrentDomain",[],(function(a,b,c,d,e,f){"use strict";function a(){return!1}f["default"]=a}),66);
__d("MqttUnifiedClientConnectFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744057");c=b("FalcoLoggerInternal").create("mqtt_unified_client_connect",a);e.exports=c}),null);
__d("MqttUnifiedClientDisconnectFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744058");c=b("FalcoLoggerInternal").create("mqtt_unified_client_disconnect",a);e.exports=c}),null);
__d("MqttUnifiedClientIncomingPublishFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744059");c=b("FalcoLoggerInternal").create("mqtt_unified_client_incoming_publish",a);e.exports=c}),null);
__d("MqttUnifiedClientOutgoingPublishFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744060");c=b("FalcoLoggerInternal").create("mqtt_unified_client_outgoing_publish",a);e.exports=c}),null);
__d("CometFeedStoriesStrategyErrorsTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:CometFeedStoriesStrategyErrorsLoggerConfig")}),null);
__d("MqttWsClientTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:MqttWsClientLoggerConfig")}),null);
__d("MarauderLogger",["Banzai","CacheStorage","MarauderConfig"],(function(a,b,c,d,e,f){var g="client_event",h="navigation",i=18e4,j="marauder",k="marauder_last_event_time",l="marauder_last_session_id",m={},n=[],o=!1,p=null,q=null,r=null,s=0,t,u,v=!1,w=null;function a(){F().set(k,x())}b("Banzai").subscribe(b("Banzai").SHUTDOWN,a);function x(){t=t||F().get(k)||0;return t}function y(){v||(u=F().get(l),v=!0);var a=Date.now();(!u||a-i>x())&&(u=a.toString(16)+"-"+(~~(Math.random()*16777215)).toString(16),F().set(l,u));return u}function z(){return{user_agent:window.navigator.userAgent,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth,density:window.screen.devicePixelRatio||null,platform:window.navigator.platform||null,locale:window.navigator.language||null}}function A(){return{locale:navigator.language}}function B(a,b,c,d,e,f,g){var h=g!=null&&g!=0?g:Date.now();t=g!=null&&g!=0?Date.now():h;g=b!=null&&b!=""?b:p;return{name:a,time:h/1e3,module:g,obj_type:d,obj_id:e,uuid:f,extra:c}}function C(a,b,c){return B("content",null,{flags:b},null,null,a,c)}function D(a){var b=window.__mrdr;if(b)for(var c in b){var d=b[c];if(d[3]!==0){delete b[c];if(c==="1")if(r!==null)c=r;else continue;a.push(C(c,1,d[1]));a.push(C(c,2,d[2]));a.push(C(c,3,d[3]))}}}function E(a,c){D(a);if(a.length===0)return;o&&a.push(B("counters",null,m));var d=b("Banzai").BASIC;c==="vital"&&(d=b("Banzai").VITAL);var e=b("MarauderConfig").gk_enabled;s===0&&e&&(a.push(B("device_status",null,A())),d={delay:5e3});c==="signal"&&(d={signal:!0});e&&Math.random()<.01&&a.push(B("device_info",null,z()));if(r!==null)for(var c=0;c<a.length;c++){e=a[c];(e.uuid===null||e.uuid===void 0)&&(e.uuid=r)}e={app_ver:b("MarauderConfig").app_version,data:a,device_id:void 0,log_type:g,seq:s++,session_id:y()};c=F().get("device_id");c&&(e.device_id=c);m={};o=!1;b("Banzai").post(j,e,d)}function F(){w||(w=new(b("CacheStorage"))("localstorage",""));return w}function c(a){m[a]||(m[a]=0),m[a]++,o=!0}function G(b,a,c,d,f,g,h,i){E([B(b,a,c,d,f,g,h)],i)}function H(a,b){p!==b&&(n.push(B(h,p,{dest_module:b,source_url:q,destination_url:a})),p=b,q=a)}function d(a,b){p!==b&&(r=null,H(a,b))}function f(a,b,c){G(b?"show_module":"hide_module",a,c)}function I(a){p=a}function J(){return p}function K(a){r===null&&(r=a,a!==null&&(E(n),n=[]))}e.exports={count:c,log:G,navigateTo:d,navigateWithinSession:H,toggleModule:f,setUUID:K,setNavigationModule:I,getNavigationModule:J}}),null);
__d("MqttEnv",["killswitch"],(function(a,b,c,d,e,f,g){"use strict";b=Object.freeze({mqtt_waterfall_log_client_sampling:1,mqtt_ws_polling_enabled:3,mqtt_lp_use_fetch:9,mqtt_fast_lp:11,mqtt_lp_no_delay:12,mqtt_enable_publish_over_polling:13,mqttweb_global_connection_counter:15});d=function(){var a=b.prototype;a.random=function(){return this.$1!=null?this.$1():Math.random()};a.isUserLoggedInNow=function(){return this.$2!=null?this.$2():!0};a.setIsUserLoggedInNow=function(a){this.$2=a};a.clearTimeout=function(a){if(this.$3!=null){this.$3(a);return}window.clearTimeout(a)};a.setTimeout=function(a,b){for(var c=arguments.length,d=new Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];return this.$4!=null?this.$4.apply(null,arguments):window.setTimeout.apply(null,arguments)};a.getLoggerInstance=function(){return this.$5!=null?this.$5():h.getInstance()};a.genGk=function(a){return this.$6!=null?this.$6(a):!1};a.killswitch=function(a){return this.$7!=null?this.$7(a):c("killswitch")(a)};a.createSocket=function(a,b){return this.$8!=null?this.$8(a,b):new WebSocket(a)};a.scheduleCallback=function(a){return this.$9!=null?this.$9(a):a()};a.scheduleLoggingCallback=function(a){return this.$10!=null?this.$10(a):a()};a.configRead=function(a,b){return this.$11!=null?this.$11(a,b):b};a.configWrite=function(a,b){this.$12!=null&&this.$12(a,b)};function b(){this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=null,this.$10=null,this.$11=null,this.$12=null}a.initialize=function(a,b,c,d,e,f,g,h,i,j,k,l){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e,this.$6=f,this.$7=l,this.$8=g,this.$9=h,this.$10=i,this.$11=j,this.$12=k};return b}();var h=function(){function a(){}a.getInstance=function(){return new a()};var b=a.prototype;b.setAppId=function(a){};b.eventLogConnect=function(a){};b.eventLogPull=function(a){};b.eventLogPullFinish=function(a){};b.eventLogDisconnect=function(a){};b.eventLogOutgoingPublish=function(a){};b.eventLogIncomingPublish=function(a){};b.eventLogPublishTimeout=function(a){};b.eventLogMiscellaneousError=function(a){};b.logIfLoggedOut=function(){};b.logError=function(a){};b.logErrorWarn=function(a){};b.logWarn=function(a){};b.debugTrace=function(a){};b.bumpCounter=function(a){};b.getBrowserConnectivity=function(){return!0};return a}(),i=new d();function a(a){i.setIsUserLoggedInNow(a)}g.MqttGkNames=b;g.Env=i;g.setIsUserLoggedInNow=a}),98);
__d("IrisSubscribeChecker",["MqttEnv"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=d("MqttEnv").Env.getLoggerInstance();this.$2=null;this.$3=!1;this.$4=!1;this.$5=!1;this.$6=!0;this.$7=0;this.$8=a;if(typeof window!=="undefined"){a=window.location.hostname;(a==="m.facebook.com"||a==="mobile.facebook.com"||a==="mtouch.facebook.com")&&(this.$6=!1)}}var b=a.prototype;b.start=function(){this.$6=!0};b.stop=function(){this.$6=!1,this.$9()};b.onConnectAttempt=function(){};b.onConnectFailure=function(){this.$9()};b.onConnected=function(){var a=this;this.$7++;this.$9();this.$3=!1;this.$4=!1;this.$5=!1;this.$6&&(this.$2=d("MqttEnv").Env.setTimeout(function(){a.$10()},8e3))};b.onConnectSuccess=function(){};b.onConnectionLost=function(){this.$9()};b.onConnectionDisconnect=function(){};b.onSubscribe=function(a){a==="/t_ms"&&(this.$3=!0)};b.onUnsubscribe=function(a){};b.onPublish=function(a){(a==="/messenger_sync_get_diffs"||a==="/messenger_sync_create_queue")&&(this.$4=!0,this.$3&&(this.$5=!0,this.$9()))};b.onMessage=function(a){};b.onWSFatal=function(){};b.$9=function(){this.$2&&(d("MqttEnv").Env.clearTimeout(this.$2),this.$2=null)};b.$10=function(){if(this.$4===!1){var a=this.$7==1?"no_iris_session_initialConnect":"no_iris_session";this.$1.bumpCounter(a);this.$8()?this.$1.bumpCounter(a+".withProvider"):this.$1.bumpCounter(a+".withoutProvider");this.$3===!0?this.$1.bumpCounter(a+".withTopicSubscribe"):this.$1.bumpCounter(a+".withoutTopicSubscribe")}this.$3===!1&&this.$1.bumpCounter("no_iris_topic_subscribe");this.$3===!0&&this.$4===!0&&this.$5===!1&&this.$1.bumpCounter("session_before_topic_subscribe")};return a}();f.exports=a}),34);
__d("MqttConnectionHookCollection",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Set()}var b=a.prototype;b.addHook=function(a){this.$1.add(a)};b.removeHook=function(a){this.$1["delete"](a)};b.onConnectAttempt=function(){this.$1.forEach(function(a){a.onConnectAttempt()})};b.onConnectFailure=function(){this.$1.forEach(function(a){a.onConnectFailure()})};b.onConnected=function(){this.$1.forEach(function(a){a.onConnected()})};b.onConnectSuccess=function(){this.$1.forEach(function(a){a.onConnectSuccess()})};b.onConnectionLost=function(){this.$1.forEach(function(a){a.onConnectionLost()})};b.onConnectionDisconnect=function(){this.$1.forEach(function(a){a.onConnectionDisconnect()})};b.onSubscribe=function(a){this.$1.forEach(function(b){b.onSubscribe(a)})};b.onUnsubscribe=function(a){this.$1.forEach(function(b){b.onUnsubscribe(a)})};b.onPublish=function(a){this.$1.forEach(function(b){b.onPublish(a)})};b.onMessage=function(a){this.$1.forEach(function(b){b.onMessage(a)})};b.onWSFatal=function(){this.$1.forEach(function(a){a.onWSFatal()})};return a}();f["default"]=a}),66);
__d("MqttGlobalStreamCounter",["CrossWindowEventEmitter","MqttEnv","uuid"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){var a=this;this.isTabClosed=!1;this.otherTabs=new Map();this.thisTab={totalConnectionStreams:0};this.broadcastChannel=new(c("CrossWindowEventEmitter"))("MqttGlobalStreamCounter");this.broadcastChannel.addListener("count-updated",function(b){b=JSON.parse(String(b));var c=!1;a.otherTabs.has(b.key)||(c=!0);b.event==="DELETE"?a.otherTabs["delete"](b.key):b.event==="UPDATE"&&b.value!=null&&(a.otherTabs.set(b.key,b.value),c&&a.$1())});this.tabID=c("uuid")()}var b=a.prototype;b.streamRequested=function(){this.thisTab.totalConnectionStreams++,this.$1()};b.streamClosed=function(){this.thisTab.totalConnectionStreams>0&&(this.thisTab.totalConnectionStreams--,this.$1())};b.tabClosed=function(){if(this.isTabClosed)return;this.isTabClosed=!0;var a={key:this.tabID,event:"DELETE"};this.broadcastChannel.emitRemote("count-updated",JSON.stringify(a))};b.getGlobalState=function(){var a={totalConnectionStreams:this.thisTab.totalConnectionStreams};this.otherTabs.forEach(function(b){a.totalConnectionStreams+=b.totalConnectionStreams});return a};b.$1=function(){var a={key:this.tabID,event:"UPDATE",value:this.thisTab};this.broadcastChannel.emitRemote("count-updated",JSON.stringify(a))};b.isEnabled=function(){return!0};return a}();var h=d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqttweb_global_connection_counter)?new a():{streamRequested:function(){},streamClosed:function(){},tabClosed:function(){},getGlobalState:function(){return{totalConnectionStreams:-1}},isEnabled:function(){return!1}};b=function(){return h};g.getInstance=b}),98);
__d("MqttAnalyticsHook",["MqttEnv","MqttGlobalStreamCounter"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=d("MqttEnv").Env.getLoggerInstance(),this.$2=d("MqttGlobalStreamCounter").getInstance(),this.$3=0,this.$4=0,this.$5=0,this.$6=0,this.$1.bumpCounter("session_start"),d("MqttEnv").Env.isUserLoggedInNow()||this.$1.bumpCounter("session_start.logout")}var b=a.prototype;b.onConnectAttempt=function(){this.$1.bumpCounter("ws_connect_attempt"),this.$2.streamRequested()};b.onConnectFailure=function(){this.$4++,this.$1.bumpCounter("ws_connect_failure"),this.$1.debugTrace("connect","Connect failed existing streams count "+this.$2.getGlobalState().totalConnectionStreams),this.$2.streamClosed()};b.onConnected=function(){this.$1.bumpCounter("ws_connect_connected")};b.onConnectSuccess=function(){this.$3===0&&this.$1.bumpCounter("ws_connect_first_success"),this.$3++,this.$1.bumpCounter("ws_connect_success")};b.onConnectionLost=function(){this.$1.bumpCounter("ws_disconnect")};b.onConnectionDisconnect=function(){this.$2.streamClosed()};b.onSubscribe=function(a){};b.onUnsubscribe=function(a){};b.onPublish=function(a){this.$1.bumpCounter("ws_publish."+a)};b.onMessage=function(a){this.$1.bumpCounter("message_arrived."+a)};b.onWSFatal=function(){this.$1.bumpCounter("ws_fatal")};b.onPollRequestSent=function(){this.$1.bumpCounter("polling_request_send"),this.$2.streamRequested()};b.onPollRequestSuccess=function(){this.$1.bumpCounter("polling_request_succeed"),this.$5===0&&this.$1.bumpCounter("polling_first_success"),this.$5++};b.onPollResponse=function(a){this.$1.bumpCounter("lp.message_arrived."+a)};b.onPollFinish=function(){this.$1.bumpCounter("polling_request_finish"),this.$2.streamRequested()};b.onPollRequestFailed=function(a){this.$1.bumpCounter("polling_request_failed"),this.$1.bumpCounter("polling_request_failed_"+a),this.$6++,this.$1.debugTrace("PollRequest","Request failed existing streams count "+this.$2.getGlobalState().totalConnectionStreams),this.$2.streamClosed()};b.onPollShutdownAbort=function(){this.$2.streamClosed()};b.onTabClose=function(){this.$2.tabClosed()};return a}();g["default"]=a}),98);
__d("MqttProtocolUtils",["MqttEnv"],(function(a,b,c,d,e,f,g){function a(a,b){if(a==null)return b;var c=new Uint8Array(a.length+b.length);c.set(a);c.set(b,a.length);return c}function b(a,b){b=b;var c=0,d=1,e;do{if(b===a.length)return null;e=a[b++];c+=(e&127)*d;d*=128}while((e&128)!==0);return{value:c,offset:b}}function c(a){a=a;var b=new Array(1);for(var c=0;c<4;c++){var d=a%128;a>>=7;if(a>0)b[c]=d|128;else{b[c]=d;break}}return b}function h(a,b,c){c=c;b[c++]=a>>8;b[c++]=a%256;return c}function e(a,b){return 256*a[b]+a[b+1]}function f(a){var b=0;for(var c=0,d=a.length;c<d;c++){var e=a.charCodeAt(c);e<128?b+=1:e<2048?b+=2:e>=55296&&e<=56319?(b+=4,c++):b+=3}return b}function i(a,b,c,d){d=h(b,c,d);j(a,c,d);return d+b}function j(a,b,c){c=c;for(var d=0,e=a.length;d<e;d++){var f=a.charCodeAt(d);f<128?b[c++]=f:f<2048?(b[c++]=192|f>>6,b[c++]=128|f&63):f<55296||f>=57344?(b[c++]=224|f>>12,b[c++]=128|f>>6&63,b[c++]=128|f&63):(f=65536+((f&1023)<<10|a.charCodeAt(++d)&1023),b[c++]=240|f>>18,b[c++]=128|f>>12&63,b[c++]=128|f>>6&63,b[c++]=128|f&63)}}function k(a,b,c){var d=[],e=b,f=0;while(e<b+c){var g=a[e++];if(g<128)d[f++]=String.fromCharCode(g);else if(g>191&&g<224){var h=a[e++];d[f++]=String.fromCharCode((g&31)<<6|h&63)}else if(g>239&&g<365){h=a[e++];var i=a[e++],j=a[e++];h=((g&7)<<18|(h&63)<<12|(i&63)<<6|j&63)-65536;d[f++]=String.fromCharCode(55296+(h>>10));d[f++]=String.fromCharCode(56320+(h&1023))}else{i=a[e++];j=a[e++];d[f++]=String.fromCharCode((g&15)<<12|(i&63)<<6|j&63)}}return d.join("")}var l=function(){function a(a,b,c,d){this.$1=a,this.$2=b,this.$5=c,this.$6=d,this.$4=!1}var b=a.prototype;b.$7=function(){var a=this;this.$4?(this.$4=!1,this.$5(),this.$3=d("MqttEnv").Env.setTimeout(function(){a.$7()},this.$2()*1e3)):this.$6()};b.reset=function(){var a=this;this.$4=!0;this.$3&&(d("MqttEnv").Env.clearTimeout(this.$3),this.$3=null);var b=this.$1()*1e3;b>0&&(this.$3=d("MqttEnv").Env.setTimeout(function(){a.$7()},b))};b.cancel=function(){this.$3&&(d("MqttEnv").Env.clearTimeout(this.$3),this.$3=null)};return a}();g.UTF8Length=f;g.convertStringToUTF8=j;g.concatBuffers=a;g.decodeMultiByteInt=b;g.convertUTF8ToString=k;g.encodeMultiByteInt=c;g.writeUInt16BE=h;g.readUInt16BE=e;g.writeString=i;g.Pinger=l}),98);
__d("MqttUtils",["MqttEnv"],(function(a,b,c,d,e,f,g){"use strict";var h={endpointWithSessionId:function(a,b){return h.endpointWithExtraParameter(a,"sid",b.toString())},endpointWithExtraParameters:function(a,b){var c=a;b.forEach(function(a,b,d){c=h.endpointWithExtraParameter(c,b,a)});return c},endpointWithExtraParameter:function(a,b,c){if(a.indexOf("?")>0)return a+"&"+b+"="+c;else return a+"?"+b+"="+c},generateSessionId:function(){return Math.floor(d("MqttEnv").Env.random()*Number.MAX_SAFE_INTEGER)},promiseDone:function(a,b,c){var e=arguments.length>1?a.then(b,c):a;e.then(null,function(a){d("MqttEnv").Env.setTimeout(function(){if(a instanceof Error)throw a;else throw new Error("promiseDone")},0)})},promiseDoneWithTimeout:function(a,b,c,e){var f=!1;d("MqttEnv").Env.setTimeout(function(){f||(f=!0,c(new Error("promise timeout")))},e);h.promiseDone(a,function(a){f||(f=!0,b(a))},function(a){f||(f=!0,c(a))})},sprintf:function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=0;return a.replace(/%s/g,function(){return String(c[e++])})},hasWSSupport:function(){return"WebSocket"in a&&a.WebSocket!=null&&"CLOSING"in a.WebSocket.prototype},getWSAvailability:function(){var b="";if("WebSocket"in a&&a.WebSocket!==null)b+="W";else return"none";"CLOSING"in a.WebSocket.prototype&&(b+="C");return b}};f.exports=h}),34);
__d("MqttProtocolCodec",["MqttProtocolUtils","MqttUtils","err"],(function(a,b,c,d,e,f,g){var h=Object.freeze({CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14}),i=[0,6,77,81,73,115,100,112,3];function j(a,b){b=b;var e=b,f=a[b],g=f>>4;b+=1;var i=d("MqttProtocolUtils").decodeMultiByteInt(a,b);if(i==null)return{wireMessage:null,position:e};b=i.offset;i=b+i.value;if(i>a.length)return{wireMessage:null,position:e};var j;switch(g){case h.CONNACK:e=a[b++];e=!!(e&1);var o=a[b++];j=new m(e,o);break;case h.PUBLISH:e=f&15;o=e>>1&3;f=d("MqttProtocolUtils").readUInt16BE(a,b);b+=2;var r=d("MqttProtocolUtils").convertUTF8ToString(a,b,f);b+=f;f=null;o===1&&(f=d("MqttProtocolUtils").readUInt16BE(a,b),b+=2);var s=p.createWithBytes(a.subarray(b,i)),t=(e&1)===1;e=(e&8)===8;j=new q(r,s,o,f,t,e);break;case h.PINGREQ:j=new k("PINGREQ");break;case h.PINGRESP:j=new k("PINGRESP");break;case h.PUBACK:case h.UNSUBACK:r=d("MqttProtocolUtils").readUInt16BE(a,b);j=new n(g===h.PUBACK?"PUBACK":"UNSUBACK",r);break;case h.SUBACK:s=d("MqttProtocolUtils").readUInt16BE(a,b);b+=2;o=a.subarray(b,i);j=new l(s,o);break;default:throw c("err")(d("MqttUtils").sprintf("Invalid MQTT message type %s.",g))}return{wireMessage:j,position:i}}function a(a){var b=[],c=0;while(c<a.length){var d=j(a,c),e=d.wireMessage;c=d.position;if(e)b.push(e);else break}d=null;c<a.length&&(d=a.subarray(c));return{messages:b,remaining:d}}b=function(){function a(a){this.messageType=h[a]}var b=a.prototype;b.encode=function(){throw new TypeError("Cannot abstract class WireMessage")};return a}();var k=function(b){babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,a)||this}var c=a.prototype;c.encode=function(){var a=new ArrayBuffer(2),b=new Uint8Array(a);b[0]=(this.messageType&15)<<4;return a};return a}(b);e=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,"DISCONNECT")||this}var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=new ArrayBuffer(2),c=new Uint8Array(b);c[0]=a;c.set(d("MqttProtocolUtils").encodeMultiByteInt(0),1);return b};return b}(b);var l=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"SUBACK")||this;d.messageIdentifier=a;d.returnCode=c;return d}return a}(b),m=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"CONNACK")||this;d.sessionPresent=a;d.returnCode=c;return d}return a}(b),n=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.messageIdentifier=c;return a}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=2,c=d("MqttProtocolUtils").encodeMultiByteInt(b),e=c.length+1;b=new ArrayBuffer(b+e);var f=new Uint8Array(b);f[0]=a;f.set(c,1);e=d("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,f,e);return b};return a}(b);f=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this,"CONNECT")||this;d.clientId=b;d.connectOptions=c;return d}var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=i.length+3;b+=d("MqttProtocolUtils").UTF8Length(this.clientId)+2;b+=d("MqttProtocolUtils").UTF8Length(this.connectOptions.userName)+2;var c=d("MqttProtocolUtils").encodeMultiByteInt(b);b=new ArrayBuffer(1+c.length+b);var e=new Uint8Array(b);e[0]=a;a=1;e.set(c,1);a+=c.length;e.set(i,a);a+=i.length;c=2|128;e[a++]=c;a=d("MqttProtocolUtils").writeUInt16BE(this.connectOptions.getKeepAliveIntervalSeconds(),e,a);a=d("MqttProtocolUtils").writeString(this.clientId,d("MqttProtocolUtils").UTF8Length(this.clientId),e,a);a=d("MqttProtocolUtils").writeString(this.connectOptions.userName,d("MqttProtocolUtils").UTF8Length(this.connectOptions.userName),e,a);return b};return b}(b);var o=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,e,f){var g;g=b.call(this,a)||this;g.topic=c;if(e<0&&e>1||e===1&&f==null)throw new TypeError(d("MqttUtils").sprintf("Argument Invalid. qos: %s messageType: %s.",e,a));g.qos=e;g.messageIdentifier=f;return g}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4;a|=2;var b=d("MqttProtocolUtils").UTF8Length(this.topic),c=2+b+2;this.messageType===h.SUBSCRIBE&&(c+=1);var e=d("MqttProtocolUtils").encodeMultiByteInt(c);c=new ArrayBuffer(1+e.length+c);var f=new Uint8Array(c);f[0]=a;a=1;f.set(e,1);a+=e.length;this.messageIdentifier!=null&&(a=d("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,f,a));a=d("MqttProtocolUtils").writeString(this.topic,b,f,a);this.messageType===h.SUBSCRIBE&&this.qos!=null&&(f[a++]=this.qos);return c};return a}(b),p=function(){function a(a,b){this.payloadString=a,this.payloadBytes=b}a.createWithString=function(b){var c=new Uint8Array(new ArrayBuffer(d("MqttProtocolUtils").UTF8Length(b)));d("MqttProtocolUtils").convertStringToUTF8(b,c,0);return new a(b,c)};a.createWithBytes=function(b){var c=d("MqttProtocolUtils").convertUTF8ToString(b,0,b.length);return new a(c,b)};var b=a.prototype;b.string=function(){return this.payloadString};b.bytes=function(){return this.payloadBytes};return a}(),q=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d,e,f,g){var h;h=b.call(this,"PUBLISH")||this;h.topic=a;h.payloadMessage=c;h.qos=d;h.messageIdentifier=e;h.retained=f!=null?f:!1;h.duplicate=g!=null?g:!1;if(h.qos===1&&h.messageIdentifier==null)throw new TypeError("Argument Invalid. messageIdentifier: null and qos: 1");return h}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4;this.duplicate&&(a|=8);a=a|=this.qos<<1;this.retained&&a!=1;var b=d("MqttProtocolUtils").UTF8Length(this.topic),c=b+2,e=this.qos===0?0:2;c+=e;e=this.payloadMessage.bytes();c+=e.byteLength;var f=d("MqttProtocolUtils").encodeMultiByteInt(c);c=new ArrayBuffer(1+f.length+c);var g=new Uint8Array(c);g[0]=a;g.set(f,1);a=1+f.length;a=d("MqttProtocolUtils").writeString(this.topic,b,g,a);this.qos!==0&&this.messageIdentifier!=null&&(a=d("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,g,a));g.set(e,a);return c};return a}(b),r=p.createWithString;b={Base:b,PubAckUnsubAck:n,Ping:k,ConnAck:m,Connect:f,Disconnect:e,Subscription:o,Publish:q};g.MESSAGE_TYPE=h;g.decodeMessage=j;g.decodeByteMessages=a;g.Message=p;g.createMessageWithString=r;g.WireMessage=b}),98);
__d("MqttTypes",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b,c){this.errorCode=a,this.errorName=b,this.errorMessage=c};b=Object.freeze({SOCKET_ERROR:new a(1,"SOCKET_ERROR","Socket error"),SOCKET_MESSAGE:new a(2,"SOCKET_MESSAGE","Unable to parse invalid socket message"),INVALID_DATA_TYPE:new a(3,"INVALID_DATA_TYPE","Received non-arraybuffer from socket."),CONNECT_TIMEOUT:new a(4,"CONNECT_TIMEOUT","Connect timed out"),CONNACK_FAILURE:new a(5,"CONNACK_FAILURE","Connection failure due to connack"),PING_TIMEOUT:new a(6,"PING_TIMEOUT","Ping timeout"),APP_DISCONNECT:new a(7,"APP_DISCONNECT","Disconnect initiated by app"),SERVER_DISCONNECT:new a(8,"SERVER_DISCONNECT","Disconnect message sent my server"),SOCKET_CLOSE:new a(9,"SOCKET_CLOSE","Socket connection closed"),RECONNECT:new a(10,"RECONNECT","Reconnecting"),BROWSER_CLOSE:new a(11,"BROWSER_CLOSE","Browser closed")});c=function(a,b){this.mqttError=a,this.connAck=b};d=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){d===void 0&&(d=null);c=a.call(this,c)||this;c.isRecoverable=b;c.originalError=d;return c}return b}(babelHelpers.wrapNativeSuper(Error));f.MqttError=a;f.MqttErrors=b;f.ConnectFailure=c;f.MqttChannelError=d}),66);
__d("MqttProtocolClient",["MqttEnv","MqttProtocolCodec","MqttProtocolUtils","MqttTypes","err","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=30,i=6e4;a=function(){function a(a){var b=this;this.$12=function(a,c,e){c===void 0&&(c=null);b.$9.bumpCounter("protocol.debug.disconnect.internal."+a.errorName);b.$9.bumpCounter("protocol.debug.disconnect.internal");var f=b.$5,g=b.$2,h=g.onConnectionLost,i=g.onConnectFailure;b.setConnected(!1);b.$14();f?d("MqttEnv").Env.scheduleCallback(function(){h(a,c)}):d("MqttEnv").Env.scheduleCallback(function(){i(b.$11,new(d("MqttTypes").ConnectFailure)(a,e!=null?e:-1),c)})};this.$13=function(a){var c=b.$6;if(c==null){b.$9.bumpCounter("protocol.socket_send.failed.socket_null.<message type>");return 0}if(c.readyState!==c.OPEN){b.$9.bumpCounter("protocol.socket_send.failed.socket_not_open.<message type>");return 0}a=a.encode();var d=a.byteLength;c.send(a);return d};this.$3=a;this.$2={userName:"",mqttVersion:3,getKeepAliveIntervalSeconds:function(){return 10},getKeepAliveTimeoutSeconds:function(){return 10},ignoreSubProtocol:!1,onConnectSuccess:function(a){},onConnectFailure:function(a,b,c){},onConnection:function(){},onConnectionLost:function(a,b){},onMessageArrived:function(a,b,c){},onMessageDelivered:function(a,b){}};this.$1="mqttwsclient";this.$4=0;this.$5=!1;this.$9=d("MqttEnv").Env.getLoggerInstance();this.$11=0}var b=a.prototype;b.connect=function(a){var b,e=this;if(this.$5)throw c("err")("Invalid state: connect - already connected");this.$2=a;this.setConnected(!1);this.$7!=null&&(d("MqttEnv").Env.clearTimeout(this.$7),this.$7=null);b=(b=c("qex")._("660"))!=null?b:h;this.$7=d("MqttEnv").Env.setTimeout(function(){e.$9.bumpCounter("protocol.error.connect.timeout"),e.$12(d("MqttTypes").MqttErrors.CONNECT_TIMEOUT)},b*1e3);this.$6=d("MqttEnv").Env.createSocket(this.$3);this.$6.binaryType="arraybuffer";this.$6.onopen=function(){e.setConnected(!0),e.$9.debugTrace("Socket-Open","MQTTProtocolClient Socket Open"),e.$11=e.$13(new(d("MqttProtocolCodec").WireMessage.Connect)(e.$1,a)),a.onConnection()};this.$6.onmessage=function(a){a=a.data;if(!(a instanceof ArrayBuffer)){e.$9.bumpCounter("protocol.error.onmessage.type");e.$12(d("MqttTypes").MqttErrors.INVALID_DATA_TYPE);return}try{a=new Uint8Array(a);e.$10!=null&&(a=d("MqttProtocolUtils").concatBuffers(e.$10,a),e.$9.bumpCounter("protocol.debug.usingMessagesBuffer"),delete e.$10,e.$10=null);a=d("MqttProtocolCodec").decodeByteMessages(a);var b=a.messages;e.$10=a.remaining;for(var a=0;a<b.length;a++)e.handleMessage(b[a])}catch(a){e.$10=null,e.$9.logError(a,d("MqttTypes").MqttErrors.SOCKET_MESSAGE.errorMessage),e.$9.bumpCounter("protocol.error.onmessage.parse"),e.$12(d("MqttTypes").MqttErrors.SOCKET_MESSAGE,a.message)}};this.$6.onerror=function(a){e.$9.bumpCounter("protocol.error.socket"),e.$9.debugTrace("Socket-Error","MQTTProtocolClient Socket Error"),e.$12(d("MqttTypes").MqttErrors.SOCKET_ERROR)};this.$6.onclose=function(a){e.$9.bumpCounter("protocol.socket.close"),a.wasClean||e.$9.debugTrace("Socket-Unclean-Close","MQTTProtocolClient error code: "+a.code+" reason: "+a.reason),e.$12(d("MqttTypes").MqttErrors.SOCKET_CLOSE,a.code+" : "+a.reason)};this.$8!=null&&this.$8.cancel();this.$8=new(d("MqttProtocolUtils").Pinger)(a.getKeepAliveIntervalSeconds,a.getKeepAliveTimeoutSeconds,this.$13.bind(this,new(d("MqttProtocolCodec").WireMessage.Ping)("PINGREQ")),function(a,b){return e.$12(d("MqttTypes").MqttErrors.PING_TIMEOUT,a,b)})};b.$14=function(){var a=this;this.setConnected(!1);this.$8!=null&&this.$8.cancel();this.$7!=null&&(d("MqttEnv").Env.clearTimeout(this.$7),this.$7=null);this.$6!=null&&(this.$6.onopen=function(b){a.$9.debugTrace("Socket Open After Teardown","Socket opening after teardown")},this.$6.onmessage=function(a){},this.$6.onerror=function(a){},this.$6.onclose=function(b){a.$9.debugTrace("Socket Close After Teardown","code: "+b.code+", reason: "+b.reason)},this.$6.close(),this.$6=null);this.$2.onConnectSuccess=function(a){};this.$2.onConnectFailure=function(a,b){};this.$2.onConnection=function(){};this.$2.onConnectionLost=function(a){};this.$2.onMessageArrived=function(a,b,c){};this.$2.onMessageDelivered=function(a,b){}};b.disconnect=function(a){if(this.$6==null||this.$6.readyState!==this.$6.OPEN||!this.$5){this.$14();return}this.$13(new(d("MqttProtocolCodec").WireMessage.Disconnect)());this.$9.bumpCounter("protocol.debug.disconnect");this.$12(a)};b.isConnected=function(){return this.$5};b.setConnected=function(a){this.$5=a};b.subscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.subscribe.notconnected");throw c("err")("Invalid state: subscribe - not connected")}this.$9.bumpCounter("protocol.subscribe."+a);a=new(d("MqttProtocolCodec").WireMessage.Subscription)("SUBSCRIBE",a,0,this.$15());this.$13(a)};b.unsubscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.unsubscribe.notconnected");throw c("err")("Invalid state: unsubscribe - not connected")}this.$9.bumpCounter("protocol.unsubscribe."+a);a=new(d("MqttProtocolCodec").WireMessage.Subscription)("UNSUBSCRIBE",a,0,this.$15());this.$13(a)};b.publish=function(a,b,c){this.$5||this.$9.bumpCounter("protocol.error.publish.notconnected");this.$9.bumpCounter("protocol.publish."+a);var e=this.$15();a=new(d("MqttProtocolCodec").WireMessage.Publish)(a,d("MqttProtocolCodec").createMessageWithString(b),c,e);this.$13(a);return e};b.$15=function(){++this.$4===i&&(this.$4=1);return this.$4};b.handleMessage=function(a){var b=this;switch(a.messageType){case d("MqttProtocolCodec").MESSAGE_TYPE.CONNACK:this.$7!=null&&(d("MqttEnv").Env.clearTimeout(this.$7),this.$7=null);if(a instanceof d("MqttProtocolCodec").WireMessage.ConnAck){var e=a;if(e.returnCode!==0){this.$9.bumpCounter("protocol.error.connack.invalidreturncode");this.setConnected(!1);this.$12(d("MqttTypes").MqttErrors.CONNACK_FAILURE,"connack code="+e.returnCode,e.returnCode);return}d("MqttEnv").Env.scheduleCallback(function(){b.$2.onConnectSuccess(b.$11)});this.$8!=null&&this.$8.reset()}break;case d("MqttProtocolCodec").MESSAGE_TYPE.PUBLISH:if(a instanceof d("MqttProtocolCodec").WireMessage.Publish){var f=a;d("MqttEnv").Env.scheduleCallback(function(){b.$2.onMessageArrived(f.topic,f.payloadMessage,f.qos)});e=f.messageIdentifier;this.$9.bumpCounter("protocol.publish.received");if(f.qos===1&&e!=null){e=new(d("MqttProtocolCodec").WireMessage.PubAckUnsubAck)("PUBACK",e);this.$13(e)}}break;case d("MqttProtocolCodec").MESSAGE_TYPE.PUBACK:if(a instanceof d("MqttProtocolCodec").WireMessage.PubAckUnsubAck){e=a;var g=e.messageIdentifier;this.$9.bumpCounter("protocol.puback.received");d("MqttEnv").Env.scheduleCallback(function(){b.$2.onMessageDelivered("",g)})}break;case d("MqttProtocolCodec").MESSAGE_TYPE.PINGRESP:this.$8!=null&&this.$8.reset();break;case d("MqttProtocolCodec").MESSAGE_TYPE.DISCONNECT:this.$12(d("MqttTypes").MqttErrors.SERVER_DISCONNECT);break;case d("MqttProtocolCodec").MESSAGE_TYPE.SUBACK:this.$9.bumpCounter("protocol.suback.received");break;case d("MqttProtocolCodec").MESSAGE_TYPE.UNSUBACK:this.$9.bumpCounter("protocol.unsuback.received");break;default:this.$9.logError(c("err")("MqttProtocolClient: Received unhandled message type: "+a.messageType),"Received unhandled message type");this.$9.bumpCounter("protocol.error.handlemessage.unsupportedtype");break}};return a}();g["default"]=a}),98);
__d("MqttPublishListener",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({NOT_CONNECTED:"NOT_CONNECTED",PUBLISH_ERROR:"PUBLISH_ERROR",QUEUED:"QUEUED",SENT:"SENT",ACKED:"ACKED",NOT_ACKED:"NOT_ACKED"});f.MqttPublishEvent=a}),66);
__d("MqttUserName",["gkx"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f,g,h,i,j,k){h===void 0&&(h=null),i===void 0&&(i=""),j===void 0&&(j="websocket"),k===void 0&&(k=null),this.$1=a,this.$2=b,this.$3=d,this.$4=e,this.$5=f,this.$6=g,this.$7=c("gkx")("1166607")?!1:typeof document==="object"&&document&&document.hasFocus&&document.hasFocus(),this.$8=h,this.$9=i,this.$10=j,this.$11=k}var b=a.prototype;b.gen=function(a,b,d,e){e===void 0&&(e=[]);var f=c("gkx")("1166607")?!1:this.$7;a={u:this.$1,s:a,cp:this.$3,ecp:this.$2,chat_on:this.$6,fg:f,d:this.$4,ct:this.$10,mqtt_sid:"",aid:this.$5,st:b,pm:d,dc:"",no_auto_fg:!0,gas:this.$8,pack:e,php_override:this.$9,p:this.$11};return JSON.stringify(a)};b.setForegroundState=function(a){this.$7=a};b.setChatVisibility=function(a){this.$6=a};b.getEndpointCapabilities=function(){return this.$2};b.getDeviceId=function(){return this.$4};b.setEndpointCapabilities=function(a){this.$2=a};b.getIsGuestAuthStringPresent=function(){return this.$8!==null};return a}();g["default"]=a}),98);
__d("MqttConnection",["MqttConnectionHookCollection","MqttEnv","MqttProtocolClient","MqttPublishListener","MqttTypes","MqttUserName","MqttUtils","Promise","err","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=10,i=1,j=1,k=64,l="publish",m="subscribe",n="unsubscribe",o=function(a){},p=18e4,q=5*1e3,r=15,s=21;a=function(){function a(){var a=this;this.$37=function(){return a.$20};this.$38=function(){return a.$21};this.$8=!1;this.$10=d("MqttEnv").Env.getLoggerInstance();this.$11="Disconnected";this.$17=new Set();this.$24=new Map();this.$12=0;this.$13=0;this.$14=0;this.$15=0;this.$16=0;this.$8=!1;this.$5="";this.$6=new(c("MqttUserName"))("",0,1,"",0,!0);this.$9=0;this.$18=0;this.$19=!1;this.$7=null;var b=function(){};this.$1=b;this.$2=b;this.$3=b;this.$25=!1;this.$26=!1;this.$27=new(c("MqttConnectionHookCollection"))();this.$4=function(){return[]};this.$20=h;this.$21=h;this.$22=null;this.$23=0}var e=a.prototype;e.run=function(a){var b=this,d=a.onStateChange,e=a.onJSError,f=a.onMessageReceived,g=a.endpoint,i=a.mqttUserName,j=a.subscribedTopics;a=a.extraConnectMessageProvider;if(this.$8){this.$10.debugTrace("run","Run called while in running state.");return}this.$1=d;this.$3=f;this.$5=g;this.$6=i;this.$8=!0;this.$18=Date.now();this.$12=0;this.$13=0;this.$2=e||o;j&&j.forEach(function(a){return b.$17.add(a)});this.$4=a;this.$20=(d=c("qex")._("656"))!=null?d:h;this.$21=(f=c("qex")._("657"))!=null?f:h;this.$28()};e.shutdown=function(a){this.$29(a),this.$30("shutdown"),this.$8=!1,this.$10.debugTrace("shutdown","Shutdown")};e.subscribe=function(a){this.$17.add(a);this.ensureConnected(m)&&this.$31(a);return!0};e.publish=function(a,e,f,g){var h={resolve:function(){},reject:function(a){}};g!=null&&(h.listener=g);var i=new(b("Promise"))(function(a,b){h.resolve=a,h.reject=b}),j=this.ensureConnected(l);!j?(g==null?void 0:g.onEvent(d("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED),h.reject(c("err")("Client disconnected"))):this.$32(a,e,f,h);return i};e.unsubscribe=function(a){this.$17["delete"](a);this.ensureConnected(n)&&this.$33(a);return!0};e.addHook=function(a){this.$27.addHook(a)};e.removeHook=function(a){this.$27.removeHook(a)};e.isRunning=function(){return this.$8};e.getSessionId=function(){return this.$9};e.hasFatal=function(){return this.$25};e.hasConnectSuccess=function(){return this.$26};e.canPublish=function(){return this.ensureConnected("canPublish")};e.ensureConnected=function(a){return!this.$8||this.$7==null||!this.$7.isConnected()?!1:!0};e.connectionState=function(){return this.$11};e.mqttStateFromConnectionState=function(a){switch(a){case"Connecting":case"TransportConnected":return"Connecting";case"Connected":return"Connected";case"Disconnected":return"Disconnected"}throw c("err")("Unknown state "+a)};e.testOnlyGetSubscribedTopics=function(){return this.$17};e.onWindowUnload=function(){var a=this;this.publish("/browser_close","{}",0)["catch"](function(){a.$10.bumpCounter("on_window_unload.browser_close_publish_failed")})};e.getDisconnectCount=function(){return this.$23};e.$29=function(a){this.$8&&this.$7!=null&&(this.$34("Disconnected"),this.$7!=null&&(this.$7.disconnect(a),this.$27.onConnectionDisconnect()),this.$7=null)};e.$35=function(a){if(this.$11==="Connected"&&a==="Disconnected"&&this.$18===0){this.$18=Date.now();return}if(a==="Connecting"&&this.$18!==0&&!this.$19){this.$10.bumpCounter("protocol.reconnectstarted");this.$19=!0;return}if(a==="Connected"&&this.$18!==0){a=Date.now()-this.$18;switch(Math.floor(a/3e4)){case 0:this.$10.bumpCounter("protocol.reconnectedwithin30s");break;case 1:this.$10.bumpCounter("protocol.reconnectedwithin60s");break;case 2:this.$10.bumpCounter("protocol.reconnectedwithin90s");break;case 3:this.$10.bumpCounter("protocol.reconnectedwithin120s");break;default:this.$10.bumpCounter("protocol.reconnectedmorethan120s");break}this.$18=0;this.$19=!1;return}};e.$34=function(a){a!==this.$11&&(this.$10.debugTrace("MQTTConnection-updateState","State changed to: "+a),this.$35(a),this.$11=a,this.$1(a))};e.$28=function(){var a=this;if(!this.$8)return;this.$11!=="Disconnected"&&this.$10.debugTrace("Reconnect","Current State not disconnected: "+this.$11);this.$34("Connecting");var b=Date.now(),e=this.$10.getBrowserConnectivity();this.$9=c("MqttUtils").generateSessionId();var f=Array.from(this.$17),g=c("MqttUtils").endpointWithSessionId(this.$5,this.$9);g=c("MqttUtils").endpointWithExtraParameter(g,"cid",this.$6.getDeviceId());try{this.$7=new(c("MqttProtocolClient"))(g);var h=this.$36(),i=h.map(function(a){return a.topic});g=this.$6.gen(this.$9,f,h);this.$7!=null&&(this.$13+=1,this.$7.connect({userName:g,mqttVersion:3,getKeepAliveIntervalSeconds:this.$37,getKeepAliveTimeoutSeconds:this.$38,ignoreSubProtocol:!0,onConnectFailure:function(c,d,g){return a.$39(d,b,a.$18,f,i,e,c,g)},onConnectSuccess:function(c){return a.$40(b,a.$18,f,i,e,c)},onConnection:function(){return a.$41(h,f)},onConnectionLost:function(b,c){return a.$42(b,c)},onMessageArrived:function(b,c,d){return a.$43(b,c,d)},onMessageDelivered:function(b,c){return a.$44(b,c)}}),this.$10.bumpCounter("protocol.connectattempt"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.connectattempt"),this.$27.onConnectAttempt())}catch(a){this.$10.bumpCounter("js_error_in_init_exception"),this.$34("Disconnected"),this.$45(!1,!1,b,this.$18,f,[],e,null,14,"init error - "+a.message),a&&this.$10.logErrorWarn(a,"ws_js_error"),this.$27.onWSFatal(),this.$46(new(d("MqttTypes").MqttChannelError)(!1,"ws_js_error",a),"client_init")}};e.$36=function(){var a=this.$4(),b=65536;a=a.map(function(a){a.messageId=b--;return a});return a};e.$31=function(a){try{if(this.$7!=null){this.$7.subscribe(a);this.$10.debugTrace("_doSubscribe","Subscribing to "+a);this.$27.onSubscribe(a);this.$10.bumpCounter("protocol.subscribe");return!0}}catch(b){this.$10.logError(b,"Exception subscribing"),this.$10.bumpCounter("subscribe_exception."+a),this.$10.bumpCounter("protocol.subscribe.error")}return!1};e.$33=function(a){try{if(this.$7!=null){this.$7.unsubscribe(a);this.$10.debugTrace("_doUnsubscribe","Unsubscribing to "+a);this.$27.onUnsubscribe(a);this.$10.bumpCounter("protocol.unsubscribe");return!0}}catch(b){this.$10.logError(b,"Exception unsubscribing"),this.$10.bumpCounter("unsubscribe_exception."+a),this.$10.bumpCounter("protocol.unsubscribe.error")}return!1};e.$32=function(a,b,c,e){if(this.$7!=null)try{b=this.$7.publish(a,b,c);this.$10.bumpCounter("protocol.publish");var f=b!=null?b:"null";this.$10.debugTrace("_doPublish","publish "+a+" with messageId:"+f+" qos:"+c);this.$27.onPublish(a);(f=e.listener)==null?void 0:f.onEvent(d("MqttPublishListener").MqttPublishEvent.SENT);b!=null?(this.$10.bumpCounter("publish.ack_expected"),this.$24.set(b,e)):e.resolve();return!0}catch(b){this.$10.logError(b,"Exception publishing");this.$10.bumpCounter("publish_exception."+a);e.reject(b);this.$10.bumpCounter("protocol.publish.error");return!1}else return!1};e.$47=function(a){var b=this;a===void 0&&(a=null);if(!this.$8)return;this.$29(d("MqttTypes").MqttErrors.RECONNECT);this.$30("reconnect");this.$48();this.$9=-1;this.$16=0;a=a;if(a==null){var e;e=(e=c("qex")._("130"))!=null?e:i;a=e*Math.pow(2,this.$12)}a=Math.max(a,j);e=(e=c("qex")._("131"))!=null?e:k;a=Math.min(a,e);e=a*(1e3+d("MqttEnv").Env.random()*200);this.$10.debugTrace("_scheduleReconnect","Reconnect in "+e+" ms");this.$22=d("MqttEnv").Env.setTimeout(function(){b.$28()},e);this.$12+=1};e.$48=function(){var a=Date.now()-this.$16,b=this.$16!==0&&a>q,c=this.$12>r;(b||c)&&(this.$12=0);this.$16!==0&&a<=q&&this.$10.bumpCounter("short_lived_session");c&&this.$10.bumpCounter("connection_attempt_limit")};e.$45=function(a,b,c,d,e,f,g,h,i,j){a?this.$14++:this.$15++;var k=Date.now();this.$10.eventLogConnect({sessionID:this.$9,connectionStatus:a,connectionState:this.mqttStateFromConnectionState(this.$11),ackReceived:b,duration:k-c,total_duration:k-d,hostname:this.$5,attemptNumber:this.$13,successTotal:this.$14,failTotal:this.$15,subscribedTopics:e,publishes:f,errorCode:i,errorMessage:j,osConnectivity:g,messageSizeBytes:h,disconnectCount:this.$23});a&&(this.$13=0)};e.$39=function(a,b,c,d,e,f,g,h){var i=a.mqttError;h=h!=null?i.errorMessage+" - "+h:i.errorMessage;this.$10.debugTrace("connect","Connect failed "+h);this.$10.bumpCounter("protocol.onconnectfailure");this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectfailure");this.$27.onConnectFailure();this.$45(!1,a.connAck!==-1,b,c,d,e,f,g,i.errorCode,h);if(a.connAck!=null){this.$10.bumpCounter("protocol.connect_failure."+a.connAck);if(a.connAck===s){this.$47(p);return}}this.$47()};e.$41=function(a,b){var c=this;this.$10.bumpCounter("protocol.onconnection");this.$10.debugTrace("Connect","Socket established");this.$27.onConnected();this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnection");b.forEach(function(a){c.$27.onSubscribe(a)});a.forEach(function(a){c.$27.onPublish(a.topic)});this.$34("TransportConnected")};e.$40=function(a,b,c,d,e,f){this.$10.bumpCounter("protocol.onconnectsuccess"),this.$10.debugTrace("connect","Connect success"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectsucess"),this.$27.onConnectSuccess(),this.$26=!0,this.$34("Connected"),this.$45(!0,!0,a,b,c,d,e,f),this.$49(c),this.$16=Date.now()};e.$42=function(a,b){this.$10.bumpCounter("protocol.onconnectionlost");this.$23++;if(a.errorCode){b=b!=null?a.errorMessage+" - "+b:a.errorMessage;this.$10.eventLogDisconnect({sessionID:this.$9,errorCode:a.errorCode,errorMessage:b,duration:Date.now()-this.$16,disconnectCount:this.$23})}this.$10.debugTrace("connect","connection lost");this.$27.onConnectionLost();this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectionlost");this.$47()};e.$43=function(a,b,c){this.$10.bumpCounter("protocol.onmessagearrived");this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onmessagearrived");this.$10.debugTrace("onMessageArrived","Message received on "+a);this.$27.onMessage(a);try{this.$3(a,b,c)}catch(b){this.$10.logError(b,"Listener threw error"),this.$10.bumpCounter("listener_error."+a)}};e.$44=function(a,b){this.$10.bumpCounter("protocol.onmessagedelivered");a=b!=null?b:"null";this.$10.debugTrace("onMessageDelivered","Delivered Message {ID: "+a+"}");if(b==null)return;a=this.$24.get(b);if(a==null){this.$10.bumpCounter("protocol.message_with_unknown_id");return}this.$24["delete"](b);(b=a.listener)==null?void 0:b.onEvent(d("MqttPublishListener").MqttPublishEvent.ACKED);a.resolve();this.$10.bumpCounter("publish.ack_received")};e.$30=function(a){this.$10.bumpCounter("protocol.fail_all_unacked_publishes."+a),this.$24.forEach(function(b,e,f){(e=b.listener)==null?void 0:e.onEvent(d("MqttPublishListener").MqttPublishEvent.NOT_ACKED);b.reject(c("err")(a))}),this.$24.clear()};e.$49=function(a){var b=this,c=new Set(a);c.forEach(function(a){b.$17.has(a)||b.unsubscribe(a)});a=new Set(this.$17);a.forEach(function(a){c.has(a)||b.subscribe(a)})};e.$46=function(a,b){try{this.$10.bumpCounter("js_error_in_init");this.$10.bumpCounter(b+".error");this.$25=!0;var c=a?a.message:"error";this.$10.debugTrace("onError",b+": "+c);this.$2(a)}catch(a){this.$10.bumpCounter("js_error_in_error_logging"),this.$10.logError(a,"JS error while trying to log previous error")}};return a}();g["default"]=a}),98);
__d("MqttChannel",["ChannelClientID","IrisSubscribeChecker","MqttAnalyticsHook","MqttConnection","MqttEnv","MqttPublishListener","MqttPublishTimeoutConfig","MqttTypes","MqttUserName","MqttUtils","Promise","Run","err","isFastRefreshEnabledForCurrentDomain","promiseDone","qex","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("MqttPublishTimeoutConfig").mqttPublishTimeoutMs||60*1e3;a=function(){function a(a){var b=this,e=a.endpoint,f=a.pollingEndpoint,g=a.userFbid,h=a.appId,i=a.initialSubscribedTopics,j=a.capabilities,k=a.clientCapabilities,l=a.chatVisibility;l=l===void 0?!0:l;var m=a.guestAuthString;m=m===void 0?null:m;var n=a.phpOverride;n=n===void 0?"":n;var o=a.clientType;o=o===void 0?"websocket":o;var p=a.deviceId;p=p===void 0?c("ChannelClientID").getID():p;a=a.pageId;a=a===void 0?null:a;this.$11=d("MqttEnv").Env.getLoggerInstance();this.$11.setAppId(h);this.$12=new(c("MqttUserName"))(g,j,k,p,h,l,m,n,o,a);this.$1=e;this.$2=f;this.$5="Disconnected";this.$7="LPInactive";this.$6="Disconnected";this.$3=[];this.$4=new Set();this.$8=new Map();this.$9=new Map();this.$10=new(c("MqttConnection"))();this.$13=null;this.$16=new(c("MqttAnalyticsHook"))();this.$15=new Map();this.$14=[];if(!d("MqttEnv").Env.isUserLoggedInNow()&&!c("isFastRefreshEnabledForCurrentDomain")()&&(m==null||m=="")){this.$11.bumpCounter("logged_out_init");return}this.$10.addHook(this.$16);this.$10.addHook(new(c("IrisSubscribeChecker"))(function(){return b.$4.size>0}));this.$17(i);this.$18()}var e=a.prototype;e.$17=function(a){var b=this;if(this.$10.isRunning()){this.$19("run","Connection started calling run again");return}if(d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)){var e=d("MqttEnv").Env.killswitch("MQTT_WS_FORCE_LONG_POLLING");if(e){this.$19("MqttChannel","Websocket disabled, will do long polling only");return}else if(!c("MqttUtils").hasWSSupport()){this.$19("MqttChannel","Websocket Unavailable, will do long polling only");this.$11.bumpCounter("ws_unavailable_polling");return}}this.$10.run({onStateChange:function(a){b.$20(a)},onJSError:function(a){b.$21(a)},onMessageReceived:function(a,c,d){b.$22(a,c,d)},endpoint:this.$1,mqttUserName:this.$12,subscribedTopics:a,extraConnectMessageProvider:function(){return b.$23()}});this.$24()};e.$24=function(){var a=this;d("Run").onUnload(function(){a.$10.onWindowUnload(),a.$25(d("MqttTypes").MqttErrors.BROWSER_CLOSE)})};e.shutdown=function(){this.$25(d("MqttTypes").MqttErrors.APP_DISCONNECT)};e.$25=function(a){this.$10&&this.$10.shutdown(a),this.$13&&this.$13.shutdown(),this.$16.onTabClose()};e.publish=function(a,b,e){e===void 0&&(e={qos:1,skipBuffer:!1});var f;e.qos===0?f=this.$26(a,b,e.listener):f=this.$27(a,b,e);c("MqttUtils").promiseDone(f,function(){},function(a){(a=e.listener)==null?void 0:a.onEvent(d("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR)});return f};e.$26=function(a,b,c){return this.$28(a,b,0,c,1,null)};e.$27=function(a,c,e){var f={resolve:function(){},reject:function(a){}},g=new(b("Promise"))(function(a,b){f.resolve=a,f.reject=b}),h=d("MqttEnv").Env.random();a={topic:a,payload:c,options:e,ack:f,publishToken:h,timeoutId:null,attempt:0,startTime:Date.now()};if(e.skipBuffer)if(this.$10.connectionState()==="Connecting"){this.$14.push(a);(c=e.listener)==null?void 0:c.onEvent(d("MqttPublishListener").MqttPublishEvent.QUEUED)}else this.$29(a);else{a.timeoutId=this.$30(h);this.$15.set(h,a);(c=e.listener)==null?void 0:c.onEvent(d("MqttPublishListener").MqttPublishEvent.QUEUED);this.$31(a)}return g};e.$29=function(a){a.attempt+=1,c("MqttUtils").promiseDone(this.$28(a.topic,a.payload,a.options.qos,a.options.listener,a.attempt,a.startTime),function(){a.ack.resolve()},function(b){a.ack.reject(b)})};e.$31=function(a){var b=this;a.attempt+=1;c("MqttUtils").promiseDone(this.$28(a.topic,a.payload,a.options.qos,a.options.listener,a.attempt,a.startTime),function(){return b.$32(a)},function(a){})};e.$28=function(a,b,e,f,g,h){var i=this,j,k,l=this.getConnectionState(),m=Date.now();!this.$10.canPublish()&&this.$13&&this.$13.canPublish()?(j=this.$13.publish(a,b,e),k="lp",f!=null&&(j=j.then(function(){return f.onEvent(d("MqttPublishListener").MqttPublishEvent.SENT)})),this.$11.bumpCounter("try_publish_lp")):(j=this.$10.publish(a,b,e,f),k="ws",this.$11.bumpCounter("try_publish_ws"));c("promiseDone")(j,function(){i.$11.eventLogOutgoingPublish({sessionID:i.$10.getSessionId(),topic:a,qos:e,payloadSizeBytes:b.length*2,success:!0,protocol:k,errorMessage:null,connectionState:l,thisAttemptStartTime:m,firstAttemptStartTime:h,attempt:g,disconnectCount:i.$10.getDisconnectCount()})},function(c){i.$11.eventLogOutgoingPublish({sessionID:i.$10.getSessionId(),topic:a,qos:e,payloadSizeBytes:b.length*2,success:!1,protocol:k,errorMessage:c!=null?c.toString():null,connectionState:l,thisAttemptStartTime:m,firstAttemptStartTime:h,attempt:g,disconnectCount:i.$10.getDisconnectCount()})});return j};e.subscribe=function(a,b){var c=this;this.$10.subscribe(a);var d=this.$8.get(a);!d?(d=[b],this.$8.set(a,d)):d.push(b);return function(){var d=c.$8.get(a)||[];d=d.filter(function(a){return a!==b});c.$8.set(a,d);d.length===0&&c.unsubscribeAll(a)}};e.subscribeBinary=function(a,b){var c=this;this.$10.subscribe(a);var d=this.$9.get(a);!d?(d=[b],this.$9.set(a,d)):d.push(b);return function(){var d=c.$9.get(a)||[];d=d.filter(function(a){return a!==b});c.$9.set(a,d);d.length===0&&c.unsubscribeAll(a)}};e.subscribeChannelEvents=function(a){this.$3.push(a)};e.unsubscribeChannelEvents=function(a){a=this.$3.indexOf(a);a>-1&&this.$3.splice(a,1)};e.registerExtraConnectPayloadProvider=function(a){var b=this;this.$19("MqttChannel","registerExtraConnectPayloadProvider called");this.$4.add(a);if(this.$10.isRunning()){a=a.getPublishMessages();a.forEach(function(a){b.publish(a.topic,a.payload,{qos:a.qos,skipBuffer:!0})})}};e.unregisterExtraConnectPayloadProvider=function(a){this.$4["delete"](a)};e.unsubscribeAll=function(a){this.$10.unsubscribe(a),this.$8["delete"](a),this.$9["delete"](a)};e.getConnectionState=function(){return this.$5};e.getLongPollingStatus=function(){return this.$7};e.getEndpoint=function(){return this.$1};e.addHook=function(a){this.$10.addHook(a)};e.removeHook=function(a){this.$10.removeHook(a)};e.testOnlyMessageReceived=function(a,b){this.$22(a,b,-1)};e.$33=function(a){var b=this.$15.get(a);b!=null&&b.timeoutId!=null&&d("MqttEnv").Env.clearTimeout(b.timeoutId);this.$15["delete"](a)};e.$30=function(a){var b,e=this;b=(b=c("qex")._("37"))!=null?b:h;b=d("MqttEnv").Env.setTimeout(function(a){var b=e.$15.get(a);if(!b)return;var d=b.topic;e.$11.bumpCounter("publish_timeout."+d);e.$11.debugTrace("publish_timeout","Timeout publishing topic: "+d+" publishToken: "+a);e.$33(a);b.ack.reject(c("err")("Publish Timed Out"))},b,a);return b};e.$32=function(a){var b=a.publishToken,c=this.$15.get(b);if(!c)return;this.$33(b);a.ack.resolve();this.$11.debugTrace("publish_success","Topic: "+a.topic+" publishToken: "+a.publishToken);this.$11.bumpCounter("publish_success."+a.topic)};e.$22=function(a,b,c){var d=this.$8.get(a);this.$11.eventLogIncomingPublish({sessionID:this.$10.getSessionId(),topic:a,connectionState:this.getConnectionState(),qos:c,payloadSizeBytes:b.payloadString.length*2,disconnectCount:this.$10.getDisconnectCount()});if(!d)this.$11.debugTrace("_onMessageReceived",a+" being dropped, no listeners");else for(var d=d,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;try{g(b.payloadString)}catch(a){this.$11.logError(a,"Listener exception"),this.$11.bumpCounter("listener_error")}}g=this.$9.get(a);this.$11.eventLogIncomingPublish({sessionID:this.$10.getSessionId(),topic:a,connectionState:this.getConnectionState(),qos:c,payloadSizeBytes:b.payloadBytes.length,disconnectCount:this.$10.getDisconnectCount()});if(!g)this.$11.debugTrace("_onMessageReceived",a+" being dropped, no binary listeners");else for(var f=g,e=Array.isArray(f),d=0,f=e?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(d>=f.length)break;c=f[d++]}else{d=f.next();if(d.done)break;c=d.value}a=c;try{a(b.payloadBytes)}catch(a){this.$11.logError(a,"Binary Listener exception"),this.$11.bumpCounter("listener_error")}}};e.$21=function(a){if(d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)){a.isRecoverable?this.$11.bumpCounter("recoverable_error_skipped"):this.$11.bumpCounter("unrecoverable_error_skipped");return}a.isRecoverable?this.$11.bumpCounter("recoverable_error_not_skipped"):this.$11.bumpCounter("unrecoverable_error_not_skipped");this.$34(a)};e.$35=function(a){this.$34(a)};e.$34=function(a){for(var b=this.$3,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.onJSError&&e.onJSError(a)}};e.$36=function(){var a=this;this.$14.forEach(function(b){a.$29(b),a.$11.bumpCounter("publish_from_temp_buffer."+b.topic)});this.$14=[];this.$15.forEach(function(b,c,d){a.$31(b),a.$11.bumpCounter("publish_from_buffer."+b.topic)})};e.$20=function(a){a==="Connecting"?(this.$14.forEach(function(a){a.ack.reject(c("err")("Client Reconnecting - "+a.topic))}),this.$14=[]):a==="TransportConnected"&&this.$36(),this.$19("_changeState","Connection state = "+a),this.$37(a,this.$7)};e.$38=function(a,b){this.$13&&this.$13.canPublish()&&this.$36(),this.$19("_changeLPStatus","LP status = "+a+", LP Request status = "+b),this.$37(this.$6,a)};e.$37=function(a,b){var c=this.$10.mqttStateFromConnectionState(a);this.$13&&this.$13.canPublish()&&(c="Connected");this.$6=a;(c!==this.$5||b!=this.$7)&&(this.$5=c,this.$7=b,this.$39(c))};e.$39=function(a){for(var b=this.$3,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.onMQTTStateChanged(a)}};e.$23=function(){var a=this,b=[];this.$4.forEach(function(c){try{c=c.getPublishMessages();Array.prototype.push.apply(b,c)}catch(b){a.$11.logError(b,"ConnectPayload provider exception"),a.$11.bumpCounter("connectPayloadProvider_error")}});return b};e.$18=function(){var a=this;d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)&&this.$2&&this.$2!=""&&c("requireDeferred")("MqttLongPollingRunner").__setRef("MqttChannel").onReady(function(b){b=new b(a.$2,a.$12,a.$10.hasFatal(),a.$10.hasConnectSuccess(),function(b,c,d){return a.$22(b,c,d)},function(){var b=Array.from(a.$8.keys()),c=Array.from(a.$9.keys());return Array.from(new Set(b.concat(c)))},function(){return a.$23()},function(b){a.$35(b)},function(b,c){a.$38(b,c)});b.start();a.$10.addHook(b);b.addHook(a.$16);a.$13=b;a.$11.debugTrace("MqttChannel","longPollingRunner loaded")})};e.$19=function(a,b){this.$11.debugTrace(a,"Mqtt channel: "+b)};e.setForegroundState=function(a){this.$12&&this.$12.setForegroundState(a)};e.setChatVisibility=function(a){this.$12&&this.$12.setChatVisibility(a)};e.getEndpointCapabilities=function(){return this.$12.getEndpointCapabilities()};e.setEndpointCapabilities=function(a){this.$12.setEndpointCapabilities(a)};return a}();f.exports=a}),34);
__d("MqttLogger",["ChannelClientID","FBLogger","Log","LogHistory","MqttEnv","MqttGlobalStreamCounter","MqttUnifiedClientConnectFalcoEvent","MqttUnifiedClientDisconnectFalcoEvent","MqttUnifiedClientIncomingPublishFalcoEvent","MqttUnifiedClientOutgoingPublishFalcoEvent","MqttWsClientTypedLoggerLite","NetworkStatus","ODS","Random","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h="mqtt_client",i=100,j="WEBSOCKET",k=null,l={CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish",CLIENT_ERROR:"mqtt_client_error",PUBLISH_TIMEOUT:"mqtt_qos1_publish_timeout",SOCKET_DISCONNECT:"mqtt_protocol_error"},m={CONNECT:"connect",DISCONNECT:"disconnect",OUTGOING_PUBLISH:"outgoing_publish",INCOMING_PUBLISH:"incoming_publish"};a=function(){a.getInstance=function(){k||(k=new a());return k};function a(){this.$1=d("LogHistory").getInstance(h),this.$2=0,this.$3=c("gkx")("778292"),this.$4=Date.now(),this.$5=c("ChannelClientID").getID(),this.$7(),this.$6=d("MqttGlobalStreamCounter").getInstance(),this.$6.isEnabled()||(this.$6=null)}var b=a.prototype;b.setAppId=function(a){this.$2===0&&(this.$2=a)};b.eventLogConnect=function(a){var b=a.sessionID,d=a.connectionStatus,e=a.connectionState,f=a.ackReceived,g=a.duration,h=a.total_duration,i=a.hostname,k=a.attemptNumber,n=a.successTotal,o=a.failTotal;a.subscribedTopics;a.publishes;var p=a.osConnectivity;a.errorCode;var q=a.errorMessage,r=a.messageSizeBytes;a=a.disconnectCount;d=d?"success":"failed";this.bumpCounter(l.CONNECT+"."+d);d=n/(n+o);n=p&&this.getBrowserConnectivity();var s={event_type:m.CONNECT,acked:f,attempt_number:k.toString(),connection_state:e,client_type:j,duration:g.toString(),total_duration:h.toString(),error:q,session_id:b.toString(),os_connectivity:n,payload_size:r==null?void 0:r.toString(),extra_data:{device_id:this.$5,connect_success_rate:d.toString(),hostname:i},ws_count:(o=this.$6)==null?void 0:o.getGlobalState().totalConnectionStreams.toString(),disconnect_count:a.toString()};this.$8(function(){c("MqttUnifiedClientConnectFalcoEvent").log(function(){return s})})};b.eventLogPull=function(a){var b=a.pullEventName,c=a.sessionID,e=a.status,f=a.duration,g=a.hostname;a=a.errorMessage;c={device_id:this.$5,session_id:c,logged_in:d("MqttEnv").Env.isUserLoggedInNow(),href:window.location.hostname,connection_status:e,duration:f,hostname:g,error_message:a};this.$9(b,c)};b.eventLogPullFinish=function(a){var b=a.pullEventName,c=a.sessionID,e=a.duration,f=a.errorMessage,g=a.publishReceived;a=a.publishSent;c={device_id:this.$5,session_id:c,logged_in:d("MqttEnv").Env.isUserLoggedInNow(),href:window.location.hostname,duration:e,error_message:f,publish_received:g,publish_sent:a};this.$9(b,c)};b.eventLogDisconnect=function(a){var b=a.sessionID;a.errorCode;var d=a.errorMessage,e=a.duration;a=a.disconnectCount;this.bumpCounter(l.DISCONNECT);var f={event_type:m.DISCONNECT,connection_state:"Disconnected",client_type:j,duration:e.toString(),error:d,session_id:b.toString(),os_connectivity:this.getBrowserConnectivity(),extra_data:{device_id:this.$5},ws_count:(e=this.$6)==null?void 0:e.getGlobalState().totalConnectionStreams.toString(),disconnect_count:a.toString()};this.$8(function(){c("MqttUnifiedClientDisconnectFalcoEvent").log(function(){return f})})};b.eventLogOutgoingPublish=function(a){var b=a.sessionID,d=a.topic,e=a.qos,f=a.payloadSizeBytes,g=a.success,h=a.protocol,i=a.errorMessage,k=a.connectionState,n=a.thisAttemptStartTime,o=a.firstAttemptStartTime,p=a.attempt;a=a.disconnectCount;this.bumpCounter(l.PUBLISH+"."+d);var q=Date.now(),r={event_type:m.OUTGOING_PUBLISH,session_id:b.toString(),topic:d,client_type:j,connection_state:k,qos:e.toString(),acked:e===1?g:null,duration:(q-n).toString(),total_duration:o!=null?(q-o).toString():null,error:i,payload_size:f.toString(),attempt_number:p.toString(),os_connectivity:this.getBrowserConnectivity(),extra_data:{device_id:this.$5,protocol:h},disconnect_count:a.toString()};this.$8(function(){c("MqttUnifiedClientOutgoingPublishFalcoEvent").log(function(){return r})})};b.eventLogIncomingPublish=function(a){var b=a.sessionID,d=a.topic,e=a.connectionState,f=a.qos,g=a.payloadSizeBytes;a=a.disconnectCount;var h={event_type:m.INCOMING_PUBLISH,session_id:b.toString(),topic:d,client_type:j,connection_state:e,qos:f.toString(),payload_size:g.toString(),os_connectivity:this.getBrowserConnectivity(),extra_data:{device_id:this.$5},disconnect_count:a.toString()};b=d=="/webrtc"||d=="/rtc_multi";this.$10(function(){c("MqttUnifiedClientIncomingPublishFalcoEvent").log(function(){return h})},50,b)};b.logError=function(a,b){var e=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c("FBLogger")(h).catching(a).mustfix(b)}catch(a){}})};b.logErrorWarn=function(a,b){var e=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c("FBLogger")(h).catching(a).warn(b)}catch(a){}})};b.logWarn=function(a,b){var c=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c.$1.warn(a,b)}catch(a){}})};b.debugTrace=function(a,b){var c=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c.$1.debug(a,b)}catch(a){}})};b.bumpCounter=function(a){var b=this;if(!d("Random").coinflip(i))return;d("MqttEnv").Env.scheduleLoggingCallback(function(){b.$2!==0&&d("ODS").bumpEntityKey(2966,"mqtt_ws_client",b.$2+"."+a,i),d("ODS").bumpEntityKey(2966,"mqtt_ws_client",a,i)})};b.$9=function(a,b,e){var f=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){b.event_type=a;b.app_id=f.$2;b.online=f.$11();var d=JSON.stringify(b);f.$1.log(a,d,{weight:e});a!==l.DISCONNECT&&c("MqttWsClientTypedLoggerLite").log(b)})};b.$10=function(a,b,e){c("gkx")("762")&&b!==0?e=e||d("Random").coinflip(b):e=!0;e&&d("MqttEnv").Env.scheduleCallback(a)};b.$8=function(a){this.$10(a,0,!1)};b.$11=function(){return window.navigator&&window.navigator.onLine!==void 0?window.navigator.onLine:!1};b.getBrowserConnectivity=function(){return c("NetworkStatus").isOnline()};b.$7=function(){var a=this;if(window.navigator&&window.navigator.onLine!==void 0){var b=function(b){b=b.online;b||a.bumpCounter("browser_disconnect")};c("NetworkStatus").onChange(b)}};return a}();g["default"]=a}),98);
__d("MqttEnvInitializer",["CurrentUser","MqttEnv","MqttLogger","Random","WebStorage","clearTimeout","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h="mqtt:",i={genGk:function(a){switch(a){case d("MqttEnv").MqttGkNames.mqtt_waterfall_log_client_sampling:return c("gkx")("832242");case d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled:return!0;case d("MqttEnv").MqttGkNames.mqtt_lp_use_fetch:return c("gkx")("945829");case d("MqttEnv").MqttGkNames.mqtt_fast_lp:return c("gkx")("1001007");case d("MqttEnv").MqttGkNames.mqtt_lp_no_delay:return c("gkx")("1066746");case d("MqttEnv").MqttGkNames.mqtt_enable_publish_over_polling:return c("gkx")("968609");case d("MqttEnv").MqttGkNames.mqttweb_global_connection_counter:return c("gkx")("2795");default:c("MqttLogger").getInstance().logError(new Error("unknown gk"),"Unknown GK value "+a);return!1}},initialize:function(){d("MqttEnv").Env.initialize(c("Random").random,c("CurrentUser").isLoggedInNow,c("clearTimeout"),c("setTimeoutAcrossTransitions"),function(){return c("MqttLogger").getInstance()},i.genGk,null,null,null,function(a,b){var d=c("WebStorage").getLocalStorage();if(d){d=d.getItem(h+a);if(d!=null)return d}return b},function(a,b){var d=c("WebStorage").getLocalStorage();d&&(b==null?d.removeItem(h+a):c("WebStorage").setItemGuarded(d,h+a,b))})}};f.exports=i}),34);
__d("FBMqttChannel",["MqttChannel","MqttEnvInitializer","MqttWebConfig"],(function(a,b,c,d,e,f,g){"use strict";c("MqttEnvInitializer").initialize();a=new(c("MqttChannel"))({endpoint:c("MqttWebConfig").endpoint,pollingEndpoint:c("MqttWebConfig").pollingEndpoint,userFbid:c("MqttWebConfig").fbid,appId:c("MqttWebConfig").appID,initialSubscribedTopics:c("MqttWebConfig").subscribedTopics,capabilities:c("MqttWebConfig").capabilities,clientCapabilities:c("MqttWebConfig").clientCapabilities,chatVisibility:!1,phpOverride:c("MqttWebConfig").hostNameOverride});g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSClientDependencies",[],(function(a,b,c,d,e,f){}),null);
__d("LSLocalizedStrings",["fbt"],(function(a,b,c,d,e,f,g){a=function(a,b){switch(a){default:return""}};e.exports=a}),null);
__d("LSLocalizedStringsV2",["fbt","bs_caml_int64"],(function(a,b,c,d,e,f,g){a=function(a,c){switch(a){case"2285622730":return g._("__JHASH__bHf-pjjpSrh__JHASH__");case"1919524925":return g._("__JHASH__g2TuGL7kp7W__JHASH__");case"14617150":return g._("__JHASH__KN5FuK9HL68__JHASH__");case"460740012":return g._("__JHASH__PmrYWcLl7s-__JHASH__");case"2353844300":return g._("__JHASH__U3_S6m-Asci__JHASH__");case"2421884758":return g._("__JHASH__6vTlb2bku1-__JHASH__");case"2676961947":return g._("__JHASH__TK1WqTTq979__JHASH__",[g._param("participant_name",c(0))]);case"2352696798":return g._("__JHASH__4w1HQhVySfH__JHASH__");case"3298086032":return g._("__JHASH__AI6Z85qZOTl__JHASH__",[g._param("sender_name",c(0))]);case"3873263038":return g._("__JHASH__1Mq5qyIkjxC__JHASH__",[g._param("sender_name",c(0))]);case"2616853333":return g._("__JHASH__Jm7dkp7Q46M__JHASH__",[g._param("sender_name",c(0)),g._param("reply_source_sender_name",c(1))]);case"4002265907":return g._("__JHASH__YfSaJhpdv0H__JHASH__");case"2663996736":return g._("__JHASH__rouMYaFboPj__JHASH__",[g._param("participant_name",c(0))]);case"2868699317":return g._("__JHASH__gln0mR6BSos__JHASH__",[g._param("sender_name",c(0))]);case"2688620547":return g._("__JHASH__xBthZSMLrSR__JHASH__",[g._param("sender_name",c(0))]);case"3544071775":return g._("__JHASH__Bfn4BTqFbTw__JHASH__",[g._param("sender_name",c(0)),g._param("reply_source_sender_name",c(1))]);case"2375715979":return g._("__JHASH__wwqS06IKURT__JHASH__");case"3810165735":return g._("__JHASH___xK_oqrbVu3__JHASH__",[g._param("user_name",c(0))]);case"1890485478":return g._("__JHASH__r5f8SC2OUWe__JHASH__");case"1299547062":return g._("__JHASH__UxIyHnrkGvQ__JHASH__");case"3621454483":return g._("__JHASH__6CXDyy4pKod__JHASH__",[g._param("user_name",c(0))]);case"3948960063":return g._("__JHASH__4jXDffqGKxc__JHASH__");case"1249692047":return g._("__JHASH__XuMb0GRtMp2__JHASH__",[g._param("user_name",c(0))]);case"2106510577":return g._("__JHASH__adFbSa44M9G__JHASH__");case"3960370133":return g._("__JHASH__WRQpot61Zha__JHASH__",[g._param("user_name",c(0))]);case"3798396796":return g._("__JHASH__AKC6gu2oXen__JHASH__",[g._param("app_name",c(0))]);case"3388601579":return g._("__JHASH__LLEsQ4Y9-C7__JHASH__",[g._param("user_name",c(0)),g._param("app_name",c(1))]);case"1556712457":return g._("__JHASH__pQsKY3JdghI__JHASH__");case"3601791933":return g._("__JHASH__VzXmY6Nofoo__JHASH__",[g._param("user_name",c(0))]);case"3759817031":return g._("__JHASH__C6rFQy3ZqgT__JHASH__");case"2934729541":return g._("__JHASH__5sq-yY8-PHO__JHASH__",[g._param("user_name",c(0))]);case"392493418":return g._("__JHASH__Y9RNnaq--9C__JHASH__");case"4085467454":return g._("__JHASH__Tf8KEtj2NUW__JHASH__",[g._param("user_name",c(0))]);case"2738683656":return g._("__JHASH__VTdyPQ7H4GZ__JHASH__");case"2996525642":return g._("__JHASH__YPG0HYdjvfW__JHASH__",[g._param("user_name",c(0))]);case"2326868239":return g._("__JHASH__j-o8KFpMPxd__JHASH__");case"1001986796":return g._("__JHASH__zsY9ES-V3Ko__JHASH__",[g._param("user_name",c(0))]);case"2285746939":return g._("__JHASH__8PT2JtdeJx9__JHASH__");case"3759448420":return g._("__JHASH__H7eOZ8S6YOP__JHASH__",[g._param("user_name",c(0))]);case"3719716921":return g._("__JHASH__qiicOieyAHd__JHASH__");case"284944921":return g._("__JHASH__TkSIon2AHjf__JHASH__",[g._param("user_name",c(0))]);case"3322002377":return g._("__JHASH__hs-XIkGvPGM__JHASH__",[g._param("user_name",c(0))]);case"2486550278":return g._("__JHASH__78NZ4EbNix1__JHASH__");case"3557790945":return g._("__JHASH__9P29njYEtVJ__JHASH__");case"3756846086":return g._("__JHASH__HqUxJ78yQEs__JHASH__",[g._param("user_name",c(0))]);case"780378803":return g._("__JHASH__4RDpwDU2bxj__JHASH__");case"3918212613":return g._("__JHASH__sfM4caXMU8x__JHASH__",[g._param("user_name",c(0))]);case"3161890215":return g._("__JHASH__rMpUt8zHstd__JHASH__");case"863428456":return g._("__JHASH__ZqoJBBTdmfd__JHASH__",[g._param("user_name",c(0))]);case"2716405471":return g._("__JHASH__3bEfkOlWqZQ__JHASH__");case"3909474073":return g._("__JHASH__0LAhbzE2305__JHASH__",[g._param("user_name",c(0))]);case"1522141193":return g._("__JHASH__Xv5h5VWZ1z-__JHASH__");case"2804766375":return g._("__JHASH__iwXmJRLI5oQ__JHASH__",[g._param("user_name",c(0))]);case"772459202":return g._("__JHASH__da1hGBDyrc0__JHASH__");case"3546068912":return g._("__JHASH__eB3RT9ZRPNU__JHASH__",[g._param("user_name",c(0))]);case"2459540079":return g._("__JHASH__uVYFUqdjsDk__JHASH__");case"1596311291":return g._("__JHASH__JNmnqH9YpVN__JHASH__",[g._param("user_name",c(0))]);case"2253698324":return g._("__JHASH__cjVmAaYlDK5__JHASH__");case"4269602817":return g._("__JHASH__tgAN3WazCx7__JHASH__",[g._param("user_name",c(0))]);case"1739999037":return g._("__JHASH__LG-CVe6YeL2__JHASH__");case"3373597599":return g._("__JHASH__XSfhGJMwPL8__JHASH__");case"259473449":return g._("__JHASH__qL_GOsBRgrZ__JHASH__",[g._param("user_name",c(0))]);case"1338912959":return g._("__JHASH__LrXrY17Mwwh__JHASH__",[g._param("user_name",c(0))]);case"812940701":return g._("__JHASH__NEO9buPurkr__JHASH__",[g._param("user_name",c(0))]);case"1099878966":return g._("__JHASH__Qho_g3FF8mq__JHASH__",[g._param("user_name",c(0))]);case"3443782102":return g._("__JHASH__Xxt66o3iPYX__JHASH__");case"1196128688":return g._("__JHASH__z8eeQq9oV5-__JHASH__");case"2135145355":return g._("__JHASH__woc-8KLy7zj__JHASH__");case"3603511704":return g._("__JHASH__--XUHiOY0Z1__JHASH__",[g._param("user_name",c(0))]);case"705614308":return g._("__JHASH__vsnRcMCSSFJ__JHASH__",[g._plural(b("bs_caml_int64").to_float(c(0)),"number")]);case"313217698":return g._("__JHASH__rG1E-FG-TxB__JHASH__",[g._plural(b("bs_caml_int64").to_float(c(1)),"number"),g._param("user_name",c(0))]);case"3558654267":return g._("__JHASH___H0KEIF4aGq__JHASH__");case"3422266740":return g._("__JHASH__F5OxWfUB9Dy__JHASH__",[g._param("user_name",c(0))]);default:return""}};e.exports=a}),null);
__d("LSTableSchemas",[],(function(a,b,c,d,e,f){e.exports=[[{name:"sync_groups",id:1,primary_key:["groupId"]},{name:"pending_tasks",id:2,primary_key:["taskId"],indexes:{queueNameTaskId:["queueName","taskId"]},auto_increment:!0},{name:"network_requests",id:3,primary_key:["taskQueueName","syncDatabaseId"]},{name:"_user_info",id:4,primary_key:["id"]},{name:"pending_fire_and_forget_tasks",id:5,primary_key:["taskId"],auto_increment:!0},{name:"user_visible_errors",id:6,primary_key:["errorId"],auto_increment:!0},{name:"mailbox_task_completion_notification_context",id:232,primary_key:["notificationScopeKey"]},{name:"mailbox_task_completion_api_tasks",id:233,primary_key:["taskId"]}],[{name:"contacts",id:7,primary_key:["id"],indexes:{blockedByViewerStatusId:["blockedByViewerStatus","id"]}},{name:"ig_contact_info",id:176,primary_key:["contactId"]},{name:"work_contact_info",id:210,primary_key:["id"]},{name:"contextual_profile_v1",id:216,primary_key:["ownerId","associatedEntityId"]},{name:"fb_transport_contacts",id:240,primary_key:["pk"]}],[{name:"reactions",id:8,primary_key:["threadKey","messageId","actorId"]},{name:"threads",id:9,primary_key:["threadKey"],indexes:{lastActivityTimestampMs:["lastActivityTimestampMs","threadKey"],parentThreadKeyLastActivityTimestampMs:["parentThreadKey","lastActivityTimestampMs","threadKey"],clientThreadKey:["clientThreadKey","threadKey"],threadTypeLastActivityTimestampMs:["threadType","lastActivityTimestampMs","threadKey"]}},{name:"threads_ranges_v2__generated",id:10,primary_key:["parentThreadKey","minThreadKey","minLastActivityTimestampMs"]},{name:"messages",id:12,primary_key:["threadKey","timestampMs","messageId"],indexes:{optimistic:["offlineThreadingId"],messageDisplayOrder:["threadKey","primarySortKey","secondarySortKey","messageId"],messageId:["messageId"]}},{name:"messages_ranges_v2__generated",id:13,primary_key:["threadKey","minTimestampMs","minMessageId"]},{name:"participants",id:14,primary_key:["threadKey","contactId"],indexes:{threadKeyReadWatermarkTimestampMs:["threadKey","readWatermarkTimestampMs","contactId"],threadKeyDeliveredWatermarkTimestampMs:["threadKey","deliveredWatermarkTimestampMs","contactId"]}},{name:"ctas",id:15,primary_key:["ctaId"]},{name:"attachments",id:16,primary_key:["threadKey","messageId","attachmentFbid"],indexes:{fk_messages:["threadKey","timestampMs","messageId","attachmentFbid"]}},{name:"attachments_ranges_v2__generated",id:17,primary_key:["threadKey","mediaGroup","minTimestampMs"]},{name:"attachment_items",id:18,primary_key:["attachmentFbid","attachmentIndex"],indexes:{fk_attachments:["threadKey","messageId","attachmentFbid","attachmentIndex"]}},{name:"attachment_ctas",id:19,primary_key:["ctaId"],indexes:{fk_attachments:["threadKey","messageId","attachmentFbid","ctaId"]}},{name:"quick_reply_ctas",id:20,primary_key:["threadKey","messageId","ctaId"]},{name:"m_suggestions",id:21,primary_key:["threadKey","timestampMs","suggestionId"]},{name:"rtc_signals",id:22,primary_key:["timestampMs","type_"]},{name:"rtc_ongoing_calls_on_threads_v2",id:23,primary_key:["threadKey"]},{name:"rtc_multiway_call_initiation_conference_names",id:24,primary_key:["threadKey"]},{name:"mailbox_metadata",id:25,primary_key:["id"]},{name:"group_membership_approval_requests",id:26,primary_key:["threadKey","contactId"]},{name:"admin_message_ctas",id:27,primary_key:["threadKey","messageId","ctaId"],indexes:{ctaId:["ctaId"]}},{name:"thread_nullstate",id:28,primary_key:["threadKey"]},{name:"thread_nullstate_ctas",id:29,primary_key:["ctaId"],indexes:{threadKeyCtaId:["threadKey","ctaId"]}},{name:"focus_mode_ctas",id:30,primary_key:["threadKey","messageId","ctaId"]},{name:"messages_optimistic_context",id:31,primary_key:["taskId"]},{name:"threads_optimistic_context",id:32,primary_key:["taskId"]},{name:"messages_status",id:33,primary_key:["messageId","threadKey","timestampMs","threadKeyFromParticipants","contactId","type_"]},{name:"message_requests",id:34,primary_key:["threadKey"]},{name:"folder_metadata",id:35,primary_key:["parentThreadKey"]},{name:"polls",id:38,primary_key:["pollId"]},{name:"poll_options_v2",id:39,primary_key:["pollId","optionId"]},{name:"poll_votes_v2",id:40,primary_key:["pollId","optionId","contactId"]},{name:"pinned_messages_v2",id:155,primary_key:["threadKey","messageId"]},{name:"filtered_threads_ranges_v2__generated",id:159,primary_key:["parentThreadKey","minThreadKey","minLastActivityTimestampMs","threadRangeFilter","folderName","secondaryThreadRangeFilter","threadRangeFilterValue"]},{name:"community_folders",id:162,primary_key:["folderId"]},{name:"community_members",id:170,primary_key:["communityId","contactId","source"],indexes:{communityContactId:["communityId","contactId","source"],communitySource:["communityId","source","name","contactId"]}},{name:"community_members_ranges_v2__generated",id:189,primary_key:["communityId","isAdmin","minName","source"]},{name:"attachment_conversion",id:164,primary_key:["attachmentFbid"]},{name:"saved_messages",id:165,primary_key:["threadKey","messageId"]},{name:"rtc_rooms_on_threads",id:181,primary_key:["threadKey"]},{name:"ig_thread_info",id:194,primary_key:["threadKey"]},{name:"group_invites",id:197,primary_key:["threadKey","inviterId","inviteeId"],indexes:{threadKeyInviterIDInviteeID:["threadKey","inviterId","inviteeId"]}},{name:"inbox_threads_ranges",id:198,primary_key:["syncGroup"]},{name:"community_direct_invites_presets",id:199,primary_key:["communityId","presetType","source"]},{name:"msg_pinned_messages_v2",id:205,primary_key:["threadKey","messageId","pinnedTimestampMs"],indexes:{pinnedMessageDisplayOrder:["threadKey","pinnedTimestampMs","messageId"]}},{name:"filtered_messages_ranges_v2__generated",id:211,primary_key:["threadKey","mailboxType","minTimestampMs","minMessageId","messageRangeFilter"]},{name:"taken_down_threads",id:212,primary_key:["threadKey"]},{name:"participant_list_queries",id:219,primary_key:["threadKey"]},{name:"sync_group_threads_ranges",id:220,primary_key:["syncGroup","parentThreadKey"]},{name:"community_chat_message_seen_count",id:221,primary_key:["threadKey","messageId"]},{name:"community_chat_polls",id:223,primary_key:["pollId"]},{name:"community_chat_poll_options",id:224,primary_key:["pollId","optionId"]},{name:"community_chat_poll_votes",id:225,primary_key:["pollId","optionId","contactId"]},{name:"reactions_v2",id:226,primary_key:["threadKey","messageId","reactionFbid","messageTimestamp"],indexes:{optimistic:["threadKey","messageId","reactionFbid"]}},{name:"reactions_v2_details_users",id:227,primary_key:["reactorId","reactionFbid"]},{name:"reactions_v2_details_users_ranges_v2__generated",id:228,primary_key:["reactorId","reactionFbid","minTimestampMs"]},{name:"reaction_v2_types",id:229,primary_key:["reactionFbid"]},{name:"bots",id:230,primary_key:["threadKey","botId"]},{name:"business_comm_items",id:234,primary_key:["threadKey","entId"]},{name:"group_invitations_pending",id:235,primary_key:["linkHash"]},{name:"business_support_notification_settings",id:236,primary_key:["userId"]},{name:"thread_label_mappings",id:237,primary_key:["threadKey","labelId"]},{name:"audio_channel_events",id:238,primary_key:["eventId","roomId"]},{name:"reactions_v2_details",id:239,primary_key:["threadId","messageId","reactorId","reactionFbid"]},{name:"reactions_v2_details_ranges_v2__generated",id:243,primary_key:["threadId","messageId","reactionFbid","minTimestampMs"]},{name:"community_chat_poll_votes_ranges_v2__generated",id:244,primary_key:["pollId","optionId","minTimestampMs"]}],[{name:"media_send_jobs",id:51,primary_key:["offlineAttachmentId"]}],[{name:"typing_indicator",id:52,primary_key:["threadKey","senderId"]}],[{name:"server_search_results",id:65,primary_key:["query","resultId","globalIndex"]},{name:"server_search_sections",id:66,primary_key:["query","globalIndex"]},{name:"search_queries",id:67,primary_key:["query"]},{name:"universal_search_recent_searches",id:68,primary_key:["resultId"]},{name:"message_search_results",id:69,primary_key:["type_","query","threadKey","globalIndex"]},{name:"message_search_queries",id:70,primary_key:["type_","query","threadKeyV2"]},{name:"participant_search_queries",id:214,primary_key:["query","threadKey"]}],[{name:"contact_upload_settings",id:74,primary_key:["userid"]},{name:"gdpr_settings",id:75,primary_key:["userid"]},{name:"presence_settings",id:187,primary_key:["userId"]},{name:"persistent_menu_items",id:77,primary_key:["threadKey","ctaId"]},{name:"video_chat_links_joining",id:78,primary_key:["url","optimisticClientToken"],indexes:{optimistic:["optimisticClientToken"]}},{name:"video_chat_links_attempted_joiners",id:79,primary_key:["userId","url"]},{name:"cowatch_sessions",id:80,primary_key:["cowatchSessionId"]},{name:"self_profile",id:81,primary_key:["userId"]},{name:"pinned_threads",id:82,primary_key:["threadKey"],indexes:{pinnedTimestamp:["pinnedTimestamp","threadKey"]}},{name:"messaging_settings",id:83,primary_key:["id"]},{name:"reachability_settings",id:148,primary_key:["audience"]},{name:"feature_limits",id:150,primary_key:["type_"]},{name:"emoji_sets",id:151,primary_key:["categoryIdx","emojiIdx","type_"]},{name:"epd_cookie_settings",id:163,primary_key:[]},{name:"cm_community_list",id:166,primary_key:["communityId"]},{name:"cm_channel_list",id:167,primary_key:["communityId","threadId"]},{name:"cm_category_list",id:182,primary_key:["communityId","categoryId"]},{name:"notification_settings",id:175,primary_key:["id"]},{name:"encrypted_backups_status_trigger",id:195,primary_key:["pk"],auto_increment:!0},{name:"fb_events",id:200,primary_key:["eventId"]},{name:"cm_channel_events",id:201,primary_key:["eventId","threadId"]},{name:"community_events",id:202,primary_key:["eventId","communityId"]},{name:"avatar_settings",id:209,primary_key:["threadId"]},{name:"thread_labels",id:215,primary_key:["labelId"],indexes:{sortKey:["sortKey"]}},{name:"business_support_case_details",id:222,primary_key:["threadId"]},{name:"rtc_call_events",id:245,primary_key:["pk"],auto_increment:!0}],[{name:"payment_type_paypal",id:85,primary_key:["paymentCredentialId"]},{name:"payment_type_card",id:86,primary_key:["paymentCredentialId"]},{name:"payment_type_bank_v2",id:88,primary_key:["paymentMethodId"]},{name:"payment_method",id:89,primary_key:["paymentMethodId"]},{name:"new_payment_credential_option",id:90,primary_key:["credentialType"]},{name:"paypal_funding_options",id:91,primary_key:["optionId"]},{name:"payments_eligibility",id:92,primary_key:["userId"]},{name:"payments_ofac_blacklisted_countries",id:93,primary_key:["isoCountryCode"]},{name:"p2m_invoice",id:94,primary_key:["orderId"]},{name:"p2m_invoice_attachment",id:95,primary_key:["orderId","productItemId"]},{name:"payment_price_list_item",id:96,primary_key:["orderId","id"]},{name:"p2m_charge",id:97,primary_key:["orderId"]},{name:"payment_p2p_risk_verification",id:98,primary_key:["requestId","transactionId"]},{name:"payment_transaction_v2",id:99,primary_key:["timestampMs","transactionId"],indexes:{optimistic:["optimisticTransactionId"]}},{name:"p2p_request_v2",id:100,primary_key:["timestampMs","transactionId"],indexes:{optimistic:["optimisticTransactionId"]}},{name:"p2p_transfer_v2",id:101,primary_key:["timestampMs","transactionId"],indexes:{optimistic:["optimisticTransactionId"]}},{name:"transaction_history",id:102,primary_key:["transactionId"]},{name:"payments_transaction_details_core",id:103,primary_key:["transactionId"]},{name:"payments_transaction_details_ctas",id:104,primary_key:["transactionId","ctaId"]},{name:"payments_transaction_details_rows",id:105,primary_key:["transactionId","rowOrder"]},{name:"payment_user_auth",id:106,primary_key:["userId"]},{name:"payment_client_auth_token",id:107,primary_key:["userId","deviceId","appId"]},{name:"payment_auth_request_results",id:108,primary_key:["requestId"]},{name:"payment_server_request_results",id:109,primary_key:["requestId"]},{name:"payment_pin_verification_results",id:113,primary_key:["requestId"]}],[{name:"connectivity_status",id:114,primary_key:["statusId"],auto_increment:!0},{name:"user_visible_network_connectivity_error",id:115,primary_key:["statusId"],auto_increment:!0}],[{name:"thread_themes",id:116,primary_key:["fbid"]},{name:"gradient_colors",id:117,primary_key:["themeFbid","gradientIndex"]}],[{name:"in_thread_banner",id:118,primary_key:["threadKey","bannerId"]},{name:"in_thread_banner_ctas",id:119,primary_key:["bannerId","ctaId"]},{name:"in_thread_banner_overflow_menu",id:120,primary_key:["threadKey","bannerId"]}],[{name:"stickers",id:121,primary_key:["stickerId"],indexes:{stickerPackId:["stickerPackId","stickerId"]}},{name:"sticker_packs",id:122,primary_key:["packId"]},{name:"sticker_search_results",id:123,primary_key:["resultIndex","query"]},{name:"sticker_search_queries",id:124,primary_key:["query"]},{name:"sticker_search_featured_tags",id:125,primary_key:["tagIndex"]},{name:"sticker_to_collection",id:126,primary_key:["stickerId","collectionId"]},{name:"sticker_pack_details",id:127,primary_key:["packId"]},{name:"sticker_store_pack_indices",id:128,primary_key:["packId"]}],[{name:"forward_content",id:129,primary_key:["value","type_"]}],[{name:"linked_groups",id:130,primary_key:["id"],indexes:{threadKey:["threadKey"]}}],[{name:"ranking_scores",id:134,primary_key:["contactId","scoreType"],indexes:{scoreTypeContactId:["scoreType","contactId"]}},{name:"ranking_requests",id:135,primary_key:["scoreType"]},{name:"value_model_rules",id:136,primary_key:["product","ruleIndex"]},{name:"value_model_features",id:137,primary_key:["feature"]},{name:"value_model_output",id:138,primary_key:["product","contactId"]}],[{name:"story_buckets",id:53,primary_key:["bucketId"],indexes:{optimistic:["ownerId","bucketType"]}},{name:"stories",id:54,primary_key:["storyId"],indexes:{optimistic:["optimisticClientId"]}},{name:"story_viewers",id:55,primary_key:["storyId","viewerContactId","interactionType"]},{name:"story_reactions",id:56,primary_key:["reactionId"],indexes:{optimistic:["optimisticClientId"]}},{name:"story_ad_unit",id:57,primary_key:["adPosition","clientToken"]},{name:"story_ad_card",id:58,primary_key:["adPosition","clientToken","cardId"]},{name:"story_ad_ctas",id:59,primary_key:["ctaId"]},{name:"story_overlays",id:60,primary_key:["storyId","storyOverlayId"]},{name:"story_buckets_paginated_queries",id:61,primary_key:["queryId"]},{name:"status",id:62,primary_key:["statusId"],indexes:{optimistic:["optimisticClientId"]}},{name:"rooms",id:63,primary_key:["roomId"],indexes:{optimistic:["optimisticClientToken"]}},{name:"room_participants",id:64,primary_key:["roomId","participantId","type_"],indexes:{optimistic:["roomId","participantId"]}}],[{name:"live_location_sharers",id:149,primary_key:["threadKey","userId"]}],[{name:"mi_act_mapping_table",id:173,primary_key:["serverThreadKey","clientThreadPk","jid"],indexes:{fk_threads:["serverThreadKey"],chat_id:["clientThreadPk"],jid:["jid"]}},{name:"media_staging",id:161,primary_key:["offlineAttachmentId"]}],[{name:"data_trace_meta",id:153,primary_key:["traceId"],indexes:{shouldFlushInitTimestampMsTraceId:["shouldFlush","initTimestampMs","traceId"]}},{name:"data_trace_addon",id:154,primary_key:["addonId"],indexes:{traceIdAddonId:["traceId","addonId"]},auto_increment:!0}],[{name:"ad_context",id:160,primary_key:["adId"]}],[{name:"thread_proactive_warning_settings",id:183,primary_key:["threadKey"]},{name:"client_thread_proactive_warning_settings",id:241,primary_key:["threadPk"]}],[{name:"presence_states",id:186,primary_key:["contactId"],indexes:{statusContactId:["status","contactId"]}}],[{name:"available_reactions",id:188,primary_key:["emojiIdx"]}],[{name:"pending_backups_context_v2",id:177,primary_key:["pk"],indexes:{fk_pending_tasks:["pendingBackupTaskId"]},auto_increment:!0},{name:"secure_encrypted_backups_client_state",id:168,primary_key:["backupId"]},{name:"encrypted_backups_debug_metadata",id:206,primary_key:["backupId"]},{name:"encrypted_backups_epoch_debug_metadata",id:207,primary_key:["epochId"]},{name:"encrypted_backups_debug_metadata_v2",id:217,primary_key:["backupId"]},{name:"encrypted_backups_epoch_debug_metadata_v2",id:218,primary_key:["epochId"]},{name:"secure_encrypted_backups_epochs",id:169,primary_key:["epochId"],indexes:{fk_secure_encrypted_backups_client_state:["backupId","epochId"]}},{name:"encrypted_backups",id:172,primary_key:["pk"],auto_increment:!0},{name:"secure_encrypted_backups_generated_recovery_code",id:174,primary_key:["pk"]},{name:"secure_encrypted_backups_recovery_code_status",id:178,primary_key:["pk"]},{name:"secure_recovery_code_data",id:179,primary_key:["taskId"],indexes:{fk_pending_tasks:["taskId"]}},{name:"secure_encrypted_backups_message_thread_id_context",id:180,primary_key:["taskId","listId"],indexes:{fk_pending_tasks:["taskId"]}},{name:"encrypted_backups_virtual_devices",id:184,primary_key:["pk"],auto_increment:!0},{name:"encrypted_backups_metadata",id:196,primary_key:["backupId"]},{name:"device_metadata",id:185,primary_key:["pk"]},{name:"encrypted_backup_restore_task_payload_context",id:190,primary_key:["taskId"]},{name:"encrypted_backups_dyi_backup_restore_status",id:208,primary_key:["pk"]},{name:"encrypted_backups_message_backup_status",id:213,primary_key:["messagePk"]},{name:"encrypted_backups_client_restore_status",id:231,primary_key:["threadId"]},{name:"third_party_id_store",id:242,primary_key:["platform"]}],[{name:"secure_encrypted_backups_devices",id:191,primary_key:["deviceId"]},{name:"secure_encrypted_backups_device_supported_versions",id:192,primary_key:["deviceId","supportedVersion"],indexes:{fk_secure_encrypted_backups_device_supported_versions_device_id:["deviceId","supportedVersion"]}}],[{name:"e2ee_dummy_table_for_sync",id:171,primary_key:["placeholder"]},{name:"cutover_threads",id:193,primary_key:["openThreadId"]}],[{name:"community_messaging_aggregated_user_presence_counts_for_community",id:203,primary_key:["folderId"]},{name:"community_messaging_aggregated_copresence_counts_for_chat",id:204,primary_key:["threadId"]}]]}),null);
__d("LSSetThreadImageURL",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d;return b.seq([function(c){return b.fe(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({threadPictureUrl:a[1]===""?d:a[1],threadPictureUrlFallback:a[2],threadPictureUrlExpirationTimestampMs:a[3],isCustomThreadPicture:a[4],shouldRoundThreadPicture:a[5]})})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSDeleteThenInsertContact",["LSSetThreadImageURL"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return c.i64.eq(a[23],[0,39423])?d[0]=[0,1]:(c.i64.eq(a[23],[0,14342874])?d[1]=[0,2]:d[1]=f,d[0]=d[1]),c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq([0,1],[0,1])&&c.i64.gt(b.authorityLevel,a[21])}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(7).put({id:a[0],profilePictureUrl:a[2],profilePictureFallbackUrl:a[3],profilePictureUrlExpirationTimestampMs:a[4],profilePictureLargeUrl:a[5],profilePictureLargeFallbackUrl:a[6],profilePictureLargeUrlExpirationTimestampMs:a[7],name:a[9],secondaryName:a[41],normalizedNameForSearch:a[10],normalizedSearchTerms:a[33],isMessengerUser:a[11],isMemorialized:a[12],isManagedByViewer:a[35],blockedByViewerStatus:a[14],rank:a[17],firstName:a[18],contactType:a[19],contactTypeExact:a[20],authorityLevel:a[21],messengerCallLogThirdPartyId:a[22],profileRingColor:a[23],requiresMultiway:a[24],blockedSinceTimestampMs:a[25],fbUnblockedSinceTimestampMs:a[46],canViewerMessage:a[26],profileRingColorExpirationTimestampMs:a[27],phoneNumber:a[28],emailAddress:a[29],workCompanyId:a[30],workCompanyName:a[31],workJobTitle:a[32],deviceContactId:a[34],workForeignEntityType:a[36],capabilities:a[37],capabilities2:a[38],profileRingState:d[0],contactViewerRelationship:a[39],gender:a[40],contactReachabilityStatusType:a[43],restrictionType:a[44],waConnectStatus:a[45]}):0})},function(d){return c.sp(b("LSSetThreadImageURL"),a[0],a[2],a[3],a[4],!1,!0)}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSRemoveTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.db.table(2).fetch([[[a[0]]]]).next().then(function(c,d){var e=c.done;c=c.value;return e?0:(d=c.item,b.fe(b.db.table(2).fetch([[[d.queueName,{lte:a[0]}]],"queueNameTaskId"]),function(a){return a["delete"]()}))})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSTaskExists",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[];return b.seq([function(e){return b.seq([function(d){return b.db.table(2).fetch([[[a[0]]]]).next().then(function(a,b){b=a.done;a=a.value;return b?c[0]=!1:(a.item,c[0]=!0)})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSUpdateLastSyncCompletedTimestampMsToNow",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.db.table(1).fetch([[[a[0]]]]),function(a){var c=a.update;a.item;return c({lastSyncCompletedTimestampMs:b.i64.of_float(Date.now())})})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSIssueMessagesRangeQuery",["LSGetCursor","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.islc(c.ftr(c.db.table(13).fetchDesc([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&(c.i64.eq(b.minTimestampMs,f)||c.i64.le(b.minTimestampMs,a[1]))}),0,c.i64.to_float([0,1])).next().then(function(e,g){var h=e.done;e=e.value;return h?0:(g=e.item,d[3]=g.threadKey,d[4]=[0,0],d[1]=g.minTimestampMs,d[2]=g.minMessageId,c.i64.eq(a[2],[0,0])?d[0]=g.hasMoreBefore&&!g.isLoadingBefore:d[0]=g.hasMoreAfter&&!g.isLoadingAfter,d[0]?c.seq([function(b){return c.i64.eq(a[2],[0,0])?c.seq([function(a){return c.fe(c.ftr(c.db.table(13).fetch([[[d[3],d[1],d[2]]]]),function(a){return c.i64.eq(a.threadKey,d[3])&&c.i64.eq([0,0],d[4])&&c.i64.eq(a.minTimestampMs,d[1])&&a.minMessageId===d[2]}),function(a){var b=a.update;a.item;return b({isLoadingBefore:!0})})},function(a){return a=[d[1],d[2]],d[5]=a[0],d[6]=a[1],a}]):c.seq([function(a){return c.fe(c.ftr(c.db.table(13).fetch([[[d[3],d[1],d[2]]]]),function(a){return c.i64.eq(a.threadKey,d[3])&&c.i64.eq([0,0],d[4])&&c.i64.eq(a.minTimestampMs,d[1])&&a.minMessageId===d[2]}),function(a){var b=a.update;a.item;return b({isLoadingAfter:!0})})},function(a){return a=[g.maxTimestampMs,g.maxMessageId],d[5]=a[0],d[6]=a[1],a}])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[7]=[0,1]:(e=b.item,d[14]=e.syncGroup,c.i64.neq(d[14],f)?d[13]=d[14]:d[13]=[0,1],d[7]=d[13])})},function(a){return c.sp(b("LSGetCursor"),d[7]).then(function(a){return a=a,d[9]=a[0],a})},function(e){return d[10]=new c.Map(),d[10].set("thread_key",a[0]),d[10].set("direction",a[2]),d[10].set("reference_timestamp_ms",d[5]),d[10].set("reference_message_id",d[6]),d[10].set("sync_group",d[7]),d[10].set("cursor",d[9]),d[11]=d[10].get("thread_key"),d[10],d[12]=c.toJSON(d[10]),c.sp(b("LSIssueNewTask"),"mrq.{}".split("{}").join(c.i64.to_string(d[11])),[0,228],d[12],f,f,[0,0],[0,0],f,f,[0,0])}]):c.resolve())})},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSVerifyThreadExists",["LSGetViewerFBID","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return[[0,7],[0,8],[0,13],[0,10],[0,11],[0,16]].some(function(b){return c.i64.eq(a[1],b)})?c.resolve((b=[!1,!1,!1],d[0]=b[0],d[1]=b[1],d[2]=b[2],b)):c.seq([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?(f=[!0,!0,!1],d[3]=f[0],d[4]=f[1],d[5]=f[2],f):(e=b.item,d[10]=e.authorityLevel,e.folderName==="other"?(f=[!0,!1,!1],d[7]=f[0],d[8]=f[1],d[9]=f[2],f):(c.i64.ge(d[10],a[4])||c.i64.eq(d[10],[0,20])&&(c.i64.eq(a[1],[0,2])||[[0,23],[0,21],[0,18]].some(function(b){return c.i64.eq(a[1],b)}))?(b=[!1,!1,!1],d[11]=b[0],d[12]=b[1],d[13]=b[2],b):(e=[!0,!1,!0],d[11]=e[0],d[12]=e[1],d[13]=e[2],e),f=[d[11],d[12],d[13]],d[7]=f[0],d[8]=f[1],d[9]=f[2],f),b=[d[7],d[8],d[9]],d[3]=b[0],d[4]=b[1],d[5]=b[2],b)})},function(a){return a=[d[3],d[4],d[5]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(e){return d[0]?(d[3]=new c.Map(),d[3].set("thread_fbid",a[0]),d[3].set("force_upsert",!1),d[3].set("use_open_messenger_transport",!1),d[3].set("sync_group",a[5]),d[3].set("metadata_only",!1),d[4]=d[3].get("thread_fbid"),d[3],d[5]=c.toJSON(d[3]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[4]),[0,209],d[5],f,f,[0,0],[0,0],f,f,[0,0])):c.resolve()},function(e){return d[1]?c.seq([function(b){return d[3]=[64,1083495711],d[4]=[0,0],d[5]=[0,0],c.fe(c.ftr(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:a[0],mailboxType:[0,0],threadType:a[1],folderName:a[2],lastReadWatermarkTimestampMs:[0,0],removeWatermarkTimestampMs:[-1,4294967295],ongoingCallState:[0,0],parentThreadKey:a[3],authorityLevel:a[4],capabilities:d[3],capabilities2:d[4],capabilities3:d[5],unsendLimitMs:[-1,4294967295]})},function(e){return c.i64.eq(a[1],[0,1])?c.seq([function(b){return c.fe(c.ftr(c.db.table(14).fetch([[[a[0],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,a[0])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[0],contactId:a[0],readWatermarkTimestampMs:[0,0],deliveredWatermarkTimestampMs:[0,0],authorityLevel:a[4],isModerator:!1})},function(a){return c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[6]=a[0],a})},function(b){return c.fe(c.ftr(c.db.table(14).fetch([[[a[0],d[6]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,d[6])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[0],contactId:d[6],readWatermarkTimestampMs:[0,0],deliveredWatermarkTimestampMs:[0,0],authorityLevel:a[4],isModerator:!1})}]):c.resolve()}]):c.resolve()},function(b){return d[2]?c.fe(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({authorityLevel:a[4]})}):c.resolve()}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSVerifyThreadRowExists",["LSVerifyThreadExists"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[];return c.seq([function(d){return c.sp(b("LSVerifyThreadExists"),a[0],a[1]==null?[0,1]:a[1],"inbox",[0,0],[0,40],a[2])},function(a){return c.resolve(d)}])}e.exports=a}),null);
__d("MDSText.react",["cr:335"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:335")}),98);
__d("I64",["bs_caml","bs_caml_format","bs_caml_int64","bs_int64"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return Array.isArray(a)&&a.length===2&&Number.isInteger(a[0])&&Number.isInteger(a[1])?a:void 0}function b(a){return a}g.mk=c("bs_caml_int64").mk;g.succ=c("bs_caml_int64").succ;g.min_int=c("bs_caml_int64").min_int;g.max_int=c("bs_caml_int64").max_int;g.one=c("bs_caml_int64").one;g.zero=c("bs_caml_int64").zero;g.neg_one=c("bs_caml_int64").neg_one;g.of_int32=c("bs_caml_int64").of_int32;g.to_int32=c("bs_caml_int64").to_int32;g.add=c("bs_caml_int64").add;g.neg=c("bs_caml_int64").neg;g.sub=c("bs_caml_int64").sub;g.lsl_=c("bs_caml_int64").lsl_;g.lsr_=c("bs_caml_int64").lsr_;g.asr_=c("bs_caml_int64").asr_;g.is_zero=c("bs_caml_int64").is_zero;g.mul=c("bs_caml_int64").mul;g.xor=c("bs_caml_int64").xor;g.or_=c("bs_caml_int64").or_;g.and_=c("bs_caml_int64").and_;g.equal_null=c("bs_caml_int64").equal_null;g.equal_undefined=c("bs_caml_int64").equal_undefined;g.equal_nullable=c("bs_caml_int64").equal_nullable;g.to_float=c("bs_caml_int64").to_float;g.of_float=c("bs_caml_int64").of_float;g.div=c("bs_caml_int64").div;g.mod_=c("bs_caml_int64").mod_;g.compare=c("bs_caml_int64").compare;g.float_of_bits=c("bs_caml_int64").float_of_bits;g.bits_of_float=c("bs_caml_int64").bits_of_float;g.div_mod=c("bs_caml_int64").div_mod;g.to_hex=c("bs_caml_int64").to_hex;g.discard_sign=c("bs_caml_int64").discard_sign;g.to_string=c("bs_caml_int64").to_string;g.minus_one=c("bs_int64").minus_one;g.pred=c("bs_int64").pred;g.abs=c("bs_int64").abs;g.lognot=c("bs_int64").lognot;g.of_string_opt=c("bs_int64").of_string_opt;g.equal=c("bs_int64").equal;g.of_string=c("bs_caml_format").caml_int64_of_string;g.gt=c("bs_caml").i64_gt;g.ge=c("bs_caml").i64_ge;g.lt=c("bs_caml").i64_lt;g.le=c("bs_caml").i64_le;g.cast=a;g.asI64=b}),98);
__d("LSIntEnum",["I64"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("I64").of_float(a)}function b(a){return d("I64").to_float(a)}g.ofNumber=a;g.toNumber=b}),98);
__d("nativePromiseRegeneratorRuntime",[],(function(a,b,c,d,e,f){"use strict";var g=Object.prototype.hasOwnProperty;b=typeof Symbol==="function"?Symbol:{};var h=b.iterator||"@@iterator";c=b.asyncIterator||"@@asyncIterator";var i=e.exports;function j(a,b,c,d){b=Object.create((b||q).prototype);d=new A(d||[]);b._invoke=w(a,c,d);return b}i.wrap=j;function k(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(a){return{type:"throw",arg:a}}}var l="suspendedStart",m="suspendedYield",n="executing",o="completed",p={};function q(){}function r(){}function s(){}var t=s.prototype=q.prototype;r.prototype=t.constructor=s;s.constructor=r;r.displayName="GeneratorFunction";function a(a){["next","throw","return"].forEach(function(b){a[b]=function(a){return this._invoke(b,a)}})}v.prototype[c]=function(){return this};i.isGeneratorFunction=function(a){a=typeof a==="function"&&a.constructor;return a?a===r||(a.displayName||a.name)==="GeneratorFunction":!1};i.mark=function(a){Object.setPrototypeOf?Object.setPrototypeOf(a,s):Object.assign(a,s);a.prototype=Object.create(t);return a};i.awrap=function(a){return new u(a)};function u(a){this.arg=a}function v(a){function b(b,e){var f=a[b](e);b=f.value;return b instanceof u?window.Promise.resolve(b.arg).then(c,d):window.Promise.resolve(b).then(function(a){f.value=a;return f})}typeof process==="object"&&process.domain&&(b=process.domain.bind(b));var c=b.bind(a,"next"),d=b.bind(a,"throw");b.bind(a,"return");var e;function f(a,c){var d=e?e.then(function(){return b(a,c)}):new window.Promise(function(d){d(b(a,c))});e=d["catch"](function(a){});return d}this._invoke=f}a(v.prototype);i.async=function(a,b,c,d){var e=new v(j(a,b,c,d));return i.isGeneratorFunction(b)?e:e.next().then(function(a){return a.done?a.value:e.next()})};function w(a,b,c){var d=l;return function(e,f){if(d===n)throw new Error("Generator is already running");if(d===o){if(e==="throw")throw f;return C()}while(!0){var g=c.delegate;if(g){if(e==="return"||e==="throw"&&g.iterator[e]===void 0){c.delegate=null;var h=g.iterator["return"];if(h){h=k(h,g.iterator,f);if(h.type==="throw"){e="throw";f=h.arg;continue}}if(e==="return")continue}h=k(g.iterator[e],g.iterator,f);if(h.type==="throw"){c.delegate=null;e="throw";f=h.arg;continue}e="next";f=void 0;var i=h.arg;if(i.done)c[g.resultName]=i.value,c.next=g.nextLoc;else{d=m;return i}c.delegate=null}if(e==="next")d===m?c.sent=f:c.sent=void 0;else if(e==="throw"){if(d===l){d=o;throw f}c.dispatchException(f)&&(e="next",f=void 0)}else e==="return"&&c.abrupt("return",f);d=n;h=k(a,b,c);if(h.type==="normal"){d=c.done?o:m;var i={value:h.arg,done:c.done};if(h.arg===p)c.delegate&&e==="next"&&(f=void 0);else return i}else h.type==="throw"&&(d=o,e="throw",f=h.arg)}}}a(t);var x=!1;i.defineGeneratorMethods=function(){if(x)return;x=!0;t[h]=function(){return this};t.toString=function(){return"[object Generator]"}};i.defineGeneratorMethods();function y(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]);2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]);this.tryEntries.push(b)}function z(a){var b=a.completion||{};b.type="normal";delete b.arg;a.completion=b}function A(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(y,this),this.reset(!0)}i.keys=function(a){var b=[];for(var c in a)b.push(c);b.reverse();return function c(){while(b.length){var d=b.pop();if(d in a){c.value=d;c.done=!1;return c}}c.done=!0;return c}};function B(a){if(a){var b=a[h];if(b)return b.call(a);if(typeof a.next==="function")return a;if(!isNaN(a.length)){var c=-1;b=function b(){while(++c<a.length)if(g.call(a,c)){b.value=a[c];b.done=!1;return b}b.value=void 0;b.done=!0;return b};return b.next=b}}return{next:C}}i.values=B;function C(){return{value:void 0,done:!0}}A.prototype={constructor:A,reset:function(a){this.prev=0;this.next=0;this.sent=void 0;this.done=!1;this.delegate=null;this.tryEntries.forEach(z);if(!a)for(var a in this)a.charAt(0)==="t"&&g.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=void 0)},stop:function(){this.done=!0;var a=this.tryEntries[0];a=a.completion;if(a.type==="throw")throw a.arg;return this.rval},dispatchException:function(a){if(this.done)throw a;var b=this;function c(c,d){f.type="throw";f.arg=a;b.next=c;return!!d}for(var d=this.tryEntries.length-1;d>=0;--d){var e=this.tryEntries[d],f=e.completion;if(e.tryLoc==="root")return c("end");if(e.tryLoc<=this.prev){var h=g.call(e,"catchLoc"),i=g.call(e,"finallyLoc");if(h&&i){if(this.prev<e.catchLoc)return c(e.catchLoc,!0);else if(this.prev<e.finallyLoc)return c(e.finallyLoc)}else if(h){if(this.prev<e.catchLoc)return c(e.catchLoc,!0)}else if(i){if(this.prev<e.finallyLoc)return c(e.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(a,b){for(var c=this.tryEntries.length-1;c>=0;--c){var d=this.tryEntries[c];if(d.tryLoc<=this.prev&&g.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var e=d;break}}e&&(a==="break"||a==="continue")&&e.tryLoc<=b&&b<=e.finallyLoc&&(e=null);d=e?e.completion:{};d.type=a;d.arg=b;e?this.next=e.finallyLoc:this.complete(d);return p},complete:function(a,b){if(a.type==="throw")throw a.arg;a.type==="break"||a.type==="continue"?this.next=a.arg:a.type==="return"?(this.rval=a.arg,this.next="end"):a.type==="normal"&&b&&(this.next=b)},finish:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.finallyLoc===a){this.complete(c.completion,c.afterLoc);z(c);return p}}},"catch":function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.tryLoc===a){var d=c.completion;if(d.type==="throw"){var e=d.arg;z(c)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(a,b,c){this.delegate={iterator:B(a),resultName:b,nextLoc:c};return p}}}),null);
__d("BPlusTreeBase",["justknobx","unrecoverableViolation"],(function(aa,ba,a,ca,da,ea,b){"use strict";var c={gte:[!0,0],lt:[!0,1],gt:[!1,0],lte:[!1,1]};function* d(n){var o=(yield* n.readHeader());if(o==null||o.rootId==null||o.headId==null)return;var p=(yield* n.readExn(o.rootId)),q=[{node:p,id:o.rootId}];while(q.length>0){var r=q.shift(),s=r.id,t=r.node;if(!t.isLeaf)for(var u=t.children,v=Array.isArray(u),w=0,u=v?u:u[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var x;if(v){if(w>=u.length)break;x=u[w++]}else{w=u.next();if(w.done)break;x=w.value}var y=x,z=(yield* n.read(y));z!=null&&q.push({node:z,id:y})}yield* n.remove(s)}yield* n.removeHeader()}function* e(n,o,p,q){var r=(yield* o.readExn(p)),s=[],t=r,u=p,v=-1;while(!t.isLeaf)s.push([t,u,v]),v=f(n,t.keys,q,c.gt),v===-1&&(v=t.keys.length),u=t.children[v],t=(yield* o.readExn(u));return[t,u,s,v]}function f(n,o,p,q){var r=0,s=o.length-1;while(r<=s){var t=r+s>>1;(q[0]?n(o[t],p)<0:n(o[t],p)<=0)?r=t+1:s=t-1}var u=[r,s][q[1]];return u===o.length?-1:u}function g(n,o,p){if(!o.length)return[0,0];var q=f(n,o,p,c.gte);if(q===-1)return[o.length,0];else if(n(o[q],p)===0)return[q,1];return[q,0]}function h(n,o,p){for(var q=arguments.length,r=new Array(q>3?q-3:0),s=3;s<q;s++)r[s-3]=arguments[s];return[].concat(n.slice(0,o),r,n.slice(o+p))}function* i(n){var o=(yield* n.readHeader());if(o==null){var p=(yield* n.writeNew({isLeaf:!0,children:[],keys:[]}));o={rootId:p,tailId:p,headId:p};yield* n.writeHeader(o)}return o}function* j(n,o,p){var q=(yield* e(n,o,(yield* i(o)).rootId,p)),r=q[0],s=f(n,r.keys,p,c.gte);if(s===-1||n(r.keys[s],p)!==0)throw a("unrecoverableViolation")("key not found: "+String(p),"messenger_web_product");return r.children[s]}function* k(n,o,p,q){var r=(yield* e(n,o,(yield* i(o)).rootId,p)),s=r[0],t=f(n,s.keys,p,c.gte);return t===-1||n(s.keys[t],p)!==0?q:s.children[t]}function* l(n,o,p){var q=(yield* e(n,o,(yield* i(o)).rootId,p)),r=q[0],s=f(n,r.keys,p,c.gte);return s!==-1&&n(r.keys[s],p)===0}function* m(n,o,p,q,r){var s=(yield* i(o)),t={},u=(yield* e(n,o,s.rootId,q)),v=u[0],w=u[1],x=u[2],y=g(n,v.keys,q),z=y[0],A=y[1],B,C,D,E;for(B=babelHelpers.extends({},v,{children:h(v.children,z,A,r),keys:A===1?v.keys:h(v.keys,z,A,q)}),C=w;B.keys.length>=p;B=D,C=E){var F=x.pop()||[{keys:[],children:[C],isLeaf:!1}];D=F[0];E=F[1];var G=Math.floor(B.keys.length/2),H=void 0,I=void 0;B.isLeaf?(H={isLeaf:!0,children:B.children.slice(G),keys:B.keys.slice(G),nextId:B.nextId,prevId:C},I=B.nextId=(yield* o.writeNew(H)),H.nextId?yield* o.write(H.nextId,babelHelpers.extends({},yield* o.readExn(H.nextId),{prevId:I})):t.tailId=I):(H={isLeaf:!1,children:B.children.slice(G+1),keys:B.keys.slice(G+1)},I=(yield* o.writeNew(H)));var J=g(n,D.keys,B.keys[G]),K=J[0];D=babelHelpers.extends({},D,{keys:h(D.keys,K,0,B.keys[G]),children:h(D.children,K+1,0,I)});yield* o.write(C,babelHelpers.extends({},B,{keys:B.keys.slice(0,G),children:B.children.slice(0,G+(B.isLeaf?0:1))}))}C==null?t.rootId=(yield* o.writeNew(B)):yield* o.write(C,B);Object.keys(t).length&&(yield* o.writeHeader(babelHelpers.extends({},s,t)))}function* fa(n,o,p,q){var r=(yield* i(o)),s={},t=Math.floor(p/2),u=(yield* e(n,o,r.rootId,q)),v=u[0],w=u[1],x=u[2],y=u[3],z=f(n,v.keys,q,c.gte);if(z===-1||n(v.keys[z],q)!==0)return!1;var A=babelHelpers.extends({},v,{keys:h(v.keys,z,1),children:h(v.children,z,1)}),B=w;yield* o.write(B,A);var C=y;for(var D,E,F;A.keys.length<t&&x.length;G=[D,E,F],A=G[0],B=G[1],C=G[2],G){var G,H=x.pop();D=H[0];E=H[1];F=H[2];var I=[[{nodeId:D.children[C-1]},{nodeId:B,node:A},C-1],[{nodeId:B,node:A},{nodeId:D.children[C+1]},C]].filter(function($){var ia=$[0],ja=$[1];return ia.nodeId!==void 0&&ja.nodeId!==void 0});for(var J=I,K=Array.isArray(J),L=0,J=K?J:J[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var M;if(K){if(L>=J.length)break;M=J[L++]}else{L=J.next();if(L.done)break;M=L.value}var N=M,O=N[0],P=N[1],Q=N[2];O.node=O.node||(yield* o.readExn(O.nodeId));P.node=P.node||(yield* o.readExn(P.nodeId));if(O.node.keys.length+P.node.keys.length>=t*2){A.isLeaf?(P.node=babelHelpers.extends({},P.node,{children:[].concat(O.node.children,P.node.children),keys:[].concat(O.node.keys,P.node.keys)}),O.node=babelHelpers.extends({},O.node,{children:P.node.children.splice(0,t),keys:P.node.keys.splice(0,t)}),D=babelHelpers.extends({},D,{keys:h(D.keys,Q,1,P.node.keys[0])})):(P.node=babelHelpers.extends({},P.node,{children:[].concat(O.node.children,P.node.children),keys:[].concat(O.node.keys,[D.keys[Q]],P.node.keys)}),O.node=babelHelpers.extends({},O.node,{children:P.node.children.splice(0,t+1)}),D=babelHelpers.extends({},D,{keys:h(D.keys,Q,1,P.node.keys.splice(t,1)[0])}),O.node.keys=P.node.keys.splice(0,t));yield* o.write(O.nodeId,O.node);yield* o.write(P.nodeId,P.node);yield* o.write(E,D);Object.keys(s).length&&(yield* o.writeHeader(babelHelpers.extends({},r,s)));return!0}}for(var R=I,S=Array.isArray(R),T=0,R=S?R:R[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var U;if(S){if(T>=R.length)break;U=R[T++]}else{T=R.next();if(T.done)break;U=T.value}var V=U,W=V[0],X=V[1],Y=V[2];W.node=babelHelpers.extends({},W.node,{children:[].concat(W.node.children,X.node.children)});A.isLeaf?(W.node.keys=[].concat(W.node.keys,X.node.keys),X.node.nextId?yield* o.write(X.node.nextId,babelHelpers.extends({},yield* o.readExn(X.node.nextId),{prevId:W.nodeId})):s.tailId=W.nodeId,W.node.nextId=X.node.nextId):W.node.keys=[].concat(W.node.keys,[D.keys[Y]],X.node.keys);D=babelHelpers.extends({},D,{keys:h(D.keys,Y,1),children:h(D.children,Y+1,1)});a("justknobx")._("672")&&(yield* o.write(E,D));yield* o.write(W.nodeId,W.node);yield* o.remove(X.nodeId);break}}yield* o.write(B,A);var Z=(yield* o.readExn(r.rootId));if(!Z.keys.length&&Z.children.length){if(Z.isLeaf)throw a("unrecoverableViolation")("cannot be leaf","messenger_web_product");yield* o.remove(r.rootId);s.rootId=Z.children[0]}Object.keys(s).length&&(yield* o.writeHeader(babelHelpers.extends({},r,s)));return!0}function ga(n,o,p){var q=p===void 0?{}:p,r=q.dir,s=r===void 0?"asc":r,t=babelHelpers.objectWithoutPropertiesLoose(q,["dir"]);function u(){if(s==="asc"){if(Object.prototype.hasOwnProperty.call(t,"gt"))return t.gt;else if(Object.prototype.hasOwnProperty.call(t,"gte"))return t.gte}else if(Object.prototype.hasOwnProperty.call(t,"lt"))return t.lt;else if(Object.prototype.hasOwnProperty.call(t,"lte"))return t.lte}function v(x){if(s==="asc")return Object.prototype.hasOwnProperty.call(t,"gt")?f(n,x.keys,t.gt,c.gt):Object.prototype.hasOwnProperty.call(t,"gte")?f(n,x.keys,t.gte,c.gte):0;else return Object.prototype.hasOwnProperty.call(t,"lt")?f(n,x.keys,t.lt,c.lt):Object.prototype.hasOwnProperty.call(t,"lte")?f(n,x.keys,t.lte,c.lte):x.keys.length-1}if(Object.prototype.hasOwnProperty.call(t,"gt")&&Object.prototype.hasOwnProperty.call(t,"gte"))throw a("unrecoverableViolation")("cannot specify both greater than and greater than or equal","messenger_web_product");if(Object.prototype.hasOwnProperty.call(t,"lt")&&Object.prototype.hasOwnProperty.call(t,"lte"))throw a("unrecoverableViolation")("cannot specify both less than and less than or equal","messenger_web_product");var w;return{next:function*(x){var y,z,A,B;if(w==null){var C=(yield* i(o)),D=u();if(D!=null){var E=(yield* e(n,o,C.rootId,D));z=E[0];A=E[1]}else if(s==="asc"){var F=[yield* o.readExn(C.headId),C.headId];z=F[0];A=F[1]}else{var G=[yield* o.readExn(C.tailId),C.tailId];z=G[0];A=G[1]}y=v(z)}else{var H=w;y=H.i;B=H.key;A=H.nodeId;z=(yield* o.read(A));if(x!=null){if(n(x,B)===(s==="asc"?-1:1))throw a("unrecoverableViolation")("key must be ahead of current key","messenger_web_product");if(z==null||n(x,z.keys[0])<0||n(x,z.keys[z.keys.length-1])>0){var I=(yield* e(n,o,(yield* i(o)).rootId,x));z=I[0];A=I[1]}y=f(n,z.keys,x,c[s==="asc"?"gte":"lte"])}else{if(z==null||y<0||y>=z.keys.length||n(z.keys[y],B)!==0){if(z==null||!z.keys.length||n(B,z.keys[0])<0||n(B,z.keys[z.keys.length-1])>0){var J=(yield* e(n,o,(yield* i(o)).rootId,B));z=J[0];A=J[1]}y=f(n,z.keys,B,c[s==="asc"?"lte":"gte"])}y+=s==="asc"?1:-1}}if(y<0||y>=z.keys.length)if(s==="asc"){if(z.nextId===void 0)return{done:!0};A=z.nextId;z=(yield* o.readExn(A));y=0}else{if(z.prevId===void 0)return{done:!0};A=z.prevId;z=(yield* o.readExn(A));y=z.keys.length-1}B=z.keys[y];w={node:z,nodeId:A,key:B,i:y};if(y<0||y>=z.keys.length)return{done:!0};var K=s==="asc"?Object.prototype.hasOwnProperty.call(t,"lt")&&n(B,t.lt)>=0||Object.prototype.hasOwnProperty.call(t,"lte")&&n(B,t.lte)>0:Object.prototype.hasOwnProperty.call(t,"gt")&&n(B,t.gt)<=0||Object.prototype.hasOwnProperty.call(t,"gte")&&n(B,t.gte)<0;return K?{done:!0}:{done:!1,value:[z.keys[y],z.children[y]]}}}}function ha(n,o,p){o===void 0&&(o=32);return{get:function(q){return j(n,p,q)},getWithDefault:function(q,r){return k(n,p,q,r)},has:function(q){return l(n,p,q)},set:function(q,r){return m(n,p,o,q,r)},delete:function(q){return fa(n,p,o,q)},entries:function(q){return ga(n,p,q)},clear:function(){return d(p)}}}b.default=ha}),98);
__d("BPlusTree",["BPlusTreeBase","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(){var k={},l=void 0,m=0;return{read:function*(n){return k[n]},readExn:function*(n){if(Object.prototype.hasOwnProperty.call(k,n))return k[n];else throw c("unrecoverableViolation")("expected key","messenger_web_product")},readHeader:function*(){return l},remove:function*(n){delete k[n]},removeHeader:function*(){l=void 0},write:function*(n,o){k[n]=o},writeHeader:function*(n){l=n},writeNew:function*(n){k[m++]=n;return m-1}}}function i(k){var l=k.next();while(!l.done)l=k.next(l.value);return l.value}function j(k,l){l===void 0&&(l=16);var m=c("BPlusTreeBase")(k,l,h()),n;return n={clear:function(){return i(m.clear())},delete:function(o){return i(m.delete(o))},entries:function(o){function p(){var q,r=m.entries(o);return q={next:function(s){return i(r.next(s))}},q[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=p,q}return p()},get:function(o){return i(m.get(o))},getWithDefault:function(o,p){return i(m.getWithDefault(o,p))},has:function(o){return i(m.has(o))},set:function(o,p){i(m.set(o,p));return n}}}g.default=j}),98);
__d("LSDbKeyComparer",["unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=[[]];function i(a,b){var d=a===h,e=b===h;if(d&&e)return 0;if(d)return 1;if(e)return-1;if(a===void 0)return b===void 0?0:-1;else if(b===void 0)return 1;else if(Array.isArray(a)){if(!Array.isArray(b))throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");d=a[0];e=b[0];if(d<e)return-1;if(d>e)return 1;d=a[1];e=b[1];if(d<e)return-1;if(d>e)return 1}else if(typeof a==="string"){if(typeof b!=="string")throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");if(a<b)return-1;if(a>b)return 1}else if(typeof a==="number"){if(typeof b!=="number")throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");if(a<b)return-1;if(a>b)return 1}else if(a instanceof Date){if(!(b instanceof Date))throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");if(a<b)return-1;if(a>b)return 1}else if(typeof a==="boolean"){if(typeof b!=="boolean")throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");if(!a&&b)return-1;if(a&&!b)return 1}else throw c("unrecoverableViolation")("Unexpected type","messenger_comet");return 0}function a(a,b){for(var a=a,b=b;;a=a.tl,b=b.tl){if(a===0&&b===0)return 0;if(a===0)return-1;if(b===0)return 1;var c=i(a.hd,b.hd);if(c!==0)return c}return 0}g.MAX_KEY=h;g.compareValue=i;g.compareKey=a}),98);
__d("PromiseOrValue",["isPromise","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(c("isPromise")(a)&&c("isPromise")(b))return a.then(function(a){return b.then(function(b){return[a,b]})});if(c("isPromise")(a))return a.then(function(a){return[a,b]});return c("isPromise")(b)?b.then(function(b){return[a,b]}):[a,b]}function b(a,b){return c("isPromise")(a)?a.then(b):b(a)}function h(a,b){b=b;while(!0){var d=a(b);if(c("isPromise")(d))return d.then(function(b){return b.action==="break"?b.value:h(a,b.value)});if(d.action==="break")return d.value;b=d.value}throw c("unrecoverableViolation")("just for flow","messenger_web_product")}g.all2=a;g.map=b;g.loop=h}),98);
__d("ReQLBounds",["LSDbKeyComparer"],(function(a,b,c,d,e,f,g){"use strict";function h(n,o){return n?{hd:n.hd,tl:h(n.tl,o)}:o}function i(n){return h(n,{hd:d("LSDbKeyComparer").MAX_KEY,tl:0})}function j(n,o,p){if(n!=null&&o!=null)return d("LSDbKeyComparer").compareKey(n[1],o[1])*p>0?n[0]:o[0];if(n!=null)return n[0];if(o!=null)return o[0]}function k(n,o){return j((n==null?void 0:n.gt)!=null?[{gt:n.gt},i(n.gt)]:(n==null?void 0:n.gte)!=null?[{gte:n.gte},n.gte]:void 0,(o==null?void 0:o.gt)!=null?[{gt:o.gt},i(o.gt)]:(o==null?void 0:o.gte)!=null?[{gte:o.gte},o.gte]:void 0,1)}function l(n,o){return j((n==null?void 0:n.lt)!=null?[{lt:n.lt},n.lt]:(n==null?void 0:n.lte)!=null?[{lte:n.lte},i(n.lte)]:void 0,(o==null?void 0:o.lt)!=null?[{lt:o.lt},o.lt]:(o==null?void 0:o.lte)!=null?[{lte:o.lte},i(o.lte)]:void 0,-1)}function m(n,o,p){n.forEach(function(q){var r=q[0],s=q[1],t=(r==null?void 0:r.gt)!=null?d("LSDbKeyComparer").compareKey(o,i(r.gt))>=0:(r==null?void 0:r.gte)!=null?d("LSDbKeyComparer").compareKey(o,r.gte)>0:!0,u=(r==null?void 0:r.lt)!=null?d("LSDbKeyComparer").compareKey(o,r.lt)<0:(r==null?void 0:r.lte)!=null?d("LSDbKeyComparer").compareKey(o,i(r.lte))<=0:!0;if(t&&u)return p(s)})}g.getLowerLimit=k;g.getUpperLimit=l;g.forEachMatchingBounds=m}),98);
__d("ReQLGlobalQueryContext",[],(function(a,b,c,d,e,f){"use strict";var g={};function a(a){a=a.get(g);return a==null?[]:a}function b(a,b){a.set(g,b)}c={contents:void 0};f.getDependencies=a;f.setDependencies=b;f.globalQueryContext=c}),66);
__d("ReQL",["BPlusTree","LSDbKeyComparer","PromiseOrValue","ReQLBounds","ReQLGlobalQueryContext","unrecoverableViolation"],(function(a,b,c,d,e,aa,f){"use strict";var g={bounds:l,filter:o,getKeyRange:p,map:r,take:v};function h(B,C){return B?{hd:B.hd,tl:h(B.tl,C)}:C}function i(B,C){var D=C,E=B;while(D){if(!E)throw c("unrecoverableViolation")("unexpected end of key","messenger_web_product");D=D.tl;E=E.tl}return E}function j(B,C){try{var D=d("ReQLGlobalQueryContext").globalQueryContext.contents,E=d("ReQLGlobalQueryContext").getDependencies(C);d("ReQLGlobalQueryContext").setDependencies(C,[]);d("ReQLGlobalQueryContext").globalQueryContext.contents=C;var F,G;try{F=B(),G=d("ReQLGlobalQueryContext").getDependencies(C)}finally{d("ReQLGlobalQueryContext").setDependencies(C,E),d("ReQLGlobalQueryContext").globalQueryContext.contents=D}return[F,G]}catch(H){if(H instanceof Promise)return H.then(function(){return j(B,C)});throw H}}function k(){for(var B=arguments.length,C=new Array(B),D=0;D<B;D++)C[D]=arguments[D];return C.reduceRight(function(E,F){return{hd:F,tl:E}},0)}function l(l){var B=this;function C(l,D){if(D==null)return l;var E=d("ReQLBounds").getLowerLimit(D,l),F=d("ReQLBounds").getUpperLimit(D,l);if(E!=null&&F!=null)return babelHelpers.extends({},E,F);if(E!=null)return E;if(F!=null)return F}return Object.setPrototypeOf({direction:B.direction,iterator:function(D,E){return B.iterator(D,C(l,E))},keyLength:B.keyLength,subscribe:function(D,E){return B.subscribe(D,C(l,E))}},g)}var m=Object.setPrototypeOf({direction:"asc",iterator:function(){return{next:function(){return{done:!0}}}},keyLength:0,subscribe:function(){return function(){}}},g);function n(){return m}function o(B){var C=this,D=new Map();return Object.setPrototypeOf({direction:C.direction,iterator:function(E,l){var F=C.iterator(E,l);return{next:function(G){return d("PromiseOrValue").loop(function(H){return d("PromiseOrValue").map(F.next(H),function(I){if(I.done)return{action:"break",value:I};var J=I.value,k=J[0],K=J[1];if(B(K)){d("ReQLBounds").forEachMatchingBounds(D,k,function(L){L.add(JSON.stringify(k))});return{action:"break",value:I}}d("ReQLBounds").forEachMatchingBounds(D,k,function(L){L.delete(JSON.stringify(k))});return{action:"continue",value:void 0}})},G)}}},keyLength:C.keyLength,subscribe:function(E,l){var F={},G=new Set();D.set(F,[l,G]);var H=C.subscribe(async function(k,I,J){var K=JSON.stringify(k);I.operation==="add"&&B(I.value)?(G.add(K),await E(k,I,J)):I.operation==="put"&&B(I.value)?G.has(K)?await E(k,I,J):(G.add(K),await E(k,{operation:"add",value:I.value},J)):I.operation==="put"&&G.has(K)?(G.delete(K),await E(k,{operation:"delete"},J)):I.operation==="delete"&&G.has(K)&&(G.delete(K),await E(k,I,J))},l);return function(){D.delete(F);return H()}}},g)}function p(){var B=this;for(var C=arguments.length,D=new Array(C),E=0;E<C;E++)D[E]=arguments[E];var k=D.reduceRight(function(I,J){return{hd:J,tl:I}},0);function F(I){return I.gt!=null?{gt:h(k,I.gt)}:{gte:h(k,I.gte)}}function G(I){return I.lt!=null?{lt:h(k,I.lt)}:{lte:h(k,I.lte)}}function H(I){return I==null?{gte:k,lte:k}:babelHelpers.extends({},I.gte!=null||I.gt!=null?F(I):{gte:k},I.lte!=null||I.lt!=null?G(I):{lte:k})}return Object.setPrototypeOf({direction:B.direction,iterator:function(I,J){var K=B.iterator(I,H(J));return{next:function(L){return d("PromiseOrValue").map(K.next(L==null?L:h(k,L)),function(M){return M.done?{done:!0}:{done:!1,value:[i(M.value[0],k),M.value[1]]}})}}},keyLength:B.keyLength-D.length,subscribe:function(I,J){return B.subscribe(function(K,L,M){return I(i(K,k),L,M)},H(J))}},g)}function q(B,C){if(B.direction!==C.direction)throw c("unrecoverableViolation")("merge join requires iterables to be sorted in the same direction","messenger_web_product");return Object.setPrototypeOf({direction:B.direction,iterator:function(D,l){var E=B.iterator(D,l),F=C.iterator(D,l),G=F.next();function H(I){return d("PromiseOrValue").map(G,function(J){var K=J.done?!0:d("LSDbKeyComparer").compareKey(I,J.value[0])<=0,L=K?J:F.next(I);G=L;return L})}return{next:function(k){return d("PromiseOrValue").map(E.next(k),function(I){if(I.done)return{done:!0,value:void 0};var J=I.value,K=J[0];return d("PromiseOrValue").map(H(K),function(L){var M=I.value,K=M[0],N=M[1];if(L.done)return{done:!1,value:[K,[N,void 0]]};var O=L.value,P=O[0],Q=O[1],R=d("LSDbKeyComparer").compareKey(K,P);if(R>0)throw c("unrecoverableViolation")("Right iterable should always be equal to or ahead","messenger_web_product");else if(R<0)return{done:!1,value:[K,[N,void 0]]};else return{done:!1,value:[K,[N,Q]]}})})}}},keyLength:Math.max(B.keyLength,C.keyLength),subscribe:function(D,l){var E=!0,F=B.subscribe(async function(H,I,J){var K,L,M=await C.iterator(J,{gte:H,lte:H}).next();if(!E)return;await D(H,I.operation==="add"?{operation:"add",value:[I.value,(K=M.value)==null?void 0:K[1]]}:I.operation==="put"?{operation:"put",value:[I.value,(L=M.value)==null?void 0:L[1]]}:{operation:"delete"},J)},l),G=C.subscribe(async function(H,I,J){var K=await B.iterator(J,{gte:H,lte:H}).next();if(!E||K.done)return;await D(H,I.operation==="add"?{operation:"add",value:[K.value[1],I.value]}:I.operation==="put"?{operation:"put",value:[K.value[1],I.value]}:{operation:"delete"},J)},l);return function(){E=!1,F(),G()}}},g)}function r(B){var C=this,D=new Map();function E(H,I,k,J,K){var L=JSON.stringify(k),M=H.get(L);M==null&&(M=[],H.set(L,M));M.forEach(function(O){return O()});M.length=0;var N=M;K.forEach(function(C){N.push(C.subscribe(async function(O,P,Q){await F(H,I,k,J,Q),await I(k,{operation:"put",value:B(J)},Q)}))})}function F(H,I,k,J,K){return d("PromiseOrValue").map(j(function(){return B(J)},K),function(L){var M=L[0],N=L[1];E(H,I,k,J,N);return M})}function G(H,k){var I,J=JSON.stringify(k);if(!H.has(J))return;var K=(I=H.get(JSON.stringify(k)))!=null?I:[];K.forEach(function(L){return L()});K.length=0;H.delete(J)}return Object.setPrototypeOf({direction:C.direction,iterator:function(H,l){var I=C.iterator(H,l);return{next:function(k){return d("PromiseOrValue").map(I.next(k),function(J){if(J.done)return J;var K=J.value,k=K[0],L=K[1];return d("PromiseOrValue").map(d("PromiseOrValue").map(j(function(){return B(L)},H),function(M){var N=M[0],O=M[1];d("ReQLBounds").forEachMatchingBounds(D,k,function(P){var Q=P[0],R=P[1];return E(Q,R,k,L,O)});return N}),function(L){return{done:!1,value:[k,L]}})})}}},keyLength:C.keyLength,subscribe:function(H,l){var k={},I=new Map();D.set(k,[l,[I,H]]);var J=C.subscribe(async function(k,K,L){if(K.operation==="delete")G(I,k),await H(k,K,L);else if(K.operation==="add"){var M=K.value,N=await F(I,H,k,M,L);B(M);await H(k,{operation:"add",value:N},L)}else if(K.operation==="put"){var O=K.value,P=await F(I,H,k,O,L);B(O);await H(k,{operation:"put",value:P},L)}},l);return function(){I.forEach(function(D){D.forEach(function(K){return K()})}),D.delete(k),J()}}},g)}function s(B,C){var D=t(B,C);for(var E=arguments.length,F=new Array(E>2?E-2:0),G=2;G<E;G++)F[G-2]=arguments[G];return F.reduce(function(H,I){return t(H,I)},D)}function t(B,C){if(B.direction!==C.direction)throw c("unrecoverableViolation")("union requires iterables to be sorted in the same direction","messenger_web_product");var D=Math.max(B.keyLength,C.keyLength);function E(k,I){return I===0||k===0?0:{hd:k.hd,tl:E(k.tl,I-1)}}function F(I){return I.gt!=null?{gt:E(I.gt,D)}:{gte:E(I.gte,D)}}function G(I){return I.lt!=null?{lt:E(I.lt,D)}:{lte:E(I.lte,D)}}function H(I){return I==null?void 0:babelHelpers.extends({},I.gte!=null||I.gt!=null?F(I):{},I.lte!=null||I.lt!=null?G(I):{})}return Object.setPrototypeOf({direction:B.direction,iterator:function(I,l){var J=B.iterator(I,H(l)),K=C.iterator(I,H(l)),L=J.next(),M=K.next();return{next:function(N){N!==void 0&&(L=J.next(E(N,D)),M=K.next(E(N,D)));return d("PromiseOrValue").map(d("PromiseOrValue").all2(L,M),function(O){var P,Q,R=O[0],S=O[1];function T(Y,Z){if(Y.done)return{done:!0};var $={done:!1,value:[h(Y.value[0],{hd:Z,tl:0}),Y.value[1]]};Z?L=J.next():M=K.next();return $}if(R.done)return T(S,!1);if(S.done)return T(R,!0);var U=B.direction==="asc"?[R,S]:[S,R],V=U[0],W=U[1],X=d("LSDbKeyComparer").compareKey((P=V.value)==null?void 0:P[0],(Q=W.value)==null?void 0:Q[0]);if(X<0)return T(R,!0);else return T(S,!1)})}}},keyLength:D+1,subscribe:function(I,l){var J=B.subscribe(function(L,M,N){return I(h(L,{hd:!0,tl:0}),M,N)},l),K=C.subscribe(function(L,M,N){return I(h(L,{hd:!1,tl:0}),M,N)},l);return function(){J(),K()}}},g)}function u(B,C){if(B.direction!==C.direction)throw c("unrecoverableViolation")("merge join requires iterables to be sorted in the same direction","messenger_web_product");return Object.setPrototypeOf({direction:B.direction,iterator:function(D,l){var E=B.iterator(D,l),F=C.iterator(D,l);function G(H){return d("PromiseOrValue").loop(function(I){var J=I[0],K=I[1];if(J.done||K.done)return{action:"break",value:{done:!0}};var L=J.value,M=L[0],N=L[1],O=K.value,P=O[0],Q=O[1],R=d("LSDbKeyComparer").compareKey(M,P);if(R>0)return d("PromiseOrValue").map(d("PromiseOrValue").all2(J,F.next(M)),function(S){return{action:"continue",value:S}});else if(R<0)return d("PromiseOrValue").map(d("PromiseOrValue").all2(E.next(P),K),function(S){return{action:"continue",value:S}});return{action:"break",value:{done:!1,value:[M,[N,Q]]}}},H)}return{next:function(k){return d("PromiseOrValue").map(d("PromiseOrValue").all2(E.next(k),F.next(k)),G)}}},keyLength:Math.max(B.keyLength,C.keyLength),subscribe:function(D,l){var E=!0;async function F(I,J,k,K,L){var M=await I.iterator(L,{gte:k,lte:k}).next();if(M.done||!E)return;var N=M.value[1],O=K.operation==="add"?{operation:"add",value:J(K.value,N)}:K.operation==="put"?{operation:"put",value:J(K.value,N)}:K;await D(k,O,L)}var G=B.subscribe(function(){for(var I=arguments.length,J=new Array(I),K=0;K<I;K++)J[K]=arguments[K];return F.apply(void 0,[C,function(L,M){return[L,M]}].concat(J))},l),H=C.subscribe(function(){for(var I=arguments.length,J=new Array(I),K=0;K<I;K++)J[K]=arguments[K];return F.apply(void 0,[B,function(L,M){return[M,L]}].concat(J))},l);return function(){E=!1,G(),H()}}},g)}function v(B){var C=this,D=new Map();return Object.setPrototypeOf({direction:C.direction,iterator:function(E,l){var F=C.iterator(E,l),G=0;return{next:function(k){if(G>=B)return{done:!0};else return d("PromiseOrValue").map(F.next(k),function(H){H.done||d("ReQLBounds").forEachMatchingBounds(D,H.value[0],function(I){var J=I[0],K=I[1];K.contents<=B&&(J.has(H.value[0])||(K.contents+=1,J.set(H.value[0],void 0)))});G+=1;return H})}}},keyLength:C.keyLength,subscribe:function(E,l){var F={},G=C.direction==="asc"?1:-1,H=c("BPlusTree")(function(K,L){return d("LSDbKeyComparer").compareKey(K,L)*-G}),I={contents:0};D.set(F,[l,[H,I]]);var J=C.subscribe(async function(k,K,L){var M,N=(M=H.entries().next().value)==null?void 0:M[0],O=N==null?!0:d("LSDbKeyComparer").compareKey(k,N)*G<=0;if(K.operation==="delete"&&O){I.contents>0&&(H.delete(k),await E(k,K,L));var P=await C.iterator(L,N==null?void 0:G===1?{gt:N}:{lt:N}).next();!P.done&&D.has(F)?(H.set(P.value[0],void 0),await E(P.value[0],{operation:"add",value:P.value[1]},L)):I.contents>0&&(I.contents-=1)}else K.operation==="add"&&I.contents<B?(I.contents+=1,H.set(k,void 0),await E(k,K,L)):K.operation==="add"&&O?(N!=null&&(H.delete(N),await E(N,{operation:"delete"},L)),H.set(k,void 0),await E(k,K,L)):K.operation==="put"&&O&&await E(k,K,L)},l);return function(){D.delete(F);return J()}}},g)}function w(B){return Object.setPrototypeOf({direction:"asc",iterator:function(C,l){return B.entries(C,"asc",l)},keyLength:B.keyLength,subscribe:B.subscribe},g)}function x(B){return Object.setPrototypeOf({direction:"desc",iterator:function(C,l){return B.entries(C,"desc",l)},keyLength:B.keyLength,subscribe:B.subscribe},g)}async function y(B){var C=[],D=B.iterator(new WeakMap()),E=await D.next();while(!E.done)C.push(E.value[1]),E=await D.next();return C}async function z(B){var C=B.iterator(new WeakMap()),D=await C.next();return D.done?void 0:D.value[1]}async function A(B){var C=B.iterator(new WeakMap()),D=await C.next();if(D.done)throw c("unrecoverableViolation")("expected result","messenger_web_product");return D.value[1]}f.prototype=g;f.key=k;f.empty=n;f.leftJoin=q;f.union=s;f.mergeJoin=u;f.fromTableAscending=w;f.fromTableDescending=x;f.toArrayAsync=y;f.firstAsync=z;f.firstExnAsync=A}),98);
__d("ReStoreDefaultValuesMetadata",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b={c:"string",t:"string"};for(var d in b){if(!Object.prototype.hasOwnProperty.call(a,d)||a[d]==null){c("FBLogger")("messenger_web_product").warn('Malformed default values data, missing key "%s"',d);return null}var e=a[d],f=b[d];e=typeof e;if(e!==f){c("FBLogger")("messenger_web_product").warn('Malformed default values data, key "%s" has type "%s" but expected "%s"',d,e,f);return null}}if(typeof a.c!=="string"||typeof a.t!=="string")return null;e=[];f=a.t;try{e=JSON.parse(a.c);for(var d=e,b=Array.isArray(d),a=0,d=b?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(b){if(a>=d.length)break;g=d[a++]}else{a=d.next();if(a.done)break;g=a.value}g=g;if(typeof g!=="string")return null}}catch(a){return null}return{columns:e,tableName:f}}function b(a){return{c:JSON.stringify(a.columns),t:a.tableName}}d="_db_defaults_meta";g.tryParseDefaultValuesData=a;g.defaultValuesColumnToValue=b;g.defaultValuesTableName=d}),98);
__d("ReStoreIndexMetadata",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=typeof a==="string"?a:null;if(a==null)return null;try{a=JSON.parse(a);for(var b=a,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;if(typeof e!=="string")return null}return a}catch(a){return null}}function a(a){var b={indexName:"string",keyIds:"string",tableName:"string"};for(var d in b){if(!Object.prototype.hasOwnProperty.call(a,d)||a[d]==null){c("FBLogger")("messenger_web_product").warn('Malformed index data, missing key "%s"',d);return null}var e=a[d],f=b[d];e=typeof e;if(e!==f){c("FBLogger")("messenger_web_product").warn('Malformed index data, key "%s" has type "%s" but expected "%s"',d,e,f);return null}}e=h(a.keyIds);if(e==null){c("FBLogger")("messenger_web_product").warn('Malformed index data, key IDs "%s" are invalid',typeof a.keyIds==="string"?a.keyIds:"<"+typeof a.keyIds+">");return null}return typeof a.indexName!=="string"||typeof a.tableName!=="string"?null:{data:e,indexName:a.indexName,tableName:a.tableName}}function b(a,b){if(a==null)return!0;if(a.length!==b.length)return!0;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!0;return!1}function d(a){return{indexName:a.indexName,keyIds:JSON.stringify(a.data),tableName:a.tableName}}e="_db_indices_meta";g.tryParseIndexData=a;g.indicesDiffer=b;g.indexDataToValue=d;g.indicesTableName=e}),98);
__d("ReStoreVaulting",["cr:2075","cr:2151","cr:2203"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return b("cr:2075")!=null?b("cr:2075").vault(a):a}function c(a){return b("cr:2075")!=null?b("cr:2075").unvault(a):a}function d(a,c){return b("cr:2151")!=null&&b("cr:2203")!=null?b("cr:2151").unvaultDbRow(a,c,b("cr:2203").PERSISTED_DB_VAULT_DEFINITIONS):a}function e(a,c){return b("cr:2151")!=null&&b("cr:2203")!=null?b("cr:2151").vaultDbRow(a,c,b("cr:2203").PERSISTED_DB_VAULT_DEFINITIONS):a}g.maybeVault=a;g.maybeUnvault=c;g.maybeUnvaultDbRow=d;g.maybeVaultDbRow=e}),98);
__d("LSBitFlag.bs",["bs_caml","bs_caml_int64","bs_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("bs_caml").i64_eq(b("bs_caml_int64").and_(c,a),a)}function c(a,c){return b("bs_caml_int64").or_(c,a)}function d(a,c){return b("bs_caml_int64").and_(c,b("bs_int64").lognot(a))}e=b("bs_caml_int64").zero;f.empty=e;f.has=a;f.set=c;f.clear=d}),null);
__d("LSBitOffset.bs",["LSBitFlag.bs","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c){a=b("bs_caml_int64").lsl_(b("bs_caml_int64").one,b("bs_caml_int64").to_int32(a));return b("LSBitFlag.bs").set(a,c)}function c(a,c){a=b("bs_caml_int64").lsl_(b("bs_caml_int64").one,b("bs_caml_int64").to_int32(a));return b("LSBitFlag.bs").clear(a,c)}d=b("bs_caml_int64").zero;f.empty=d;f.set=a;f.clear=c}),null);
__d("LSContactBitOffset.bs",["LSBitFlag.bs","LSBitOffset.bs","bs_belt_Option","bs_caml","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c){if(b("bs_caml").i64_ge(a,[0,64])){var d=c.capabilities2;if(d===void 0)return;d=b("bs_caml_int64").sub(a,[0,64]);d=b("bs_caml_int64").lsl_(b("bs_caml_int64").one,b("bs_caml_int64").to_int32(d));return b("LSBitFlag.bs").has(d,b("bs_belt_Option").getWithDefault(c.capabilities2,b("LSBitOffset.bs").empty))}d=c.capabilities;if(d===void 0)return;d=b("bs_caml_int64").lsl_(b("bs_caml_int64").one,b("bs_caml_int64").to_int32(a));return b("LSBitFlag.bs").has(d,b("bs_belt_Option").getWithDefault(c.capabilities,b("LSBitOffset.bs").empty))}f.has=a}),null);
__d("LSContactCapabilityBitOffset.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,15],r=[0,16],s=[0,17],t=[0,18],u=[0,19],v=[0,20],w=[0,21],x=[0,22],y=[0,23],z=[0,24],A=[0,25],B=[0,26],C=[0,27],D=[0,28],E=[0,29],F=[0,64],G=[0,65],H=[0,66],I=[0,67],J=[0,68],K=[0,69],L=[0,70],M=[0,71],N=[0,72],O=[0,73],P=[0,74],Q=[0,75],R=[0,76],S=[0,77],T=[0,78];f.message=a;f.replyMessage=c;f.joinGroup=d;f.block=e;f.see=b;f.seeFacebookProfile=g;f.payment=h;f.camera=i;f.mediaPicker=j;f.sticker=k;f.gif=l;f.audioClips=m;f.sharedMedia=n;f.reactions=o;f.seenHeads=p;f.threadDetails=q;f.rtcVideoCall=r;f.rtcVoiceCall=s;f.threadFeedbackAndReport=t;f.goToSecretConversation=u;f.makeAdmin=v;f.removeFromGroup=w;f.removeAsAdmin=x;f.verified=y;f.disappearingMode=z;f.seeMessage=A;f.pseudoBlock=B;f.pushable=C;f.messageBlockPlaced=D;f.facebookBlockPlaced=E;f.viewerIsUnconnected=F;f.pagePlatformBot=G;f.restrictPlaced=H;f.isXacEligible=I;f.isGroupsXacEligible=J;f.isGroupsXacCallingEligible=K;f.isE2eeOnly=L;f.isEligibleForSafetyNotice=M;f.novi=N;f.isContactShareable=O;f.isHidden=P;f.isThreadCutoverUser=Q;f.hasCutoverThread=R;f.isCommunityBotPage=S;f.isNotSearchable=T}),null);
__d("bs_js_dict",["bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function a(a,c){if(c in a)return b("bs_caml_option").some(a[c])}var g=function(a,b){delete a[b]};function c(a){var b=Object.keys(a),c=b.length,d=new Array(c);for(var e=0;e<c;++e){var f=b[e];d[e]=[f,a[f]]}return d}function d(a){var b=Object.keys(a),c=b.length,d=new Array(c);for(var e=0;e<c;++e)d[e]=a[b[e]];return d}function e(a){var b={};a=a;while(!0){var c=a;if(!c)return b;var d=c.hd;b[d[0]]=d[1];a=c.tl;continue}}function h(a){var b={},c=a.length;for(var d=0;d<c;++d){var e=a[d];b[e[0]]=e[1]}return b}function i(a,b){var c={},d=Object.keys(b),e=d.length;for(var f=0;f<e;++f){var g=d[f];c[g]=a(b[g])}return c}f.get=a;f.unsafeDeleteKey=g;f.entries=c;f.values=d;f.fromList=e;f.fromArray=h;f.map=i}),null);
__d("ReQL.bs",["ReQL","bs_js_dict","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=function a(c){var d=c.NAME;if(d!=="range")if(d==="lessThan")return b("bs_js_dict").fromArray([["lt",c.VAL]]);else if(d==="greaterThan")return b("bs_js_dict").fromArray([["gt",c.VAL]]);else if(d==="greaterThanOrEqual")return b("bs_js_dict").fromArray([["gte",c.VAL]]);else return b("bs_js_dict").fromArray([["lte",c.VAL]]);d=c.VAL;return b("bs_js_dict").fromArray(b("bs_js_dict").entries(a(d[0])).concat(b("bs_js_dict").entries(a(d[1]))))};return a.bounds(d(c))}function c(a,c){if(!c)return b("unrecoverableViolation")("only support 5","messenger_web_product");var d=c.tl;c=c.hd;if(!d)return a.getKeyRange(c);var e=d.tl;d=d.hd;if(!e)return a.getKeyRange(c,d);var f=e.tl;e=e.hd;if(!f)return a.getKeyRange(c,d,e);var g=f.tl;f=f.hd;if(g)if(g.tl)return b("unrecoverableViolation")("only support 5","messenger_web_product");else return a.getKeyRange(c,d,e,f,g.hd);else return a.getKeyRange(c,d,e,f)}function d(a,b){return a.filter(b)}function e(a,b){return a.map(b)}function g(a){return b("ReQL").toArrayAsync(a)}function h(a,c){return b("ReQL").mergeJoin(a,c)}function i(a,c){return b("ReQL").leftJoin(a,c)}function j(a,b){return a.take(b)}function k(a){return b("ReQL").firstAsync(a)}function l(a){return b("ReQL").firstExnAsync(a)}function m(a){return b("ReQL").fromTableAscending(a)}function n(a){return b("ReQL").fromTableDescending(a)}function o(a){return b("ReQL").fromTableAscending(a)}function p(a){return b("ReQL").fromTableDescending(a)}f.filter=d;f.map=e;f.toArray=g;f.mergeJoin=h;f.leftJoin=i;f.bounds=a;f.getKeyRange=c;f.take=j;f.first=k;f.firstExn=l;f.fromTableAscending=m;f.fromTableDescending=n;f.fromIndexAscending=o;f.fromIndexDescending=p}),null);
__d("MAWVerifyThreadCutover.bs",["LSContactBitOffset.bs","LSContactCapabilityBitOffset.bs","MAWGating","Promise","ReQL.bs","bs_belt_Option","bs_caml_format"],(function(a,b,c,d,e,f){"use strict";function g(a,c){if(b("MAWGating").isThreadLevelCutoverEnabled())return a.then(function(a){var d,e=(d=b("ReQL.bs")).first(d.getKeyRange(d.fromTableAscending(a.table("cutover_threads")),{hd:c,tl:0})).then(b("bs_belt_Option").isSome);d=d.first(d.getKeyRange(d.fromTableAscending(a.table("contacts")),{hd:c,tl:0})).then(function(a){return a});return b("Promise").all([e,d]).then(function(a){var c=b("bs_belt_Option").mapWithDefault(a[1],!1,function(a){return b("bs_belt_Option").getWithDefault(b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").hasCutoverThread,a),!1)});if(a[0])return!0;else return c})});else return b("Promise").resolve(!1)}function a(a,c){if(c==null)return b("Promise").resolve(!1);else return g(a,b("bs_caml_format").caml_int64_of_string(c))}f.verifyThreadCutover=g;f.verifyThreadCutoverWithStringInput=a}),null);
__d("LSDict",["nativePromiseRegeneratorRuntime","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a.tag="ls-array";return a}a=function(){function a(a){this.size=0;var b=new Map(Array.from(a||[]).map(function(a){var b=a[0];a=a[1];return[JSON.stringify(b),a]}));this.$1=b;Object.defineProperties(this,{size:{get:function(){return b.size}}})}var b=a.prototype;b.get=function(a){return this.$1.get(JSON.stringify(a))};b.set=function(a,b){this.$1.set(JSON.stringify(a),b);return this};b["delete"]=function(a){return this.$1["delete"](JSON.stringify(a))};b.clear=function(){return this.$1.clear()};b.forEach=function(a){var b=this;this.$1.forEach(function(c,d){return a(c,JSON.parse(d),b)})};b.has=function(a){return this.$1.has(JSON.stringify(a))};b.entries=c("nativePromiseRegeneratorRuntime").mark(function a(){var b,d,e,f,g,h,i;return c("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:b=this.$1.entries(),d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 1:if(!d){a.next=7;break}if(!(e>=b.length)){a.next=4;break}return a.abrupt("break",18);case 4:f=b[e++];a.next=11;break;case 7:e=b.next();if(!e.done){a.next=10;break}return a.abrupt("break",18);case 10:f=e.value;case 11:g=f;h=g[0];i=g[1];a.next=16;return[JSON.parse(h),i];case 16:a.next=1;break;case 18:case"end":return a.stop()}},a,this)});b.keys=function(){return h(Array.from(this.$1.keys()).map(function(a){return JSON.parse(a)}))};b.values=function(){return this.$1.values()};a.fromObject=function(b){return new a(Object.entries(b))};a.shapeToRecord=function(a){return Array.from(a.entries()).reduce(function(a,b){var d=b[0];b=b[1];if(typeof d!=="string")throw c("unrecoverableViolation")("Cannot convert dicts with mixed keys to records","messenger_web_product");return babelHelpers["extends"]({},a,(a={},a[d]=b,a))},{})};return a}();g["default"]=a}),98);
__d("LSJson",["LSDict","bs_caml_int64","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=512;function i(a,b,e){b===void 0&&(b=0);e===void 0&&(e="");if(b>h)throw c("unrecoverableViolation")("recursion limit exceeded","messenger_comet");if(typeof a==="string"||typeof a==="number")return JSON.stringify(a);else if(typeof a==="boolean")return a?"1":"0";else if(a===void 0)return"null";else if(typeof a==="object")if(Array.isArray(a))return a.tag==="ls-array"?"["+a.map(function(a,c){return i(a,b+1,e+"/"+c.toString())}).join(",")+"]":d("bs_caml_int64").to_string(a);else if(a instanceof c("LSDict"))return"{"+Array.from(a.entries()).map(function(a){var d=a[0];a=a[1];if(typeof d==="string")return JSON.stringify(d)+":"+i(a,b+1,e+"/"+d);else throw c("unrecoverableViolation")("key must be a string","messenger_comet")}).join(",")+"}";throw c("unrecoverableViolation")("type not supported: "+(a===null?"null":typeof a)+", path: "+e,"messenger_comet")}g.stringify=i}),98);
__d("LSLogHistory",["performance"],(function(a,b,c,d,e,f,g){"use strict";var h=[];function a(){return h}function b(){h=[]}function d(a,b){var d;c("performance").timing!=null?d=Math.round(c("performance").timing.navigationStart+c("performance").now()):d=Date.now();h.push([d.toString(),b,"lightspeed_log","lightspeed_log_event",a].join(" | "))}g.getEntries=a;g.clearEntries=b;g.log=d}),98);
__d("LSIterationHelpers",["FBLogger","LSDbKeyComparer","LSDict","ReStoreVaulting","bs_caml_int64"],(function(a,b,c,d,e,f,g){"use strict";function h(x){var y=[];while(x!==0)y.push(x.hd),x=x.tl;return y}function i(x){return x.reduceRight(function(y,z){return{hd:z,tl:y}},0)}function j(x,y,z){z===void 0&&(z="asc");var A=x.entries(new WeakMap(),z);function B(){var C;return C={},C[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=B,C.next=async function(){var D=await A.next();outer:while(!D.done){var E=async function(F){var H=y[F]||{},I=H.end,J=H.start,K=h(D.value[0]),L=K.slice(0,F);if(J){var M=d("LSDbKeyComparer").compareValue(K[F],J[0]);if(M*(z==="asc"?1:-1)<J[1]){if(F===K.length-1&&M===0)D=await A.next();else{var N=[].concat(L,[J[0]],J[1]&&z==="asc"||!J[1]&&z==="desc"?[d("LSDbKeyComparer").MAX_KEY]:[]);D=await A.next(i(N))}if(D.done)return{v:{done:!0}};K=h(D.value[0]);if(!L.every(function(O,F){return d("LSDbKeyComparer").compareValue(O,K[F])===0}))return"continue|outer"}}if(I&&d("LSDbKeyComparer").compareValue(I[0],K[F])*(z==="asc"?1:-1)<I[1]){D=await A.next(i([].concat(K.slice(0,F),z==="asc"?[d("LSDbKeyComparer").MAX_KEY]:[])));return"continue|outer"}};for(var F=0;F<y.length;F++){var G=await E(F);switch(G){case"continue|outer":continue outer;default:if(typeof G==="object")return G.v}}break}return D},C}return B()}function k(x,y){var z;return z={},z[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=k.bind(null,x,y),z.next=async function(){var A=await x.next();while(!A.done&&!await y(A.value.item))A=await x.next();return A},z}function l(x,y,z){var A,B=0;return A={},A[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=l.bind(null,x,y,z),A.next=async function(){while(B<y){var C=await x.next(),D=C.done;if(D){c("FBLogger")("messenger_web_product").info("not enough iterable values to slice from %d",y);return{done:!0}}B++}if(B<z){B++;return x.next()}return{done:!0}},A}async function m(x,y){var z=await x.next(),A=[];while(!z.done)A.push(z.value),z=await x.next();for(var B=0;B<A.length;B++){var C=A[B];await y(C)}}async function n(x){var y=[],z=await x.next();while(!z.done)y.push(z.value),z=await x.next();return y}function o(x,y,z){z===void 0&&(z=[]);var A={ASC:1,DESC:-1},B=function(D,E){var F=D.item,G=E.item;for(var H=0;H<y.length;H++){var I=y[H],J=I[0],K=F[J],L=G[J],M;K===void 0&&L===void 0?M=0:K===void 0&&L!==void 0?M=-1:K!==void 0&&L===void 0?M=1:M=d("LSDbKeyComparer").compareValue(K,L);if(M===0)continue;return M*A[y[H][1]]}return 0},C=function(){var D=babelHelpers.wrapAsyncGenerator(function*(){var E=(yield babelHelpers.awaitAsyncGenerator(x.next())),F,G=[];while(!E.done){var H=0;for(var I=z.length-1;I>=0;I--)H={hd:E.value.item[z[I]],tl:H};if(F!==void 0&&d("LSDbKeyComparer").compareKey(F,H)!==0){for(var J=G.sort(B),K=Array.isArray(J),L=0,J=K?J:J[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var M;if(K){if(L>=J.length)break;M=J[L++]}else{L=J.next();if(L.done)break;M=L.value}var N=M;yield N}G=[]}E.done||G.push(E.value);F=H;E=(yield babelHelpers.awaitAsyncGenerator(x.next()))}if(G.length)for(var O=G.sort(B),P=Array.isArray(O),Q=0,O=P?O:O[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var R;if(P){if(Q>=O.length)break;R=O[Q++]}else{Q=O.next();if(Q.done)break;R=Q.value}var S=R;yield S}});return function(){return D.apply(this,arguments)}}();return C()}async function p(x){var y=0,z=await x.next();while(!z.done)y++,z=await x.next();return c("bs_caml_int64").of_int32(y)}function q(x,y){return{forEach:async function(z){var A=await n(x),B=A.reduce(function(K,L){var I=L.item[y],J=(K.get(I)||0)+1;return K.set(I,J)},new(c("LSDict"))());for(var C=B.entries(),D=Array.isArray(C),E=0,C=D?C:C[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var F,G;if(D){if(E>=C.length)break;G=C[E++]}else{E=C.next();if(E.done)break;G=E.value}var H=G,I=H[0],J=H[1];await z((F={},F[y]=I,F.group_count=c("bs_caml_int64").of_int32(J),F))}}}}function r(x,y,z){return{delete:function(){return z.delete(x)},item:y,update:function(A){return z.upsert(x,babelHelpers.extends({},y,A))}}}function s(x,y){return t.apply(this,arguments)}function t(){t=babelHelpers.wrapAsyncGenerator(function*(x,y){var z=(yield babelHelpers.awaitAsyncGenerator(x.next()));while(!z.done)yield z.value,z=(yield babelHelpers.awaitAsyncGenerator(x.next()));z=(yield babelHelpers.awaitAsyncGenerator(y.next()));while(!z.done)yield z.value,z=(yield babelHelpers.awaitAsyncGenerator(y.next()))});return t.apply(this,arguments)}function u(x,y,z){return v.apply(this,arguments)}function v(){v=babelHelpers.wrapAsyncGenerator(function*(x,y,z){var A=(yield babelHelpers.awaitAsyncGenerator(x.next())),B=(yield babelHelpers.awaitAsyncGenerator(y.next()));while(!A.done&&!B.done){var C=d("LSDbKeyComparer").compareKey(A.value[0],B.value[0]);C===0?(yield A.value,A=(yield babelHelpers.awaitAsyncGenerator(x.next())),B=(yield babelHelpers.awaitAsyncGenerator(y.next()))):C*(z==="asc"?1:-1)<0?(yield A.value,A=(yield babelHelpers.awaitAsyncGenerator(x.next()))):(yield B.value,B=(yield babelHelpers.awaitAsyncGenerator(y.next())))}while(!A.done)yield A.value,A=(yield babelHelpers.awaitAsyncGenerator(x.next()));while(!B.done)yield B.value,B=(yield babelHelpers.awaitAsyncGenerator(y.next()))});return v.apply(this,arguments)}function w(x,y,z,A,B,C){var D=new Set(),E=x.length>1,F=x.length===1&&x[0][1]===void 0,G=x.map(function(I){var J=I[0],K=I[1];return J.map(function(L){A.key_lookup===!0&&L.length!==0;A.table_scan===!0&&L.length===0;var M=L.map(function(P){return C(P,y)}),N=M.length===(K===void 0?z.primaryKeyIds:z.indexes[K]).length&&M.every(function(P){var Q=P.start,R=P.end;return Q&&R&&Q[0]===R[0]&&Q[1]===0&&R[1]===0});if(N){var O=function O(){var P,Q=!1;return P={},P[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=O,P.next=async function(){if(Q)return{done:!0};Q=!0;var R=i(M.map(function(U){var V=U.start;return V[0]})),S=await (K===void 0?B:B.index(K)).get(R);if(!S)return{done:!0};var T=d("ReStoreVaulting").maybeUnvaultDbRow(S,z.name);return{value:[R,T],done:!1}},P};return O()}return j(K===void 0?B:B.index(K),M,y)})}).flat().reduce(function(I,J){return x.length>1?s(I,J):u(I,J,y)});function H(){var I;return I={},I[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=H,I.next=async function(){var J,K,L,M=await G.next();while(!M.done){var N=M.value;K=N[0];L=N[1];J=F?K:z.primaryKeyIds.reduceRight(function(P,Q){return{hd:L[Q],tl:P}},0);if(E){var O=JSON.stringify(J);if(D.has(O)){M=await G.next();continue}D.add(O)}break}return M.done||J===void 0||L===void 0?{done:!0}:{done:!1,value:r(J,L,B)}},I}return H()}g.filter=k;g.slice=l;g.forEach=m;g.toArray=n;g.sortBy=o;g.count=p;g.groupBy=q;g.fetch=w}),98);
__d("LS",["FBLogger","I64","LSDbKeyComparer","LSDict","LSIterationHelpers","LSJson","LSLogHistory","ODS","base64-js","bs_caml","bs_caml_format","bs_caml_int64","cr:3109","emptyFunction","gkx","qpl","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(){var z=babelHelpers.taggedTemplateLiteralLoose(["2"]);h=function(){return z};return z}function i(){var z=babelHelpers.taggedTemplateLiteralLoose(["0"]);i=function(){return z};return z}function j(){var z=babelHelpers.taggedTemplateLiteralLoose(["0"]);j=function(){return z};return z}function k(){var z=babelHelpers.taggedTemplateLiteralLoose(["2"]);k=function(){return z};return z}var l="LS_WEB";function m(z){return z.name.match(/secure_|inbox(?!_)/i)}var n=babelHelpers.extends({},c("bs_caml_int64"),{eq:function(z,A){return z==null&&A==null||z!=null&&A!=null&&c("bs_caml").i64_eq(z,A)},neq:function(z,A){return z==null&&A!=null||z!=null&&A==null||z!=null&&A!=null&&c("bs_caml").i64_neq(z,A)},lt:c("bs_caml").i64_lt,gt:c("bs_caml").i64_gt,le:c("bs_caml").i64_le,ge:c("bs_caml").i64_ge,min:c("bs_caml").i64_min,max:c("bs_caml").i64_max,to_int32:function(q){return q==null?q:c("bs_caml_int64").to_int32(q)},to_string:function(q){return q==null?q:c("bs_caml_int64").to_string(q)},from_string:function(q){try{return c("bs_caml_format").caml_int64_of_string(q)}catch(z){throw c("unrecoverableViolation")('Unable to cast "'+q+'" to int64',"messenger_comet")}},random:function(){var z=a.crypto||a.msCrypto,A=Array.from(z.getRandomValues(new Uint32Array(2)));A[0]>>>=1;return A}});function o(z){return c("base64-js").toByteArray(z).buffer}var p={to_string:function(z){if(z==null)return void 0;var A=new TextDecoder();return A.decode(z)},of_string:function(z){if(z==null)return void 0;var A=new TextEncoder();return A.encode(z).buffer},eq:function(z,A){if(z==null&&A==null)return!0;if(z==null||A==null)return!1;var B=new Uint8Array(z),C=new Uint8Array(A);if(B.length!==C.length)return!1;for(var D=0;D<B.length;D++)if(B[D]!==C[D])return!1;return!0},neq:function(z,A){return!p.eq(z,A)},compareTo:function(z,A){var B=new Uint8Array(z),C=new Uint8Array(A),D=Math.min(B.length,C.length);for(var E=0;E<D;E++){var F=B[E]-C[E];if(F!==0)return F}return B.length===C.length?0:B.length-C.length},le:function(z,A){return p.compareTo(z,A)<=0},lt:function(z,A){return p.compareTo(z,A)<0},ge:function(z,A){return p.compareTo(z,A)>=0},gt:function(z,A){return p.compareTo(z,A)>0}};function q(z){if(z.length!==1)throw c("unrecoverableViolation")("only literal strings supported","messenger_web_product");var A=z[0],B=parseInt(A.substr(-8),16),C=parseInt(A.substr(0,A.length-8),16);return d("I64").asI64([C>>>1^-(B&1),((B>>>1)+(C&1)*2147483648^-(B&1))>>>0])}function r(z,A){if(typeof z==="object"&&!Array.isArray(z)){var B,C;if(A==="asc"){Object.prototype.hasOwnProperty.call(z,"gt")&&(B=[z.gt,1]);if(Object.prototype.hasOwnProperty.call(z,"gte")){if(B!==void 0)throw c("unrecoverableViolation")("Cannot specify both gt and gte","messenger_web_product");B=[z.gte,0]}Object.prototype.hasOwnProperty.call(z,"lt")&&(C=[z.lt,1]);if(Object.prototype.hasOwnProperty.call(z,"lte")){if(C!==void 0)throw c("unrecoverableViolation")("Cannot specify both lt and lte","messenger_web_product");C=[z.lte,0]}}else{Object.prototype.hasOwnProperty.call(z,"lt")&&(B=[z.lt,1]);if(Object.prototype.hasOwnProperty.call(z,"lte")){if(B!==void 0)throw c("unrecoverableViolation")("Cannot specify both lt and lte","messenger_web_product");B=[z.lte,0]}Object.prototype.hasOwnProperty.call(z,"gt")&&(C=[z.gt,1]);if(Object.prototype.hasOwnProperty.call(z,"gte")){if(C!==void 0)throw c("unrecoverableViolation")("Cannot specify both gt and gte","messenger_web_product");C=[z.gte,0]}}return{start:B,end:C}}return{start:[z,0],end:[z,0]}}function s(z,A,B){var C=z.table(A.name);return{add:function(D){return C.add(D)},fetch:function(){for(var D=arguments.length,E=new Array(D),F=0;F<D;F++)E[F]=arguments[F];return d("LSIterationHelpers").fetch(E.length===0?[[[[]],void 0]]:E,"asc",A,B,C,r)},fetchDesc:function(){for(var D=arguments.length,E=new Array(D),F=0;F<D;F++)E[F]=arguments[F];return d("LSIterationHelpers").fetch(E.length===0?[[[[]],void 0]]:E,"desc",A,B,C,r)},put:function(D){return C.deleteThenInsert(D)},peekNextAutoIncrementId:function(){return C.peekNextAutoIncrementId()}}}function t(z,A,B,C){return{table:function(D){var E=B.tableIds[D];if(A===0&&m(E))throw c("unrecoverableViolation")("cannot access secure table from dynamic mode","messenger_web_product");return s(z,E,C)}}}function u(z){var A="unknown_sproc",B=z.displayName,C=/\[from (.*)\]/,D=C.exec(B);D!=null&&(A=D[1]);return A}var v=function(){var z=0,A={},B={};function C(J){var K,L=(K=B[J])!=null?K:0;B[J]=L+1}function D(J){if(J in A)return A[J];A[J]=z;z++;return A[J]}function E(J){var K=J.shouldLog,L=J.sprocName;C(L);if(!K)return;var M=D(L);b("cr:3109")==null?void 0:b("cr:3109").markerStart(c("qpl")._(25302991,"143"),M);b("cr:3109")==null?void 0:b("cr:3109").markerAnnotate(c("qpl")._(25302991,"143"),{string:{name:L}},{instanceKey:M})}function F(J,K){var L=J.shouldLog,M=J.sprocName;if(!L)return;var N=D(M),O=K==="success"?2:3;b("cr:3109")==null?void 0:b("cr:3109").markerEnd(c("qpl")._(25302991,"143"),O,N)}function G(J){F(J,"success")}function H(J){F(J,"failure")}function I(J){return!1}return{call:E,success:G,failure:H,shouldLogSproc:I}}();function w(z,A,B){var C=c("bs_caml_int64").to_string(A),D=function(E){return!B?"":B[E]||""};return z(C,D).toString()}function x(z,A,B){var C=c("bs_caml_int64").to_string(A),D=function(E){return!B?"":B[E]||""};return z(C,D).toString()}function y(z,A,B,C,D,E,F,G){F===void 0&&(F={});G===void 0&&(G=void 0);var H=t(E,z,A,F),I=[];return{Map:c("LSDict"),constructor:{n:q},createArray:function(){return Object.defineProperty([],"tag",{value:"ls-array"})},createArrayWithElements:function(){for(var J=arguments.length,K=new Array(J),L=0;L<J;L++)K[L]=arguments[L];return Object.defineProperty(K,"tag",{value:"ls-array"})},db:H,i64:n,islc:d("LSIterationHelpers").slice,ct:d("LSIterationHelpers").count,blob:o,blobs:p,fe:d("LSIterationHelpers").forEach,ftr:d("LSIterationHelpers").filter,gb:d("LSIterationHelpers").groupBy,logger:function(J){if(G)return{mustfix:G,warn:G,info:G,debug:G};var K=c("FBLogger")("messenger_web_product");if(J.startsWith("epoch mismatch")||J.startsWith("cursor mismatch")){var L=function(M){d("LSLogHistory").log(M,"error");var N=M!=null?M.replace(/[\s,]+/g,"_"):"epoch_or_cursor_mismatch";d("ODS").bumpEntityKey(3185,"lsplatform",N)};return{mustfix:L,warn:L,info:function(M){return d("LSLogHistory").log(M,"log")},debug:function(M){return d("LSLogHistory").log(M,"debug")}}}else{c("gkx")("7465")||(K.info=c("emptyFunction"));return K}},like:function(J,K){var L=K.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,".");return RegExp(L).test(J)},loopAsync:function(J,K){function L(M){var N;return n.lt(M,J)?K(M).then(function(){return L(n.add(M,q(k())))}):((N=window.Promise)!=null?N:Promise).resolve()}return L(q(j()))},loopSync:function(J,K){for(var L=q(i());n.lt(L,J);L=n.add(L,q(h())))K(L)},merge:function(){function J(P,Q){return d("LSDbKeyComparer").compareValue(P,Q)>0?P:Q}function K(P,Q){return d("LSDbKeyComparer").compareValue([P[0],-P[1]],[Q[0],-Q[1]])<0?P:Q}for(var L=arguments.length,M=new Array(L),N=0;N<L;N++)M[N]=arguments[N];var O=M.reduce(function(P,Q){var R=r(Q,"asc");return{start:P.start&&R.start?J(R.start,P.start):R.start||P.start,end:P.end&&R.end?K(R.end,P.end):R.end||P.end}},{});return babelHelpers.extends({},O.start?O.start[1]?{gt:O.start[0]}:{gte:O.start[0]}:null,O.end?O.end[1]?{lt:O.end[0]}:{lte:O.end[0]}:null)},n:q,nop:async function(J){var K;if(typeof J==="string"){K=B[J+".bs"];if(K==null)throw c("unrecoverableViolation")("Attempted to call unimplemented native op with id: "+J,"messenger_web_product");K.load&&(K=await K.load());K=K}else K=J;try{for(var L=arguments.length,M=new Array(L>1?L-1:0),N=1;N<L;N++)M[N-1]=arguments[N];return K.apply(void 0,[E,z].concat(M))}catch(O){c("FBLogger")("messenger_web_product").catching(O).addMetadata(l,"NATIVE_OP_ID",J.toString()).warn("Native operation %s failed",J.toString());throw O}},notnull:function(J){if(J===null)throw c("unrecoverableViolation")("value should not be null","messenger_web_product");return J},ntop:async function(J,K){var L;if(typeof K==="string"){L=B[K.toString()];if(L==null)throw c("unrecoverableViolation")("Attempted to call unimplemented native type op with type: "+J+" and id: "+K,"messenger_web_product");L.load&&(L=await L.load());L=L.call}else L=K.call;for(var M=arguments.length,N=new Array(M>2?M-2:0),O=2;O<M;O++)N[O-2]=arguments[O];return L.apply(void 0,[E,z].concat(N))},print:function(J){},resolve:function(J){var K;return((K=window.Promise)!=null?K:Promise).resolve(J)},rm:n.of_int32(z),seq:function(J){return J.slice(1).reduce(function(K,L){return K.then(L)},J[0]())},slc:function(J,K){return Array.prototype.slice.call(J,K)},sp:async function(J){var K;if(typeof J==="string"){K=B[J];if(K==null)throw c("unrecoverableViolation")("Attempted to call unimplemented stored procedure with id: "+J,"messenger_web_product");K.load&&(K=await K.load())}else K=J;var L=this;switch(z){case 0:L=y(2,A,B,C,D,E,F,G);break;case 2:L=y(1,A,B,C,D,E,F,G);break}var M=u(K),N=v.shouldLogSproc(M),O={sprocName:M,shouldLog:N};I.push(J);try{v.call(O);for(var P=arguments.length,Q=new Array(P>1?P-1:0),R=1;R<P;R++)Q[R-1]=arguments[R];var S=await K.apply(void 0,Q.concat([L]));v.success(O);return S}catch(T){c("FBLogger")("messenger_web_product").catching(T).addMetadata(l,"SPROC_STACK",I.join("\n")).warn("Sproc %s failed",J);v.failure(O);throw T}finally{I.pop()}},throw:function(J){throw c("unrecoverableViolation")(J,"messenger_comet")},ta:d("LSIterationHelpers").toArray,toJSON:function(J){return d("LSJson").stringify(J)},sb:d("LSIterationHelpers").sortBy,localize:function(){for(var J=arguments.length,K=new Array(J),L=0;L<J;L++)K[L]=arguments[L];return w.apply(void 0,[C].concat(K))},localizeAsync:function(){for(var J=arguments.length,K=new Array(J),L=0;L<J;L++)K[L]=arguments[L];return Promise.resolve(w.apply(void 0,[C].concat(K)))},localizeV2:function(){for(var J=arguments.length,K=new Array(J),L=0;L<J;L++)K[L]=arguments[L];return x.apply(void 0,[D].concat(K))},localizeV2Async:function(){for(var J=arguments.length,K=new Array(J),L=0;L<J;L++)K[L]=arguments[L];return Promise.resolve(x.apply(void 0,[D].concat(K)))}}}y.n=q;g.default=y}),98);
__d("LSStaticDependencies",["LSDeleteThenInsertContact","LSDeleteThenInsertThread","LSExecuteFinallyBlockForSyncTransaction","LSExecuteFirstBlockForSyncTransaction","LSRemoveTask","LSSetRegionHint","LSTaskExists","LSUpdateLastSyncCompletedTimestampMsToNow","LSUpsertSequenceId","LSVerifyContactRowExists"],(function(a,b,c,d,e,f,g){"use strict";a={deleteThenInsertContact:c("LSDeleteThenInsertContact"),deleteThenInsertThread:c("LSDeleteThenInsertThread"),executeFinallyBlockForSyncTransaction:c("LSExecuteFinallyBlockForSyncTransaction"),executeFirstBlockForSyncTransaction:c("LSExecuteFirstBlockForSyncTransaction"),removeTask:c("LSRemoveTask"),setRegionHint:c("LSSetRegionHint"),taskExists:c("LSTaskExists"),updateLastSyncCompletedTimestampMsToNow:c("LSUpdateLastSyncCompletedTimestampMsToNow"),upsertSequenceId:c("LSUpsertSequenceId"),verifyContactRowExists:c("LSVerifyContactRowExists")};g.staticCachedModules=a}),98);
__d("LSDynamicDependencies",["Bootloader","LSStaticDependencies","Promise","RelayFBModuleLoader","SiteData","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=babelHelpers["extends"]({},d("LSStaticDependencies").staticCachedModules);function a(a){var c=[];for(var a=a,e=Array.isArray(a),g=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(e){if(g>=a.length)break;i=a[g++]}else{g=a.next();if(g.done)break;i=g.value}i=i;var j=i.name;j!=null&&!(j in h)&&c.push(i)}var k=b("Promise").all(c.map(function(e){var c,a;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:c=e.name;if(!(c==null)){f.next=3;break}return f.abrupt("return");case 3:h[c]={load:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(k);case 2:return a.abrupt("return",h[c]);case 3:case"end":return a.stop()}},null,this)}};f.next=6;return b("regeneratorRuntime").awrap(d("RelayFBModuleLoader").load(e.value));case 6:a=f.sent,h[c]=a;case 8:case"end":return f.stop()}},null,this)})).then(function(a){});return k}function i(a,b,c){a.loadModules.call(a,b,function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return c(b)})}function j(a){return a.charAt(0).toUpperCase()+a.slice(1)}function e(a,d,e){var f=new Map();for(var a=(a=a)!=null?a:[],g=Array.isArray(a),k=0,a=g?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(g){if(k>=a.length)break;l=a[k++]}else{k=a.next();if(k.done)break;l=k.value}l=l;l in h||f.set(l,"LS"+j(l))}for(var k=(l=d)!=null?l:[],g=Array.isArray(k),a=0,k=g?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(a>=k.length)break;d=k[a++]}else{a=k.next();if(a.done)break;d=a.value}l=d;d=l+".bs";d in h||f.set(d,"LS"+j(l)+".nop")}for(var l=(d=e)!=null?d:[],a=Array.isArray(l),g=0,l=a?l:l[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(a){if(g>=l.length)break;k=l[g++]}else{g=l.next();if(g.done)break;k=g.value}e=k;e in h||f.set(e,"LS"+j(e))}if(f.size===0)return b("Promise").resolve();var m=new(b("Promise"))(function(a){var d={},e=[],g=function(){if(k){if(l>=j.length)return"break";n=j[l++]}else{l=j.next();if(l.done)return"break";n=l.value}var a=n,c=a[0];a=a[1];d[a]={be:1,r:[]};e.push(a);h[c]={load:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(m);case 2:return a.abrupt("return",h[c]);case 3:case"end":return a.stop()}},null,this)}}};for(var j=f,k=Array.isArray(j),l=0,j=k?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n,o=g();if(o==="break")break}c("Bootloader").handlePayload({compMap:d,consistency:{rev:c("SiteData").client_revision}});i(c("Bootloader"),e,function(b){Array.from(f.entries()).forEach(function(a,c){var d=a[0];a[1];h[d]=b[c]}),a()})});return m}g.cachedModules=h;g.downloadRelayDependencies=a;g.downloadBootloaderDependencies=e}),98);
__d("LSDbKeyComparer.bs",["LSDbKeyComparer"],(function(a,b,c,d,e,f){"use strict";a=b("LSDbKeyComparer").compareKey;c=b("LSDbKeyComparer").MAX_KEY;f.cmp=a;f.maxKey=c}),null);
__d("LSDbForeignKeys",[],(function(a,b,c,d,e,f){"use strict";a={attachments:[{indexName:"fk_attachments",tableName:"attachment_items"},{indexName:"fk_attachments",tableName:"attachment_ctas"}],messages:[{indexName:"fk_messages",tableName:"attachments"}],pending_tasks:[{tableName:"encrypted_backup_restore_task_payload_context"},{indexName:"fk_pending_tasks",tableName:"pending_backups_context_v2"},{indexName:"fk_pending_tasks",tableName:"secure_recovery_code_data"},{indexName:"fk_pending_tasks",tableName:"secure_encrypted_backups_message_thread_id_context"}],rooms:[{tableName:"room_participants"}],secure_encrypted_backups_client_state:[{indexName:"fk_secure_encrypted_backups_client_state",tableName:"secure_encrypted_backups_epochs"}],secure_encrypted_backups_devices:[{indexName:"fk_secure_encrypted_backups_device_supported_versions_device_id",tableName:"secure_encrypted_backups_device_supported_versions"}],threads:[{indexName:"threadKeyCtaId",tableName:"thread_nullstate_ctas"},{tableName:"messages"},{tableName:"attachments"},{tableName:"thread_nullstate"},{tableName:"messages_ranges_v2__generated"},{tableName:"participants"},{indexName:"fk_threads",tableName:"mi_act_mapping_table"}]};b=a;f["default"]=b}),66);
__d("LSMetadata",["LSDbForeignKeys","LSTableSchemas","ReStoreDefaultValuesMetadata","ReStoreIndexMetadata"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b={},e={},f=-1;for(var g=0;g<a.length;g++){var h=a[g];for(var h=h,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k,l;if(i){if(j>=h.length)break;l=h[j++]}else{j=h.next();if(j.done)break;l=j.value}l=l;k={autoIncrement:(k=l.auto_increment)!=null?k:!1,cascadeUpdates:(k=c("LSDbForeignKeys")[l.name])!=null?k:[],id:parseInt(l.id,10),indexes:(k=l.indexes)!=null?k:{},name:l.name,primaryKeyIds:l.primary_key};b[k.id]=k;e[k.name]=k;k.id>f&&(f=k.id)}}l={autoIncrement:!1,cascadeUpdates:[],id:++f,indexes:{},name:d("ReStoreIndexMetadata").indicesTableName,primaryKeyIds:["tableName","indexName"]};b[l.id]=l;e[l.name]=l;k={autoIncrement:!1,cascadeUpdates:[],id:++f,indexes:{},name:d("ReStoreDefaultValuesMetadata").defaultValuesTableName,primaryKeyIds:["t"]};b[k.id]=k;e[k.name]=k;return{tableIds:b,tableNames:e}}function a(a){a=h(a);var b=a.tableIds;a=a.tableNames;return{tableIds:b,tableNames:a}}b=a(c("LSTableSchemas"));g.buildTableData=h;g.buildMetadata=a;g.metadata=b}),98);
__d("LSDatabaseType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,15],r=[0,16],s=[0,17],t=[0,18],u=[0,19],v=[0,20],w=[0,21],x=[0,22],y=[0,23],z=[0,24],A=[0,25],B=[0,26],C=[0,27],D=[0,28],E=[0,29],F=[0,30],G=[0,31],H=[0,32],I=[0,33],J=[0,34],K=[0,35],L=[0,36],M=[0,37],N=[0,38],O=[0,39],P=[0,40],Q=[0,41],R=[0,42],S=[0,43],T=[0,44],U=[0,45],V=[0,46],W=[0,47],X=[0,48],Y=[0,49],Z=[0,50],$=[0,51],aa=[0,52],ba=[0,53],ca=[0,54],da=[0,55],ea=[0,56],fa=[0,57],ga=[0,59],ha=[0,60],ia=[0,61],ja=[0,62],ka=[0,63],la=[0,64],ma=[0,65],na=[0,66],oa=[0,67],pa=[0,68],qa=[0,69],ra=[0,70],sa=[0,71],ta=[0,72],ua=[0,73],va=[0,74],wa=[0,75],xa=[0,76],ya=[0,77],za=[0,78],Aa=[0,79],Ba=[0,80],Ca=[0,81],Da=[0,82],Ea=[0,84],Fa=[0,85],Ga=[0,86],Ha=[0,87],Ia=[0,88],Ja=[0,89],Ka=[0,90],La=[0,91],Ma=[0,92],Na=[0,93],Oa=[0,94],Pa=[0,95],Qa=[0,96],Ra=[0,97],Sa=[0,98],Ta=[0,99],Ua=[0,100],Va=[0,101],Wa=[0,102],Xa=[0,103],Ya=[0,104],Za=[0,105],$a=[0,106],ab=[0,107],bb=[0,108],cb=[0,109],db=[0,110],eb=[0,111],fb=[0,112],gb=[0,113],hb=[0,114],ib=[0,115],jb=[0,116],kb=[0,117],lb=[0,118],mb=[0,119],nb=[0,120],ob=[0,121],pb=[0,122],qb=[0,123],rb=[0,124],sb=[0,125],tb=[0,126],ub=[0,127],vb=[0,128],wb=[0,129],xb=[0,130],yb=[0,131],zb=[0,132],Ab=[0,133],Bb=[0,134];f.test=a;f.mailbox=c;f.contact=d;f.appAlerts=e;f.core=b;f.stories=g;f.presence=h;f.ranking=i;f.experiment=j;f.search=k;f.securemailbox=l;f.inboxAds=m;f.sticker=n;f.omnistoreRevisionTest=o;f.frx=p;f.payments=q;f.settings=r;f.gif=s;f.arEffects=t;f.platformExtensionSdk=u;f.businessTab=v;f.composerMenus=w;f.experimentalContactPhoneNumber=x;f.forwardContents=y;f.typing=z;f.qp=A;f.inthreadbanner=B;f.logSampling=C;f.threadTheme=D;f.mediaSend=E;f.contactUpload=F;f.aloha=G;f.omnistoreSimpleTest=H;f.booking=I;f.oneTimeSyncTest=J;f.threadEmoji=K;f.universalLinks=L;f.counters=M;f.emptyTest=N;f.accountSettings=O;f.videoChatLink=P;f.zeroRating=Q;f.connectivity=R;f.switchAccountBadging=S;f.emergencyPoll=T;f.cowatch=U;f.switchAccountProfiles=V;f.$$location=W;f.syncWatchdog=X;f.bloks=Y;f.mediaEditing=Z;f.pushNotifications=$;f.switchAccountBadgingRealtime=aa;f.dasmDebug=ba;f.testTwo=ca;f.dataTrace=da;f.mediaSharing=ea;f.pluginExtensions=fa;f.localUserSettings=ga;f.groups=ha;f.dabl=ia;f.linkedGroups=ja;f.fxcal=ka;f.rooms=la;f.proactiveWarnings=ma;f.messagingAds=na;f.supportInbox=oa;f.coreClient=pa;f.threadCoPresence=qa;f.marketplace=ra;f.carrierMessaging=sa;f.notificationsClient=ta;f.cat=ua;f.composerSettings=va;f.groupThreadImage=wa;f.coplayMetadata=xa;f.searchUserGroups=ya;f.tutorial=za;f.paidAds=Aa;f.avatarsCoPresence=Ba;f.graphql=Ca;f.transcribe=Da;f.ixtServerTrigger=Ea;f.novi=Fa;f.testFramework=Ga;f.broker=Ha;f.openMessenger=Ia;f.anonymousCredentials=Ja;f.mlModel=Ka;f.localAuth=La;f.soundBite=Ma;f.encryptedBackups=Na;f.businessOrderManagement=Oa;f.e2eeMessagingMetadataMailbox=Pa;f.communitiesMailbox=Qa;f.mostLikelyToPollQuestions=Ra;f.breakoutSessions=Sa;f.messagingNotificationConfigs=Ta;f.sandboxSelector=Ua;f.gamesBotThread=Va;f.atcDaemon=Wa;f.coPresence=Xa;f.communityExclusive=Ya;f.clientOnlySample=Za;f.urlBlackhole=$a;f.sharing=ab;f.encryptedBackupsVersioning=bb;f.rpPolls=cb;f.everythingTogether=db;f.immersiveModesSpaces=eb;f.inAppPurchaseKit=fb;f.decentralizedTypes=gb;f.armadilloDevice=hb;f.staticEntryPoint=ib;f.giphyCategory=jb;f.communityMessagingPresence=kb;f.reactionsV2=lb;f.threadSubscription=mb;f.communityMessagingSearch=nb;f.communityMessagingDiscovery=ob;f.communityMessagingTrending=pb;f.widget=qb;f.messengerCallsTab=rb;f.botSuggestions=sb;f.testThree=tb;f.unifiedBusinessInboxIgdMailbox=ub;f.testOmnistoreBatchable=vb;f.contentExplorer=wb;f.unifiedBusinessInboxWaMailbox=xb;f.lsStoriesParticipantSettingsV2=yb;f.lsFeatureLimits=zb;f.lsUniversalUserPrefs=Ab;f.step=Bb}),null);
__d("LSMailboxMessagesRangeQueryDirection.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;f.before=a;f.after=c}),null);
__d("LS.bs",["LS","LSDynamicDependencies","LSLocalizedStrings","LSLocalizedStringsV2","LSMetadata"],(function(a,b,c,d,e,f){"use strict";var g=b("LSLocalizedStringsV2"),h=b("LSLocalizedStrings"),i=b("LSDynamicDependencies").cachedModules,j=b("LSMetadata").metadata;function a(a){return b("LS")(1,j,i,h,g,a,0)}c=b("LSDynamicDependencies").cachedModules;f.make=a;f.cachedModules=c}),null);
__d("LSTransaction.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){return a.runInTransaction(b,function(){switch(c){case"readOnly":return"readonly";case"readWrite":return"readwrite"}}())}f.run=a}),null);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/7R_-0_GF-gR/
 */
__d("dexie-3.2.2",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g},i;function j(){(function(b,c){typeof g==="object"&&typeof h!=="undefined"?h.exports=c():typeof i==="function"&&i.amd?i(c):(b=typeof globalThis!=="undefined"?globalThis:b||self,b.Dexie=c())})(this,function(){var b=function(){b=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return b.apply(this,arguments)};function c(a,b,c){if(c||arguments.length===2)for(var d=0,e=b.length,f;d<e;d++)(f||!(d in b))&&(f||(f=Array.prototype.slice.call(b,0,d)),f[d]=b[d]);return a.concat(f||Array.prototype.slice.call(b))}var d=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:typeof window!=="undefined"?window:a,e=Object.keys,f=Array.isArray;typeof Promise!=="undefined"&&!d.Promise&&(d.Promise=Promise);function g(a,b){if(typeof b!=="object")return a;e(b).forEach(function(c){a[c]=b[c]});return a}var h=Object.getPrototypeOf,i={}.hasOwnProperty;function j(a,b){return i.call(a,b)}function k(a,b){typeof b==="function"&&(b=b(h(a))),(typeof Reflect==="undefined"?e:Reflect.ownKeys)(b).forEach(function(c){m(a,c,b[c])})}var l=Object.defineProperty;function m(a,b,c,d){l(a,b,g(c&&j(c,"get")&&typeof c.get==="function"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},d))}function n(a){return{from:function(b){a.prototype=Object.create(b.prototype);m(a.prototype,"constructor",a);return{extend:k.bind(null,a.prototype)}}}}var o=Object.getOwnPropertyDescriptor;function p(a,b){var c=o(a,b);return c||(c=h(a))&&p(c,b)}var q=[].slice;function r(a,b,c){return q.call(a,b,c)}function s(a,b){return b(a)}function t(a){if(!a)throw new Error("Assertion Failed")}function u(a){d.setImmediate?setImmediate(a):setTimeout(a,0)}function v(a,b){return a.reduce(function(a,c,d){c=b(c,d);c&&(a[c[0]]=c[1]);return a},{})}function aa(a,b,c){try{a.apply(null,c)}catch(a){b&&b(a)}}function w(a,b){if(j(a,b))return a[b];if(!b)return a;if(typeof b!=="string"){var c=[];for(var d=0,e=b.length;d<e;++d){var f=w(a,b[d]);c.push(f)}return c}f=b.indexOf(".");if(f!==-1){d=a[b.substr(0,f)];return d===void 0?void 0:w(d,b.substr(f+1))}return void 0}function x(a,b,c){if(!a||b===void 0)return;if("isFrozen"in Object&&Object.isFrozen(a))return;if(typeof b!=="string"&&"length"in b){t(typeof c!=="string"&&"length"in c);for(var d=0,e=b.length;d<e;++d)x(a,b[d],c[d])}else{d=b.indexOf(".");if(d!==-1){e=b.substr(0,d);d=b.substr(d+1);if(d==="")c===void 0?f(a)&&!isNaN(parseInt(e))?a.splice(e,1):delete a[e]:a[e]=c;else{var g=a[e];(!g||!j(a,e))&&(g=a[e]={});x(g,d,c)}}else c===void 0?f(a)&&!isNaN(parseInt(b))?a.splice(b,1):delete a[b]:a[b]=c}}function ba(a,b){typeof b==="string"?x(a,b,void 0):"length"in b&&[].map.call(b,function(b){x(a,b,void 0)})}function ca(a){var b={};for(var c in a)j(a,c)&&(b[c]=a[c]);return b}var da=[].concat;function ea(a){return da.apply([],a)}var y="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ea([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(b){return b+a+"Array"})}))).filter(function(a){return d[a]}),fa=y.map(function(a){return d[a]});v(y,function(a){return[a,!0]});var z=null;function ga(a){z=typeof WeakMap!=="undefined"&&new WeakMap();a=ha(a);z=null;return a}function ha(a){if(!a||typeof a!=="object")return a;var b=z&&z.get(a);if(b)return b;if(f(a)){b=[];z&&z.set(a,b);for(var c=0,d=a.length;c<d;++c)b.push(ha(a[c]))}else if(fa.indexOf(a.constructor)>=0)b=a;else{c=h(a);b=c===Object.prototype?{}:Object.create(c);z&&z.set(a,b);for(var d in a)j(a,d)&&(b[d]=ha(a[d]))}return b}var ia={}.toString;function ja(a){return ia.call(a).slice(8,-1)}var ka=typeof Symbol!=="undefined"?Symbol.iterator:"@@iterator",la=typeof ka==="symbol"?function(a){var b;return a!=null&&(b=a[ka])&&b.apply(a)}:function(){return null},ma={};function A(a){var b,c,d,e;if(arguments.length===1){if(f(a))return a.slice();if(this===ma&&typeof a==="string")return[a];if(e=la(a)){c=[];while(d=e.next(),!d.done)c.push(d.value);return c}if(a==null)return[a];b=a.length;if(typeof b==="number"){c=new Array(b);while(b--)c[b]=a[b];return c}return[a]}b=arguments.length;c=new Array(b);while(b--)c[b]=arguments[b];return c}var na=typeof Symbol!=="undefined"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},B=typeof location!=="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function oa(a,b){B=a,pa=b}var pa=function(){return!0},qa=!new Error("").stack;function ra(){if(qa)try{throw new Error()}catch(a){return a}return new Error()}function sa(a,b){var c=a.stack;if(!c)return"";b=b||0;c.indexOf(a.name)===0&&(b+=(a.name+a.message).split("\n").length);return c.split("\n").slice(b).filter(pa).map(function(a){return"\n"+a}).join("")}y=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"];var C=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"];y=y.concat(C);var ta={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ua(a,b){this._e=ra(),this.name=a,this.message=b}n(ua).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+sa(this._e,2))}},toString:function(){return this.name+": "+this.message}});function va(a,b){return a+". Errors: "+Object.keys(b).map(function(a){return b[a].toString()}).filter(function(a,b,c){return c.indexOf(a)===b}).join("\n")}function wa(a,b,c,d){this._e=ra(),this.failures=b,this.failedKeys=d,this.successCount=c,this.message=va(a,b)}n(wa).from(ua);function xa(a,b){this._e=ra(),this.name="BulkError",this.failures=Object.keys(b).map(function(a){return b[a]}),this.failuresByPos=b,this.message=va(a,b)}n(xa).from(ua);var ya=y.reduce(function(a,b){return a[b]=b+"Error",a},{}),za=ua,D=y.reduce(function(b,c){var d=c+"Error";function a(a,b){this._e=ra(),this.name=d,!a?(this.message=ta[c]||d,this.inner=null):typeof a==="string"?(this.message=""+a+(b?"\n "+b:""),this.inner=b||null):typeof a==="object"&&(this.message=a.name+" "+a.message,this.inner=a)}n(a).from(za);b[c]=a;return b},{});D.Syntax=SyntaxError;D.Type=TypeError;D.Range=RangeError;var Aa=C.reduce(function(a,b){a[b+"Error"]=D[b];return a},{});function Ba(a,b){if(!a||a instanceof ua||a instanceof TypeError||a instanceof SyntaxError||!a.name||!Aa[a.name])return a;b=new Aa[a.name](b||a.message,a);"stack"in a&&m(b,"stack",{get:function(){return this.inner.stack}});return b}C=y.reduce(function(a,b){["Syntax","Type","Range"].indexOf(b)===-1&&(a[b+"Error"]=D[b]);return a},{});C.ModifyError=wa;C.DexieError=ua;C.BulkError=xa;function E(){}function Ca(a){return a}function Da(a,b){return a==null||a===Ca?b:function(c){return b(a(c))}}function F(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}function Ea(a,b){return a===E?b:function(){var c=a.apply(this,arguments);c!==void 0&&(arguments[0]=c);var d=this.onsuccess,e=this.onerror;this.onsuccess=null;this.onerror=null;var f=b.apply(this,arguments);d&&(this.onsuccess=this.onsuccess?F(d,this.onsuccess):d);e&&(this.onerror=this.onerror?F(e,this.onerror):e);return f!==void 0?f:c}}function Fa(a,b){return a===E?b:function(){a.apply(this,arguments);var c=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null;b.apply(this,arguments);c&&(this.onsuccess=this.onsuccess?F(c,this.onsuccess):c);d&&(this.onerror=this.onerror?F(d,this.onerror):d)}}function Ga(a,b){return a===E?b:function(c){var d=a.apply(this,arguments);g(c,d);var e=this.onsuccess,f=this.onerror;this.onsuccess=null;this.onerror=null;var h=b.apply(this,arguments);e&&(this.onsuccess=this.onsuccess?F(e,this.onsuccess):e);f&&(this.onerror=this.onerror?F(f,this.onerror):f);return d===void 0?h===void 0?void 0:h:g(d,h)}}function Ha(a,b){return a===E?b:function(){return b.apply(this,arguments)===!1?!1:a.apply(this,arguments)}}function Ia(a,b){return a===E?b:function(){var c=a.apply(this,arguments);if(c&&typeof c.then==="function"){var d=this,e=arguments.length,f=new Array(e);while(e--)f[e]=arguments[e];return c.then(function(){return b.apply(d,f)})}return b.apply(this,arguments)}}var Ja={},Ka=100,La=20,Ma=100;y=typeof Promise==="undefined"?[]:function(){var a=Promise.resolve();if(typeof crypto==="undefined"||!crypto.subtle)return[a,h(a),a];var b=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[b,h(b),a]}();var Na=y[0],Oa=y[1],Pa=y[2],Qa=Oa&&Oa.then,Ra=Na&&Na.constructor,Sa=!!Pa,Ta=!1,Ua=Pa?function(){Pa.then(mb)}:d.setImmediate?setImmediate.bind(null,mb):d.MutationObserver?function(){var a=document.createElement("div");new MutationObserver(function(){mb(),a=null}).observe(a,{attributes:!0});a.setAttribute("i","1")}:function(){setTimeout(mb,0)},Va=function(a,b){bb.push([a,b]),Xa&&(Ua(),Xa=!1)},Wa=!0,Xa=!0,G=[],Ya=[],Za=null,$a=Ca,ab={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Jb,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(a){try{Jb(a[0],a[1])}catch(a){}})}},H=ab,bb=[],I=0,cb=[];function J(a){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");this._listeners=[];this.onuncatched=E;this._lib=!1;var b=this._PSD=H;B&&(this._stackHolder=ra(),this._prev=null,this._numPrev=0);if(typeof a!=="function"){if(a!==Ja)throw new TypeError("Not a function");this._state=arguments[1];this._value=arguments[2];this._state===!1&&gb(this,this._value);return}this._state=null;this._value=null;++b.ref;fb(this,a)}var db={get:function(){var a=H,b=xb;function c(c,d){var e=this,f=!a.global&&(a!==H||b!==xb),g=f&&!N(),h=new J(function(b,h){ib(e,new eb(Gb(c,a,f,g),Gb(d,a,f,g),b,h,a))});B&&lb(h,this);return h}c.prototype=Ja;return c},set:function(a){m(this,"then",a&&a.prototype===Ja?db:{get:function(){return a},set:db.set})}};k(J.prototype,{then:db,_then:function(a,b){ib(this,new eb(null,null,a,b,H))},"catch":function(b){if(arguments.length===1)return this.then(null,b);var a=arguments[0],c=arguments[1];return typeof a==="function"?this.then(null,function(b){return b instanceof a?c(b):tb(b)}):this.then(null,function(b){return b&&b.name===a?c(b):tb(b)})},"finally":function(a){return this.then(function(b){a();return b},function(b){a();return tb(b)})},stack:{get:function(){if(this._stack)return this._stack;try{Ta=!0;var a=kb(this,[],La);a=a.join("\nFrom previous: ");this._state!==null&&(this._stack=a);return a}finally{Ta=!1}}},timeout:function(a,b){var c=this;return a<Infinity?new J(function(d,e){var f=setTimeout(function(){return e(new D.Timeout(b))},a);c.then(d,e)["finally"](clearTimeout.bind(null,f))}):this}});typeof Symbol!=="undefined"&&Symbol.toStringTag&&m(J.prototype,Symbol.toStringTag,"Dexie.Promise");ab.env=Db();function eb(a,b,c,d,e){this.onFulfilled=typeof a==="function"?a:null,this.onRejected=typeof b==="function"?b:null,this.resolve=c,this.reject=d,this.psd=e}k(J,{all:function(){var a=A.apply(null,arguments).map(Ab);return new J(function(b,c){a.length===0&&b([]);var d=a.length;a.forEach(function(e,f){return J.resolve(e).then(function(c){a[f]=c,--d||b(a)},c)})})},resolve:function(a){if(a instanceof J)return a;if(a&&typeof a.then==="function")return new J(function(b,c){a.then(b,c)});var b=new J(Ja,!0,a);lb(b,Za);return b},reject:tb,race:function(){var a=A.apply(null,arguments).map(Ab);return new J(function(b,c){a.map(function(a){return J.resolve(a).then(b,c)})})},PSD:{get:function(){return H},set:function(a){return H=a}},totalEchoes:{get:function(){return xb}},newPSD:M,usePSD:Eb,scheduler:{get:function(){return Va},set:function(a){Va=a}},rejectionMapper:{get:function(){return $a},set:function(a){$a=a}},follow:function(a,b){return new J(function(c,d){return M(function(b,c){var d=H;d.unhandleds=[];d.onunhandled=c;d.finalize=F(function(){var a=this;qb(function(){a.unhandleds.length===0?b():c(a.unhandleds[0])})},d.finalize);a()},b,c,d)})}});Ra&&(Ra.allSettled&&m(J,"allSettled",function(){var a=A.apply(null,arguments).map(Ab);return new J(function(b){a.length===0&&b([]);var c=a.length,d=new Array(c);a.forEach(function(a,e){return J.resolve(a).then(function(a){return d[e]={status:"fulfilled",value:a}},function(a){return d[e]={status:"rejected",reason:a}}).then(function(){return--c||b(d)})})})}),Ra.any&&typeof AggregateError!=="undefined"&&m(J,"any",function(){var a=A.apply(null,arguments).map(Ab);return new J(function(b,c){a.length===0&&c(new AggregateError([]));var d=a.length,e=new Array(d);a.forEach(function(a,f){return J.resolve(a).then(function(a){return b(a)},function(a){e[f]=a,--d||c(new AggregateError(e))})})})}));function fb(a,b){try{b(function(b){if(a._state!==null)return;if(b===a)throw new TypeError("A promise cannot be resolved with itself.");var c=a._lib&&nb();b&&typeof b.then==="function"?fb(a,function(a,c){b instanceof J?b._then(a,c):b.then(a,c)}):(a._state=!0,a._value=b,hb(a));c&&ob()},gb.bind(null,a))}catch(b){gb(a,b)}}function gb(a,b){Ya.push(b);if(a._state!==null)return;var c=a._lib&&nb();b=$a(b);a._state=!1;a._value=b;B&&b!==null&&typeof b==="object"&&!b._promise&&aa(function(){var c=p(b,"stack");b._promise=a;m(b,"stack",{get:function(){return Ta?c&&(c.get?c.get.apply(b):c.value):a.stack}})});rb(a);hb(a);c&&ob()}function hb(a){var b=a._listeners;a._listeners=[];for(var c=0,d=b.length;c<d;++c)ib(a,b[c]);c=a._PSD;--c.ref||c.finalize();I===0&&(++I,Va(function(){--I===0&&pb()},[]))}function ib(a,b){if(a._state===null){a._listeners.push(b);return}var c=a._state?b.onFulfilled:b.onRejected;if(c===null)return(a._state?b.resolve:b.reject)(a._value);++b.psd.ref;++I;Va(jb,[c,a,b])}function jb(a,b,c){try{Za=b;var d,e=b._value;b._state?d=a(e):(Ya.length&&(Ya=[]),d=a(e),Ya.indexOf(e)===-1&&sb(b));c.resolve(d)}catch(a){c.reject(a)}finally{Za=null,--I===0&&pb(),--c.psd.ref||c.psd.finalize()}}function kb(a,b,c){if(b.length===c)return b;var d="";if(a._state===!1){var e=a._value,f,g;e!=null?(f=e.name||"Error",g=e.message||e,d=sa(e,0)):(f=e,g="");b.push(f+(g?": "+g:"")+d)}B&&(d=sa(a._stackHolder,2),d&&b.indexOf(d)===-1&&b.push(d),a._prev&&kb(a._prev,b,c));return b}function lb(a,b){var c=b?b._numPrev+1:0;c<Ka&&(a._prev=b,a._numPrev=c)}function mb(){nb()&&ob()}function nb(){var a=Wa;Wa=!1;Xa=!1;return a}function ob(){var a,b,c;do while(bb.length>0){a=bb;bb=[];c=a.length;for(b=0;b<c;++b){var d=a[b];d[0].apply(null,d[1])}}while(bb.length>0);Wa=!0;Xa=!0}function pb(){var a=G;G=[];a.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});a=cb.slice(0);var b=a.length;while(b)a[--b]()}function qb(a){function b(){a(),cb.splice(cb.indexOf(b),1)}cb.push(b);++I;Va(function(){--I===0&&pb()},[])}function rb(a){G.some(function(b){return b._value===a._value})||G.push(a)}function sb(a){var b=G.length;while(b)if(G[--b]._value===a._value){G.splice(b,1);return}}function tb(a){return new J(Ja,!1,a)}function K(a,b){var c=H;return function(){var d=nb(),e=H;try{O(c,!0);return a.apply(this,arguments)}catch(a){b&&b(a)}finally{O(e,!1),d&&ob()}}}var L={awaits:0,echoes:0,id:0},ub=0,vb=[],wb=0,xb=0,yb=0;function M(b,a,c,d){var e=H,f=Object.create(e);f.parent=e;f.ref=0;f.global=!1;f.id=++yb;var h=ab.env;f.env=Sa?{Promise:J,PromiseProp:{value:J,configurable:!0,writable:!0},all:J.all,race:J.race,allSettled:J.allSettled,any:J.any,resolve:J.resolve,reject:J.reject,nthen:Hb(h.nthen,f),gthen:Hb(h.gthen,f)}:{};a&&g(f,a);++e.ref;f.finalize=function(){--this.parent.ref||this.parent.finalize()};h=Eb(f,b,c,d);f.ref===0&&f.finalize();return h}function zb(){L.id||(L.id=++ub);++L.awaits;L.echoes+=Ma;return L.id}function N(){if(!L.awaits)return!1;--L.awaits===0&&(L.id=0);L.echoes=L.awaits*Ma;return!0}(""+Qa).indexOf("[native code]")===-1&&(zb=N=E);function Ab(a){if(L.echoes&&a&&a.constructor===Ra){zb();return a.then(function(a){N();return a},function(a){N();return P(a)})}return a}function Bb(a){++xb,(!L.echoes||--L.echoes===0)&&(L.echoes=L.id=0),vb.push(H),O(a,!0)}function Cb(){var a=vb[vb.length-1];vb.pop();O(a,!1)}function O(a,b){var c=H;(b?L.echoes&&(!wb++||a!==H):wb&&(!--wb||a!==H))&&Fb(b?Bb.bind(null,a):Cb);if(a===H)return;H=a;c===ab&&(ab.env=Db());if(Sa){b=ab.env.Promise;var e=a.env;Oa.then=e.nthen;b.prototype.then=e.gthen;(c.global||a.global)&&(Object.defineProperty(d,"Promise",e.PromiseProp),b.all=e.all,b.race=e.race,b.resolve=e.resolve,b.reject=e.reject,e.allSettled&&(b.allSettled=e.allSettled),e.any&&(b.any=e.any))}}function Db(){var a=d.Promise;return Sa?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(d,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject,nthen:Oa.then,gthen:a.prototype.then}:{}}function Eb(a,b,c,d,e){var f=H;try{O(a,!0);return b(c,d,e)}finally{O(f,!1)}}function Fb(a){Qa.call(Na,a)}function Gb(a,b,c,d){return typeof a!=="function"?a:function(){var e=H;c&&zb();O(b,!0);try{return a.apply(this,arguments)}finally{O(e,!1),d&&Fb(N)}}}function Hb(a,b){return function(c,d){return a.call(this,Gb(c,b),Gb(d,b))}}var Ib="unhandledrejection";function Jb(a,b){var c;try{c=b.onuncatched(a)}catch(a){}if(c!==!1)try{var e;b={promise:b,reason:a};d.document&&document.createEvent?(e=document.createEvent("Event"),e.initEvent(Ib,!0,!0),g(e,b)):d.CustomEvent&&(e=new CustomEvent(Ib,{detail:b}),g(e,b));if(e&&d.dispatchEvent){dispatchEvent(e);if(!d.PromiseRejectionEvent&&d.onunhandledrejection)try{d.onunhandledrejection(e)}catch(a){}}B&&e&&!e.defaultPrevented}catch(a){}}var P=J.reject;function Kb(a,b,c,d){if(!a.idbdb||!a._state.openComplete&&!H.letThrough&&!a._vip){if(a._state.openComplete)return P(new D.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._options.autoOpen)return P(new D.DatabaseClosed());a.open()["catch"](E)}return a._state.dbReadyPromise.then(function(){return Kb(a,b,c,d)})}else{var e=a._createTransaction(b,c,a._dbSchema);try{e.create(),a._state.PR1398_maxLoop=3}catch(e){if(e.name===ya.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a._close();return a.open().then(function(){return Kb(a,b,c,d)})}return P(e)}return e._promise(b,function(a,b){return M(function(){H.trans=e;return d(a,b,e)})}).then(function(a){return e._completion.then(function(){return a})})}}y="3.2.2";var Q=String.fromCharCode(65535),Lb=-Infinity,R="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Mb="String expected.",Nb=[],Ob=typeof navigator!=="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Pb=Ob,Qb=Ob,Rb=function(a){return!/(dexie\.js|dexie\.min\.js)/.test(a)},Sb="__dbnames",Tb="readonly",Ub="readwrite";function S(a,b){return a?b?function(){return a.apply(this,arguments)&&b.apply(this,arguments)}:a:b}var Vb={type:3,lower:-Infinity,lowerOpen:!1,upper:[[]],upperOpen:!1};function Wb(a){return typeof a==="string"&&!/\./.test(a)?function(b){b[a]===void 0&&a in b&&(b=ga(b),delete b[a]);return b}:function(a){return a}}var Xb=function(){function a(){}a.prototype._trans=function(a,b,c){var d=this._tx||H.trans,e=this.name;function f(c,d,a){if(!a.schema[e])throw new D.NotFound("Table "+e+" not part of transaction");return b(a.idbtrans,a)}var g=nb();try{return d&&d.db===this.db?d===H.trans?d._promise(a,f,c):M(function(){return d._promise(a,f,c)},{trans:d,transless:H.transless||H}):Kb(this.db,a,[this.name],f)}finally{g&&ob()}};a.prototype.get=function(a,b){var c=this;return a&&a.constructor===Object?this.where(a).first(b):this._trans("readonly",function(b){return c.core.get({trans:b,key:a}).then(function(a){return c.hook.reading.fire(a)})}).then(b)};a.prototype.where=function(a){if(typeof a==="string")return new this.db.WhereClause(this,a);if(f(a))return new this.db.WhereClause(this,"["+a.join("+")+"]");var b=e(a);if(b.length===1)return this.where(b[0]).equals(a[b[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(a){return a.compound&&b.every(function(b){return a.keyPath.indexOf(b)>=0})&&a.keyPath.every(function(a){return b.indexOf(a)>=0})})[0];if(c&&this.db._maxKey!==Q)return this.where(c.name).equals(c.keyPath.map(function(b){return a[b]}));!c&&B&&!1;var d=this.schema.idxByName,g=this.db._deps.indexedDB;function h(a,b){try{return g.cmp(a,b)===0}catch(a){return!1}}var i=b.reduce(function(b,c){var e=b[0];b=b[1];var g=d[c],i=a[c];return[e||g,e||!g?S(b,g&&g.multi?function(a){a=w(a,c);return f(a)&&a.some(function(a){return h(i,a)})}:function(a){return h(i,w(a,c))}):b]},[null,null]),j=i[0];i=i[1];return j?this.where(j.name).equals(a[j.keyPath]).filter(i):c?this.filter(i):this.where(b).equals("")};a.prototype.filter=function(a){return this.toCollection().and(a)};a.prototype.count=function(a){return this.toCollection().count(a)};a.prototype.offset=function(a){return this.toCollection().offset(a)};a.prototype.limit=function(a){return this.toCollection().limit(a)};a.prototype.each=function(a){return this.toCollection().each(a)};a.prototype.toArray=function(a){return this.toCollection().toArray(a)};a.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))};a.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,f(a)?"["+a.join("+")+"]":a))};a.prototype.reverse=function(){return this.toCollection().reverse()};a.prototype.mapToClass=function(a){this.schema.mappedClass=a;var b=function(b){if(!b)return b;var c=Object.create(a.prototype);for(var d in b)if(j(b,d))try{c[d]=b[d]}catch(a){}return c};this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook);this.schema.readHook=b;this.hook("reading",b);return a};a.prototype.defineClass=function(){function a(a){g(this,a)}return this.mapToClass(a)};a.prototype.add=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Wb(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"add",keys:b!=null?[b]:null,values:[g]})}).then(function(a){return a.numFailures?J.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{x(a,f,b)}catch(a){}return b})};a.prototype.update=function(a,b){if(typeof a==="object"&&!f(a)){var c=w(a,this.schema.primKey.keyPath);if(c===void 0)return P(new D.InvalidArgument("Given object does not contain its primary key"));try{typeof b!=="function"?e(b).forEach(function(c){x(a,c,b[c])}):b(a,{value:a,primKey:c})}catch(a){}return this.where(":id").equals(c).modify(b)}else return this.where(":id").equals(a).modify(b)};a.prototype.put=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Wb(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"put",values:[g],keys:b!=null?[b]:null})}).then(function(a){return a.numFailures?J.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{x(a,f,b)}catch(a){}return b})};a.prototype["delete"]=function(a){var b=this;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:[a]})}).then(function(a){return a.numFailures?J.reject(a.failures[0]):void 0})};a.prototype.clear=function(){var a=this;return this._trans("readwrite",function(b){return a.core.mutate({trans:b,type:"deleteRange",range:Vb})}).then(function(a){return a.numFailures?J.reject(a.failures[0]):void 0})};a.prototype.bulkGet=function(a){var b=this;return this._trans("readonly",function(c){return b.core.getMany({keys:a,trans:c}).then(function(a){return a.map(function(a){return b.hook.reading.fire(a)})})})};a.prototype.bulkAdd=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new D.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Wb(d)):b;return e.core.mutate({trans:c,type:"add",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new xa(e.name+".bulkAdd(): "+b+" of "+h+" operations failed",a)})})};a.prototype.bulkPut=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new D.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Wb(d)):b;return e.core.mutate({trans:c,type:"put",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new xa(e.name+".bulkPut(): "+b+" of "+h+" operations failed",a)})})};a.prototype.bulkDelete=function(a){var b=this,c=a.length;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:a})}).then(function(a){var d=a.numFailures,e=a.lastResult;a=a.failures;if(d===0)return e;throw new xa(b.name+".bulkDelete(): "+d+" of "+c+" operations failed",a)})};return a}();function Yb(a){var b={},c=function(d,e){if(e){var c=arguments.length,f=new Array(c-1);while(--c)f[c-1]=arguments[c];b[d].subscribe.apply(null,f);return a}else if(typeof d==="string")return b[d]};c.addEventType=h;for(var d=1,g=arguments.length;d<g;++d)h(arguments[d]);return c;function h(a,d,e){if(typeof a==="object")return i(a);d||(d=Ha);e||(e=E);var f={subscribers:[],fire:e,subscribe:function(a){f.subscribers.indexOf(a)===-1&&(f.subscribers.push(a),f.fire=d(f.fire,a))},unsubscribe:function(a){f.subscribers=f.subscribers.filter(function(b){return b!==a}),f.fire=f.subscribers.reduce(d,e)}};b[a]=c[a]=f;return f}function i(a){e(a).forEach(function(b){var c=a[b];if(f(c))h(b,a[b][0],a[b][1]);else if(c==="asap")var d=h(b,Ca,function(){var a=arguments.length,b=new Array(a);while(a--)b[a]=arguments[a];d.subscribers.forEach(function(a){u(function(){a.apply(null,b)})})});else throw new D.InvalidArgument("Invalid event config")})}}function Zb(a,b){n(b).from({prototype:a});return b}function $b(a){return Zb(Xb.prototype,function(b,c,d){this.db=a,this._tx=d,this.name=b,this.schema=c,this.hook=a._allTables[b]?a._allTables[b].hook:Yb(null,{creating:[Ea,E],reading:[Da,Ca],updating:[Ga,E],deleting:[Fa,E]})})}function ac(a,b){return!(a.filter||a.algorithm||a.or)&&(b?a.justLimit:!a.replayFilter)}function bc(a,b){a.filter=S(a.filter,b)}function cc(a,b,c){var d=a.replayFilter;a.replayFilter=d?function(){return S(d(),b())}:b;a.justLimit=c&&!d}function dc(a,b){a.isMatch=S(a.isMatch,b)}function ec(a,b){if(a.isPrimKey)return b.primaryKey;var c=b.getIndexByKeyPath(a.index);if(!c)throw new D.Schema("KeyPath "+a.index+" on object store "+b.name+" is not indexed");return c}function fc(a,b,c){var d=ec(a,b.schema);return b.openCursor({trans:c,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:d,range:a.range}})}function gc(a,b,c,d){var e=a.replayFilter?S(a.filter,a.replayFilter()):a.filter;if(!a.or)return hc(fc(a,d,c),S(a.algorithm,e),b,!a.keysOnly&&a.valueMapper);else{var f={},g=function(a,c,d){if(!e||e(c,d,function(a){return c.stop(a)},function(a){return c.fail(a)})){var g=c.primaryKey,h=""+g;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(g));j(f,h)||(f[h]=!0,b(a,c,d))}};return Promise.all([a.or._iterate(g,c),hc(fc(a,d,c),a.algorithm,g,!a.keysOnly&&a.valueMapper)])}}function hc(a,b,c,d){var e=d?function(a,b,e){return c(d(a),b,e)}:c,f=K(e);return a.then(function(a){if(a)return a.start(function(){var c=function(){return a["continue"]()};(!b||b(a,function(a){return c=a},function(b){a.stop(b),c=E},function(b){a.fail(b),c=E}))&&f(a.value,a,function(a){return c=a});c()})})}function T(a,b){try{var c=kc(a),d=kc(b);if(c!==d){if(c==="Array")return 1;if(d==="Array")return-1;if(c==="binary")return 1;if(d==="binary")return-1;if(c==="string")return 1;if(d==="string")return-1;if(c==="Date")return 1;return d!=="Date"?NaN:-1}switch(c){case"number":case"Date":case"string":return a>b?1:a<b?-1:0;case"binary":return jc(lc(a),lc(b));case"Array":return ic(a,b)}}catch(a){}return NaN}function ic(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f){var g=T(a[f],b[f]);if(g!==0)return g}return c===d?0:c<d?-1:1}function jc(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f)if(a[f]!==b[f])return a[f]<b[f]?-1:1;return c===d?0:c<d?-1:1}function kc(a){var b=typeof a;if(b!=="object")return b;if(ArrayBuffer.isView(a))return"binary";b=ja(a);return b==="ArrayBuffer"?"binary":b}function lc(a){if(a instanceof Uint8Array)return a;return ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var mc=function(){function a(){}a.prototype._read=function(a,b){var c=this._ctx;return c.error?c.table._trans(null,P.bind(null,c.error)):c.table._trans("readonly",a).then(b)};a.prototype._write=function(a){var b=this._ctx;return b.error?b.table._trans(null,P.bind(null,b.error)):b.table._trans("readwrite",a,"locked")};a.prototype._addAlgorithm=function(a){var b=this._ctx;b.algorithm=S(b.algorithm,a)};a.prototype._iterate=function(a,b){return gc(this._ctx,a,b,this._ctx.table.core)};a.prototype.clone=function(a){var b=Object.create(this.constructor.prototype),c=Object.create(this._ctx);a&&g(c,a);b._ctx=c;return b};a.prototype.raw=function(){this._ctx.valueMapper=null;return this};a.prototype.each=function(a){var b=this._ctx;return this._read(function(c){return gc(b,a,c,b.table.core)})};a.prototype.count=function(a){var b=this;return this._read(function(a){var c=b._ctx,d=c.table.core;if(ac(c,!0))return d.count({trans:a,query:{index:ec(c,d.schema),range:c.range}}).then(function(a){return Math.min(a,c.limit)});else{var e=0;return gc(c,function(){++e;return!1},a,d).then(function(){return e})}}).then(a)};a.prototype.sortBy=function(a,b){var c=a.split(".").reverse(),d=c[0],e=c.length-1;function f(a,b){return b?f(a[c[b]],b-1):a[d]}var g=this._ctx.dir==="next"?1:-1;function h(a,b){a=f(a,e);b=f(b,e);return a<b?-g:a>b?g:0}return this.toArray(function(a){return a.sort(h)}).then(b)};a.prototype.toArray=function(a){var b=this;return this._read(function(a){var c=b._ctx;if(c.dir==="next"&&ac(c,!0)&&c.limit>0){var d=c.valueMapper,e=ec(c,c.table.core.schema);return c.table.core.query({trans:a,limit:c.limit,values:!0,query:{index:e,range:c.range}}).then(function(a){a=a.result;return d?a.map(d):a})}else{var f=[];return gc(c,function(a){return f.push(a)},a,c.table.core).then(function(){return f})}},a)};a.prototype.offset=function(a){var b=this._ctx;if(a<=0)return this;b.offset+=a;ac(b)?cc(b,function(){var b=a;return function(a,c){if(b===0)return!0;if(b===1){--b;return!1}c(function(){a.advance(b),b=0});return!1}}):cc(b,function(){var b=a;return function(){return--b<0}});return this};a.prototype.limit=function(a){this._ctx.limit=Math.min(this._ctx.limit,a);cc(this._ctx,function(){var b=a;return function(a,c,d){--b<=0&&c(d);return b>=0}},!0);return this};a.prototype.until=function(a,b){bc(this._ctx,function(c,d,e){if(a(c.value)){d(e);return b}else return!0});return this};a.prototype.first=function(a){return this.limit(1).toArray(function(a){return a[0]}).then(a)};a.prototype.last=function(a){return this.reverse().first(a)};a.prototype.filter=function(a){bc(this._ctx,function(b){return a(b.value)});dc(this._ctx,a);return this};a.prototype.and=function(a){return this.filter(a)};a.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)};a.prototype.reverse=function(){this._ctx.dir=this._ctx.dir==="prev"?"next":"prev";this._ondirectionchange&&this._ondirectionchange(this._ctx.dir);return this};a.prototype.desc=function(){return this.reverse()};a.prototype.eachKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.key,c)})};a.prototype.eachUniqueKey=function(a){this._ctx.unique="unique";return this.eachKey(a)};a.prototype.eachPrimaryKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.primaryKey,c)})};a.prototype.keys=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.key)}).then(function(){return c}).then(a)};a.prototype.primaryKeys=function(a){var b=this._ctx;if(b.dir==="next"&&ac(b,!0)&&b.limit>0)return this._read(function(a){var c=ec(b,b.table.core.schema);return b.table.core.query({trans:a,values:!1,limit:b.limit,query:{index:c,range:b.range}})}).then(function(a){a=a.result;return a}).then(a);b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.primaryKey)}).then(function(){return c}).then(a)};a.prototype.uniqueKeys=function(a){this._ctx.unique="unique";return this.keys(a)};a.prototype.firstKey=function(a){return this.limit(1).keys(function(a){return a[0]}).then(a)};a.prototype.lastKey=function(a){return this.reverse().firstKey(a)};a.prototype.distinct=function(){var a=this._ctx;a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var b={};bc(this._ctx,function(a){a=a.primaryKey.toString();var c=j(b,a);b[a]=!0;return!c});return this};a.prototype.modify=function(a){var b=this,c=this._ctx;return this._write(function(d){var f;if(typeof a==="function")f=a;else{var g=e(a),h=g.length;f=function(b){var c=!1;for(var d=0;d<h;++d){var e=g[d],f=a[e];w(b,e)!==f&&(x(b,e,f),c=!0)}return c}}var i=c.table.core,j=i.schema.primaryKey,k=j.outbound,l=j.extractKey,m=b.db._options.modifyChunkSize||200,n=[],o=0,p=[],q=function(a,b){var c=b.failures;b=b.numFailures;o+=a-b;for(var a=0,b=e(c);a<b.length;a++){var d=b[a];n.push(c[d])}};return b.clone().primaryKeys().then(function(b){var e=function(g){var h=Math.min(m,b.length-g);return i.getMany({trans:d,keys:b.slice(g,g+h),cache:"immutable"}).then(function(j){var n=[],o=[],p=k?[]:null,r=[];for(var s=0;s<h;++s){var t=j[s],u={value:ga(t),primKey:b[g+s]};f.call(u,u.value,u)!==!1&&(u.value==null?r.push(b[g+s]):!k&&T(l(t),l(u.value))!==0?(r.push(b[g+s]),n.push(u.value)):(o.push(u.value),k&&p.push(b[g+s])))}var v=ac(c)&&c.limit===Infinity&&(typeof a!=="function"||a===nc)&&{index:c.index,range:c.range};return Promise.resolve(n.length>0&&i.mutate({trans:d,type:"add",values:n}).then(function(a){for(var b in a.failures)r.splice(parseInt(b),1);q(n.length,a)})).then(function(){return(o.length>0||v&&typeof a==="object")&&i.mutate({trans:d,type:"put",keys:p,values:o,criteria:v,changeSpec:typeof a!=="function"&&a}).then(function(a){return q(o.length,a)})}).then(function(){return(r.length>0||v&&a===nc)&&i.mutate({trans:d,type:"delete",keys:r,criteria:v}).then(function(a){return q(r.length,a)})}).then(function(){return b.length>g+h&&e(g+m)})})};return e(0).then(function(){if(n.length>0)throw new wa("Error modifying one or more objects",n,o,p);return b.length})})})};a.prototype["delete"]=function(){var a=this._ctx,b=a.range;return ac(a)&&(a.isPrimKey&&!Qb||b.type===3)?this._write(function(c){var d=a.table.core.schema.primaryKey,e=b;return a.table.core.count({trans:c,query:{index:d,range:e}}).then(function(b){return a.table.core.mutate({trans:c,type:"deleteRange",range:e}).then(function(a){var c=a.failures;a.lastResult;a.results;a=a.numFailures;if(a)throw new wa("Could not delete some values",Object.keys(c).map(function(a){return c[a]}),b-a);return b-a})})}):this.modify(nc)};return a}(),nc=function(a,b){return b.value=null};function oc(a){return Zb(mc.prototype,function(b,c){this.db=a;var d=Vb,e=null;if(c)try{d=c()}catch(a){e=a}c=b._ctx;b=c.table;var f=b.hook.reading.fire;this._ctx={table:b,index:c.index,isPrimKey:!c.index||b.schema.primKey.keyPath&&c.index===b.schema.primKey.name,range:d,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:Infinity,error:e,or:c.or,valueMapper:f!==Ca?f:null}})}function pc(a,b){return a<b?-1:a===b?0:1}function qc(a,b){return a>b?-1:a===b?0:1}function U(a,b,c){a=a instanceof xc?new a.Collection(a):a;a._ctx.error=c?new c(b):new TypeError(b);return a}function rc(a){return new a.Collection(a,function(){return wc("")}).limit(0)}function sc(a){return a==="next"?function(a){return a.toUpperCase()}:function(a){return a.toLowerCase()}}function tc(a){return a==="next"?function(a){return a.toLowerCase()}:function(a){return a.toUpperCase()}}function uc(b,c,d,e,a,f){var g=Math.min(b.length,e.length),h=-1;for(var i=0;i<g;++i){var j=c[i];if(j!==e[i]){if(a(b[i],d[i])<0)return b.substr(0,i)+d[i]+d.substr(i+1);if(a(b[i],e[i])<0)return b.substr(0,i)+e[i]+d.substr(i+1);return h>=0?b.substr(0,h)+c[h]+d.substr(h+1):null}a(b[i],j)<0&&(h=i)}if(g<e.length&&f==="next")return b+d.substr(b.length);return g<b.length&&f==="prev"?b.substr(0,d.length):h<0?null:b.substr(0,h)+e[h]+d.substr(h+1)}function vc(a,b,c,d){var e,f,g,h,i,j,k,l=c.length;if(!c.every(function(a){return typeof a==="string"}))return U(a,Mb);function m(a){e=sc(a);f=tc(a);g=a==="next"?pc:qc;var b=c.map(function(a){return{lower:f(a),upper:e(a)}}).sort(function(a,b){return g(a.lower,b.lower)});h=b.map(function(a){return a.upper});i=b.map(function(a){return a.lower});j=a;k=a==="next"?"":d}m("next");a=new a.Collection(a,function(){return V(h[0],i[l-1]+d)});a._ondirectionchange=function(a){m(a)};var n=0;a._addAlgorithm(function(a,c,d){var e=a.key;if(typeof e!=="string")return!1;var m=f(e);if(b(m,i,n))return!0;else{var o=null;for(var p=n;p<l;++p){var q=uc(e,m,h[p],i[p],g,j);q===null&&o===null?n=p+1:(o===null||g(o,q)>0)&&(o=q)}o!==null?c(function(){a["continue"](o+k)}):c(d);return!1}});return a}function V(a,b,c,d){return{type:2,lower:a,upper:b,lowerOpen:c,upperOpen:d}}function wc(a){return{type:1,lower:a,upper:a}}var xc=function(){function a(){}Object.defineProperty(a.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0});a.prototype.between=function(a,b,c,d){c=c!==!1;d=d===!0;try{return this._cmp(a,b)>0||this._cmp(a,b)===0&&(c||d)&&!(c&&d)?rc(this):new this.Collection(this,function(){return V(a,b,!c,!d)})}catch(a){return U(this,R)}};a.prototype.equals=function(a){return a==null?U(this,R):new this.Collection(this,function(){return wc(a)})};a.prototype.above=function(a){return a==null?U(this,R):new this.Collection(this,function(){return V(a,void 0,!0)})};a.prototype.aboveOrEqual=function(a){return a==null?U(this,R):new this.Collection(this,function(){return V(a,void 0,!1)})};a.prototype.below=function(a){return a==null?U(this,R):new this.Collection(this,function(){return V(void 0,a,!1,!0)})};a.prototype.belowOrEqual=function(a){return a==null?U(this,R):new this.Collection(this,function(){return V(void 0,a)})};a.prototype.startsWith=function(a){return typeof a!=="string"?U(this,Mb):this.between(a,a+Q,!0,!0)};a.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):vc(this,function(a,b){return a.indexOf(b[0])===0},[a],Q)};a.prototype.equalsIgnoreCase=function(a){return vc(this,function(a,b){return a===b[0]},[a],"")};a.prototype.anyOfIgnoreCase=function(){var a=A.apply(ma,arguments);return a.length===0?rc(this):vc(this,function(a,b){return b.indexOf(a)!==-1},a,"")};a.prototype.startsWithAnyOfIgnoreCase=function(){var a=A.apply(ma,arguments);return a.length===0?rc(this):vc(this,function(a,b){return b.some(function(b){return a.indexOf(b)===0})},a,Q)};a.prototype.anyOf=function(){var a=this,b=A.apply(ma,arguments),c=this._cmp;try{b.sort(c)}catch(a){return U(this,R)}if(b.length===0)return rc(this);var d=new this.Collection(this,function(){return V(b[0],b[b.length-1])});d._ondirectionchange=function(d){c=d==="next"?a._ascending:a._descending,b.sort(c)};var e=0;d._addAlgorithm(function(a,d,f){var g=a.key;while(c(g,b[e])>0){++e;if(e===b.length){d(f);return!1}}if(c(g,b[e])===0)return!0;else{d(function(){a["continue"](b[e])});return!1}});return d};a.prototype.notEqual=function(a){return this.inAnyRange([[Lb,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})};a.prototype.noneOf=function(){var a=A.apply(ma,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch(a){return U(this,R)}var b=a.reduce(function(a,b){return a?a.concat([[a[a.length-1][1],b]]):[[Lb,b]]},null);b.push([a[a.length-1],this.db._maxKey]);return this.inAnyRange(b,{includeLowers:!1,includeUppers:!1})};a.prototype.inAnyRange=function(c,d){var e=this,a=this._cmp,f=this._ascending,g=this._descending,h=this._min,i=this._max;if(c.length===0)return rc(this);if(!c.every(function(a){return a[0]!==void 0&&a[1]!==void 0&&f(a[0],a[1])<=0}))return U(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",D.InvalidArgument);var j=!d||d.includeLowers!==!1,k=d&&d.includeUppers===!0;function b(b,c){var d=0,e=b.length;for(;d<e;++d){var f=b[d];if(a(c[0],f[1])<0&&a(c[1],f[0])>0){f[0]=h(f[0],c[0]);f[1]=i(f[1],c[1]);break}}d===e&&b.push(c);return b}var l=f;function m(a,b){return l(a[0],b[0])}var n;try{n=c.reduce(b,[]),n.sort(m)}catch(a){return U(this,R)}var o=0,p=k?function(a){return f(a,n[o][1])>0}:function(a){return f(a,n[o][1])>=0},q=j?function(a){return g(a,n[o][0])>0}:function(a){return g(a,n[o][0])>=0};function r(a){return!p(a)&&!q(a)}var s=p;d=new this.Collection(this,function(){return V(n[0][0],n[n.length-1][1],!j,!k)});d._ondirectionchange=function(a){a==="next"?(s=p,l=f):(s=q,l=g),n.sort(m)};d._addAlgorithm(function(a,b,c){var d=a.key;while(s(d)){++o;if(o===n.length){b(c);return!1}}if(r(d))return!0;else if(e._cmp(d,n[o][1])===0||e._cmp(d,n[o][0])===0)return!1;else{b(function(){l===f?a["continue"](n[o][0]):a["continue"](n[o][1])});return!1}});return d};a.prototype.startsWithAnyOf=function(){var a=A.apply(ma,arguments);if(!a.every(function(a){return typeof a==="string"}))return U(this,"startsWithAnyOf() only works with strings");return a.length===0?rc(this):this.inAnyRange(a.map(function(a){return[a,a+Q]}))};return a}();function yc(a){return Zb(xc.prototype,function(b,c,d){this.db=a;this._ctx={table:b,index:c===":id"?null:c,or:d};var e=a._deps.indexedDB;if(!e)throw new D.MissingAPI();this._cmp=this._ascending=e.cmp.bind(e);this._descending=function(a,b){return e.cmp(b,a)};this._max=function(a,b){return e.cmp(a,b)>0?a:b};this._min=function(a,b){return e.cmp(a,b)<0?a:b};this._IDBKeyRange=a._deps.IDBKeyRange})}function W(a){return K(function(b){zc(b);a(b.target.error);return!1})}function zc(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var Ac="storagemutated",X="x-storagemutated-1",Y=Yb(null,Ac),Bc=function(){function a(){}a.prototype._lock=function(){t(!H.global);++this._reculock;this._reculock===1&&!H.global&&(H.lockOwnerFor=this);return this};a.prototype._unlock=function(){t(!H.global);if(--this._reculock===0){H.global||(H.lockOwnerFor=null);while(this._blockedFuncs.length>0&&!this._locked()){var a=this._blockedFuncs.shift();try{Eb(a[1],a[0])}catch(a){}}}return this};a.prototype._locked=function(){return this._reculock&&H.lockOwnerFor!==this};a.prototype.create=function(a){var b=this;if(!this.mode)return this;var c=this.db.idbdb,d=this.db._state.dbOpenError;t(!this.idbtrans);if(!a&&!c)switch(d&&d.name){case"DatabaseClosedError":throw new D.DatabaseClosed(d);case"MissingAPIError":throw new D.MissingAPI(d.message,d);default:throw new D.OpenFailed(d)}if(!this.active)throw new D.TransactionInactive();t(this._completion._state===null);a=this.idbtrans=a||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):c.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}));a.onerror=K(function(c){zc(c),b._reject(a.error)});a.onabort=K(function(c){zc(c),b.active&&b._reject(new D.Abort(a.error)),b.active=!1,b.on("abort").fire(c)});a.oncomplete=K(function(){b.active=!1,b._resolve(),"mutatedParts"in a&&Y.storagemutated.fire(a.mutatedParts)});return this};a.prototype._promise=function(a,b,c){var d=this;if(a==="readwrite"&&this.mode!=="readwrite")return P(new D.ReadOnly("Transaction is readonly"));if(!this.active)return P(new D.TransactionInactive());if(this._locked())return new J(function(e,f){d._blockedFuncs.push([function(){d._promise(a,b,c).then(e,f)},H])});else if(c)return M(function(){var a=new J(function(a,c){d._lock();var e=b(a,c,d);e&&e.then&&e.then(a,c)});a["finally"](function(){return d._unlock()});a._lib=!0;return a});else{var e=new J(function(a,c){var e=b(a,c,d);e&&e.then&&e.then(a,c)});e._lib=!0;return e}};a.prototype._root=function(){return this.parent?this.parent._root():this};a.prototype.waitFor=function(a){var b=this._root(),c=J.resolve(a);if(b._waitingFor)b._waitingFor=b._waitingFor.then(function(){return c});else{b._waitingFor=c;b._waitingQueue=[];var d=b.idbtrans.objectStore(b.storeNames[0]);(function a(){++b._spinCount;while(b._waitingQueue.length)b._waitingQueue.shift()();b._waitingFor&&(d.get(-Infinity).onsuccess=a)})()}var e=b._waitingFor;return new J(function(a,d){c.then(function(c){return b._waitingQueue.push(K(a.bind(null,c)))},function(a){return b._waitingQueue.push(K(d.bind(null,a)))})["finally"](function(){b._waitingFor===e&&(b._waitingFor=null)})})};a.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new D.Abort()))};a.prototype.table=function(a){var b=this._memoizedTables||(this._memoizedTables={});if(j(b,a))return b[a];var c=this.schema[a];if(!c)throw new D.NotFound("Table "+a+" not part of transaction");c=new this.db.Table(a,c,this);c.core=this.db.core.table(a);b[a]=c;return c};return a}();function Cc(a){return Zb(Bc.prototype,function(b,c,d,e,f){var g=this;this.db=a;this.mode=b;this.storeNames=c;this.schema=d;this.chromeTransactionDurability=e;this.idbtrans=null;this.on=Yb(this,"complete","error","abort");this.parent=f||null;this.active=!0;this._reculock=0;this._blockedFuncs=[];this._resolve=null;this._reject=null;this._waitingFor=null;this._waitingQueue=null;this._spinCount=0;this._completion=new J(function(a,b){g._resolve=a,g._reject=b});this._completion.then(function(){g.active=!1,g.on.complete.fire()},function(a){var b=g.active;g.active=!1;g.on.error.fire(a);g.parent?g.parent._reject(a):b&&g.idbtrans&&g.idbtrans.abort();return P(a)})})}function Dc(a,b,c,d,e,f,g){return{name:a,keyPath:b,unique:c,multi:d,auto:e,compound:f,src:(c&&!g?"&":"")+(d?"*":"")+(e?"++":"")+Ec(b)}}function Ec(a){return typeof a==="string"?a:a?"["+[].join.call(a,"+")+"]":""}function Fc(a,b,c){return{name:a,primKey:b,indexes:c,mappedClass:null,idxByName:v(c,function(a){return[a.name,a]})}}function Gc(a){return a.length===1?a[0]:a}var Hc=function(a){try{a.only([[]]);Hc=function(){return[[]]};return[[]]}catch(a){Hc=function(){return Q};return Q}};function Ic(a){if(a==null)return function(){return void 0};else if(typeof a==="string")return Jc(a);else return function(b){return w(b,a)}}function Jc(a){var b=a.split(".");if(b.length===1)return function(b){return b[a]};else return function(b){return w(b,a)}}function Kc(a){return[].slice.call(a)}var Lc=0;function Mc(a){return a==null?":id":typeof a==="string"?a:"["+a.join("+")+"]"}function Nc(a,b,c){function d(a,b){var c=Kc(a.objectStoreNames);return{schema:{name:a.name,tables:c.map(function(a){return b.objectStore(a)}).map(function(a){var b=a.keyPath,c=a.autoIncrement,d=f(b),e=b==null,g={};e={name:a.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:e,compound:d,keyPath:b,autoIncrement:c,unique:!0,extractKey:Ic(b)},indexes:Kc(a.indexNames).map(function(b){return a.index(b)}).map(function(b){var c=b.name,d=b.unique,e=b.multiEntry;b=b.keyPath;var a=f(b);c={name:c,compound:a,keyPath:b,unique:d,multiEntry:e,extractKey:Ic(b)};g[Mc(b)]=c;return c}),getIndexByKeyPath:function(a){return g[Mc(a)]}};g[":id"]=e.primaryKey;b!=null&&(g[Mc(b)]=e.primaryKey);return e})},hasGetAll:c.length>0&&"getAll"in b.objectStore(c[0])&&!(typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function e(a){if(a.type===3)return null;if(a.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var c=a.lower,d=a.upper,e=a.lowerOpen;a=a.upperOpen;c=c===void 0?d===void 0?null:b.upperBound(d,!!a):d===void 0?b.lowerBound(c,!!e):b.bound(c,d,!!e,!!a);return c}function g(b){var c=b.name;function d(d){var f=d.trans,b=d.type,a=d.keys,g=d.values,h=d.range;return new Promise(function(d,i){d=K(d);i=f.objectStore(c);var j=i.keyPath==null,k=b==="put"||b==="add";if(!k&&b!=="delete"&&b!=="deleteRange")throw new Error("Invalid operation type: "+b);var l=(a||g||{length:1}).length;if(a&&g&&a.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(l===0)return d({numFailures:0,failures:{},results:[],lastResult:void 0});var m,n=[],o=[],p=0,q=function(a){++p,zc(a)};if(b==="deleteRange"){if(h.type===4)return d({numFailures:p,failures:o,results:[],lastResult:void 0});h.type===3?n.push(m=i.clear()):n.push(m=i["delete"](e(h)))}else{j=k?j?[g,a]:[g,null]:[a,null];var r=j[0];j=j[1];if(k)for(var k=0;k<l;++k)n.push(m=j&&j[k]!==void 0?i[b](r[k],j[k]):i[b](r[k])),m.onerror=q;else for(var k=0;k<l;++k)n.push(m=i[b](r[k])),m.onerror=q}var s=function(c){c=c.target.result;n.forEach(function(a,b){return a.error!=null&&(o[b]=a.error)});d({numFailures:p,failures:o,results:b==="delete"?a:n.map(function(a){return a.result}),lastResult:c})};m.onerror=function(a){q(a),s(a)};m.onsuccess=s})}function a(b){var d=b.trans,f=b.values,a=b.query,g=b.reverse,h=b.unique;return new Promise(function(b,i){b=K(b);var j=a.index,k=a.range,l=d.objectStore(c);l=j.isPrimaryKey?l:l.index(j.name);j=g?h?"prevunique":"prev":h?"nextunique":"next";var m=f||!("openKeyCursor"in l)?l.openCursor(e(k),j):l.openKeyCursor(e(k),j);m.onerror=W(i);m.onsuccess=K(function(a){var c=m.result;if(!c){b(null);return}c.___id=++Lc;c.done=!1;var e=c["continue"].bind(c),f=c.continuePrimaryKey;f&&(f=f.bind(c));var g=c.advance.bind(c);a=function(){throw new Error("Cursor not started")};var h=function(){throw new Error("Cursor not stopped")};c.trans=d;c.stop=c["continue"]=c.continuePrimaryKey=c.advance=a;c.fail=K(i);c.next=function(){var a=this,b=1;return this.start(function(){return b--?a["continue"]():a.stop()}).then(function(){return a})};c.start=function(a){var b=new Promise(function(a,b){a=K(a),m.onerror=W(b),c.fail=b,c.stop=function(b){c.stop=c["continue"]=c.continuePrimaryKey=c.advance=h,a(b)}}),d=function(){if(m.result)try{a()}catch(a){c.fail(a)}else c.done=!0,c.start=function(){throw new Error("Cursor behind last entry")},c.stop()};m.onsuccess=K(function(a){m.onsuccess=d,d()});c["continue"]=e;c.continuePrimaryKey=f;c.advance=g;d();return b};b(c)},i)})}function f(a){return function(b){return new Promise(function(f,g){f=K(f);var h=b.trans,i=b.values,j=b.limit,d=b.query,k=j===Infinity?void 0:j,l=d.index;d=d.range;h=h.objectStore(c);h=l.isPrimaryKey?h:h.index(l.name);l=e(d);if(j===0)return f({result:[]});if(a){d=i?h.getAll(l,k):h.getAllKeys(l,k);d.onsuccess=function(a){return f({result:a.target.result})};d.onerror=W(g)}else{var m=0,n=i||!("openKeyCursor"in h)?h.openCursor(l):h.openKeyCursor(l),o=[];n.onsuccess=function(a){a=n.result;if(!a)return f({result:o});o.push(i?a.value:a.primaryKey);if(++m===j)return f({result:o});a["continue"]()};n.onerror=W(g)}})}}return{name:c,schema:b,mutate:d,getMany:function(b){var d=b.trans,a=b.keys;return new Promise(function(b,e){b=K(b);var f=d.objectStore(c),g=a.length,h=new Array(g),i=0,j=0,k=function(a){a=a.target;(h[a._pos]=a.result)!=null;++j===i&&b(h)};e=W(e);for(var l=0;l<g;++l){var m=a[l];m!=null&&(m=f.get(a[l]),m._pos=l,m.onsuccess=k,m.onerror=e,++i)}i===0&&b(h)})},get:function(a){var b=a.trans,d=a.key;return new Promise(function(a,e){a=K(a);var f=b.objectStore(c);f=f.get(d);f.onsuccess=function(b){return a(b.target.result)};f.onerror=W(e)})},query:f(h),openCursor:a,count:function(b){var a=b.query,d=b.trans,f=a.index,g=a.range;return new Promise(function(a,b){var h=d.objectStore(c);h=f.isPrimaryKey?h:h.index(f.name);var i=e(g);i=i?h.count(i):h.count();i.onsuccess=K(function(b){return a(b.target.result)});i.onerror=W(b)})}}}d=d(a,c);c=d.schema;var h=d.hasGetAll;d=c.tables.map(function(a){return g(a)});var i={};d.forEach(function(a){return i[a.name]=a});return{stack:"dbcore",transaction:a.transaction.bind(a),table:function(a){var b=i[a];if(!b)throw new Error("Table '"+a+"' not found");return i[a]},MIN_KEY:-Infinity,MAX_KEY:Hc(b),schema:c}}function Oc(a,c){return c.reduce(function(a,c){c=c.create;return b(b({},a),c(a))},a)}function Pc(a,b,c,d){var e=c.IDBKeyRange;c.indexedDB;c=Oc(Nc(b,e,d),a.dbcore);return{dbcore:c}}function Qc(a,b){var c=a._novip;a=b.db;a=Pc(c._middlewares,a,c._deps,b);c.core=a.dbcore;c.tables.forEach(function(a){var b=a.name;c.core.schema.tables.some(function(a){return a.name===b})&&(a.core=c.core.table(b),c[b]instanceof c.Table&&(c[b].core=a.core))})}function Rc(a,b,c,d){var e=a._novip;c.forEach(function(a){var c=d[a];b.forEach(function(b){var d=p(b,a);(!d||"value"in d&&d.value===void 0)&&(b===e.Transaction.prototype||b instanceof e.Transaction?m(b,a,{get:function(){return this.table(a)},set:function(b){l(this,a,{value:b,writable:!0,configurable:!0,enumerable:!0})}}):b[a]=new e.Table(a,c))})})}function Sc(a,b){var c=a._novip;b.forEach(function(a){for(var b in a)a[b]instanceof c.Table&&delete a[b]})}function Tc(a,b){return a._cfg.version-b._cfg.version}function Uc(a,b,c,d){var f=a._dbSchema,g=a._createTransaction("readwrite",a._storeNames,f);g.create(c);g._completion["catch"](d);var h=g._reject.bind(g),i=H.transless||H;M(function(){H.trans=g,H.transless=i,b===0?(e(f).forEach(function(a){Xc(c,a,f[a].primKey,f[a].indexes)}),Qc(a,c),J.follow(function(){return a.on.populate.fire(g)})["catch"](h)):Vc(a,b,g,c)["catch"](h)})}function Vc(a,b,c,d){var f=a._novip,g=[];a=f._versions;var h=f._dbSchema=ad(f,f.idbdb,d),i=!1;a=a.filter(function(a){return a._cfg.version>=b});a.forEach(function(a){g.push(function(){var g=h,j=a._cfg.dbschema;dd(f,g,d);dd(f,j,d);h=f._dbSchema=j;var k=Wc(g,j);k.add.forEach(function(a){Xc(d,a[0],a[1].primKey,a[1].indexes)});k.change.forEach(function(a){if(a.recreate)throw new D.Upgrade("Not yet support for changing primary key");else{var b=d.objectStore(a.name);a.add.forEach(function(a){return $c(b,a)});a.change.forEach(function(a){b.deleteIndex(a.name),$c(b,a)});a.del.forEach(function(a){return b.deleteIndex(a)})}});var l=a._cfg.contentUpgrade;if(l&&a._cfg.version>b){Qc(f,d);c._memoizedTables={};i=!0;var m=ca(j);k.del.forEach(function(a){m[a]=g[a]});Sc(f,[f.Transaction.prototype]);Rc(f,[f.Transaction.prototype],e(m),m);c.schema=m;var n=na(l);n&&zb();var o;j=J.follow(function(){o=l(c);if(o&&n){var a=N.bind(null,null);o.then(a,a)}});return o&&typeof o.then==="function"?J.resolve(o):j.then(function(){return o})}}),g.push(function(b){if(!i||!Pb){var d=a._cfg.dbschema;Zc(d,b)}Sc(f,[f.Transaction.prototype]);Rc(f,[f.Transaction.prototype],f._storeNames,f._dbSchema);c.schema=f._dbSchema})});function j(){return g.length?J.resolve(g.shift()(c.idbtrans)).then(j):J.resolve()}return j().then(function(){Yc(h,d)})}function Wc(a,b){var c={del:[],add:[],change:[]},d;for(d in a)b[d]||c.del.push(d);for(d in b){var e=a[d],f=b[d];if(!e)c.add.push([d,f]);else{var g={name:d,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(e.primKey.keyPath||"")!==""+(f.primKey.keyPath||"")||e.primKey.auto!==f.primKey.auto&&!Ob)g.recreate=!0,c.change.push(g);else{e=e.idxByName;f=f.idxByName;var h;for(h in e)f[h]||g.del.push(h);for(h in f){var i=e[h],j=f[h];!i?g.add.push(j):i.src!==j.src&&g.change.push(j)}(g.del.length>0||g.add.length>0||g.change.length>0)&&c.change.push(g)}}}return c}function Xc(a,b,c,d){var e=a.db.createObjectStore(b,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});d.forEach(function(a){return $c(e,a)});return e}function Yc(a,b){e(a).forEach(function(c){b.db.objectStoreNames.contains(c)||Xc(b,c,a[c].primKey,a[c].indexes)})}function Zc(a,b){[].slice.call(b.db.objectStoreNames).forEach(function(c){return a[c]==null&&b.db.deleteObjectStore(c)})}function $c(a,b){a.createIndex(b.name,b.keyPath,{unique:b.unique,multiEntry:b.multi})}function ad(a,b,c){var d={};a=r(b.objectStoreNames,0);a.forEach(function(a){var b=c.objectStore(a),e=b.keyPath,f=Dc(Ec(e),e||"",!1,!1,!!b.autoIncrement,e&&typeof e!=="string",!0),g=[];for(var h=0;h<b.indexNames.length;++h){var i=b.index(b.indexNames[h]);e=i.keyPath;i=Dc(i.name,e,!!i.unique,!!i.multiEntry,!1,e&&typeof e!=="string",!1);g.push(i)}d[a]=Fc(a,f,g)});return d}function bd(a,b,c){a=a._novip;a.verno=b.version/10;c=a._dbSchema=ad(a,b,c);a._storeNames=r(b.objectStoreNames,0);Rc(a,[a._allTables],e(c),c)}function cd(a,b){b=ad(a,a.idbdb,b);b=Wc(b,a._dbSchema);return!(b.add.length||b.change.some(function(a){return a.add.length||a.change.length}))}function dd(a,b,c){a=a._novip;var e=c.db.objectStoreNames;for(var f=0;f<e.length;++f){var g=e[f],h=c.objectStore(g);a._hasGetAll="getAll"in h;for(var i=0;i<h.indexNames.length;++i){var j=h.indexNames[i],k=h.index(j).keyPath;k=typeof k==="string"?k:"["+r(k).join("+")+"]";if(b[g]){var l=b[g].idxByName[k];l&&(l.name=j,delete b[g].idxByName[k],b[g].idxByName[j]=l)}}}typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&d.WorkerGlobalScope&&d instanceof d.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function ed(a){return a.split(",").map(function(a,b){a=a.trim();var c=a.replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return Dc(c,d||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),f(d),b===0)})}var fd=function(){function a(){}a.prototype._parseStoresSpec=function(a,b){e(a).forEach(function(c){if(a[c]!==null){var d=ed(a[c]),e=d.shift();if(e.multi)throw new D.Schema("Primary key cannot be multi-valued");d.forEach(function(a){if(a.auto)throw new D.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new D.Schema("Index must have a name and cannot be an empty string")});b[c]=Fc(c,e,d)}})};a.prototype.stores=function(a){var b=this.db;this._cfg.storesSource=this._cfg.storesSource?g(this._cfg.storesSource,a):a;a=b._versions;var c={},d={};a.forEach(function(a){g(c,a._cfg.storesSource),d=a._cfg.dbschema={},a._parseStoresSpec(c,d)});b._dbSchema=d;Sc(b,[b._allTables,b,b.Transaction.prototype]);Rc(b,[b._allTables,b,b.Transaction.prototype,this._cfg.tables],e(d),d);b._storeNames=e(d);return this};a.prototype.upgrade=function(a){this._cfg.contentUpgrade=Ia(this._cfg.contentUpgrade||E,a);return this};return a}();function gd(a){return Zb(fd.prototype,function(b){this.db=a,this._cfg={version:b,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function hd(a,b){var c=a._dbNamesDB;c||(c=a._dbNamesDB=new Kd(Sb,{addons:[],indexedDB:a,IDBKeyRange:b}),c.version(1).stores({dbnames:"name"}));return c.table("dbnames")}function id(a){return a&&typeof a.databases==="function"}function jd(a){var b=a.indexedDB;a=a.IDBKeyRange;return id(b)?Promise.resolve(b.databases()).then(function(a){return a.map(function(a){return a.name}).filter(function(a){return a!==Sb})}):hd(b,a).toCollection().primaryKeys()}function kd(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!id(c)&&b!==Sb&&hd(c,a).put({name:b})["catch"](E)}function ld(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!id(c)&&b!==Sb&&hd(c,a)["delete"](b)["catch"](E)}function md(a){return M(function(){H.letThrough=!0;return a()})}function nd(){var a=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!a||!indexedDB.databases)return Promise.resolve();var b;return new Promise(function(a){var c=function(){return indexedDB.databases()["finally"](a)};b=setInterval(c,100);c()})["finally"](function(){return clearInterval(b)})}function od(a){var b=a._state,c=a._deps.indexedDB;if(b.isBeingOpened||a.idbdb)return b.dbReadyPromise.then(function(){return b.dbOpenError?P(b.dbOpenError):a});B&&(b.openCanceller._stackHolder=ra());b.isBeingOpened=!0;b.dbOpenError=null;b.openComplete=!1;var d=b.openCanceller;function e(){if(b.openCanceller!==d)throw new D.DatabaseClosed("db.open() was cancelled")}var f=b.dbReadyResolve,g=null,h=!1;return J.race([d,(typeof navigator==="undefined"?J.resolve():nd()).then(function(){return new J(function(d,f){e();if(!c)throw new D.MissingAPI();var i=a.name,j=b.autoSchema?c.open(i):c.open(i,Math.round(a.verno*10));if(!j)throw new D.MissingAPI();j.onerror=W(f);j.onblocked=K(a._fireOnBlocked);j.onupgradeneeded=K(function(d){g=j.transaction;if(b.autoSchema&&!a._options.allowEmptyDB){j.onerror=zc;g.abort();j.result.close();var e=c.deleteDatabase(i);e.onsuccess=e.onerror=K(function(){f(new D.NoSuchDatabase("Database "+i+" doesnt exist"))})}else{g.onerror=W(f);e=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;h=e<1;a._novip.idbdb=j.result;Uc(a,e/10,g,f)}},f);j.onsuccess=K(function(){g=null;var c=a._novip.idbdb=j.result,e=r(c.objectStoreNames);if(e.length>0)try{e=c.transaction(Gc(e),"readonly");b.autoSchema?bd(a,c,e):(dd(a,a._dbSchema,e),!cd(a,e));Qc(a,e)}catch(a){}Nb.push(a);c.onversionchange=K(function(c){b.vcFired=!0,a.on("versionchange").fire(c)});c.onclose=K(function(b){a.on("close").fire(b)});h&&kd(a._deps,i);d()},f)})})]).then(function(){e();b.onReadyBeingFired=[];return J.resolve(md(function(){return a.on.ready.fire(a.vip)})).then(function c(){if(b.onReadyBeingFired.length>0){var d=b.onReadyBeingFired.reduce(Ia,E);b.onReadyBeingFired=[];return J.resolve(md(function(){return d(a.vip)})).then(c)}})})["finally"](function(){b.onReadyBeingFired=null,b.isBeingOpened=!1}).then(function(){return a})["catch"](function(c){b.dbOpenError=c;try{g&&g.abort()}catch(a){}d===b.openCanceller&&a._close();return P(c)})["finally"](function(){b.openComplete=!0,f()})}function pd(a){var b=function(b){return a.next(b)},c=function(b){return a["throw"](b)},d=g(b),e=g(c);function g(a){return function(b){b=a(b);var c=b.value;return b.done?c:!c||typeof c.then!=="function"?f(c)?Promise.all(c).then(d,e):d(c):c.then(d,e)}}return g(b)()}function qd(a,b,c){var d=arguments.length;if(d<2)throw new D.InvalidArgument("Too few arguments");var e=new Array(d-1);while(--d)e[d-1]=arguments[d];c=e.pop();var f=ea(e);return[a,f,c]}function rd(a,b,c,d,e){return J.resolve().then(function(){var f=H.transless||H,g=a._createTransaction(b,c,a._dbSchema,d);f={trans:g,transless:f};if(d)g.idbtrans=d.idbtrans;else try{g.create(),a._state.PR1398_maxLoop=3}catch(d){if(d.name===ya.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a._close();return a.open().then(function(){return rd(a,b,c,null,e)})}return P(d)}var h=na(e);h&&zb();var i;f=J.follow(function(){i=e.call(g,g);if(i)if(h){var a=N.bind(null,null);i.then(a,a)}else typeof i.next==="function"&&typeof i["throw"]==="function"&&(i=pd(i))},f);return(i&&typeof i.then==="function"?J.resolve(i).then(function(a){return g.active?a:P(new D.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):f.then(function(){return i})).then(function(a){d&&g._resolve();return g._completion.then(function(){return a})})["catch"](function(a){g._reject(a);return P(a)})})}function sd(a,b,c){a=f(a)?a.slice():[a];for(var d=0;d<c;++d)a.push(b);return a}function td(a){return b(b({},a),{table:function(c){var d=a.table(c);c=d.schema;var e={},f=[];function g(a,c,d){var h=Mc(a);h=e[h]=e[h]||[];var i=a==null?0:typeof a==="string"?1:a.length,j=c>0;j=b(b({},d),{isVirtual:j,keyTail:c,keyLength:i,extractKey:Ic(a),unique:!j&&d.unique});h.push(j);j.isPrimaryKey||f.push(j);if(i>1){a=i===2?a[0]:a.slice(0,i-1);g(a,c+1,d)}h.sort(function(a,b){return a.keyTail-b.keyTail});return j}var h=g(c.primaryKey.keyPath,0,c.primaryKey);e[":id"]=[h];for(var i=0,j=c.indexes;i<j.length;i++){var k=j[i];g(k.keyPath,0,k)}function l(a){a=e[Mc(a)];return a&&a[0]}function m(b,c){return{type:b.type===1?2:b.type,lower:sd(b.lower,b.lowerOpen?a.MAX_KEY:a.MIN_KEY,c),lowerOpen:!0,upper:sd(b.upper,b.upperOpen?a.MIN_KEY:a.MAX_KEY,c),upperOpen:!0}}function n(c){var a=c.query.index;return a.isVirtual?b(b({},c),{query:{index:a,range:m(c.query.range,a.keyTail)}}):c}k=b(b({},d),{schema:b(b({},c),{primaryKey:h,indexes:f,getIndexByKeyPath:l}),count:function(a){return d.count(n(a))},query:function(a){return d.query(n(a))},openCursor:function(c){var b=c.query.index,e=b.keyTail,f=b.isVirtual,g=b.keyLength;if(!f)return d.openCursor(c);function h(b){function d(d){d!=null?b["continue"](sd(d,c.reverse?a.MAX_KEY:a.MIN_KEY,e)):c.unique?b["continue"](b.key.slice(0,g).concat(c.reverse?a.MIN_KEY:a.MAX_KEY,e)):b["continue"]()}d=Object.create(b,{"continue":{value:d},continuePrimaryKey:{value:function(d,c){b.continuePrimaryKey(sd(d,a.MAX_KEY,e),c)}},primaryKey:{get:function(){return b.primaryKey}},key:{get:function(){var a=b.key;return g===1?a[0]:a.slice(0,g)}},value:{get:function(){return b.value}}});return d}return d.openCursor(n(c)).then(function(a){return a&&h(a)})}});return k}})}var ud={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:td};function vd(a,b,c,d){c=c||{};d=d||"";e(a).forEach(function(e){if(!j(b,e))c[d+e]=void 0;else{var f=a[e],g=b[e];if(typeof f==="object"&&typeof g==="object"&&f&&g){var h=ja(f),i=ja(g);h!==i?c[d+e]=b[e]:h==="Object"?vd(f,g,c,d+e+"."):f!==g&&(c[d+e]=b[e])}else f!==g&&(c[d+e]=b[e])}});e(b).forEach(function(e){j(a,e)||(c[d+e]=b[e])});return c}function wd(a,b){return b.type==="delete"?b.keys:b.keys||b.values.map(a.extractKey)}var xd={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return b(b({},a),{table:function(d){var e=a.table(d),f=e.schema.primaryKey,g=b(b({},e),{mutate:function(a){var g=H.trans,h=g.table(d).hook,i=h.deleting,k=h.creating,l=h.updating;switch(a.type){case"add":if(k.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"put":if(k.fire===E&&l.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"delete":if(i.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"deleteRange":if(i.fire===E)break;return g._promise("readwrite",function(){return n(a)},!0)}return e.mutate(a);function m(d){var g=H.trans,a=d.keys||wd(f,d);if(!a)throw new Error("Keys missing");d=d.type==="add"||d.type==="put"?b(b({},d),{keys:a}):b({},d);d.type!=="delete"&&(d.values=c([],d.values,!0));d.keys&&(d.keys=c([],d.keys,!0));return yd(e,d,a).then(function(b){var c=a.map(function(a,c){var e=b[c],h={onerror:null,onsuccess:null};if(d.type==="delete")i.fire.call(h,a,e,g);else if(d.type==="add"||e===void 0){var m=k.fire.call(h,a,d.values[c],g);a==null&&m!=null&&(a=m,d.keys[c]=a,f.outbound||x(d.values[c],f.keyPath,a))}else{m=vd(e,d.values[c]);var n=l.fire.call(h,m,a,e,g);if(n){var o=d.values[c];Object.keys(n).forEach(function(a){j(o,a)?o[a]=n[a]:x(o,a,n[a])})}}return h});return e.mutate(d).then(function(e){var f=e.failures,g=e.results,h=e.numFailures;e=e.lastResult;for(var i=0;i<a.length;++i){var j=g?g[i]:a[i],k=c[i];j==null?k.onerror&&k.onerror(f[i]):k.onsuccess&&k.onsuccess(d.type==="put"&&b[i]?d.values[i]:j)}return{failures:f,results:g,numFailures:h,lastResult:e}})["catch"](function(a){c.forEach(function(b){return b.onerror&&b.onerror(a)});return Promise.reject(a)})})}function n(a){return o(a.trans,a.range,1e4)}function o(a,c,d){return e.query({trans:a,values:!1,query:{index:f,range:c},limit:d}).then(function(e){var f=e.result;return m({type:"delete",keys:f,trans:a}).then(function(e){if(e.numFailures>0)return Promise.reject(e.failures[0]);if(f.length<d)return{failures:[],numFailures:0,lastResult:void 0};else return o(a,b(b({},c),{lower:f[f.length-1],lowerOpen:!0}),d)})})}}});return g}})}};function yd(a,b,c){return b.type==="add"?Promise.resolve([]):a.getMany({trans:b.trans,keys:c,cache:"immutable"})}function zd(a,b,c){try{if(!b)return null;if(b.keys.length<a.length)return null;var d=[];for(var e=0,f=0;e<b.keys.length&&f<a.length;++e){if(T(b.keys[e],a[f])!==0)continue;d.push(c?ga(b.values[e]):b.values[e]);++f}return d.length===a.length?d:null}catch(a){return null}}var Ad={stack:"dbcore",level:-1,create:function(a){return{table:function(c){var d=a.table(c);return b(b({},d),{getMany:function(a){if(!a.cache)return d.getMany(a);var b=zd(a.keys,a.trans._cache,a.cache==="clone");return b?J.resolve(b):d.getMany(a).then(function(b){a.trans._cache={keys:a.keys,values:a.cache==="clone"?ga(b):b};return b})},mutate:function(a){a.type!=="add"&&(a.trans._cache=null);return d.mutate(a)}})}}}};function Bd(a){return!("from"in a)}var Z=function(a,b){if(this)g(this,arguments.length?{d:1,from:a,to:arguments.length>1?b:a}:{d:0});else{var c=new Z();a&&"d"in a&&g(c,a);return c}};k(Z.prototype,(td={add:function(a){Dd(this,a);return this},addKey:function(a){Cd(this,a,a);return this},addKeys:function(a){var b=this;a.forEach(function(a){return Cd(b,a,a)});return this}},td[ka]=function(){return Fd(this)},td));function Cd(a,b,c){var d=T(b,c);if(isNaN(d))return;if(d>0)throw RangeError();if(Bd(a))return g(a,{from:b,to:c,d:1});d=a.l;var e=a.r;if(T(c,a.from)<0){d?Cd(d,b,c):a.l={from:b,to:c,d:1,l:null,r:null};return Gd(a)}if(T(b,a.to)>0){e?Cd(e,b,c):a.r={from:b,to:c,d:1,l:null,r:null};return Gd(a)}T(b,a.from)<0&&(a.from=b,a.l=null,a.d=e?e.d+1:1);T(c,a.to)>0&&(a.to=c,a.r=null,a.d=a.l?a.l.d+1:1);b=!a.r;d&&!a.l&&Dd(a,d);e&&b&&Dd(a,e)}function Dd(a,b){function c(a,b){var d=b.from,e=b.to,f=b.l;b=b.r;Cd(a,d,e);f&&c(a,f);b&&c(a,b)}Bd(b)||c(a,b)}function Ed(a,b){b=Fd(b);var c=b.next();if(c.done)return!1;var d=c.value;a=Fd(a);var e=a.next(d.from),f=e.value;while(!c.done&&!e.done){if(T(f.from,d.to)<=0&&T(f.to,d.from)>=0)return!0;T(d.from,f.from)<0?d=(c=b.next(f.from)).value:f=(e=a.next(d.from)).value}return!1}function Fd(a){var b=Bd(a)?null:{s:0,n:a};return{next:function(a){var c=arguments.length>0;while(b)switch(b.s){case 0:b.s=1;if(c)while(b.n.l&&T(a,b.n.from)<0)b={up:b,n:b.n.l,s:1};else while(b.n.l)b={up:b,n:b.n.l,s:1};case 1:b.s=2;if(!c||T(a,b.n.to)<=0)return{value:b.n,done:!1};case 2:if(b.n.r){b.s=3;b={up:b,n:b.n.r,s:0};continue}case 3:b=b.up}return{done:!0}}}}function Gd(a){var c;c=(((c=a.r)===null||c===void 0?void 0:c.d)||0)-(((c=a.l)===null||c===void 0?void 0:c.d)||0);c=c>1?"r":c<-1?"l":"";if(c){var d=c==="r"?"l":"r",e=b({},a),f=a[c];a.from=f.from;a.to=f.to;a[c]=f[c];e[c]=f[d];a[d]=e;e.d=Hd(e)}a.d=Hd(a)}function Hd(a){var b=a.r;a=a.l;return(b?a?Math.max(b.d,a.d):b.d:a?a.d:0)+1}var Id={stack:"dbcore",level:0,create:function(a){var c=a.schema.name,d=new Z(a.MIN_KEY,a.MAX_KEY);return b(b({},a),{table:function(g){var h=a.table(g),i=h.schema,j=i.primaryKey,k=j.extractKey,l=j.outbound,m=b(b({},h),{mutate:function(e){var j=e.trans,k=j.mutatedParts||(j.mutatedParts={}),l=function(a){a="idb://"+c+"/"+g+"/"+a;return k[a]||(k[a]=new Z())},m=l(""),n=l(":dels"),b=e.type;j=e.type==="deleteRange"?[e.range]:e.type==="delete"?[e.keys]:e.values.length<50?[[],e.values]:[];var a=j[0],o=j[1],p=e.trans._cache;return h.mutate(e).then(function(c){if(f(a)){b!=="delete"&&(a=c.results);m.addKeys(a);var e=zd(a,p);!e&&b!=="add"&&n.addKeys(a);(e||o)&&Jd(l,i,e,o)}else if(a){e={from:a.lower,to:a.upper};n.add(e);m.add(e)}else m.add(d),n.add(d),i.indexes.forEach(function(a){return l(a.name).add(d)});return c})}}),n=function(b){b=b.query;var c=b.index;b=b.range;return[c,new Z((c=b.lower)!==null&&c!==void 0?c:a.MIN_KEY,(c=b.upper)!==null&&c!==void 0?c:a.MAX_KEY)]},o={get:function(a){return[j,new Z(a.key)]},getMany:function(a){return[j,new Z().addKeys(a.keys)]},count:n,query:n,openCursor:n};e(o).forEach(function(a){m[a]=function(e){var f=H.subscr;if(f){var i=function(a){a="idb://"+c+"/"+g+"/"+a;return f[a]||(f[a]=new Z())},j=i(""),m=i(":dels"),n=o[a](e),p=n[0],q=n[1];i(p.name||"").add(q);if(!p.isPrimaryKey)if(a==="count")m.add(d);else{var r=a==="query"&&l&&e.values&&h.query(b(b({},e),{values:!1}));return h[a].apply(this,arguments).then(function(b){if(a==="query"){if(l&&e.values)return r.then(function(a){a=a.result;j.addKeys(a);return b});var c=e.values?b.result.map(k):b.result;e.values?j.addKeys(c):m.addKeys(c)}else if(a==="openCursor"){var d=b,f=e.values;return d&&Object.create(d,{key:{get:function(){m.addKey(d.primaryKey);return d.key}},primaryKey:{get:function(){var a=d.primaryKey;m.addKey(a);return a}},value:{get:function(){f&&j.addKey(d.primaryKey);return d.value}}})}return b})}}return h[a].apply(this,arguments)}});return m}})}};function Jd(a,b,c,d){function e(b){var e=a(b.name||"");function g(a){return a!=null?b.extractKey(a):null}var h=function(a){return b.multiEntry&&f(a)?a.forEach(function(a){return e.addKey(a)}):e.addKey(a)};(c||d).forEach(function(a,b){a=c&&g(c[b]);b=d&&g(d[b]);T(a,b)!==0&&(a!=null&&h(a),b!=null&&h(b))})}b.indexes.forEach(e)}var Kd=function(){function a(c,d){var e=this;this._middlewares={};this.verno=0;var f=a.dependencies;this._options=d=b({addons:a.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange},d);this._deps={indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange};f=d.addons;this._dbSchema={};this._versions=[];this._storeNames=[];this._allTables={};this.idbdb=null;this._novip=this;var g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:E,dbReadyPromise:null,cancelOpen:E,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};g.dbReadyPromise=new J(function(a){g.dbReadyResolve=a});g.openCanceller=new J(function(a,b){g.cancelOpen=b});this._state=g;this.name=c;this.on=Yb(this,"populate","blocked","versionchange","close",{ready:[Ia,E]});this.on.ready.subscribe=s(this.on.ready.subscribe,function(b){return function(c,d){a.vip(function(){var a=e._state;if(a.openComplete)a.dbOpenError||J.resolve().then(c),d&&b(c);else if(a.onReadyBeingFired)a.onReadyBeingFired.push(c),d&&b(c);else{b(c);var f=e;d||b(function a(){f.on.ready.unsubscribe(c),f.on.ready.unsubscribe(a)})}})}});this.Collection=oc(this);this.Table=$b(this);this.Transaction=Cc(this);this.Version=gd(this);this.WhereClause=yc(this);this.on("versionchange",function(a){a.newVersion>0?!1:!1,e.close()});this.on("blocked",function(a){!a.newVersion||a.newVersion<a.oldVersion?!1:!1});this._maxKey=Hc(d.IDBKeyRange);this._createTransaction=function(a,b,c,d){return new e.Transaction(a,b,c,e._options.chromeTransactionDurability,d)};this._fireOnBlocked=function(a){e.on("blocked").fire(a),Nb.filter(function(a){return a.name===e.name&&a!==e&&!a._state.vcFired}).map(function(b){return b.on("versionchange").fire(a)})};this.use(ud);this.use(xd);this.use(Id);this.use(Ad);this.vip=Object.create(this,{_vip:{value:!0}});f.forEach(function(a){return a(e)})}a.prototype.version=function(a){if(isNaN(a)||a<.1)throw new D.Type("Given version is not a positive number");a=Math.round(a*10)/10;if(this.idbdb||this._state.isBeingOpened)throw new D.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var b=this._versions,c=b.filter(function(b){return b._cfg.version===a})[0];if(c)return c;c=new this.Version(a);b.push(c);b.sort(Tc);c.stores({});this._state.autoSchema=!1;return c};a.prototype._whenReady=function(a){var b=this;return this.idbdb&&(this._state.openComplete||H.letThrough||this._vip)?a():new J(function(a,c){if(b._state.openComplete)return c(new D.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._options.autoOpen){c(new D.DatabaseClosed());return}b.open()["catch"](E)}b._state.dbReadyPromise.then(a,c)}).then(a)};a.prototype.use=function(a){var b=a.stack,c=a.create,d=a.level;a=a.name;a&&this.unuse({stack:b,name:a});var e=this._middlewares[b]||(this._middlewares[b]=[]);e.push({stack:b,create:c,level:d==null?10:d,name:a});e.sort(function(a,b){return a.level-b.level});return this};a.prototype.unuse=function(a){var b=a.stack,c=a.name,d=a.create;b&&this._middlewares[b]&&(this._middlewares[b]=this._middlewares[b].filter(function(a){return d?a.create!==d:c?a.name!==c:!1}));return this};a.prototype.open=function(){return od(this)};a.prototype._close=function(){var a=this._state,b=Nb.indexOf(this);b>=0&&Nb.splice(b,1);if(this.idbdb){try{this.idbdb.close()}catch(a){}this._novip.idbdb=null}a.dbReadyPromise=new J(function(b){a.dbReadyResolve=b});a.openCanceller=new J(function(b,c){a.cancelOpen=c})};a.prototype.close=function(){this._close();var a=this._state;this._options.autoOpen=!1;a.dbOpenError=new D.DatabaseClosed();a.isBeingOpened&&a.cancelOpen(a.dbOpenError)};a.prototype["delete"]=function(){var a=this,b=arguments.length>0,c=this._state;return new J(function(d,e){var f=function(){a.close();var b=a._deps.indexedDB.deleteDatabase(a.name);b.onsuccess=K(function(){ld(a._deps,a.name),d()});b.onerror=W(e);b.onblocked=a._fireOnBlocked};if(b)throw new D.InvalidArgument("Arguments not allowed in db.delete()");c.isBeingOpened?c.dbReadyPromise.then(f):f()})};a.prototype.backendDB=function(){return this.idbdb};a.prototype.isOpen=function(){return this.idbdb!==null};a.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"};a.prototype.hasFailed=function(){return this._state.dbOpenError!==null};a.prototype.dynamicallyOpened=function(){return this._state.autoSchema};Object.defineProperty(a.prototype,"tables",{get:function(){var a=this;return e(this._allTables).map(function(b){return a._allTables[b]})},enumerable:!1,configurable:!0});a.prototype.transaction=function(){var a=qd.apply(this,arguments);return this._transaction.apply(this,a)};a.prototype._transaction=function(a,b,c){var d=this,e=H.trans;(!e||e.db!==this||a.indexOf("!")!==-1)&&(e=null);var f=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");var g,h;try{h=b.map(function(a){a=a instanceof d.Table?a.name:a;if(typeof a!=="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return a});if(a=="r"||a===Tb)g=Tb;else if(a=="rw"||a==Ub)g=Ub;else throw new D.InvalidArgument("Invalid transaction mode: "+a);if(e){if(e.mode===Tb&&g===Ub)if(f)e=null;else throw new D.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");e&&h.forEach(function(a){if(e&&e.storeNames.indexOf(a)===-1)if(f)e=null;else throw new D.SubTransaction("Table "+a+" not included in parent transaction.")});f&&e&&!e.active&&(e=null)}}catch(a){return e?e._promise(null,function(b,c){c(a)}):P(a)}var i=rd.bind(null,this,g,h,e,c);return e?e._promise(g,i,"lock"):H.trans?Eb(H.transless,function(){return d._whenReady(i)}):this._whenReady(i)};a.prototype.table=function(a){if(!j(this._allTables,a))throw new D.InvalidTable("Table "+a+" does not exist");return this._allTables[a]};return a}(),Ld=typeof Symbol!=="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",Md=function(){function a(a){this._subscribe=a}a.prototype.subscribe=function(a,b,c){return this._subscribe(!a||typeof a==="function"?{next:a,error:b,complete:c}:a)};a.prototype[Ld]=function(){return this};return a}();function Nd(a,b){e(b).forEach(function(c){var d=a[c]||(a[c]=new Z());Dd(d,b[c])});return a}function Od(a){return new Md(function(b){var c=na(a);function d(b){c&&zb();var d=function(){return M(a,{subscr:b,trans:null})};d=H.trans?Eb(H.transless,d):d();c&&d.then(N,N);return d}var f=!1,g={},h={},i={get closed(){return f},unsubscribe:function(){f=!0,Y.storagemutated.unsubscribe(m)}};b.start&&b.start(i);var j=!1,k=!1;function l(){return e(h).some(function(a){return g[a]&&Ed(g[a],h[a])})}var m=function(a){Nd(g,a),l()&&n()},n=function(){if(j||f)return;g={};var a={},c=d(a);k||(Y(Ac,m),k=!0);j=!0;Promise.resolve(c).then(function(c){j=!1;if(f)return;l()?n():(g={},h=a,b.next&&b.next(c))},function(a){j=!1,b.error&&b.error(a),i.unsubscribe()})};n();return i})}try{td={indexedDB:d.indexedDB||d.mozIndexedDB||d.webkitIndexedDB||d.msIndexedDB,IDBKeyRange:d.IDBKeyRange||d.webkitIDBKeyRange}}catch(a){td={indexedDB:null,IDBKeyRange:null}}var Pd=Kd;k(Pd,b(b({},C),{"delete":function(a){a=new Pd(a,{addons:[]});return a["delete"]()},exists:function(a){return new Pd(a,{addons:[]}).open().then(function(a){a.close();return!0})["catch"]("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return jd(Pd.dependencies).then(a)}catch(a){return P(new D.MissingAPI())}},defineClass:function(){function a(a){g(this,a)}return a},ignoreTransaction:function(a){return H.trans?Eb(H.transless,a):a()},vip:md,async:function(a){return function(){try{var b=pd(a.apply(this,arguments));return!b||typeof b.then!=="function"?J.resolve(b):b}catch(a){return P(a)}}},spawn:function(a,b,c){try{a=pd(a.apply(c,b||[]));return!a||typeof a.then!=="function"?J.resolve(a):a}catch(a){return P(a)}},currentTransaction:{get:function(){return H.trans||null}},waitFor:function(a,b){a=J.resolve(typeof a==="function"?Pd.ignoreTransaction(a):a).timeout(b||6e4);return H.trans?H.trans.waitFor(a):a},Promise:J,debug:{get:function(){return B},set:function(a){oa(a,a==="dexie"?function(){return!0}:Rb)}},derive:n,extend:g,props:k,override:s,Events:Yb,on:Y,liveQuery:Od,extendObservabilitySet:Nd,getByKeyPath:w,setByKeyPath:x,delByKeyPath:ba,shallowClone:ca,deepClone:ga,getObjectDiff:vd,cmp:T,asap:u,minKey:Lb,addons:[],connections:Nb,errnames:ya,dependencies:td,semVer:y,version:y.split(".").map(function(a){return parseInt(a)}).reduce(function(a,b,c){return a+b/Math.pow(10,c*2)})}));Pd.maxKey=Hc(Pd.dependencies.IDBKeyRange);typeof dispatchEvent!=="undefined"&&typeof addEventListener!=="undefined"&&(Y(Ac,function(a){if(!$){var b;Ob?(b=document.createEvent("CustomEvent"),b.initCustomEvent(X,!0,!0,a)):b=new CustomEvent(X,{detail:a});$=!0;dispatchEvent(b);$=!1}}),addEventListener(X,function(a){a=a.detail;$||Qd(a)}));function Qd(a){var b=$;try{$=!0,Y.storagemutated.fire(a)}finally{$=b}}var $=!1;if(typeof BroadcastChannel!=="undefined"){var Rd=new BroadcastChannel(X);Y(Ac,function(a){$||Rd.postMessage(a)});Rd.onmessage=function(a){a.data&&Qd(a.data)}}else if(typeof self!=="undefined"&&typeof navigator!=="undefined"){Y(Ac,function(a){try{$||(typeof localStorage!=="undefined"&&localStorage.setItem(X,JSON.stringify({trig:Math.random(),changedParts:a})),typeof self.clients==="object"&&c([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(b){return b.postMessage({type:X,changedParts:a})}))}catch(a){}});typeof addEventListener!=="undefined"&&addEventListener("storage",function(a){if(a.key===X){a=JSON.parse(a.newValue);a&&Qd(a.changedParts)}});C=self.document&&navigator.serviceWorker;C&&C.addEventListener("message",Sd)}function Sd(a){a=a.data;a&&a.type===X&&Qd(a.changedParts)}J.rejectionMapper=Ba;oa(B,Rb);ba=Object.freeze({__proto__:null,Dexie:Kd,liveQuery:Od,"default":Kd,RangeSet:Z,mergeRanges:Dd,rangesOverlap:Ed});b(Kd,ba,{"default":Kd});return Kd})}var k=!1;function l(){k||(k=!0,j());return h.exports}function b(a){switch(a){case void 0:return l()}}e.exports=b}),null);
/**
 * License: https://www.facebook.com/legal/license/OKBVmODmb-W/
 */
__d("tweetnacl-auth-1.0.1",["tweetnacl-1.0.3"],(function(a,b,c,d,e,f){"use strict";function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("tweetnacl-1.0.3"));d={};var h={exports:d};function i(){(function(a,b){typeof h!=="undefined"&&h.exports?h.exports=b(g()):a.nacl.auth=b(a.nacl)})(this,function(a){if(!a)throw new Error("tweetnacl not loaded");var b=128,c=64;function d(d,e){var f=new Uint8Array(b+Math.max(c,d.length)),g;e.length>b&&(e=a.hash(e));for(g=0;g<b;g++)f[g]=54;for(g=0;g<e.length;g++)f[g]^=e[g];f.set(d,b);d=a.hash(f.subarray(0,b+d.length));for(g=0;g<b;g++)f[g]=92;for(g=0;g<e.length;g++)f[g]^=e[g];f.set(d,b);return a.hash(f.subarray(0,b+d.length))}function e(a,b){var c=new Uint8Array(32);c.set(d(a,b).subarray(0,32));return c}e.full=function(a,b){return d(a,b)};e.authLength=32;e.authFullLength=64;e.keyLength=32;return e})}var j=!1;function k(){j||(j=!0,i());return h.exports}function c(a){switch(a){case void 0:return k()}}e.exports=c}),null);
__d("tweetnacl-auth",["tweetnacl-auth-1.0.1"],(function(a,b,c,d,e,f){e.exports=b("tweetnacl-auth-1.0.1")()}),null);/*FB_PKG_DELIM*/
__d("MWToast.react",["deferredLoadComponent","gkx","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("gkx")("571"),j=c("deferredLoadComponent")(c("requireDeferred")("MDSToast.react").__setRef("MWToast.react")),k=c("deferredLoadComponent")(c("requireDeferred")("CometToast.react").__setRef("MWToast.react"));function a(a){var b,c=a.body,d=a.icon,e=a.onDismiss,f=a.startAddOn;f=f===void 0?null:f;var g=a.supressCloseButton;g=g===void 0?!1:g;var l=a.testid;l=l===void 0?"mw-toast":l;a=a.title;var m=(d==null?void 0:d.mds)!=null?{source:d==null?void 0:d.mds,type:"icon"}:void 0;d=(d=d==null?void 0:d.comet)!=null?d:void 0;b=a!=null&&c!=null?h.jsxs(h.Fragment,{children:[a,h.jsx("br",{}),c]}):(b=(b=a)!=null?b:c)!=null?b:"";c={body:c,onDismiss:e,startAddOn:f!==null?f:m,testid:l,title:a,withCloseButton:!g};f={icon:d,message:b,onDismiss:e,supressCloseButton:g,testid:l};return i?h.jsx(j,babelHelpers["extends"]({},c)):h.jsx(k,babelHelpers["extends"]({},f))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("mwPushToast",["ix","BaseToasterStateManager","MWToast.react","cr:2344","cr:4379","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=c("BaseToasterStateManager").getInstance();function k(a,b){var d=a.body,e=a.icon,f=a.startAddOn;f=f===void 0?null:f;var g=a.supressCloseButton;g=g===void 0?!1:g;a=a.title;b===void 0&&(b=2750);var h=j.push(i.jsx(c("MWToast.react"),{body:d,icon:e,onDismiss:function(){return j.expire(h)},startAddOn:f,supressCloseButton:g,title:a}),b);return h}function a(a,c){var e,f=a.body;a=a.title;c===void 0&&(c=2750);var g=b("cr:2344")!==null?i.jsx(b("cr:2344"),{color:"warning",icon:d("fbicon")._(h("502062"),20)}):void 0;e=(e=b("cr:4379"))!=null?e:void 0;return k({body:f,icon:{comet:g,mds:e},title:a},c)}g.mwPushToast=k;g.mwPushErrorToast=a}),98);
__d("mwReplaceToast",["BaseToasterStateManager","MWToast.react","err","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("BaseToasterStateManager").getInstance();function a(a){var b=a.body,d=a.icon,e=a.startAddOn;e=e===void 0?null:e;var f=a.supressCloseButton;f=f===void 0?!1:f;var g=a.title,j=a.toastId;if(j==null){c("err")("toastId or toasterStateManager is not provided");return}i.replace(j,h.jsx(c("MWToast.react"),{body:b,icon:d,onDismiss:function(){return i.expire(j)},startAddOn:e,supressCloseButton:f,title:g}))}g.mwReplaceToast=a}),98);
__d("MAWCryptoAuthTokenWrapper",["MessengerWebInitData"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("MessengerWebInitData").cryptoAuthToken}g.getCryptoAuthToken=a}),98);
__d("MAWDeviceRegistrationActions",["MAWCurrentUser","MAWDexieTable","MessengerWebInitData","SignalDbTypes","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": signedPrekey}"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Device Registration Meta Check] Device Id should be a number"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["MAWDeviceRegistrationActions: sessionId is null"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": ",""]);o=function(){return a};return a}var p="Device registration meta is incomplete: ";function q(a,b,c,e,f){(a!=null||b!=null||c!=null||e!=null||f!=null)&&(a==null&&d("WALogger").ERROR(o(),p,d("SignalDbTypes").MetaKeysEnum.lastSignedPrekeyId),b==null&&d("WALogger").ERROR(n(),p,d("SignalDbTypes").MetaKeysEnum.deviceUUID),c==null&&d("WALogger").ERROR(m(),p,d("SignalDbTypes").MetaKeysEnum.regId),e==null&&d("WALogger").ERROR(l(),p,d("SignalDbTypes").MetaKeysEnum.identityKeyPair),f==null&&d("WALogger").ERROR(k(),p,d("SignalDbTypes").MetaKeysEnum.fbid))}function a(a){return a.meta.bulkGet([d("SignalDbTypes").MetaKeysEnum.lastSignedPrekeyId,d("SignalDbTypes").MetaKeysEnum.deviceUUID,d("SignalDbTypes").MetaKeysEnum.regId,d("SignalDbTypes").MetaKeysEnum.identityKeyPair,d("SignalDbTypes").MetaKeysEnum.fbid,d("SignalDbTypes").MetaKeysEnum.deviceId]).then(function(b){var e=b[0],f=b[1],g=b[2],k=b[3],l=b[4];b=b[5];var m=e==null?void 0:(e=e.value)==null?void 0:e.lastSignedPrekeyId,n=f==null?void 0:(e=f.value)==null?void 0:e.deviceUUID,o=g==null?void 0:(f=g.value)==null?void 0:f.regId,r=k==null?void 0:(e=k.value)==null?void 0:e.identityKeyPair;f=l==null?void 0:(g=l.value)==null?void 0:g.fbid;var s=b==null?void 0:(k=b.value)==null?void 0:k.deviceId;if(m==null||n==null||o==null||r==null||f==null){q(m,n,o,r,f);return null}c("MessengerWebInitData").sessionId==null&&d("WALogger").ERROR(j());if(s!=null&&typeof s!=="number"){d("WALogger").ERROR(i());return null}return a.signedPrekey.get(m).then(function(a){if(a==null){d("WALogger").ERROR(h(),p);return null}return{deviceId:s,deviceUUID:n,lastSignedPrekeyId:m,signalRegInfo:{identityKeyPair:r,regId:o,signedPreKey:a}}})})}function b(a,b){return d("MAWDexieTable").dexieAll([a.meta.bulkPut([{key:d("SignalDbTypes").MetaKeysEnum.deviceUUID,value:{deviceUUID:b.deviceUUID}},{key:d("SignalDbTypes").MetaKeysEnum.fbid,value:{fbid:d("MAWCurrentUser").getID()}},{key:d("SignalDbTypes").MetaKeysEnum.regId,value:{regId:b.signalRegInfo.regId}},{key:d("SignalDbTypes").MetaKeysEnum.identityKeyPair,value:{identityKeyPair:b.signalRegInfo.identityKeyPair}},{key:d("SignalDbTypes").MetaKeysEnum.lastSignedPrekeyId,value:{lastSignedPrekeyId:b.signalRegInfo.signedPreKey.keyId}}]),a.signedPrekey.put(b.signalRegInfo.signedPreKey)])}function e(a,b){return a.meta.put({key:d("SignalDbTypes").MetaKeysEnum.deviceId,value:{deviceId:b}})}function f(a,b,c){return a.contacts.get(b).then(function(d){if(d!=null)return a.contacts.put(babelHelpers["extends"]({},d,{icdcInfo:c}));else return a.contacts.put({contactJid:b,devices:[],dhash:null,icdcInfo:c})}).then(function(){})}g.logErrorOnIncompleteRegistrationMeta=q;g.getRegistrationMeta=a;g.saveUnsentRegistrationMeta=b;g.saveDeviceId=e;g.saveICDC=f}),98);
__d("WACryptoPrimitives",["tweetnacl"],(function(a,b,c,d,e,f,g){a={scalarbase:d("tweetnacl").lowlevel.scalarbase,crypto_hash:d("tweetnacl").lowlevel.crypto_hash,modL:d("tweetnacl").lowlevel.modL,pack25519:d("tweetnacl").lowlevel.pack25519,S:d("tweetnacl").lowlevel.S,M:d("tweetnacl").lowlevel.M,A:d("tweetnacl").lowlevel.A,Z:d("tweetnacl").lowlevel.Z,D:d("tweetnacl").lowlevel.D,unpack25519:d("tweetnacl").lowlevel.unpack25519,pow2523:d("tweetnacl").lowlevel.pow2523,crypto_verify_32:d("tweetnacl").lowlevel.crypto_verify_32,set25519:d("tweetnacl").lowlevel.set25519,add:d("tweetnacl").lowlevel.add,scalarmult:d("tweetnacl").lowlevel.scalarmult};g.hash=d("tweetnacl").hash;g.scalarMult=d("tweetnacl").scalarMult;g.verify=d("tweetnacl").verify;g.lowlevel=a;g.keypairFromSecretKey=d("tweetnacl").box.keyPair.fromSecretKey;g.keyPair=d("tweetnacl").box.keyPair;g.signDetachedVerify=d("tweetnacl").sign.detached.verify}),98);
__d("WACryptoUtils",["WACryptoPrimitives"],(function(a,b,c,d,e,f,g){function a(a,b){return h(new Uint8Array(a),new Uint8Array(b))}function h(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function b(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function c(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function e(a){if(a!==(a|0))throw new Error("bound must be int32");if(a<=0)throw new Error("bound must not be positive");var b=new Int32Array(1),c=-1>>>1;c=a*Math.floor(c/a);var d=-1;while(d===-1){self.crypto.getRandomValues(b);var e=b[0]>>>1;e<c&&(d=e%a)}return d}g.arrayBuffersEqual=a;g.uint8ArraysEqual=h;g.rawKeysEqual=b;g.serializedPubKeysEqual=c;g.randomNumberLessThan=e}),98);
__d("WASignalLocalStorageProtocol.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={},j={},k={},l={},m={},n={},o={},p={},q={};a.internalSpec={sessionVersion:[1,d("WAProtoConst").TYPES.UINT32],localIdentityPublic:[2,d("WAProtoConst").TYPES.BYTES],remoteIdentityPublic:[3,d("WAProtoConst").TYPES.BYTES],rootKey:[4,d("WAProtoConst").TYPES.BYTES],previousCounter:[5,d("WAProtoConst").TYPES.UINT32],senderChain:[6,d("WAProtoConst").TYPES.MESSAGE,e],receiverChains:[7,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,e],pendingKeyExchange:[8,d("WAProtoConst").TYPES.MESSAGE,c],pendingPreKey:[9,d("WAProtoConst").TYPES.MESSAGE,b],remoteRegistrationId:[10,d("WAProtoConst").TYPES.UINT32],localRegistrationId:[11,d("WAProtoConst").TYPES.UINT32],needsRefresh:[12,d("WAProtoConst").TYPES.BOOL],aliceBaseKey:[13,d("WAProtoConst").TYPES.BYTES]};b.internalSpec={preKeyId:[1,d("WAProtoConst").TYPES.UINT32],signedPreKeyId:[3,d("WAProtoConst").TYPES.INT32],baseKey:[2,d("WAProtoConst").TYPES.BYTES]};c.internalSpec={sequence:[1,d("WAProtoConst").TYPES.UINT32],localBaseKey:[2,d("WAProtoConst").TYPES.BYTES],localBaseKeyPrivate:[3,d("WAProtoConst").TYPES.BYTES],localRatchetKey:[4,d("WAProtoConst").TYPES.BYTES],localRatchetKeyPrivate:[5,d("WAProtoConst").TYPES.BYTES],localIdentityKey:[7,d("WAProtoConst").TYPES.BYTES],localIdentityKeyPrivate:[8,d("WAProtoConst").TYPES.BYTES]};e.internalSpec={senderRatchetKey:[1,d("WAProtoConst").TYPES.BYTES],senderRatchetKeyPrivate:[2,d("WAProtoConst").TYPES.BYTES],chainKey:[3,d("WAProtoConst").TYPES.MESSAGE,h],messageKeys:[4,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,f]};f.internalSpec={index:[1,d("WAProtoConst").TYPES.UINT32],cipherKey:[2,d("WAProtoConst").TYPES.BYTES],macKey:[3,d("WAProtoConst").TYPES.BYTES],iv:[4,d("WAProtoConst").TYPES.BYTES]};h.internalSpec={index:[1,d("WAProtoConst").TYPES.UINT32],key:[2,d("WAProtoConst").TYPES.BYTES]};i.internalSpec={currentSession:[1,d("WAProtoConst").TYPES.MESSAGE,a],previousSessions:[2,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,a]};j.internalSpec={id:[1,d("WAProtoConst").TYPES.UINT32],publicKey:[2,d("WAProtoConst").TYPES.BYTES],privateKey:[3,d("WAProtoConst").TYPES.BYTES]};k.internalSpec={id:[1,d("WAProtoConst").TYPES.UINT32],publicKey:[2,d("WAProtoConst").TYPES.BYTES],privateKey:[3,d("WAProtoConst").TYPES.BYTES],signature:[4,d("WAProtoConst").TYPES.BYTES],timestamp:[5,d("WAProtoConst").TYPES.FIXED64]};l.internalSpec={publicKey:[1,d("WAProtoConst").TYPES.BYTES],privateKey:[2,d("WAProtoConst").TYPES.BYTES]};m.internalSpec={senderKeyId:[1,d("WAProtoConst").TYPES.UINT32],senderChainKey:[2,d("WAProtoConst").TYPES.MESSAGE,p],senderSigningKey:[3,d("WAProtoConst").TYPES.MESSAGE,n],senderMessageKeys:[4,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,o]};n.internalSpec={"public":[1,d("WAProtoConst").TYPES.BYTES],"private":[2,d("WAProtoConst").TYPES.BYTES]};o.internalSpec={iteration:[1,d("WAProtoConst").TYPES.UINT32],seed:[2,d("WAProtoConst").TYPES.BYTES]};p.internalSpec={iteration:[1,d("WAProtoConst").TYPES.UINT32],seed:[2,d("WAProtoConst").TYPES.BYTES]};q.internalSpec={senderKeyStates:[1,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,m]};g.SessionStructureSpec=a;g.PendingPreKeySpec=b;g.PendingKeyExchangeSpec=c;g.ChainSpec=e;g.MessageKeySpec=f;g.ChainKeySpec=h;g.RecordStructureSpec=i;g.PreKeyRecordStructureSpec=j;g.SignedPreKeyRecordStructureSpec=k;g.IdentityKeyPairStructureSpec=l;g.SenderKeyStateStructureSpec=m;g.SenderSigningKeySpec=n;g.SenderMessageKeySpec=o;g.SenderChainKeySpec=p;g.SenderKeyRecordStructureSpec=q}),98);
__d("WACryptoHkdf",["Promise","WABinary","WACryptoHmac"],(function(a,b,c,d,e,f,g){var h=255*d("WACryptoHmac").SHA256_BYTE_LENGTH;function i(a,c,e){if(e<0||e>h)return b("Promise").reject(new Error("HKDF::expand given bad length "+e));var f,g=Math.ceil(e/d("WACryptoHmac").SHA256_BYTE_LENGTH),i=d("WABinary").Binary.build(c).readByteArray(),j=new(d("WABinary").Binary)(),k=d("WACryptoHmac").encodeKeySha256(a).then(function(a){f=a;return new Uint8Array(0)});c=function(a){k=k.then(function(b){return d("WACryptoHmac").sign(f,d("WABinary").Binary.build(b,i,a).readByteArray())}).then(function(a){a=new Uint8Array(a);j.writeByteArray(a);return a})};for(var a=1;a<=g;a++)c(a);return k.then(function(){return j.readBuffer(e)})}function a(a,b,c){return d("WACryptoHmac").extractSha256(null,a).then(function(a){return i(new Uint8Array(a),b,c)})}function c(a,b,c,e){return d("WACryptoHmac").extractSha256(b,a).then(function(a){return i(new Uint8Array(a),c,e)})}g.expand=i;g.extractAndExpand=a;g.extractWithSaltAndExpand=c}),98);
__d("WASignalOther",["WACryptoHkdf","WACryptoUtils","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){var h={name:"AES-CBC"},i={name:"HMAC",hash:"SHA-256"};function j(a,b){if(a.length!==b)throw new Error("Signal expected "+b+" bytes, given "+a.length);return a}function a(a,b){return j(new Uint8Array(a),b)}function b(a){var b=a.buffer,c=a.byteOffset;a=a.length;return c===0&&a===b.byteLength?b:b.slice(c,c+a)}function c(a,b){return a.readByteArray(b)}function e(a){return new Uint8Array(a)}function f(a,b,c){if(a.length-b<c)throw new Error("Can not split off "+c+" bytes from index "+b+" of "+a.length+" bytes");return a.slice(b,b+c)}function k(a){a=a==="extendedRange"?(-1>>>1)-1:16380;return d("WACryptoUtils").randomNumberLessThan(a)+1}function l(a){return o(a)}function m(){var a=-1>>>1;return d("WACryptoUtils").randomNumberLessThan(a)+1}function n(a){return o(a)}function o(a,b,c){b===void 0&&(b=0);c===void 0&&(c=4294967296);if(typeof a==="number"&&b<=a&&a<c&&Math.floor(a)===a)return a;else throw new Error("Expected integer in range ["+b+", "+c+"), given "+String(a))}function p(a,b){return d("encodeProtobuf").encodeProtobuf(a,b).readByteArray()}function q(a,b,c){return c(d("decodeProtobuf").decodeProtobuf(a,b))}function r(a,b,c,e){return d("WACryptoHkdf").extractWithSaltAndExpand(a,b,c,e).then(function(a){return new Uint8Array(a)})}function s(a,b){var c,d;b==="hmac-sha256"?(c=i,d=["sign"]):(b,c=h,d=["encrypt","decrypt"]);return self.crypto.subtle.importKey("raw",a,c,!1,d)}function t(a){return a}function u(a){return a}function v(a,b){return d("WACryptoUtils").arrayBuffersEqual(a,b)}g.AES_CBC=h;g.HMAC_SHA256=i;g.ensureSize=j;g.toBytes=a;g.toBuffer=b;g.readBytes=c;g.makeBytes=e;g.sliceBytes=f;g.makeRegistrationId=k;g.castRegistrationId=l;g.makeSenderKeyId=m;g.castSenderKeyId=n;g.ensureIntInRange=o;g.encodeSignalProto=p;g.decodeSignalProto=q;g.hkdf=r;g.makeCryptoKey=s;g.castToByteEncoded=t;g.castToSessionHash=u;g.areSessionHashesEqual=v}),98);
__d("WASignalKeys",["WACryptoPrimitives","WASignalLocalStorageProtocol.pb","WASignalOther","decodeProtobuf"],(function(a,b,c,d,e,f,g){var h=5,i=16777215;function j(a,b){return{publicKey:a,privateKey:b}}function a(a){a=d("WACryptoPrimitives").keypairFromSecretKey(a);var b=a.publicKey;a=a.secretKey;return j(d("WASignalOther").ensureSize(b,32),d("WASignalOther").ensureSize(a,32))}function b(a,b){return{publicKey:d("WASignalOther").toBytes(a,32),privateKey:d("WASignalOther").toBytes(b,32)}}function k(){var a=d("WACryptoPrimitives").keyPair(),b=a.publicKey;a=a.secretKey;a[0]&=248;a[31]=64|a[31]&63;return j(d("WASignalOther").ensureSize(b,32),d("WASignalOther").ensureSize(a,32))}function l(a,b){return j(d("WASignalOther").sliceBytes(b,1,32),a)}function m(a,b){return{serializedPubKey:b,privateKey:a}}function c(){var a=k();return m(a.privateKey,n(a))}function n(a){var b=d("WASignalOther").makeBytes(33);b[0]=h;b.set(a.publicKey,1);return b}function e(a){var b=d("WASignalOther").makeBytes(33);b[0]=h;b.set(d("WASignalOther").ensureSize(a,32),1);return b}function f(a){return m(a.privateKey,n(a))}function o(a,b){a=(a-1)%i;a<=0&&(a+=i);var c=[];for(var e=0;e<b;e++){var f=a===i?1:a+1,g=k(),h=d("WASignalOther").encodeSignalProto(d("WASignalLocalStorageProtocol.pb").PreKeyRecordStructureSpec,{id:f,publicKey:n(g),privateKey:g.privateKey});c.push({plainObject:{id:f,keyPair:g},record:h});a=f}return c}function p(a){try{a=d("decodeProtobuf").decodeProtobuf(d("WASignalLocalStorageProtocol.pb").PreKeyRecordStructureSpec,a);var b=a.id,c=a.publicKey;a=a.privateKey;return b==null||c==null||a==null?null:{id:q(b),keyPair:l(d("WASignalOther").toBytes(a,32),r(new Uint8Array(c)))}}catch(a){return null}}function q(a){return d("WASignalOther").ensureIntInRange(a,1,i)}function r(a){if(a.length===0||a[0]!==h)throw new Error("Unrecognized public key type");return d("WASignalOther").ensureSize(a,33)}function s(){var a=d("WASignalOther").makeBytes(32);self.crypto.getRandomValues(a);return a}function t(a,b){return d("WACryptoPrimitives").scalarMult(a,b.subarray(1)).buffer}g.KEY_TYPE=h;g.makeKeyPairFrom=a;g.makeKeyPairFromArrayBuffers=b;g.makeKeyPair=k;g.makeKeyPairFromSerialized=l;g.makeSerializedKeyPairFrom=m;g.makeSerializedKeyPair=c;g.serializePubKey=n;g.serializeIdentity=e;g.toSerializedKeyPair=f;g.makePreKeys=o;g.deserializePreKey=p;g.castToPreKeyId=q;g.castToSerializedPubKey=r;g.makeRawSenderKey=s;g.ecdh=t}),98);
__d("WACryptoEd25519",["WACryptoPrimitives"],(function(a,b,c,d,e,f,g){var h=null;function i(a){var b=h;h=[];try{return a()}finally{((a=h)!=null?a:[]).forEach(function(a){return void a.fill(0)});h=b}}function j(a,b){if(h==null)throw new Error("allocate called outside of active scope");return new a(b)}function a(a,b,c){d("WACryptoPrimitives").lowlevel.crypto_hash(a,b,c)}function b(a,b){for(var c=0;c<64;++c)b[c]=a[c],a[c]=0;l(a,b);b.fill(0)}function c(a,b){var c=[k(),k(),k(),k()];d("WACryptoPrimitives").lowlevel.scalarbase(c,b);Q(a,c)}function k(a){var b=j(Float64Array,16);if(a){if(a.length>16)throw new Error("Incorrect initialiser array provided to the fieldElement");for(var c=0;c<a.length;c++)b[c]=a[c]}return b}function l(a,b){d("WACryptoPrimitives").lowlevel.modL(a,b)}var m=function(){return k([0])},n=function(){return k([1])},o=function(){return k([2])},p=function(){return k([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139])};function q(){return[k(),k(),k(),k()]}function r(){return[k(),k(),k(),k()]}function s(){return[k(),k(),k()]}function t(a,b){var c=0;b=b;while(b>0){var d=b%65536;a[c]=d;b=(b-d)/65536;c++}}function u(a,b){return S(a,b)?0:1}function v(a){var b=d("WACryptoPrimitives").lowlevel.pack25519,c=j(Uint8Array,32);b(c,a);return c[0]&1}function w(a,b){var c=d("WACryptoPrimitives").lowlevel.S,e=d("WACryptoPrimitives").lowlevel.M,f=o(),g=k();c(g,b);e(a,f,g)}function x(a,b){var c=d("WACryptoPrimitives").lowlevel.S,e=d("WACryptoPrimitives").lowlevel.M,f=d("WACryptoPrimitives").lowlevel.A,g=m(),h=n(),i=k(),j=k(),l=k(),o=k();t(g,486662);c(i,b);e(j,g,b);f(l,i,j);f(o,l,h);e(a,b,o)}function y(a,b,c){c===1&&a.set(b)}var z=new Uint8Array([176,160,14,74,39,27,238,196,120,228,47,173,6,24,67,47,167,215,251,61,153,0,77,43,11,223,193,79,128,36,131,43]);function A(a,b){var c=d("WACryptoPrimitives").lowlevel.unpack25519,e=d("WACryptoPrimitives").lowlevel.pow2523,f=d("WACryptoPrimitives").lowlevel.M,g=d("WACryptoPrimitives").lowlevel.S,h=k();c(h,z);c=k();e(c,b);e=k();f(e,b,c);c=k();g(c,e);g=k();f(g,e,h);y(e,g,1^u(c,b));a.set(e)}function B(a,b){var c=d("WACryptoPrimitives").lowlevel.Z,e=d("WACryptoPrimitives").lowlevel.A,f=d("WACryptoPrimitives").lowlevel.M,g=n(),h=k(),i=k(),j=k();c(h,b,g);e(i,b,g);R(j,i);f(a,h,j)}function C(a,b){var c=d("WACryptoPrimitives").lowlevel.Z,e=m();c(a,e,b)}function D(a,b){var c=d("WACryptoPrimitives").lowlevel.M;c(a[0],b[0],b[3]);c(a[1],b[1],b[2]);c(a[2],b[2],b[3])}function E(a,b){var c=d("WACryptoPrimitives").lowlevel.M;c(a[0],b[0],b[3]);c(a[1],b[1],b[2]);c(a[2],b[2],b[3]);c(a[3],b[0],b[1])}function F(a,b){var c=d("WACryptoPrimitives").lowlevel.S,e=d("WACryptoPrimitives").lowlevel.A,f=d("WACryptoPrimitives").lowlevel.Z;c(a[0],b[0]);c(a[2],b[1]);w(a[3],b[2]);e(a[1],b[0],b[1]);b=k();c(b,a[1]);e(a[1],a[2],a[0]);f(a[2],a[2],a[0]);f(a[0],b,a[1]);f(a[3],a[3],a[2])}var G=new Uint8Array([6,126,69,255,170,4,110,204,130,26,125,75,209,211,161,197,126,79,252,3,220,8,123,210,187,6,160,96,244,237,38,15]);function H(a,b,c){var e=d("WACryptoPrimitives").lowlevel.unpack25519,f=d("WACryptoPrimitives").lowlevel.M,g=k();e(g,G);e=k();B(e,b);var h=k();x(h,b);var i=k();A(i,h);h=k();f(h,b,g);b=k();R(b,i);g=k();f(g,h,b);i=k();C(i,g);y(g,i,v(g)^c);a[0].set(g);a[1].set(e);a[2].set(n());f(a[3],a[0],a[1])}function I(a,b){a[0].set(b[0]),a[1].set(b[1]),a[2].set(b[2])}function J(a,b){var c=s();I(c,b);F(a,c)}function K(a,b){var c=r(),d=s();J(c,b);D(d,c);F(c,d);D(d,c);F(c,d);E(a,c)}function L(a){var b=d("WACryptoPrimitives").lowlevel.S,c=d("WACryptoPrimitives").lowlevel.M,e=d("WACryptoPrimitives").lowlevel.pow2523,f=d("WACryptoPrimitives").lowlevel.pack25519,g=k(),h=k(),i=k(),j=k(),l=k();e(g,a);b(h,g);b(i,h);c(j,i,a);c(l,j,a);e=new Uint8Array(32);f(e,l);return 1&e[31]}function M(a,b){C(a[0],b[0]),a[1].set(b[1]),a[2].set(b[2]),C(a[3],b[3])}function e(a,b){var c=q();b=T(c,b);if(b!==0)return-1;M(a,c);return 0}function N(a,b){var c=d("WACryptoPrimitives").lowlevel.M,e=d("WACryptoPrimitives").lowlevel.A;b=b;var f=n(),g=m();t(g,486662);var h=k();w(h,b);b=k();e(b,h,f);h=k();R(h,b);f=k();c(f,h,g);b=k();C(b,f);c=k();x(c,b);h=L(c);f=k([0]);y(f,g,h);c=k();e(c,b,f);g=k();C(g,c);y(c,g,h);a.set(c)}function O(a){var b=d("WACryptoPrimitives").lowlevel.unpack25519;a=d("WACryptoPrimitives").hash(a);var c=(a[31]&128)>>7;a[31]&=127;var e=k();b(e,a);b=k();P(b,e);a=q();H(a,b,c);e=q();K(e,a);return e}function P(a,b){return i(function(){return N(a,b)})}function f(a){return i(function(){return O(a)})}function Q(a,b){var c=k(),e=k(),f=k(),g=d("WACryptoPrimitives").lowlevel.M,h=d("WACryptoPrimitives").lowlevel.pack25519;R(f,b[2]);g(c,b[0],f);g(e,b[1],f);h(a,e);g=new Uint8Array(32);h(g,c);a[31]^=(g[0]&1)<<7}function R(a,b){var c=k();c.set(b);var e=d("WACryptoPrimitives").lowlevel.M,f=d("WACryptoPrimitives").lowlevel.S;for(var g=253;g>=0;--g)f(c,c),g!==2&&g!==4&&e(c,c,b);a.set(c)}function S(a,b){var c=d("WACryptoPrimitives").lowlevel.pack25519,e=d("WACryptoPrimitives").lowlevel.crypto_verify_32,f=new Uint8Array(32),g=new Uint8Array(32);c(f,a);c(g,b);return e(f,0,g,0)}function T(a,b){var c=d("WACryptoPrimitives").lowlevel.set25519,e=d("WACryptoPrimitives").lowlevel.S,f=d("WACryptoPrimitives").lowlevel.M,g=d("WACryptoPrimitives").lowlevel.Z,h=d("WACryptoPrimitives").lowlevel.A,i=d("WACryptoPrimitives").lowlevel.D,j=d("WACryptoPrimitives").lowlevel.unpack25519,l=d("WACryptoPrimitives").lowlevel.pow2523,o=k(),q=k(),r=k(),s=k(),t=k(),u=k(),v=k();c(a[2],n());j(a[1],b);e(r,a[1]);f(s,r,i);g(r,r,a[2]);h(s,a[2],s);e(t,s);e(u,t);f(v,u,t);f(o,v,r);f(o,o,s);l(o,o);f(o,o,r);f(o,o,s);f(o,o,s);f(a[0],o,s);e(q,a[0]);f(q,q,s);S(q,r)&&f(a[0],a[0],p());e(q,a[0]);f(q,q,s);if(S(q,r))return-1;U(a[0])===b[31]>>7&&g(a[0],m(),a[0]);f(a[3],a[0],a[1]);return 0}function U(a){var b=d("WACryptoPrimitives").lowlevel.pack25519,c=new Uint8Array(32);b(c,a);return c[0]&1}g.runInAllocationScope=i;g.allocate=j;g.hashSha512=a;g.reduce=b;g.scalarmultBase=c;g.fieldElement=k;g.modL=l;g.p3Element=q;g.unpack=e;g.elligator=P;g.hashToPoint=f;g.pack=Q;g.inv25519=R;g.unpackneg=T}),98);
__d("WASignalSignatures",["Promise","WACryptoEd25519","WACryptoPrimitives","WAHex","WASignalKeys","WASignalLocalStorageProtocol.pb","WASignalOther","decodeProtobuf"],(function(a,b,c,d,e,f,g){function h(a,b,c){return d("WACryptoEd25519").runInAllocationScope(function(){var e=b.length,f=a.privateKey,g=new Uint8Array(32);d("WACryptoEd25519").scalarmultBase(g,f);var h=g[31]&128,i=new Uint8Array(e+128);i[0]=254;i.fill(255,1,32);i.set(f,32);i.set(b,64);i.set(c,e+64);var j=d("WACryptoEd25519").allocate(Uint8Array,64);d("WACryptoEd25519").hashSha512(j,i,e+128);i.set(g,32);g=d("WACryptoEd25519").allocate(Float64Array,64);d("WACryptoEd25519").reduce(j,g);d("WACryptoEd25519").scalarmultBase(i,j);var k=d("WACryptoEd25519").allocate(Uint8Array,64);d("WACryptoEd25519").hashSha512(k,i,e+64);d("WACryptoEd25519").reduce(k,g);for(e=0;e<32;++e)g[e]=j[e];for(e=0;e<32;++e)for(j=0;j<32;++j)g[e+j]+=k[e]*f[j];d("WACryptoEd25519").modL(i.subarray(32,64),g);return{pubKeyNegative:h!==0,signedMsg:i}})}function a(a,c){return b("Promise").resolve().then(function(){var b=d("WASignalOther").makeBytes(64);self.crypto.getRandomValues(b);return i(a,c,b)})}function c(a,b,c){var e=c[63];return e&96?!1:d("WACryptoEd25519").runInAllocationScope(function(){var f=d("WACryptoPrimitives").lowlevel.A,g=d("WACryptoPrimitives").lowlevel.M,h=d("WACryptoPrimitives").lowlevel.Z,i=d("WACryptoPrimitives").lowlevel.pack25519,j=d("WACryptoPrimitives").lowlevel.unpack25519,k=d("WACryptoEd25519").allocate(Uint8Array,64);k.set(c);k[63]=e&127;var l=d("WACryptoEd25519").fieldElement(),m=d("WACryptoEd25519").fieldElement(),n=d("WACryptoEd25519").fieldElement(),o=d("WACryptoEd25519").fieldElement(),p=d("WACryptoEd25519").fieldElement(),q=d("WACryptoEd25519").allocate(Uint8Array,32),r=d("WACryptoEd25519").fieldElement();r[0]=1;j(l,a.subarray(1));h(m,l,r);f(n,l,r);d("WACryptoEd25519").inv25519(o,n);g(p,m,o);i(q,p);q[31]=q[31]&127|e&128;return d("WACryptoPrimitives").signDetachedVerify(b,k,q)})}function i(a,b,c){a=h(a,b,c);b=d("WASignalOther").sliceBytes(a.signedMsg,0,64);b[63]=b[63]&127|(a.pubKeyNegative?128:0);return b}function j(a,b,c){var e=d("WASignalKeys").makeKeyPair(),f=d("WASignalOther").makeBytes(64);self.crypto.getRandomValues(f);c=i(c,d("WASignalKeys").serializePubKey(e),f);if(!Number.isSafeInteger(b))throw new Error("Expected timestamp to be a safe integer, given "+String(b));return{id:d("WASignalKeys").castToPreKeyId(a),ts:b,keyPair:e,signature:c}}function e(a,b){var c=d("WASignalOther").makeBytes(64);self.crypto.getRandomValues(c);a=i(a,b,c);return a}function k(a){var b=a.id,c=a.keyPair;return d("WASignalOther").encodeSignalProto(d("WASignalLocalStorageProtocol.pb").SignedPreKeyRecordStructureSpec,{id:b,publicKey:d("WASignalKeys").serializePubKey(c),privateKey:c.privateKey,signature:a.signature,timestamp:a.ts})}function f(a){try{a=d("decodeProtobuf").decodeProtobuf(d("WASignalLocalStorageProtocol.pb").SignedPreKeyRecordStructureSpec,a);var b=a.id,c=a.publicKey,e=a.privateKey,f=a.signature;a=a.timestamp;return b==null||c==null||e==null||f==null||a==null?null:{id:d("WASignalKeys").castToPreKeyId(b),ts:a,keyPair:d("WASignalKeys").makeKeyPairFromSerialized(d("WASignalOther").toBytes(e,32),d("WASignalKeys").castToSerializedPubKey(new Uint8Array(c))),signature:d("WASignalOther").toBytes(f,64)}}catch(a){return null}}function l(a){return new Uint8Array(d("WAHex").parseHex(a))}function m(a){if(a.length===33)return d("WASignalKeys").castToSerializedPubKey(a);else if(a.length===32)return d("WASignalKeys").serializeIdentity(a);else throw new Error("verifyCertificate publicKey incorrect length")}function n(a,c,d){return b("Promise").resolve().then(function(){var b=j(a,c,d),e=k(b);return{plainObject:b,record:e}})}g.signMsg=a;g.verifyMsgSignalVariant=c;g.makeSignature=i;g.makeSignedPreKey=j;g.signSenderKeyMessage=e;g.serializeSignedPreKeyForPrivateStorage=k;g.deserializeSignedPreKey=f;g.convertPublicKeyHexToUint8Array=l;g.convertPublicKeyToSerializedPubKey=m;g.generateSignedPreKey=n}),98);
__d("WAPreRegistrationCrypto",["WACryptoManager","WAErr","WASignalSignatures","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a,c,e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:j.next=2;return b("regeneratorRuntime").awrap(d("WACryptoManager").generateRegistrationInfo());case 2:a=j.sent;c=a.regId;e=a.staticKeyPair;f=Date.now();j.next=8;return b("regeneratorRuntime").awrap(d("WASignalSignatures").generateSignedPreKey(1,f,e));case 8:g=j.sent;h=g.plainObject;i=g.record;return j.abrupt("return",{regId:c,identityKeyPair:e,signedPreKey:{keyId:h.id,encoded:i}});case 12:case"end":return j.stop()}},null,this)}function e(a){var b=d("WASignalSignatures").deserializeSignedPreKey(a.signedPreKey.encoded);if(b==null||b.id!==a.signedPreKey.keyId)throw c("WAErr")("Badly formatted signed prekey");return{regId:a.regId,identityPubKeyType:5,identityPubKey:a.identityKeyPair.publicKey,signedPreKey:b}}g.makeRegistrationData=a;g.serializeRegistrationData=e}),98);
__d("MAWDeviceRegistrationUtil",["CurrentUser","MAWDeviceRegistrationTypes","MAWGating","MessengerWebInitData","URI","WABase64","WALogger","WAPreRegistrationCrypto","err","regeneratorRuntime","uuid"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Registration fetch failed url:",". error: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["ICDC failed to fetch url:",". error: ",""]);i=function(){return a};return a}function j(a,b){var c=new Uint8Array(b);a=a;for(var b=b-1|0;b>=0;--b)c[b]=a&255,a=a>>>8;return c}function k(a,b,c,e,f,g,h,i,k){f=d("WABase64").encodeB64(j(f,4));g=d("WABase64").encodeB64(j(g,1));h=d("WABase64").encodeB64(h);var l=d("WABase64").encodeB64(j(i.id,3)),m=d("WABase64").encodeB64(i.keyPair.publicKey);i=d("WABase64").encodeB64(i.signature);a=new Map().set("fbid",a).set("fb_cat",b).set("app_id",c).set("device_id",e).set("e_regid",f).set("e_keytype",g).set("e_ident",h).set("e_skey_id",l).set("e_skey_val",m).set("e_skey_sig",i);if(k){b=d("WABase64").encodeB64(k.signedICDCIdentityList);c=d("WABase64").encodeB64(k.ihash);a.set("icdc_list",b).set("icdc_ts",k.ts).set("icdc_seq",k.seq).set("ihash",c)}return a}function l(a){var b=[];a.forEach(function(a,c,d){b.push(encodeURIComponent(c)+("="+encodeURIComponent(a.toString())))});return b.join("&")}function m(a,c){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.prev=0;f.next=3;return b("regeneratorRuntime").awrap(window.fetch(c,{body:a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:"POST"}));case 3:e=f.sent;f.next=6;return b("regeneratorRuntime").awrap(e.json());case 6:return f.abrupt("return",f.sent);case 9:f.prev=9;f.t0=f["catch"](0);d("WALogger").ERROR(i(),c,f.t0);throw f.t0;case 13:case"end":return f.stop()}},null,this,[[0,9]])}function n(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(window.fetch(c,{body:a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:"POST"}));case 2:d=e.sent;e.next=5;return b("regeneratorRuntime").awrap(d.json());case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},null,this)}function o(){var a=Number(c("CurrentUser").getAppID()),b=d("MAWDeviceRegistrationTypes").ICDC_ENDPOINT;(a===1217981644879628||a===936619743392459)&&(b=d("MAWDeviceRegistrationTypes").IGD_ICDC_ENDPOINT);a=new(c("URI"))(b);return a.toString()}function p(a){var e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:e=o();g.next=3;return b("regeneratorRuntime").awrap(m(a,e));case 3:f=g.sent;if(!(f==null)){g.next=6;break}throw c("err")(d("MAWDeviceRegistrationTypes").NULL_RESPONSE_FROM_SERVER);case 6:if(!(f.status!==200)){g.next=8;break}throw c("err")("WA Server returned status code "+f.status+" while attempting device registration");case 8:return g.abrupt("return",f);case 9:case"end":return g.stop()}},null,this)}function q(){var a=Number(c("CurrentUser").getAppID()),b=d("MAWDeviceRegistrationTypes").REGISTRATION_ENDPOINT;(a===1217981644879628||a===936619743392459)&&(b=d("MAWDeviceRegistrationTypes").IGD_REGISTRATION_ENDPOINT);a=new(c("URI"))(b);return a.toString()}function r(a){var e,f,g,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:f=q();k.prev=1;k.next=4;return b("regeneratorRuntime").awrap(n(a,f));case 4:g=k.sent;k.next=11;break;case 7:k.prev=7;k.t0=k["catch"](1);d("WALogger").ERROR(h(),f,k.t0);throw k.t0;case 11:if(!(g==null)){k.next=13;break}throw c("err")(d("MAWDeviceRegistrationTypes").NULL_RESPONSE_FROM_SERVER);case 13:if(!(g.wa_device_id==null||g.status!==200)){k.next=17;break}i=g.message!=null?': "'+g.message+'"':"";j="WA Server returned status code "+g.status+i+" while attempting device registration";throw c("err")(j);case 17:if(!(typeof g.wa_device_id!=="number")){k.next=19;break}throw c("err")("Device ID from WA Server was not a number");case 19:return k.abrupt("return",{deviceId:g.wa_device_id,icdcSuccess:(e=g.icdc_success)!=null?e:!1});case 20:case"end":return k.stop()}},null,this,[[1,7]])}function a(a,b,c,d){a=new Map().set("fbid",a).set("fb_cat",b).set("app_id",c).set("device_id",d);b=l(a);return p(b)}function e(a,b,c,d,e,f,g,h,i){a=k(a,b,c,d,e,f,g,h,i);b=l(a);return r(b)}function f(){var a,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:a=!1;e=c("MessengerWebInitData").sessionId!=null&&!a?c("MessengerWebInitData").sessionId:c("uuid")();g.next=5;return b("regeneratorRuntime").awrap(d("WAPreRegistrationCrypto").makeRegistrationData());case 5:f=g.sent;return g.abrupt("return",{deviceUUID:e,lastSignedPrekeyId:f.signedPreKey.keyId,signalRegInfo:f});case 7:case"end":return g.stop()}},null,this)}g.getRegistrationEndpoint=q;g.fetchICDC=a;g.register=e;g.createNewRegistrationMeta=f}),98);
__d("MAWDeviceRegistration",["CurrentUser","MAWClearSignalAndTempStores","MAWCryptoAuthTokenWrapper","MAWCurrentUser","MAWDbMetaTxns","MAWDeviceRegistrationActions","MAWDeviceRegistrationTypes","MAWDeviceRegistrationUtil","MAWGating","MAWIndexedDb","MAWJids","MAWJobDefinitions","MAWLoadRecentParticipantsApi","MAWTransactionMode","MAWUIJob","ODS","QPLUserFlow","WAICDCUtils","WAIdentityUtils","WALogger","WAPreRegistrationCrypto","WASignalKeys","WATimeUtils","qpl","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Device registration failure - ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Skipping device registration"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Crypto Auth Token was null or incomplete"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to notify "," contacts of device change"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Notified "," contacts of device change"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cannot process ICDC payload during registration: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([""," ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Beginning device registration"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);s=function(){return a};return a}var t=!1,u=window.location.hostname;function v(){t||(c("QPLUserFlow").start(c("qpl")._(25302457,"311"),{annotations:{string:{hostname:u}}}),t=!0)}function w(){t&&c("QPLUserFlow").endFailure(c("qpl")._(25302457,"311"),"failure_during_device_registration")}function a(){t&&c("QPLUserFlow").endSuccess(c("qpl")._(25302457,"311"))}function x(a){d("WALogger").WARN(s(),a);return{message:a,registrationState:d("MAWDeviceRegistrationTypes").RegistrationStatesEnum.failed}}var y=function(a){return d("MAWIndexedDb").makeMsgrTransactor({meta:d("MAWTransactionMode").READWRITE,signedPrekey:d("MAWTransactionMode").READWRITE})(a)},z=function(a){return d("MAWIndexedDb").makeMsgrTransactor({meta:d("MAWTransactionMode").READWRITE})(a)};function A(a){var e,f,g,h,i,j,k,s,t,u,v,w,A,B,C,D,E,F,G,H,I;return b("regeneratorRuntime").async(function(J){while(1)switch(J.prev=J.next){case 0:d("WALogger").LOG(r());J.next=3;return b("regeneratorRuntime").awrap(d("MAWDeviceRegistrationUtil").createNewRegistrationMeta());case 3:f=J.sent;J.next=6;return b("regeneratorRuntime").awrap(y(d("MAWDeviceRegistrationActions").saveUnsentRegistrationMeta)(f));case 6:g=d("MAWCurrentUser").getID();h=f.signalRegInfo;i=f.deviceUUID;j=d("WAPreRegistrationCrypto").serializeRegistrationData(h);k=null;s=!1;t=(e=s?1019394685547802:c("CurrentUser").getAppID())==null?void 0:e.toString();d("WALogger").WARN(q(),t,s);if(!(t==null)){J.next=17;break}return J.abrupt("return",x("appId is null, cannot register to WhatsApp"));case 17:u=null;v=null;if(!d("MAWGating").isICDCHTTPRegEnabled()){J.next=36;break}J.prev=20;J.next=23;return b("regeneratorRuntime").awrap(d("MAWDeviceRegistrationUtil").fetchICDC(g,a,t,i));case 23:w=J.sent;A={devices:[],dirty:!0,sequence:w.icdc_seq,signingDeviceIndex:-1,timestamp:d("WATimeUtils").unixTime()};B=[].concat(d("WAICDCUtils").base64DeviceIdentitiesToSerializedPubKeys(w.device_identities));w.curr_identity_idx!=null?(C=w.curr_identity_idx,B[C]=d("WASignalKeys").serializeIdentity(j.identityPubKey)):B.push(d("WASignalKeys").serializeIdentity(j.identityPubKey));u=d("WAICDCUtils").computeICDCInfoForUpload(f.signalRegInfo.identityKeyPair,A,B);J.next=30;return b("regeneratorRuntime").awrap(d("WAIdentityUtils").computeIdentitiesHash(B));case 30:v=J.sent;J.next=36;break;case 33:J.prev=33,J.t0=J["catch"](20),d("WALogger").ERROR(p(),J.t0);case 36:D=!1;J.prev=37;J.next=40;return b("regeneratorRuntime").awrap(d("MAWDeviceRegistrationUtil").register(g,a,t,i,j.regId,j.identityPubKeyType,j.identityPubKey,j.signedPreKey,u&&v?{ihash:v,seq:u.icdcInfo.seq,signedICDCIdentityList:u.encodedSignedICDC,ts:u.icdcInfo.timestamp}:null));case 40:F=J.sent;k=F==null?void 0:F.deviceId;D=(E=F==null?void 0:F.icdcSuccess)!=null?E:!1;J.next=49;break;case 45:J.prev=45;J.t1=J["catch"](37);d("WALogger").WARN(o(),J.t1);return J.abrupt("return",x(J.t1));case 49:if(!(k==null)){J.next=51;break}return J.abrupt("return",x(d("MAWDeviceRegistrationTypes").NULL_RESPONSE_FROM_SERVER));case 51:G=d("MAWJids").toUserJid(g);if(!(d("MAWGating").isICDCHTTPRegEnabled()&&u!=null&&D)){J.next=57;break}H=u.icdcInfo;I=function(a){return d("MAWIndexedDb").makeMsgrTransactor({contacts:d("MAWTransactionMode").READWRITE})(a)};J.next=57;return b("regeneratorRuntime").awrap(I(d("MAWDeviceRegistrationActions").saveICDC)(G,{devices:H.devices,dirty:!0,sequence:H.seq,signingDeviceIndex:H.signingDeviceIndex,timestamp:H.timestamp}));case 57:J.next=59;return b("regeneratorRuntime").awrap(z(d("MAWDeviceRegistrationActions").saveDeviceId)(k));case 59:J.next=61;return b("regeneratorRuntime").awrap(d("MAWLoadRecentParticipantsApi").loadRecentParticipants(d("MAWDeviceRegistrationTypes").MAX_USERS_FOR_NOTIFY_DEVICE_CHANGE,G).then(function(a){return d("MAWUIJob").UIJobStarters.waitUntilPersisted(d("MAWJobDefinitions").jobSerializers.notifyDeviceChange(a)).then(function(){d("WALogger").LOG(n(),a.size)})["catch"](function(b){d("WALogger").LOG(m(),a.size),d("WALogger").ERROR(l(),b)})}));case 61:return J.abrupt("return",{message:d("MAWDeviceRegistrationTypes").DEVICE_SUCCESSFULLY_REGISTERED,registrationState:d("MAWDeviceRegistrationTypes").RegistrationStatesEnum.finished});case 62:case"end":return J.stop()}},null,this,[[20,33],[37,45]])}var B=d("MAWIndexedDb").makeMsgrTransactor({meta:d("MAWTransactionMode").READWRITE})(d("MAWDbMetaTxns").putCAT),C=function(a){return d("MAWIndexedDb").makeMsgrTransactor({meta:d("MAWTransactionMode").READONLY,signedPrekey:d("MAWTransactionMode").READONLY})(a)()};function e(){var a,c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:a=d("MAWCryptoAuthTokenWrapper").getCryptoAuthToken();if(!(a==null)){e.next=4;break}d("WALogger").ERROR(k());return e.abrupt("return",{message:"Crypto Auth Token was null or incomplete",registrationState:d("MAWDeviceRegistrationTypes").RegistrationStatesEnum.failed});case 4:e.next=6;return b("regeneratorRuntime").awrap(C(d("MAWDeviceRegistrationActions").getRegistrationMeta));case 6:c=e.sent;if(!(a==null||c==null||c.deviceId==null)){e.next=14;break}e.next=10;return b("regeneratorRuntime").awrap(d("MAWClearSignalAndTempStores").clearSignalAndTempStores());case 10:e.next=12;return b("regeneratorRuntime").awrap(B(a));case 12:v();return e.abrupt("return",A(a.encrypted_serialized_cat));case 14:d("WALogger").LOG(j());return e.abrupt("return",{message:d("MAWDeviceRegistrationTypes").DEVICE_ALREADY_REGISTERED,registrationState:d("MAWDeviceRegistrationTypes").RegistrationStatesEnum.finished});case 16:case"end":return e.stop()}},null,this)}function f(a){d("ODS").bumpEntityKey(3185,"armadillo_device_registration","fail"),c("CurrentUser").isEmployee()||d("ODS").bumpEntityKey(3185,"armadillo_device_registration_non_employee_non_employee","fail"),d("WALogger").ERROR(i(),d("MAWDeviceRegistrationTypes").FAILED_REGISTRATION_RETRIES),a.forEach(function(a){d("WALogger").ERROR(h(),a)}),w()}g.endRegistrationTimerFailure=w;g.endRegistrationTimerSuccess=a;g.handleRegistrationError=x;g.setupDeviceRegistration=e;g.logDeviceRegistrationRetryFailure=f}),98);
__d("MAWDeviceRegistrationInit",["CurrentUser","MAWDeviceRegistration","MAWDeviceRegistrationTypes","NetworkStatus","ODS","QPLUserFlow","WALogger","WAPromiseRetryLoop","WARetryUtils","qpl","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Registration finished, ending device registration promise retry loop"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Device Registration not attempted - user is offline"]);j=function(){return a};return a}function a(){var a=1,e=new Set(),f=new(d("WAPromiseRetryLoop").PromiseRetryLoop)({code:function(f){var g,k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:if(c("NetworkStatus").isOnline()){m.next=3;break}d("WALogger").WARN(j());return m.abrupt("return");case 3:if(!(a===d("MAWDeviceRegistrationTypes").MAX_DEVICE_REGISTRATION_RETRIES)){m.next=8;break}d("MAWDeviceRegistration").logDeviceRegistrationRetryFailure(e);g=d("MAWDeviceRegistration").handleRegistrationError(d("MAWDeviceRegistrationTypes").FAILED_REGISTRATION_RETRIES);f(g);return m.abrupt("return");case 8:m.prev=8;m.next=11;return b("regeneratorRuntime").awrap(d("MAWDeviceRegistration").setupDeviceRegistration());case 11:k=m.sent;k.registrationState===d("MAWDeviceRegistrationTypes").RegistrationStatesEnum.finished&&(k.message===d("MAWDeviceRegistrationTypes").DEVICE_SUCCESSFULLY_REGISTERED&&(d("ODS").bumpEntityKey(3185,"armadillo_device_registration","success"),c("CurrentUser").isEmployee()||d("ODS").bumpEntityKey(3185,"armadillo_device_registration_non_employee_non_employee","success"),d("MAWDeviceRegistration").endRegistrationTimerSuccess()),d("WALogger").LOG(i()),f(k));e.add(k.message);m.next=21;break;case 16:m.prev=16,m.t0=m["catch"](8),l="Uncaught device registration error - "+m.t0,d("WALogger").WARN(h(),l),e.add(""+l);case 21:a++;case 22:case"end":return m.stop()}},null,this,[[8,16]])},name:"deviceRegistration",timer:d("WARetryUtils").FIBONACCI_BACKOFF});c("QPLUserFlow").addPoint(c("qpl")._(25310776,"6155"),"device_registration_start");f.start();return f.promise()}g.initDeviceRegistration=a}),98);
__d("MAWLocalStorage",["LocalStorageWrapper","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["not storage found"]);h=function(){return a};return a}function i(a){d("WALogger").LOG([a])}function j(a){d("WALogger").ERROR([a])}function a(){return d("LocalStorageWrapper").getStorage(i)}function b(){return d("LocalStorageWrapper").isLocalStorageAvailable(i)}function c(a,b,c){return d("LocalStorageWrapper").setItemGuarded(a,b,c,j)}function e(a,b){a==null?d("WALogger").ERROR(h()):a.removeItem(b)}g.getStorage=a;g.isLocalStorageAvailable=b;g.setItemGuarded=c;g.removeItemGuarded=e}),98);
__d("MAWBridgeDropAllSecureThreadsHandler",["I64","LSMessagingThreadTypeUtil.re","LsSystemFolder.re","Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var c=d("ReQL").fromTableAscending(a.table("threads_ranges_v2__generated")).filter(function(a){return d("I64").equal(a.parentThreadKey,d("LsSystemFolder.re").pending)||d("I64").equal(a.parentThreadKey,d("LsSystemFolder.re").archived)});return d("ReQL").toArrayAsync(c).then(function(c){return c.reduce(function(b,c){return b.then(function(){return a.table("threads_ranges_v2__generated")["delete"](d("ReQL").key(c.parentThreadKey,c.minThreadKey,c.minLastActivityTimestampMs))})},b("Promise").resolve())})}function i(a){var c=d("ReQL").fromTableAscending(a.table("threads")).filter(function(a){return d("LSMessagingThreadTypeUtil.re").isSecure(a.threadType)});return d("ReQL").toArrayAsync(c).then(function(c){return c.reduce(function(b,c){return b.then(function(){return a.table("threads")["delete"](d("ReQL").key(c.threadKey))})},b("Promise").resolve())})}function a(a){return b("Promise").all([h(a),i(a)]).then(function(){return b("Promise").resolve()})}g.dropArchivedAndPendingThreadRanges=h;g.dropAllSecureThreads=i;g.call=a}),98);
__d("MAWBridgeDropAllSecureThreadsHandler.bs",["MAWBridgeDropAllSecureThreadsHandler"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("MAWBridgeDropAllSecureThreadsHandler").call(a)}f.call=a}),null);
__d("WorkerUtils",[],(function(a,b,c,d,e,f){"use strict";function b(){try{return"WorkerGlobalScope"in a&&a instanceof a.WorkerGlobalScope}catch(a){return!1}}function c(){try{return"SharedWorkerGlobalScope"in a&&a instanceof a.SharedWorkerGlobalScope}catch(a){return!1}}function d(){return"SharedWorker"in a&&typeof a.SharedWorker==="function"}f.isWorkerContext=b;f.isSharedWorkerContext=c;f.isSharedWorkerSupported=d}),66);
__d("shouldUseMAWSharedWorker",["WorkerUtils","gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("WorkerUtils").isSharedWorkerSupported()&&c("qex")._("1522")===!0&&c("gkx")("264")}g["default"]=a}),98);
__d("UserTimingUtils",["performance"],(function(a,b,c,d,e,f,g){"use strict";var h=typeof c("performance").mark==="function"&&typeof c("performance").clearMarks==="function"&&typeof c("performance").measure==="function"&&typeof c("performance").clearMeasures==="function",i=!1;if(h&&c("performance").mark!=null){var j="__v3",k={};Object.defineProperty(k,"startTime",{get:function(){i=!0}});try{c("performance").mark(j,k)}catch(a){}finally{c("performance").clearMarks(j)}}function a(a){h&&c("performance").mark(a)}function b(a,b,d){d===void 0&&(d=!0);if(h){try{c("performance").measure(a,b)}catch(a){}d&&c("performance").clearMarks(b);c("performance").clearMeasures(a)}}function d(a){if(h){try{a=c("performance").getEntriesByName(a,"mark");if(a!=null&&a.length>0)return!0}catch(a){}return!1}}function e(a){if(h)try{c("performance").clearMarks(a)}catch(a){}}function f(a,b){if(i)try{c("performance").measure(a,b),c("performance").clearMeasures(a)}catch(a){}}function l(a,b){i&&(c("performance").mark(a,b),c("performance").clearMarks(a))}g.measureStart=a;g.measureEnd=b;g.hasMark=d;g.clearMarks=e;g.measureModern=f;g.markModern=l}),98);
__d("MAWInit",["MAWEBSwitch","MAWGating","MAWTTRC","QPLUserFlow","UserTimingUtils","gkx","performanceNow","qpl","regeneratorRuntime","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qpl")._(25310776,"6155"),i=!1,j=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;c.error=null;c.name="MAWInitError";c.message=a;c.error=null;return c}var c=a.prototype;c.catching=function(a){this.error=a;return this};return a}(babelHelpers.wrapNativeSuper(Error)),k=!1;function l(){var a;if(k)return;k=!0;c("QPLUserFlow").addAnnotations(h,{bool:{armadillo_init_sync_api_improvements:c("gkx")("1115"),isEBEnabled:c("MAWEBSwitch").isEnabled(),isIndexedDbEarEnabled:(a=c("gkx")("334"))!=null?a:!1,useSharedWorker:c("shouldUseMAWSharedWorker")()}})}function m(a){if(i||d("MAWGating").isCodeOnlyInitEnabled())return;l();c("QPLUserFlow").addPoint(h,a)}function a(a){l(),i=!0,c("QPLUserFlow").endFailure(h,a),k=!1}function e(){l(),i=!0,c("QPLUserFlow").endSuccess(h),d("MAWTTRC").markEvent("maw_init_end"),k=!1}function f(a,e){var f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:f=c("performanceNow")();g=a+"_start";h=a+"_end";m(g);j.next=6;return b("regeneratorRuntime").awrap(e());case 6:i=j.sent;m(h);c("gkx")("8518")&&d("UserTimingUtils").measureModern(a,{end:c("performanceNow")(),start:f});return j.abrupt("return",i);case 10:case"end":return j.stop()}},null,this)}g.MAWInitError=j;g.logPoint=m;g.fail=a;g.endSuccess=e;g.measurePerformance=f}),98);
__d("MAWCommonSetup",["CometRelay","LSPersistedDbGating","MAWBackendBridge.re","MAWBridge","MAWDeviceRegistrationInit","MAWDeviceRegistrationTypes","MAWGating","MAWIndexedDb","MAWInit","MAWJobDefinitions","MAWKeychainInit","MAWLocalStorage","MAWMaybeWithTimeout","MAWStateContext.react","MAWSyncState","MAWTTRC","MAWUIJob","MAWVaultMaterials","MAWWaitForBackendSetup","MWChatBadgeCountUpdates.re","MWEncryptedBackupsProcessBackupIdsDeferred.re","Promise","QuickPerformanceLogger","WAJobOrchestratorTypes","cr:1230","cr:2643","cr:3088","cr:495","cr:917","gkx","promiseDone","qpl","react","regeneratorRuntime","requireDeferred","shouldUseMAWSharedWorker","useReStore"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["MAW Backend Setup Failed -- ",""]);h=function(){return a};return a}e=d("react");var i=e.useContext,j=e.useEffect,k=c("requireDeferred")("FBLogger").__setRef("MAWCommonSetup"),l=c("requireDeferred")("MAWMainThreadLogger").__setRef("MAWCommonSetup"),m=c("requireDeferred")("MAWPushNotificationSetup").__setRef("MAWCommonSetup"),n=c("requireDeferred")("WALogger").__setRef("MAWCommonSetup"),o=1e4,p=!1;function a(a,b){var e=d("CometRelay").useRelayEnvironment(),f=i(d("MAWStateContext.react").MAWStateContext),g=f.dispatch,h=c("useReStore")();j(function(){c("promiseDone")(q(a,e,b,g,h),function(){},function(){d("MAWTTRC").fail("backend_init_fail")})},[e,a,b,g,h]);d("MWEncryptedBackupsProcessBackupIdsDeferred.re").useHook(function(a){return c("MAWBackendBridge.re").setEncryptedBackupsState({newState:a}).fireAndForget()})}function q(a,c,e,f,g){var i,j,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:if(!p){m.next=2;break}return m.abrupt("return");case 2:p=!0;m.prev=3;m.next=6;return b("regeneratorRuntime").awrap(r(a,c,e,f,g));case 6:m.next=8;return b("regeneratorRuntime").awrap(d("MAWWaitForBackendSetup").backendSetupCompleteResolve());case 8:if(!(!d("MAWGating").isOccamadillo()&&!d("MAWGating").isCodeOnlyInitEnabled())){m.next=17;break}m.prev=9;m.next=12;return b("regeneratorRuntime").awrap(s(d("MWChatBadgeCountUpdates.re").minSyncedThreads));case 12:m.next=17;break;case 14:m.prev=14;m.t0=m["catch"](9);throw new(d("MAWInit").MAWInitError)("failure_during_init_sync").catching(m.t0);case 17:m.next=30;break;case 19:m.prev=19;m.t1=m["catch"](3);i=m.t1;j="failure_during_armadillo_backend_setup";i instanceof d("MAWInit").MAWInitError&&(j=i.message,i=(l=i.error)!=null?l:m.t1);d("MAWWaitForBackendSetup").backendSetupCompleteReject(m.t1);b("cr:3088")==null?void 0:b("cr:3088").issueError(g,b("cr:3088")==null?void 0:b("cr:3088").MAWGeneralErrorMsgBody,b("cr:3088")==null?void 0:b("cr:3088").MAWGeneralErrorMsgTitle,b("cr:3088")==null?void 0:b("cr:3088").MAWUserVisibleErrorPresentationType.BANNER);d("MAWInit").fail(j);n.loadImmediately(function(a){a.ERROR(h(),i)});k.loadImmediately(function(a){return a("messenger_e2ee_web").catching(i).mustfix("MAW backend setup failed")});throw i;case 30:case"end":return m.stop()}},null,this,[[3,19],[9,14]])}function r(a,e,f,g,h){var i,j,k,n,p,q,r,s,t,u;return b("regeneratorRuntime").async(function(v){while(1)switch(v.prev=v.next){case 0:i=f.getOrSetupWorker,j=f.logout,k=f.setupBridge;d("MAWInit").logPoint("setup_armadillo_backend");d("MAWTTRC").markEvent("backend_init_start");l.onReadyImmediately(function(a){a=a.setupMainWaLogger;return a()});v.next=6;return b("regeneratorRuntime").awrap(d("MAWInit").measurePerformance("detection_support",function(){var a=window.indexedDB!=null,c=d("MAWLocalStorage").isLocalStorageAvailable();if(!a)throw new(d("MAWInit").MAWInitError)("indexeddb_not_supported_by_browser");if(!c)throw new(d("MAWInit").MAWInitError)("localstorage_not_supported");return b("Promise").resolve()}));case 6:n=function(){return d("MAWInit").measurePerformance("setup_vault_materials",function(){if(b("cr:2643")!=null&&d("LSPersistedDbGating").allTablesPersisted){c("gkx")("4463")||b("cr:2643").listenToVaultMaterialsRequestForPersistedLSDB();return b("cr:2643").setupVaultForPersistedLSDB()}else return b("Promise").resolve(d("MAWVaultMaterials").initializeVaultMaterials())})};v.next=9;return b("regeneratorRuntime").awrap(d("MAWInit").measurePerformance("acquire_mutex",function(){return c("shouldUseMAWSharedWorker")()?b("Promise").resolve(!0):b("cr:495").use().init()}));case 9:p=v.sent;if(p){v.next=12;break}throw new(d("MAWInit").MAWInitError)("maw_appmutex_no_permission");case 12:v.next=14;return b("regeneratorRuntime").awrap(d("MAWInit").measurePerformance("ear_db_setup",function(){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(d("MAWInit").measurePerformance("make_encryption_db",function(){return b("cr:917").makeEncryptionDB(a)}));case 2:c.next=4;return b("regeneratorRuntime").awrap(d("MAWInit").measurePerformance("rotate_browser_encryption_meta",function(){return b("cr:1230").maybeRotateBrowserEncryptionMetaInTxn()}));case 4:return c.abrupt("return",d("MAWInit").measurePerformance("init_setup_keychain",d("MAWKeychainInit").initSetupKeychain));case 5:case"end":return c.stop()}},null,this)}));case 14:q=v.sent;if(q.success){v.next=17;break}throw new(d("MAWInit").MAWInitError)("keychain_setup_failure").catching(q.error);case 17:v.next=19;return b("regeneratorRuntime").awrap(d("MAWInit").measurePerformance("main_db_setup",function(){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(n);case 2:c.next=4;return b("regeneratorRuntime").awrap(d("MAWInit").measurePerformance("make_db",function(){return d("MAWIndexedDb").makeDB(a,b("cr:1230").getDbEncryptionKey)}));case 4:case"end":return c.stop()}},null,this)}));case 19:if(!d("MAWGating").isCodeOnlyInitEnabled()){v.next=23;break}c("QuickPerformanceLogger").markerDrop(c("qpl")._(25310776,"6155"));c("QuickPerformanceLogger").markerDrop(c("qpl")._(1056839232,"112"));return v.abrupt("return");case 23:v.next=25;return b("regeneratorRuntime").awrap(d("MAWDeviceRegistrationInit").initDeviceRegistration());case 25:r=v.sent;s=r.registrationState;if(!(s===d("MAWDeviceRegistrationTypes").RegistrationStatesEnum.failed)){v.next=29;break}throw new(d("MAWInit").MAWInitError)("registration_failed");case 29:d("MAWInit").logPoint("device_registration_end");m.onReady(function(a){a=a.setupArmadilloPushNotifications;a()});v.next=33;return b("regeneratorRuntime").awrap(n());case 33:t=v.sent;v.next=36;return b("regeneratorRuntime").awrap(d("MAWInit").measurePerformance("setup_worker",function(){return i(a,q.value,t,h)}));case 36:u=v.sent;v.next=39;return b("regeneratorRuntime").awrap(d("MAWInit").measurePerformance("bridgeworker",function(){return d("MAWMaybeWithTimeout").maybeWithTimeout(k({dispatch:g,environment:e,logout:j,worker:u}),o,function(){throw new(d("MAWInit").MAWInitError)("setup_bridge_timeout")},"setupArmadilloBridge")}));case 39:d("MAWTTRC").markEvent("backend_init_end");case 40:case"end":return v.stop()}},null,this)}var s=function(a){return d("MAWInit").measurePerformance("init_sync",function(){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:if(!d("MAWSyncState").getIsInitialSyncComplete()){c.next=2;break}return c.abrupt("return");case 2:d("MAWSyncState").setInitSyncExecuted(!0);d("MAWTTRC").markEvent("maw_init_start");c.next=6;return b("regeneratorRuntime").awrap(d("MAWBridge").getBridge().sendAndReceive("backend","initSync",{numMsgsPerThread:1,numThreads:a}));case 6:d("MAWUIJob").UIJobStarters.waitUntilPersisted(d("MAWJobDefinitions").jobSerializers.handleFutureproofMsg({priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW})),d("MAWSyncState").getMarkInitSyncComplete()();case 8:case"end":return c.stop()}},null,this)})};g.useArmadillo=a;g.initSync=s}),98);
__d("MAWLoadingStateSpinner.react",["fbt","ix","BaseToasterStateManager","CometIcon.react","CometProgressRingDeterminate.react","MAWStateContext.react","fbicon","mwPushToast","mwReplaceToast","react","useMAWOfflineQueueState"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");b=d("react");e=b.memo;var k=b.useContext,l=b.useEffect,m=b.useMemo,n=b.useRef,o=h._("__JHASH__f9ft1Nb-b3f__JHASH__"),p=h._("__JHASH__laOwOEc4JeD__JHASH__"),q=function(a,b){return h._("__JHASH__-uoxDFsOMfK__JHASH__",[h._param("restoredMessage",a.toString()),h._param("count",b.toString())])},r=c("BaseToasterStateManager").getInstance();function s(a,b){var d=100*a/b;a=b>100?q(a,b):void 0;return{body:a,icon:{comet:j.jsx(c("CometProgressRingDeterminate.react"),{color:"light",percentage:d,size:20})},startAddOn:{source:d,type:"progressRing"},title:o}}function t(a){d("mwReplaceToast").mwReplaceToast({icon:{comet:j.jsx(c("CometIcon.react"),{icon:d("fbicon")._(i("498146"),20)}),mds:d("fbicon")._(i("477815"),24)},title:p,toastId:a})}function a(){var a=c("useMAWOfflineQueueState")(),b=k(d("MAWStateContext.react").MAWStateContext).state,e=b.offlineQueueCount,f=b.offlineQueueProgressDownloaded,g=n();m(function(){if(a)g.current==null?g.current=d("mwPushToast").mwPushToast(s(f,e),Number.MAX_SAFE_INTEGER):d("mwReplaceToast").mwReplaceToast(babelHelpers["extends"]({},s(f,e),{toastId:g.current}));else if(g.current!=null){var b=g.current;t(b);window.setTimeout(function(){r.expire(b),g.current=void 0},2750)}},[a,f,e]);l(function(){return function(){g.current!=null&&r.expire(g.current)}},[]);return null}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g["default"]=b}),98);
__d("DoubleKeyMap",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Map()}var b=a.prototype;b.set=function(a,b,c){var d=this.$1.get(a);d||this.$1.set(a,d=new Map());d.set(b,c)};b.get=function(a,b){return(a=this.$1.get(a))==null?void 0:a.get(b)};b["delete"]=function(a,b){var c=this.$1.get(a);c&&(c["delete"](b),c.size===0&&this.$1["delete"](a))};b.deleteAll=function(a){this.$1["delete"](a)};return a}();f.DoubleKeyMap=a}),66);
__d("NestedTimeRange",["SimpleHook","performance","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("SimpleHook").SimpleHook)(),i=new(d("SimpleHook").SimpleHook)(),j="/";function k(a,b){return""+a+j+b}b=function(){function a(a,b){b===void 0&&(b=null),this.$3=0,this.$1=a,this.$2=b}var b=a.prototype;b.isRunning=function(){return this.$3>0};b.fullname=function(){return this.$2!==null?k(this.$2.fullname(),this.$1):this.$1};b.start=function(a){a===void 0&&(a=c("performanceAbsoluteNow")());if(this.$3===0){var b;(b=this.$2)==null?void 0:b.start(a);this.__onStart(a)}++this.$3;return a};b.__onStart=function(a){h.call(this,a)};b.stop=function(a){a===void 0&&(a=c("performanceAbsoluteNow")());--this.$3;if(this.$3===0){var b;this.__onStop(a);(b=this.$2)==null?void 0:b.stop(a)}return a};b.__onStop=function(a){i.call(this,a)};return a}();function a(){c("performance").mark&&c("performance").measure&&(h.add(function(a,b){c("performance").mark(a.fullname()+"_start")}),i.add(function(a,b){c("performance").measure(a.fullname(),a.fullname()+"_start")}))}g.OnRangeStart=h;g.OnRangeStop=i;g.TIME_RANGE_LEVEL_SEPARATOR=j;g.rangeFullName=k;g.NestedTimeRange=b;g.enableDevConsoleTimeline=a}),98);
__d("QLogEvent",["DoubleKeyMap","FBLogger","NestedTimeRange","QPLEvent","SimpleHook","performanceNavigationStart"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("DoubleKeyMap").DoubleKeyMap)(),i=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d){a=b.call(this,a,d)||this;a.$QPLRange1=c;h.set(c,a.fullname(),babelHelpers.assertThisInitialized(a));return a}var e=a.prototype;e.__onStart=function(a){b.prototype.__onStart.call(this,a),this.$QPLRange1.point(this.fullname()+"_START",{timestamp:a})};e.__onStop=function(a){b.prototype.__onStop.call(this,a),this.$QPLRange1.point(this.fullname()+"_END",{timestamp:a}),h["delete"](this.$QPLRange1,this.fullname())};e.range=function(b){this.fullname().startsWith(d("NestedTimeRange").TIME_RANGE_LEVEL_SEPARATOR)||c("FBLogger")("qpl").warn("Range %s cannot have subrange since root name does not start with /",this.fullname());var e=d("NestedTimeRange").rangeFullName(this.fullname(),b);return(e=h.get(this.$QPLRange1,e))!=null?e:new a(b,this.$QPLRange1,this)};return a}(d("NestedTimeRange").NestedTimeRange),j=new(d("DoubleKeyMap").DoubleKeyMap)(),k=new(d("SimpleHook").SimpleHook)(),l=new(d("SimpleHook").SimpleHook)(),m=new(d("SimpleHook").SimpleHook)(),n=new(d("SimpleHook").SimpleHook)(),o=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,e,f){var g;c===void 0&&(c=0);e===void 0&&(e=2);f===void 0&&(f=!1);var h=d("QPLEvent").getMarkerId(a);g=b.call(this,"event_"+h)||this;g.event=a;g.instanceKey=c;g.$QPLEvent1=e;g.isUserFlow=f;j.set(h,c,babelHelpers.assertThisInitialized(g));return g}var e=a.prototype;e.action=function(a){this.$QPLEvent1=a;return this};e.getAction=function(){return this.$QPLEvent1};e.setIsUserFlow=function(a){this.isUserFlow=a;return this};e.startFromNavStart=function(){this.start(c("performanceNavigationStart")());return this};e.startFromTime=function(a){this.start(a);return this};e.__onStart=function(a){k.call(this,a)};e.__onStop=function(a){l.call(this,a),h.deleteAll(this),j["delete"](d("QPLEvent").getMarkerId(this.event),this.instanceKey)};e.range=function(a){var b;return(b=h.get(this,a))!=null?b:new i(a,this)};e.point=function(a,b){b===void 0&&(b={});m.call(this,a,b);return this};e.annotate=function(a){n.call(this,a);return this};return a}(d("NestedTimeRange").NestedTimeRange);function a(a,b){var c;b===void 0&&(b=0);return(c=j.get(d("QPLEvent").getMarkerId(a),b))!=null?c:new o(a,b)}g.OnEventStart=k;g.OnEventStop=l;g.OnEventPoint=m;g.OnEventAnnotate=n;g.QPLEvent=o;g.event=a}),98);
__d("TimedOnceFunc",["ExecutionEnvironment"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b){this.$2=!1,this.$4=a,this.$3=b,c("ExecutionEnvironment").isInBrowser&&this.$5()}var b=a.prototype;b.$6=function(){this.$1!=null&&clearTimeout(this.$1),this.$1=null};b.$5=function(){var a=this;this.isDone()||(this.$6(),this.$1=setTimeout(function(){a.$2=!0,a.run()},this.$3))};b.isDone=function(){return this.$4===null};b.isCancelled=function(){return this.$1===null&&this.$4!==null};b.run=function(){this.$6();if(this.$4!=null){var a=this.$4;this.$4=null;a(this.$2)}};b.getDelay=function(){return this.$3};b.delay=function(a){this.$3=(a=a)!=null?a:this.$3;this.$5()};b.cancel=function(){this.$6()};return a}();g.TimedOnceFunc=a}),98);
__d("MainPageUrl",["ExecutionEnvironment","FBLogger","SimpleHook"],(function(a,b,c,d,e,f,g){"use strict";var h=new URL("http://undefined"),i=new(d("SimpleHook").SimpleHook)();function j(){return c("ExecutionEnvironment").isInBrowser&&h.searchParams.get("workerlog")==="debug"}function a(a){try{j()&&c("FBLogger")("worker").debug("received url "+a);var b=new URL(a,h.href||"http://undefined");h.href!==b.href?(h.href=b.href,i.call(h)):j()&&c("FBLogger")("worker").debug("ignoring url: path didn't change in "+a)}catch(a){c("FBLogger")("worker").catching(a).warn("invalid url")}}typeof window==="object"&&typeof window.location==="object"&&typeof window.location.href==="string"&&a(window.location.href);g.mainPageUrl=h;g.onMainPageUrlChange=i;g.isWorkerLogEnabled=j;g.updateMainPageUrl=a}),98);
__d("WorkerBundleResource",["createTrustedScriptURLForWebWorker"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d,e;for(var f=arguments.length,g=new Array(f>2?f-2:0),h=2;h<f;h++)g[h-2]=arguments[h];var i=(d=b)!=null?d:a.name,j=new window.URL(a.url,window.location.href).href;if(j==null){var k=new Error("Can't start up worker without a resource url.");k.stack;throw k}var l=new Blob(["__DEV__=false;","if (self.trustedTypes && self.trustedTypes.createPolicy) {","const escapeScriptURLPolicy = self.trustedTypes.createPolicy('workerPolicy', {\n  createScriptURL: url => url });","importScripts(escapeScriptURLPolicy.createScriptURL('"+j+"'));","} else {","importScripts('"+j+"');","}","StartBundle.apply(null, "+JSON.stringify([a].concat((e=g)!=null?e:[]))+")"],{type:"text/javascript"}),m=window.URL.createObjectURL(l),n=new Worker(c("createTrustedScriptURLForWebWorker")(m),{name:i}),o=n.terminate;n.terminate=function(){window.URL.revokeObjectURL(this._objectURL),o.apply(this,arguments)};return n}function b(a,b){b=(b=b)!=null?b:a.name;b=new SharedWorker(c("createTrustedScriptURLForWebWorker")(a.url),{name:b});b.port.start();b.port.postMessage({type:"execute-worker",args:[a]});return b}g.createDedicatedWebWorker=a;g.createSharedWebWorker=b}),98);
__d("VirtualMessageChannel",["invariant","Promise","SimpleHook","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";var i=function(){function a(a){a===void 0&&(a=!1),this.$2=new(d("SimpleHook").SimpleHook)(),this.onmessage=null,this.onmessageerror=null,this.$3=a}var e=a.prototype;e.setRemotePort=function(a){this.$1=a};e.addEventListener=function(a,b,c){(a==="message"||a==="error")&&c==null||h(0,55320,a);if(a==="message")if(typeof b==="function")this.$2.add(b);else{c=b.handleEvent.bind(b);this.$2.add(c);b.__handler=c}};e.removeEventListener=function(a,b,c){if(typeof b==="function")this.$2.remove(b);else{a=b.__handler;this.$2.remove(a)}};e.postMessage=function(a,d){var e=this,f=function(){var b=c("nullthrows")(e.$1,"By now remote port must have value!");b.$2.call({data:a,ports:d})};this.$3?f():c("promiseDone")(b("Promise").resolve(),f)};e.start=function(){};return a}();a=function(a,b){this.port1=new i(a),this.port2=new i(b),this.port1.setRemotePort(this.port2),this.port2.setRemotePort(this.port1)};g.VirtualMessagePort=i;g.VirtualMessageChannel=a}),98);
__d("WorkerMessagePort",["FBLogger","MainPageUrl","Promise","QLogEvent","SimpleHook","VirtualMessageChannel","performanceAbsoluteNow","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=20,i=100,j=50;function k(a){return a}var l=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d("SimpleHook").SimpleHook);function m(a,b){a=k(a);a.__timing=b}function n(a){return a.__timing}var o=0;function p(){return d("QLogEvent").event(c("qpl")._(41497718,"106"),o++)}var q=Math.random()<.1;function r(a,b,c){var d;if(b==null||!q)return;var e=b.sendDelayHighPrecision,f=b.sendTimestamp,g=b.sendDateTime,j=b.receiveTimestamp;b=b.receiveDateTime;d=(d=c)!=null?d:p();c==null&&d.startFromTime();var k=d.range("SEND_DELAY");k.start(f);k.stop(j);k=d.range("SEND_DELAY_LOW_PRECISION");k.start(g);k.stop(b);k=Math.abs(f-g);f=Math.abs(j-b);d.annotate({string:{port_name:a},"int":{send_delay:e,send_drift:k,receive_drift:f},bool:{send_delay_above_max:e!=null&&e>h,send_drift_above_max:k>i,receive_drift_above_max:f>i}});c==null&&d.stop()}a=function(){var a=e.prototype;a.onMessageHandler=function(a){try{this.onMessage.call(a);var b=this.$1[a.type];!b?this.onUnhandledMessage.call(a):b.call(a)}catch(a){this.onError.call(a)}};function e(a,b){var d=this;this.$1={};this.onUnhandledMessage=new l();this.onMessage=new l();this.onPostMessage=new l();this.onError=new l();this.$2=a;this.name=b;this.$2.addEventListener("message",function(a){return d.onMessageHandler(k(a.data))});this.$2.addEventListener("error",function(a){return d.onError.call(a)});this.onPostMessage.add(function(a){m(a,{sendTimestamp:c("performanceAbsoluteNow")(),receiveTimestamp:-1,sendDelayHighPrecision:0,sendDateTime:Date.now(),receiveDateTime:-1,sendDelayLowPrecision:0})});this.onMessage.add(function(a){a=n(a);if(a!=null){var b=a.sendTimestamp,e=a.sendDateTime,f=c("performanceAbsoluteNow")(),g=Date.now();a.receiveTimestamp=f;a.receiveDateTime=g;a.sendDelayHighPrecision=f-b;a.sendDelayLowPrecision=g-e;r(d.name,a)}})}a.postMessage=function(a,b){this.onPostMessage.call(a),b?this.$2.postMessage(a,b):this.$2.postMessage(a)};a.addMessageListener=function(a,b){var c=this.$1[a];c||(c=new l(),this.$1[a]=c);return c.add(b)};a.removeMessageListener=function(a,b){a=this.$1[a];return!!a&&a.remove(b)};a.onMessageOnce=function(a,c){var d=this;return new(b("Promise"))(function(b){var e=d.addMessageListener(a,function(f){c(f)&&(d.removeMessageListener(a,e),b(f))})})};a.close=function(){if(this.$2 instanceof MessagePort)this.$2.close();else if(this.$2 instanceof Worker)this.$2.terminate();else if(this.$2 instanceof DedicatedWorkerGlobalScope)this.$2.close();else{var a;(a=(a=this.$2.close)!=null?a:this.$2.terminate)==null?void 0:a.call(this.$2)}};a.isWrappingVirtualMessagePort=function(){return this.$2 instanceof d("VirtualMessageChannel").VirtualMessagePort};return e}();function s(a){return k(a)}e=function(a){babelHelpers.inheritsLoose(d,a);function d(d,e){var f;f=a.call(this,d,e)||this;var g=s(babelHelpers.assertThisInitialized(f));d=g.onMessageOnce("endpoint_started",function(){return!0});e=g.onMessageOnce("endpoint_started_received",function(){return!0});g.postMessage({type:"endpoint_started",endpoint:f.name});c("promiseDone")(d,function(a){var b=n(a);g.postMessage({type:"endpoint_started_received",endpoint:a.endpoint,targetEndpoint:f.name,startSendTimestamp:b==null?void 0:b.sendTimestamp});r(f.name,b)});c("promiseDone")(e,function(a){var b=n(a);if(b!=null){var c=p();c.startFromTime();r(f.name,b,c);var d=c.range("ROUND_TRIP");d.start(a.startSendTimestamp);d.stop(b.receiveTimestamp);d=b.receiveTimestamp-a.startSendTimestamp;c.annotate({"int":{round_trip:d},bool:{round_trip_above_max:d>j}}).stop()}});f.fullyConnected=b("Promise").race([d,e]).then(function(){return babelHelpers.assertThisInitialized(f)});return f}return d}(a);g.getMessageTiming=n;g.WorkerMessagePort=a;g.CastWorkerMessagePort=s;g.WorkerSyncedMessagePort=e}),98);
__d("FuncChannel",["FBLogger","Promise"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var d=this;this.$2=[];this.callMessageHandler=function(a){return new(b("Promise"))(function(b,c){a.result={resolveFunc:b,rejectFunc:c},d.$2.push(a)})};this.messageToCall=function(a){var b,e,f=d.proxyMethods[a.method];if(typeof f!=="function"){c("FBLogger")("worker").mustfix("proxyMethods["+a.method+"] is not a functions");return}b=(b=a.result)==null?void 0:b.resolveFunc;e=(e=a.result)==null?void 0:e.rejectFunc;if(typeof b==="function"&&typeof e==="function")try{var g=f.apply(a.thisArg,a.argList);b(g)}catch(a){e(a)}else return f.apply(a.thisArg,a.argList)};var e=this,f={},g=a(f);a=Object.keys(g);var h={};a.forEach(function(a){h[a]=function(){var b={type:"call",method:a,thisArg:null,argList:Array.from(arguments)};return e.callMessageHandler(b)},f[a]=function(){var b=e.$1[a];if(typeof b!=="function"){c("FBLogger")("worker").mustfix("_backend["+a+"] is not a functions");return}return b.apply(e.$1,arguments)},g[a]===null&&(g[a]=f[a])});this.$1=h;this.proxyMethods=g}var d=a.prototype;d.flushBuffer=function(){var a=this.$2;this.$2=[];a.forEach(this.messageToCall)};d.setBackend=function(a){this.$1!==a&&(this.$1=a,this.flushBuffer());return this};d.setCallMessageHandler=function(a){this.callMessageHandler=a,this.flushBuffer()};return a}();g["default"]=a}),98);
__d("WorkerFuncChannel",["invariant","DateConsts","ExecutionEnvironment","FBLogger","FuncChannel","MainPageUrl","Promise","TimedOnceFunc","VirtualMessageChannel","WorkerMessagePort","err","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";var i={serialize:function(a,b){b.push(a);return a},deserialize:function(a){return a}},j=1e4,k=0,l=5,m=l+1,n=function(){function a(a){self.WeakRef&&(this.$1=new self.WeakRef(a))}var b=a.prototype;b.isDead=function(){return this.$1!=null&&this.$1.deref()==null};return a}(),o=function(e){babelHelpers.inheritsLoose(a,e);function a(a,b,f,g){var i;f===void 0&&(f=null);g===void 0&&(g={});i=e.call(this,a)||this;i.$WorkerFuncChannel1=new Map();i.$WorkerFuncChannel2=new Map();i.$WorkerFuncChannel5={"function":{serialize:function(a,b){b=m++;i.$WorkerFuncChannel1.set(b,a);a={type:"function",value:b};return a},deserialize:function(a){var b=babelHelpers.assertThisInitialized(i),c=a.value;a=function(){var a={type:"call",id:c,method:"__anonymous",thisArg:null,argList:Array.from(arguments)};return b.callMessageHandler(a)};i.$WorkerFuncChannel2.set(c,new n(a));return a}},custom:{serialize:function(a,b){var c=a.constructor.name,d=i.$WorkerFuncChannel4[c];d!=null||h(0,63779,c);d=d.serialize(a,b);return{type:"custom",custom:c,value:d}},deserialize:function(a){var b=a.custom,c=i.$WorkerFuncChannel4[b];c!=null||h(0,63779,b);return c.deserialize(a.value)}},error:{serialize:function(a,b){b={name:a.name,message:a.message,stack:a.stack};return{type:"error",value:b}},deserialize:function(a){var b=c("err")(a.value.message);b.name=a.value.name;b.stack=a.value.stack;return b}},object:{serialize:function(a,b){b=a.constructor;if(b!==Object)throw new Error("Cannot clone class object");return{type:"object",value:a}},deserialize:function(a){return a.value}},raw:{serialize:function(a,b){return{type:"raw",value:a}},deserialize:function(a){return a.value}}};i.name=b;i.$WorkerFuncChannel3=f;i.$WorkerFuncChannel4=g;a=function(a){d("MainPageUrl").isWorkerLogEnabled()&&c("FBLogger")("adsworker").debug("[Channel] removing callback ids: %s",a.join()),a.forEach(function(a){return i.$WorkerFuncChannel1["delete"](a)})};var l=i.__remoteInternalFunc(k,a);typeof jest===typeof void 0&&c("ExecutionEnvironment").isInBrowser&&setInterval(function(){var a=[];i.$WorkerFuncChannel2.forEach(function(b,c){b.isDead()&&(a.push(c),i.$WorkerFuncChannel2["delete"](c))});a.length>0?l(a):i.$WorkerFuncChannel2.size>5e3&&c("FBLogger")("adsworker").warn("[%s] has too many remaining refs %s",i.name,i.$WorkerFuncChannel2.size)},j);return i}var f=a.prototype;f.__remoteInternalFunc=function(a,b){(a>l||this.$WorkerFuncChannel1.get(a)!=null)&&c("FBLogger")("adsworker").mustfix("invalid internal func id %s",a);this.$WorkerFuncChannel1.set(a,b);b=this.$WorkerFuncChannel5["function"].deserialize({type:"function",value:a});return b};f.$WorkerFuncChannel6=function(a){return a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Uint8Array||a instanceof Uint8ClampedArray||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array};f.$WorkerFuncChannel7=function(a){if(typeof a==="function")return"function";if(a===null)return"raw";if(typeof a!=="object")return"raw";if(Array.isArray(a))return"raw";if(this.$WorkerFuncChannel6(a))return"raw";var b=a.constructor.name;if(this.$WorkerFuncChannel4[b])return"custom";return a instanceof Error?"error":"object"};f.$WorkerFuncChannel8=function(a,b){var c=this.$WorkerFuncChannel7(a);return this.$WorkerFuncChannel5[c].serialize(a,b)};f.$WorkerFuncChannel9=function(a){var b=a;if(a!==null&&typeof a==="object"&&typeof a.type==="string"){var c=this.$WorkerFuncChannel5[a.type];if(c)return c.deserialize(a)}return b};f.__onPostOutMessage=function(a){return a};f.__callCallback=function(a,b){a.apply(null,b.argList)};f.setOutMessagePort=function(a,d){var e=this,f=[];this.setCallMessageHandler(function(d){d.thisArg=e.name;var g=[];d.argList=d.argList.map(function(a){return e.$WorkerFuncChannel8(a,g)});var h=new(b("Promise"))(function(a,b){d.result={resolveFunc:e.$WorkerFuncChannel8(a,g),rejectFunc:e.$WorkerFuncChannel8(b,g)}}),i=e.__onPostOutMessage(d);i!=null&&(f!=null?f.push({message:d,transferList:g}):a.postMessage(d,g));h["catch"](function(a){c("FBLogger")("worker").catching(a).mustfix("Error: channel %s, remote call of %s returned error %s",e.name,d.method,a.message)});return h});c("promiseDone")(d||v.waitForRemote(this.name),function(){var b=f;f=null;b==null?void 0:b.forEach(function(b){a.postMessage(b.message,b.transferList)});e.$WorkerFuncChannel3==null?void 0:e.$WorkerFuncChannel3()})};f.__messageToCall=function(a){var b=this;a.argList=a.argList.map(function(a){return b.$WorkerFuncChannel9(a)});if(a.result){var d=a.result,e=d.resolveFunc;d=d.rejectFunc;e=this.$WorkerFuncChannel9(e);d=this.$WorkerFuncChannel9(d);a.result={resolveFunc:e,rejectFunc:d}}e=a.id;if(e===void 0)this.messageToCall(a);else{d=this.$WorkerFuncChannel1.get(e);d?this.__callCallback(d,a):c("FBLogger")("adsworker").mustfix("Error: callback is called but no longer available")}};f.setInMessagePort=function(a){var b=this;a.addMessageListener("call",function(a){typeof a.thisArg==="string"&&a.thisArg===b.name&&b.__messageToCall(a)});v.notifyReady(this.name)};f.setMessagePort=function(a){this.setInMessagePort(a);this.setOutMessagePort(a);return this};return a}(c("FuncChannel")),p=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d("WorkerMessagePort").WorkerMessagePort);function q(a,b,d,e){v.exportChannel(a,function(e){var f=e.syncPort;e=e.remoteNativePort;var g=b();a===g.name||h(0,54247,a,g.name);var i;e?(i=new p(e,f.name+"("+g.name+")"),e.start(),i.onError.add(function(a){c("FBLogger")("worker").catching(a).mustfix("error caught in remotePort");throw a})):i=f;g.setMessagePort(i).setBackend(d);c("promiseDone")(f.fullyConnected,function(){f.postMessage({type:"channelReady",channelName:g.name}),v.logState("EXPORTED",a)})})}function a(a,b,c,d){d===void 0&&(d={});return q(c,function(){return new o(function(b){return a},c,null,d)},a,b)}var r=function(b){babelHelpers.inheritsLoose(a,b);function a(a,e){e===void 0&&(e="");var f=d("DateConsts").MS_PER_MIN*1;return b.call(this,function(){c("FBLogger")("worker").warn("Channel %s did not establish eventually. %s",a,e)},f)||this}return a}(d("TimedOnceFunc").TimedOnceFunc);function s(a,b){var e,f=null,g,h;b.isWrappingVirtualMessagePort()?(h=new(d("VirtualMessageChannel").VirtualMessageChannel)(!0,!0),e="on virtual dedicated channel"):(h=new MessageChannel(),e="on native dedicated channel",g=[h.port2]);var i=h.port1;f=h.port2;i.start();var j=new p(i,b.name+"("+a.name+")");c("promiseDone")(b.fullyConnected,function(){v.logState("IMPORTING "+e+" ",a.name);a.setInMessagePort(j);var d=new r(a.name,e);c("promiseDone")(b.onMessageOnce("channelReady",function(b){return b.channelName===a.name}),function(b){a.setOutMessagePort(j),d.cancel(),v.logState("ESTABLISHED",a.name)});b.postMessage({type:"channelImport",channelName:a.name,port:f},g)});return a.proxyMethods}function t(a,b,c,d){c===void 0&&(c=null);d===void 0&&(d={});b=new o(function(b){return a},b,c,d);return b}function e(a,b,c,d,e){d===void 0&&(d=null);e===void 0&&(e={});return s(t(a,c,d,e),b)}var u=function(){function a(){this.name=self.name+"_P"+Math.round(10*Math.random()),this.$1=new Map(),this.$2=new Set()}var e=a.prototype;e.logState=function(a,b){d("MainPageUrl").isWorkerLogEnabled()&&c("FBLogger")("worker").debug("%s-%s %s",this.name,a,b)};e.$3=function(a){var b=this.$1.get(a);b==null&&(b={pendingPorts:null,onImportRequest:null},this.$1.set(a,b));return b};e.exportChannel=function(a,b){var d=this,e=this.$3(a);e.onImportRequest!=null&&c("FBLogger")("worker").debug("Re-exporting channel %s",a);e.onImportRequest=b;this.logState("REGISTERED",a);a=e.pendingPorts;if(a!=null){var f=a.filter(function(a){return d.$2.has(a.syncPort)});f.forEach(b);f.length<a.length?e.pendingPorts=a.filter(function(a){return!d.$2.has(a.syncPort)}):e.pendingPorts=null}return e};e.activate=function(a,b,d){var e=this;if(this.$2.has(a)){c("FBLogger")("worker").debug("Port %sis already duplicated ",a.name);return}this.$2.add(a);a.addMessageListener("channelImport",function(b){var c=b.channelName,d=e.$3(c);b={syncPort:a,remoteNativePort:b.port};d.onImportRequest!=null?d.onImportRequest(b):d.pendingPorts!=null?d.pendingPorts.push(b):d.pendingPorts=[b];e.logState("IMPORT REQUEST",c)})};e.notifyReady=function(a){};e.waitForRemote=function(a){return b("Promise").resolve()};return a}(),v=new u();function f(a,b,c){v.activate(a,b,c)}g.TransferableTransformer=i;g.WorkerFuncChannel=o;g.exportChannelOnPort=q;g.exportChannel=a;g.importChannelOnPort=s;g.makeChannel=t;g.importChannel=e;g.activateChannels=f}),98);/*FB_PKG_DELIM*/
__d("LSTruncateTableAndSetShowError",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.seq([function(a){return b.fe(b.db.table(115).fetch(),function(a){return a["delete"]()})},function(c){return b.db.table(115).add({statusId:[0,0],timestampMs:b.i64.of_float(Date.now()),errorShouldBeShown:a[0]})}])},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSDeleteAllAndInsertConnectivityStatus",["LSTruncateTableAndSetShowError"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[];return c.seq([function(d){return c.seq([function(a){return c.fe(c.db.table(114).fetch(),function(a){return a["delete"]()})},function(b){return c.db.table(114).add({statusId:void 0,timestampMs:c.i64.of_float(Date.now()),internetConnectionState:a[0]})},function(d){return c.sp(b("LSTruncateTableAndSetShowError"),c.i64.neq(a[0],[0,1]))}])},function(a){return c.resolve(d)}])}e.exports=a}),null);
__d("LSForceImmediateSync",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.db.table(1).fetch([[[a[0]]]]),function(a){var c=a.update;a.item;return c({minTimeToSyncTimestampMs:b.i64.of_float(Date.now())})})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSIssueNewTaskWithExtraOperations",["LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[];return c.seq([function(e){return c.seq([function(e){return c.sp(b("LSIssueNewTaskAndGetTaskID"),a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9]).then(function(a){return a=a,d[0]=a[0],a})},function(a){return c.fe(c.islc(c.db.table(232).fetch(),0,c.i64.to_float([0,1])),function(a){a=a.item;return c.db.table(233).add({taskId:d[0],notificationScopeKey:a.notificationScopeKey,notificationName:a.notificationName})})}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSRemoveError",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.db.table(6).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSOptimisticFetchPendingGroupInvite",["LSIssueNewTaskWithExtraOperations"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(e){return d[0]=new c.Map(),d[0].set("link_hash",a[0]),d[0].set("image_width",a[1]),d[0].set("image_height",a[2]),d[1]=c.toJSON(d[0]),c.sp(b("LSIssueNewTaskWithExtraOperations"),"fetch_pending_group_invite",[0,434],d[1],f,f,[0,0],[0,0],f,f,[0,0],f)},function(b){return c.db.table(235).put({linkHash:a[0],threadTitle:"",lastThreadActivityMs:[0,0],groupImageUrl:"",groupImageUrlFallback:"",groupImageUrlExpirationTimestampMs:[0,0],joinExplainerText:"",numberOfMembers:[0,0],isInApprovalQueue:!1,isSubscribed:!1,canJoin:!1,fbGroupDescription:"",communityImageUrl:"",communityImageUrlFallback:"",communityImageUrlExpirationTimestampMs:[0,0],linkJoinType:[0,1],fbGroupVisibility:[0,1],communityId:[0,0]})}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("MDSColumnContext",["react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext(null);g["default"]=b}),98);
__d("MDSColumnItem.react",["BaseView.react","CometErrorBoundary.react","CometPlaceholder.react","MDSColumnContext","UserAgent","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useContext,j={divider:{borderTopColor:"x8cjs6t",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",":first-child":{display:"xh99ass"}},dividerMargin:{":first-child:empty + *":{marginTop:"xb939ph"}},expanding:{flexBasis:"x1l7klhg",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minHeight:"x2lwn1j"},expandingIE11:{flexBasis:"xdl72j9"},marginFirstChild:{":first-child":{marginTop:"x14l7nz5"}},marginLastChild:{":last-child":{marginBottom:"xzboxd6"}},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",maxWidth:"x193iq5w"}},k={center:{alignItems:"x6s0dn4"},end:{alignItems:"xuk3077"},start:{alignItems:"x1cy8zhl"}},l={4:{paddingEnd:"x150jy0e",paddingStart:"x1e558r4"},8:{paddingEnd:"x1sxyh0",paddingStart:"xurb0ha"},12:{paddingEnd:"xn6708d",paddingStart:"x1ye3gou"},16:{paddingEnd:"x1pi30zi",paddingStart:"x1swvt13"},20:{paddingEnd:"xc73u3c",paddingStart:"x5ib6vp"}},m={0:{paddingTop:"xexx8yu"},4:{paddingTop:"x1iorvi4"},8:{paddingTop:"x1y1aw1k"},12:{paddingTop:"xz9dl7a"},16:{paddingTop:"xyamay9"},20:{paddingTop:"x1cnzs8"},40:{paddingTop:"x13zrc24"}},n={4:{paddingTop:"x1iorvi4",paddingBottom:"xjkvuk6"},8:{paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2"},12:{paddingTop:"xz9dl7a",paddingBottom:"xsag5q8"},16:{paddingTop:"xyamay9",paddingBottom:"x1l90r2v"},20:{paddingTop:"x1cnzs8",paddingBottom:"xx6bls6"}},o={4:{marginTop:"xr9ek0c",marginBottom:"xjpr12u"},8:{marginTop:"x1gslohp",marginBottom:"x12nagc"},12:{marginTop:"x1k70j0n",marginBottom:"xzueoph"},16:{marginTop:"x1xmf6yo",marginBottom:"x1e56ztr"},20:{marginTop:"x1anpbxc",marginBottom:"xyorhqc"},24:{marginTop:"x14vqqas",marginBottom:"xod5an3"},32:{marginTop:"xw7yly9",marginBottom:"x1yztbdb"},40:{marginTop:"x1sy10c2",marginBottom:"xieb3on"}},p={bottom:{justifyContent:"x13a6bvl"},center:{justifyContent:"xl56j7k"},"space-between":{justifyContent:"x1qughib"}},q={4:{marginEnd:"xw3qccf",marginStart:"xsgj6o6"},8:{marginEnd:"x1emribx",marginStart:"x1i64zmx"},12:{marginEnd:"xq8finb",marginStart:"x16n37ib"},16:{marginEnd:"xktsk01",marginStart:"x1d52u69"},20:{marginEnd:"x1h5jrl4",marginStart:"xmn8rco"}},r=c("UserAgent").isBrowser("IE >= 11");function a(a,b){var d,e,f,g;d=(d=i(c("MDSColumnContext")))!=null?d:{};var t=a.align;e=t===void 0?(e=d.align)!=null?e:"stretch":t;t=a.children;var u=a.expanding;u=u===void 0?!1:u;var v=a.fallback,w=a.paddingHorizontal;f=w===void 0?(f=d.paddingHorizontal)!=null?f:0:w;w=a.paddingTop;var x=a.paddingVertical;x=x===void 0?0:x;var y=a.placeholder,z=a.verticalAlign;z=z===void 0?"top":z;var A=babelHelpers.objectWithoutPropertiesLoose(a,["align","children","expanding","fallback","paddingHorizontal","paddingTop","paddingVertical","placeholder","verticalAlign"]),B=c("stylex").compose(a.xstyle);g=h.jsxs(h.Fragment,{children:[d.hasDividers===!0&&h.jsx(c("BaseView.react"),{role:"separator",xstyle:[j.divider,q[(g=d.paddingHorizontal)!=null?g:0],d.spacing!=null&&j.dividerMargin]}),h.jsx(c("BaseView.react"),babelHelpers["extends"]({},A,{ref:b,xstyle:[j.root,u&&[j.expanding,r&&j.expandingIE11],e!=="stretch"&&k[e],z!=="top"&&p[z],l[f],n[x],w!=null&&m[w],d.spacing!=null&&[o[d.spacing],B.marginBottom==null&&j.marginLastChild,B.marginTop==null&&j.marginFirstChild],a.xstyle],children:h.jsx(c("MDSColumnContext").Provider,{value:null,children:t})}))]});if(v!==void 0){a.fallback;var C=babelHelpers.objectWithoutPropertiesLoose(a,["fallback"]);v===null?g=h.jsx(c("CometErrorBoundary.react"),{children:g}):g=h.jsx(c("CometErrorBoundary.react"),{fallback:function(a,c){return h.jsx(s,babelHelpers["extends"]({},C,{ref:b,children:typeof v==="function"?v(a,c):v}))},children:g})}if(y!==void 0){a.placeholder;A=babelHelpers.objectWithoutPropertiesLoose(a,["placeholder"]);g=h.jsx(c("CometPlaceholder.react"),{fallback:y!=null?h.jsx(s,babelHelpers["extends"]({},A,{ref:b,children:y})):null,children:g})}return g}a.displayName=a.name+" [from "+f.id+"]";var s=h.forwardRef(a);b=s;g["default"]=b}),98);
__d("MDSHeadlineWithAddOn.react",["BaseRow.react","BaseRowItem.react","Locale","MDSText.react","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={addOn:{display:"x78zum5",flexDirection:"xdt5ytf",justifyContent:"xl56j7k",marginStart:"x1i64zmx"},nonBreakingSpace:{visibility:"xlshs6z",width:"xnalus7"},textFlexFixForIE:{flexBasis:"xdl72j9"}},j={ltr:{direction:"xzt5al7"},rtl:{direction:"xzyj77d"}},k=c("gkx")("1299319");function a(a,b){var e=a.addOn,f=a.children,g=a.color,l=a.headlineRef,m=a.isSemanticHeading,n=a.numberOfLines;a=a.type;return h.jsx(c("MDSText.react"),{isSemanticHeading:!1,ref:b,type:a,children:h.jsxs(c("BaseRow.react"),{verticalAlign:"center",xstyle:j[d("Locale").isRTL()?"rtl":"ltr"],children:[h.jsx(c("BaseRowItem.react"),{expanding:!0,xstyle:k&&i.textFlexFixForIE,children:h.jsx(c("MDSText.react"),{color:g,isSemanticHeading:m,numberOfLines:n,ref:l,type:a,children:f})}),h.jsx(c("BaseRowItem.react"),{verticalAlign:"top",xstyle:i.addOn,children:h.jsxs(c("BaseRow.react"),{verticalAlign:"center",children:[h.jsx(c("BaseRowItem.react"),{xstyle:i.nonBreakingSpace,children:"\xa0"}),h.jsx(c("BaseRowItem.react"),{children:h.jsx(c("BaseRow.react"),{children:e})})]})})]})})}a.displayName=a.name+" [from "+f.id+"]";b=h.forwardRef(a);g["default"]=b}),98);
__d("MDSRowContext",["react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext(null);g["default"]=b}),98);
__d("MDSRowItem.react",["BaseRowItem.react","CometErrorBoundary.react","CometPlaceholder.react","MDSRowContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useContext,j={4:{paddingEnd:"xg83lxy",paddingStart:"x1h0ha7o"},8:{paddingEnd:"x150jy0e",paddingStart:"x1e558r4"},12:{paddingEnd:"xsyo7zv",paddingStart:"x16hj40l"},16:{paddingEnd:"x1sxyh0",paddingStart:"xurb0ha"},24:{paddingEnd:"xn6708d",paddingStart:"x1ye3gou"},32:{paddingEnd:"x1pi30zi",paddingStart:"x1swvt13"}},k={4:{paddingBottom:"x1120s5i",paddingTop:"x1nn3v0j"},8:{paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4"},12:{paddingBottom:"x10b6aqq",paddingTop:"x1yrsyyn"},16:{paddingBottom:"xwib8y2",paddingTop:"x1y1aw1k"},24:{paddingBottom:"xsag5q8",paddingTop:"xz9dl7a"},32:{paddingBottom:"x1l90r2v",paddingTop:"xyamay9"}};function a(a,b){var d;d=(d=i(c("MDSRowContext")))!=null?d:{};var e=d.spacingHorizontal;d=d.spacingVertical;var f=a.fallback,g=a.placeholder,m=babelHelpers.objectWithoutPropertiesLoose(a,["fallback","placeholder"]);if(g!==void 0){a.placeholder;var n=babelHelpers.objectWithoutPropertiesLoose(a,["placeholder"]);return h.jsx(c("CometPlaceholder.react"),{fallback:g!=null?h.jsx(l,babelHelpers["extends"]({},n,{ref:b,children:g})):null,children:h.jsx(l,babelHelpers["extends"]({},n,{ref:b}))})}if(f!==void 0){a.fallback;var o=babelHelpers.objectWithoutPropertiesLoose(a,["fallback"]);return f===null?h.jsx(c("CometErrorBoundary.react"),{children:h.jsx(l,babelHelpers["extends"]({},o,{ref:b}))}):h.jsx(c("CometErrorBoundary.react"),{fallback:function(a,c){return h.jsx(l,babelHelpers["extends"]({},o,{ref:b,children:typeof f==="function"?f(a,c):f}))},children:h.jsx(l,babelHelpers["extends"]({},o,{ref:b}))})}return h.jsx(c("BaseRowItem.react"),babelHelpers["extends"]({},m,{ref:b,useDeprecatedStyles:m.useDeprecatedStyles,xstyle:[j[e],k[d],m.xstyle],children:h.jsx(c("MDSRowContext").Provider,{value:null,children:m.children})}))}a.displayName=a.name+" [from "+f.id+"]";var l=h.forwardRef(a);b=l;g["default"]=b}),98);
__d("MDSRow.react",["BaseRow.react","MDSColumnContext","MDSColumnItem.react","MDSRowContext","MDSRowItem.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useContext,j=b.useMemo,k={4:{paddingEnd:"x150jy0e",paddingStart:"x1e558r4"},8:{paddingEnd:"x1sxyh0",paddingStart:"xurb0ha"},10:{paddingEnd:"x1iji9kk",paddingStart:"x1sln4lm"},12:{paddingEnd:"xn6708d",paddingStart:"x1ye3gou"},16:{paddingEnd:"x1pi30zi",paddingStart:"x1swvt13"}},l={0:{paddingTop:"xexx8yu"},4:{paddingTop:"x1iorvi4"},8:{paddingTop:"x1y1aw1k"},10:{paddingTop:"x889kno"},12:{paddingTop:"xz9dl7a"},16:{paddingTop:"xyamay9"},20:{paddingTop:"x1cnzs8"}},m={4:{paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4"},8:{paddingBottom:"xwib8y2",paddingTop:"x1y1aw1k"},10:{paddingBottom:"x1a8lsjc",paddingTop:"x889kno"},12:{paddingBottom:"xsag5q8",paddingTop:"xz9dl7a"},16:{paddingBottom:"x1l90r2v",paddingTop:"xyamay9"}},n={4:{marginEnd:"xwrv7xz",marginStart:"x8182xy"},8:{marginEnd:"xcud41i",marginStart:"x139jcc6"},10:{marginEnd:"x6zhf5e",marginStart:"xrzrlj5"},12:{marginEnd:"xykv574",marginStart:"xbmpl8g"},16:{marginEnd:"x1n0m28w",marginStart:"xp7jhwk"},24:{marginEnd:"x12rz0ws",marginStart:"x16hk5td"},32:{marginEnd:"x19f6ikt",marginStart:"x169t7cy"}},o={4:{marginBottom:"xmgb6t1",marginTop:"x1kgmq87"},8:{marginBottom:"x4vbgl9",marginTop:"x1rdy4ex"},10:{marginBottom:"xz62fqu",marginTop:"x16ldp7u"},12:{marginBottom:"x4cne27",marginTop:"xifccgj"},16:{marginBottom:"x1wsgfga",marginTop:"x9otpla"},24:{marginBottom:"xh3wvx0",marginTop:"x7wgvq7"},32:{marginBottom:"x1oo3vh0",marginTop:"xwya9rg"}};function a(a,b){var d=i(c("MDSColumnContext")),e=i(c("MDSRowContext")),f=(d==null?void 0:d.paddingHorizontal)!=null?0:12,g=(d==null?void 0:d.spacing)!=null?0:16,p=a.children,q=a.paddingHorizontal;f=q===void 0?f:q;q=a.paddingVertical;q=q===void 0?0:q;var r=a.paddingTop;g=r===void 0?a.paddingVertical==null?g:null:r;r=a.spacing;r=r===void 0?12:r;var s=a.spacingHorizontal,t=s===void 0?r:s;s=a.spacingVertical;var u=s===void 0?r:s;r=a.xstyle;s=babelHelpers.objectWithoutPropertiesLoose(a,["children","paddingHorizontal","paddingVertical","paddingTop","spacing","spacingHorizontal","spacingVertical","xstyle"]);a=j(function(){return{spacingHorizontal:t,spacingVertical:u}},[t,u]);b=h.jsx(c("BaseRow.react"),babelHelpers["extends"]({},s,{ref:b,xstyle:[k[f],m[q],g!=null&&l[g],n[t],o[u],r],children:h.jsx(c("MDSRowContext").Provider,{value:a,children:p})}));if(e!=null)return h.jsx(c("MDSRowItem.react"),{expanding:s.expanding,children:b});return d!=null?h.jsx(c("MDSColumnItem.react"),{expanding:s.expanding,children:b}):b}a.displayName=a.name+" [from "+f.id+"]";e=h.forwardRef(a);d=e;g["default"]=d}),98);
__d("getMDSTextHierarchyStyle",["memoizeWithArgs"],(function(a,b,c,d,e,f,g){"use strict";a=c("memoizeWithArgs")(function(a,b){switch(a){case 1:return{bodyType:"body1",headlineType:"headlineEmphasized1",metaType:"meta1"};case 2:return{bodyType:"body2",headlineType:"headlineEmphasized2",metaType:"meta2"};case 3:return{bodyType:"body3",headlineType:b===!0?"headline3":"headlineEmphasized3",metaType:"meta3"};default:case 4:return{bodyType:"body4",headlineType:b===!0?"headline4":"headlineEmphasized4",metaType:"meta4"};case"entityHeader1":return{bodyType:"body2",headlineType:"entityHeaderHeadline1",metaType:"entityHeaderMeta1"};case"entityHeader2":return{bodyType:"body2",headlineType:"entityHeaderHeadline2",metaType:"entityHeaderMeta2"}}},function(a,b){return String(a)+(b===!0?"":"e")});g["default"]=a}),98);
__d("MDSTextPairing.react",["MDSHeadlineWithAddOn.react","MDSText.react","getMDSTextHierarchyStyle","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={item:{marginBottom:"xu06os2",marginTop:"x1ok221b"},root:{display:"x78zum5",flexDirection:"xdt5ytf",marginBottom:"xz62fqu",marginTop:"x16ldp7u"}},j={1:{marginBottom:"x11tup63",marginTop:"x16z1lm9"},2:{marginBottom:"x4cne27",marginTop:"xifccgj"},entityHeader1:{marginBottom:"x1wsgfga",marginTop:"x9otpla"},entityHeader2:{marginBottom:"x1wsgfga",marginTop:"x9otpla"}},k={1:{marginBottom:"xwoyzhm",marginTop:"x1rhet7l"},2:{marginBottom:"xzueoph",marginTop:"x1k70j0n"},entityHeader1:{marginBottom:"x1e56ztr",marginTop:"x1xmf6yo"},entityHeader2:{marginBottom:"x1e56ztr",marginTop:"x1xmf6yo"}};function a(a){var b=a.body,d=a.bodyColor;d=d===void 0?"primary":d;var e=a.bodyLineLimit,f=a.bodyRef,g=a.headline,l=a.headlineAddOn,m=a.headlineColor;m=m===void 0?"primary":m;var n=a.headlineLineLimit,o=a.headlineRef,p=a.isSemanticHeading,q=a.level,r=a.meta,s=a.metaColor;s=s===void 0?"secondary":s;var t=a.metaLineLimit,u=a.metaLocation;u=u===void 0?"below":u;var v=a.metaRef,w=a.reduceEmphasis;w=w===void 0?!1:w;var x=a.testid;x=a.textAlign;a=x===void 0?"start":x;x=c("getMDSTextHierarchyStyle")(q,w);w=x.bodyType;var y=x.headlineType;x=x.metaType;var z=c("stylex")(i.item,k[q]);l=g!=null&&h.jsx("div",{className:z,children:l!=null?h.jsx(c("MDSHeadlineWithAddOn.react"),{addOn:l,color:m,headlineRef:o,isSemanticHeading:p,numberOfLines:n,type:y,children:g}):h.jsx(c("MDSText.react"),{align:a,color:m,isSemanticHeading:p,numberOfLines:n,ref:o,type:y,children:g})});m=r!=null&&h.jsx("div",{className:z,children:h.jsx(c("MDSText.react"),{align:a,color:s,isSemanticHeading:p,numberOfLines:t,ref:v,type:x,children:r})});return h.jsxs("div",{className:c("stylex")(i.root,j[q]),"data-testid":void 0,children:[u==="above"&&m,l,b!=null&&h.jsx("div",{className:z,children:h.jsx(c("MDSText.react"),{align:a,color:d,isSemanticHeading:!1,numberOfLines:e,ref:f,type:w,children:b})}),u==="below"&&m]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MessengerDesktopPresenceInfo",["FBLogger","WebStorage"],(function(a,b,c,d,e,f,g){"use strict";var h="__fb_messenger_desktop_presence_info";function a(){var a=c("WebStorage").getLocalStorageForRead();return JSON.parse((a=a==null?void 0:a.getItem(h))!=null?a:"null")}function b(){var a=c("WebStorage").getLocalStorage();if(a==null){c("FBLogger")("desktop_messenger_deeplink_presence","local_storage_not_found").warn("Messenger Desktop Presence Token cannot be created if local storage doesn't exist");return null}var b={lastActiveTimestamp:Date.now()};a=c("WebStorage").setItemGuarded(a,h,JSON.stringify(b));a!=null&&c("FBLogger")("desktop_messenger_deeplink_presence","create_presence_info_error").warn(a.toString());return b}g.getPresenceInfo=a;g.createPresenceInfo=b}),98);
__d("MessengerDesktopLocalServerRequest",["ConstUriUtils","MessengerDesktopPresenceInfo"],(function(a,b,c,d,e,f,g){"use strict";var h=2e3;a=function(){function a(a,b){var c=this;this.$1=function(){c.request.status===200&&d("MessengerDesktopPresenceInfo").createPresenceInfo()};b="http://localhost:"+b+a;this.uri=(a=(a=d("ConstUriUtils").getUri(b))==null?void 0:a.toString())!=null?a:b;this.request=new XMLHttpRequest();this.request.timeout=h;this.request.onloadend=this.$1}var b=a.prototype;b.setOnLoadEndHandler=function(a){var b=this;this.request.onloadend=function(){b.$1(),a(b.request.status)};return this};b.setErrorHandler=function(a){var b=this;this.request.onerror=function(){b.request.status===500&&d("MessengerDesktopPresenceInfo").createPresenceInfo(),a(b.request.status)};return this};b.setTimeoutHandler=function(a){this.request.ontimeout=a;return this};b.send=function(){this.request.open("GET",this.uri),this.request.send()};return a}();g["default"]=a}),98);
__d("MessengerDesktopPromoFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744027");c=b("FalcoLoggerInternal").create("messenger_desktop_promo",a);e.exports=c}),null);
__d("MessengerDesktopPromoEventLogger",["MessengerDesktopPromoFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return c("MessengerDesktopPromoFalcoEvent").log(function(){return a})};g.log=a}),98);
__d("XMessengerDotComDesktopControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/desktop/",Object.freeze({start_download:!1,m:!1}),new Set(["m"]));b=a;g["default"]=b}),98);
__d("XMessengerDotComDesktopLaunchAppInterstitialControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/desktop/launch/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("MessengerDesktopDeepLinkUtils",["fbt","MessengerDesktopLocalServerRequest","MessengerDesktopPresenceInfo","MessengerDesktopPromoEventLogger","Promise","UserAgent","XMessengerDotComDesktopControllerRouteBuilder","XMessengerDotComDesktopLaunchAppInterstitialControllerRouteBuilder","gkx","qex","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=i.useCallback,k=i.useEffect,l=i.useRef,m="messenger";i=3103;var n=1e3*60*60*24*28,o="https://www.messenger.com/desktop/";function a(a){return m+"://room?joinurl="+a}function e(a){return new(b("Promise"))(function(b){new(c("MessengerDesktopLocalServerRequest"))("/ping",a).setOnLoadEndHandler(function(a){return b(a)}).setTimeoutHandler(function(a){return b(!1)}).setErrorHandler(function(a){return b(!1)}).send()})}function f(){var a=d("MessengerDesktopPresenceInfo").getPresenceInfo();return a==null?!1:Date.now()-a.lastActiveTimestamp<=n}function p(){var a=c("gkx")("655"),b=c("gkx")("4716");if(b){b=c("gkx")("4687");return a||b}else return a}function q(){if(c("gkx")("1987549")||!p())return!1;switch(s()){case"Windows":return c("qex")._("167")===!0;case"Mac":return c("gkx")("297");default:return!1}}var r={openMessengerForDesktop:h._("__JHASH__XxNs-oGUpT___JHASH__"),openMessengerForMac:h._("__JHASH__tlUlAHzvu6R__JHASH__"),openMessengerForWindows:h._("__JHASH__3NgfF3NHofM__JHASH__"),tryMessengerForDesktop:h._("__JHASH___P6bnngRU_E__JHASH__"),tryMessengerForMac:h._("__JHASH__3Fm9-zbx5PN__JHASH__"),tryMessengerForWindows:h._("__JHASH__56Y2Um9FCTk__JHASH__")};function s(){if(c("UserAgent").isPlatform("Windows"))return"Windows";else if(c("UserAgent").isPlatform("Mac OS X"))return"Mac";return"Desktop"}function t(a){return(a=c("XMessengerDotComDesktopControllerRouteBuilder").buildUri({funnel_session_id:a}).setDomain("www.messenger.com"))==null?void 0:(a=a.setProtocol("https"))==null?void 0:(a=a.setFragment("startDownload"))==null?void 0:a.toString()}function u(a){return(a=c("XMessengerDotComDesktopLaunchAppInterstitialControllerRouteBuilder").buildUri(a).setDomain("messenger.com"))==null?void 0:(a=a.setProtocol("https"))==null?void 0:a.toString()}function v(){var a=p()?"open":"try",b=s();return r[a+"MessengerFor"+b]}function w(a){var b;return p()?(b=u(a))!=null?b:o:(b=t(a.funnel_session_id))!=null?b:o}function x(a,b){var c=l(!1);k(function(){c.current||(c.current=!0,d("MessengerDesktopPromoEventLogger").log({event:"Impression",funnelSessionId:a,location:b}))},[a,b]);return j(function(){d("MessengerDesktopPromoEventLogger").log({event:"Click",funnelSessionId:a,location:b})},[a,b])}g.PORT=i;g.getRoomDeepLink=a;g.isMessengerDesktopRunning=e;g.isMessengerDesktopProbablyInstalled=f;g.isMessengerDesktopDeeplinkEligible=p;g.isMessengerDesktopDeeplinkEnabled=q;g.getDeeplinkButtonLabel=v;g.getDeeplinkButtonURI=w;g.useMessengerDesktopPromoEventLogger=x}),98);
__d("MAWTimeUtils",["I64","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return d("I64").of_float(a*1e3)}function a(a){return a>d("WATimeUtils").MAX_INT?d("I64").of_float(a):h(a)}g.toTimestamp=h;g.millisTimeToTimestamp=a}),98);
__d("MWChatConfirmTabCloseDialog.bs",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={body:g._("__JHASH__BpxPpP9rp8f__JHASH__"),confirm:g._("__JHASH__IRN53cEfYnc__JHASH__"),title:g._("__JHASH__56tk0437PKy__JHASH__")};f.content=a}),null);
__d("JSMap.bs",["bs_belt_Option","bs_caml_option","bs_curry"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("bs_belt_Option").getExn(b("bs_caml_option").nullable_to_opt((a.has(c)?a:a.set(c,b("bs_curry")._1(d))).get(c)))}f.getOrMake=a}),null);
__d("MWChatEphemeralMediaTemporarySeenState.bs",["JSMap.bs","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=new Map();function a(a,c){a=b("JSMap.bs").getOrMake(i,a,function(a){return new Set()});a.add(c)}function c(a,b){a=i.get(a);if(a==null)return!1;else return a.has(b)}function j(a){i["delete"](a)}function d(a){h.useEffect(function(){return function(b){return j(a)}},[a])}f.markSeenThisSession=a;f.isSeenThisSession=c;f.endSession=j;f.useEndSessionOnDismount=d}),null);
__d("MWV2ComposerHasContentContext.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=h.createContext({hasContentRef:void 0,shouldClearDraftMessageRef:void 0});function a(a){a=a.children;var b=h.useRef(!1),c=h.useRef(!1),d=h.useMemo(function(){return{hasContentRef:b,shouldClearDraftMessageRef:c}},[b,c]);return h.createElement(i.Provider,{children:a,value:d})}function c(a){return h.useContext(i)}d=a;f.make=d;f.useContext=c}),null);
__d("UseMWV2CloseTab.bs",["MWChatConfirmTabCloseDialog.bs","MWChatEphemeralMediaTemporarySeenState.bs","MWChatStateActions.bs","MWChatStateV2.bs","MWV2ComposerHasContentContext.bs","bs_curry","bs_int64","react","useCometConfirmationDialog","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a,c){var d=b("useReStore")(),e=b("MWChatStateV2.bs").useDispatch(),f=b("useCometConfirmationDialog")(),g=b("MWV2ComposerHasContentContext.bs").useContext(),i=g.shouldClearDraftMessageRef,j=g.hasContentRef;return h.useCallback(function(d){var g=function(d){a!==void 0&&b("MWChatEphemeralMediaTemporarySeenState.bs").endSession(b("bs_int64").to_string(a.threadKey));return b("bs_curry")._1(e,b("MWChatStateActions.bs").closeTab(Date.now(),c.tabId))};if(a!==void 0&&j!==void 0&&j.current)return b("bs_curry")._3(f,b("MWChatConfirmTabCloseDialog.bs").content,function(a){i!==void 0&&(i.current=!0);return g()},function(a){if(i!==void 0){i.current=!1;return}});else return g()},[a,c,d,e,f,j,i])}f.useHook=a}),null);
__d("MWChatFocusComposerContext.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=h.createContext({focusComposer:void 0,setFocusComposer:function(a){}});function a(a){a=a.children;var b=h.useRef(),c=b.current,d=h.useMemo(function(){return{focusComposer:c,setFocusComposer:function(a){b.current=a}}},[c]);return h.createElement(i.Provider,{children:a,value:d})}c=a;f.context=i;f.provider=c}),null);
__d("MercuryFilters.bs",[],(function(a,b,c,d,e,f){"use strict";var g="draft",h="folders",i="unread";function a(a){return[i,g]}function b(a){if(a===i||a===g)return!0;else return a===h}c="all";d="groups";e="named";var j="unnamed",k="WORK_UNSYNCED_CHAT";f.all=c;f.draft=g;f.folders=h;f.unread=i;f.groups=d;f.named=e;f.unnamed=j;f.unsyncedChat=k;f.getSupportedFilters=a;f.isSupportedFilter=b}),null);
__d("bs_js_json",["bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function a(a){var b=typeof a;if(b==="string")return{TAG:0,_0:a};else if(b==="number")return{TAG:1,_0:a};else if(b==="boolean")if(a===!0)return 1;else return 0;else if(a===null)return 2;else if(Array.isArray(a))return{TAG:3,_0:a};else return{TAG:2,_0:a}}function c(a,b){switch(b){case 0:return typeof a==="string";case 1:return typeof a==="number";case 2:if(a!==null&&typeof a==="object")return!Array.isArray(a);else return!1;case 3:return Array.isArray(a);case 4:return typeof a==="boolean";case 5:return a===null}}function d(a){if(typeof a==="string")return a}function e(a){if(typeof a==="number")return a}function g(a){if(typeof a==="object"&&!Array.isArray(a)&&a!==null)return b("bs_caml_option").some(a)}function h(a){if(Array.isArray(a))return a}function i(a){if(typeof a==="boolean")return a}function j(a){if(a===null)return null}var k=function(a){a=[a];var b=[{kind:0,i:0,parent:a}];while(b.length!==0){var c=b[b.length-1];c.kind===0?(c.val=c.parent[c.i],++c.i===c.parent.length&&b.pop()):b.pop();var d=c.val;if(typeof d==="object")if(Array.isArray(d)&&d.length!==0)b.push({kind:0,i:0,parent:d,val:void 0});else for(var e in d){if(e==="RE_PRIVATE_NONE"){c.kind===0?c.parent[c.i-1]=void 0:c.parent[c.i]=void 0;continue}b.push({kind:1,i:e,parent:d,val:d[e]})}}return a[0]};function l(a){return function(a){a=JSON.stringify(a,function(a,b){return b===void 0?{RE_PRIVATE_NONE:!0}:b});if(a===void 0)throw new TypeError("output is undefined");return a}(a)}function m(a){return k(JSON.parse(a))}f.classify=a;f.test=c;f.decodeString=d;f.decodeNumber=e;f.decodeObject=g;f.decodeArray=h;f.decodeBoolean=i;f.decodeNull=j;f.deserializeUnsafe=m;f.serializeExn=l}),null);
__d("useGroupThreadViewParams",["useCometEntityKey","useCometRouterState"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useCometEntityKey")(),b=c("useCometRouterState")();b=b==null?void 0:b.main.route.params;a=(a==null?void 0:a.entity_type)==="group"&&(a==null?void 0:a.section)==="CHATS";if(!a)return null;a=b==null?void 0:b.thread_id;b=b==null?void 0:b.idorvanity;if(a==null||b==null)return null;return typeof a==="string"&&typeof b==="string"?{groupId:b,threadKey:a}:null}g["default"]=a}),98);
__d("MWInboxURIState.bs",["CometRouteParams","CurrentEnvironment","MAWGating","MWCMThreadTypes.bs","MercuryFilters.bs","MercuryIDs","MessengerURIConstants","ReQL.bs","ReQLSubscription.bs","SortedAsyncIterable.bs","URI","bs_belt_Option","bs_caml_array","bs_caml_exceptions","bs_caml_format","bs_caml_option","bs_curry","bs_js_json","bs_js_null_undefined","cr:3904","cr:3905","gkx","qex","react","useCurrentRoute","useGroupThreadViewParams","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react");d={};var j=b("bs_caml_exceptions").create("MWInboxURIState.NonMessengerState"),k="/?$";function l(a){a=a.match(new RegExp(b("MessengerURIConstants").THREAD_PREFIX+"([^/]+)/?$"));return b("bs_belt_Option").map(a===null?void 0:b("bs_caml_option").some(a),function(a){return decodeURIComponent(b("bs_caml_array").get(a,1))})}function m(a){a=a.match(new RegExp(b("MessengerURIConstants").FOLDERS_PATH+("/([^/]+)"+(b("MessengerURIConstants").THREAD_PREFIX+"([^/]+)/?$"))));return b("bs_belt_Option").map(a===null?void 0:b("bs_caml_option").some(a),function(a){return decodeURIComponent(b("bs_caml_array").get(a,1))})}var n=b("qex")._("1507")===!0,o=b("CurrentEnvironment").instagramdotcom?b("MessengerURIConstants").INSTAGRAM_DIRECT_PATH:b("CurrentEnvironment").facebookdotcom?b("MessengerURIConstants").FACEBOOK_PREFIX:"";function p(a){a=new(h||(h=b("URI")))(a.url);var c=a.getPath();a=a.getQueryData();var d=b("gkx")("1300945"),e=new RegExp("^"+(o+"(/|$)")),f=b("bs_belt_Option").isSome(a.story_id);if(b("CurrentEnvironment").facebookdotcom&&!(e.test(c)||d&&c==="/"&&!f))throw{Error:new Error(),RE_EXN_ID:j};d=c.replace(e,"/");f=a.filter;c=a.fbid;e=a.qa;var g=a.sa,i=a.t,p=a.threadIDs;a=a.id;try{p=b("bs_belt_Option").map(p,function(a){return JSON.parse(a)});p!==void 0&&b("bs_belt_Option").map(b("bs_js_json").decodeArray(b("bs_caml_option").valFromOption(p)),function(a){return a.reduce(function(a,c){c=b("bs_js_json").decodeString(c);if(b("MercuryIDs").isValidThreadID(b("bs_js_null_undefined").fromOption(b("bs_belt_Option").map(c,function(a){return a}))))return a.concat([c]);else return a},[])})}catch(a){}if(b("bs_belt_Option").isSome(b("bs_caml_option").null_to_opt(d.match(new RegExp("^"+b("MessengerURIConstants").PEOPLE_PATH)))))p={_0:void 0,TAG:1};else if(b("bs_belt_Option").isSome(b("bs_caml_option").null_to_opt(d.match(new RegExp("^"+b("MessengerURIConstants").PAYMENT_PATH)))))p={_0:void 0,TAG:2};else if(b("bs_belt_Option").isSome(b("bs_caml_option").null_to_opt(d.match(new RegExp("^"+b("MessengerURIConstants").SEARCH_PATH)))))if(n)if(e!==void 0)p={_0:void 0,TAG:4};else if(g!==void 0&&i!==void 0){e=b("bs_caml_option").valFromOption(i);p=e==="friend"||e==="non_friend"?{_0:void 0,TAG:5}:e==="page"?{_0:void 0,TAG:6}:e==="thread"?{_0:void 0,TAG:7}:{_0:void 0,TAG:3}}else p={_0:void 0,TAG:3};else p={_0:void 0,TAG:3};else if(b("bs_belt_Option").isSome(b("bs_caml_option").null_to_opt(d.match(new RegExp("^"+b("MessengerURIConstants").TEAMWORK_GROUP_VIEW)))))p={_0:void 0,TAG:7};else if(b("bs_belt_Option").isSome(b("bs_caml_option").null_to_opt(d.match(new RegExp("^"+b("MessengerURIConstants").TEAMWORK_CHAT_VIEW)))))p={_0:void 0,TAG:5};else if(b("bs_belt_Option").isSome(b("bs_caml_option").null_to_opt(d.match(new RegExp("^"+b("MessengerURIConstants").TEAMWORK_UNREAD_VIEW)))))p={_0:void 0,TAG:8};else if(b("bs_belt_Option").isSome(b("bs_caml_option").null_to_opt(d.match(new RegExp("^"+b("MessengerURIConstants").TEAMWORK_ANNOUNCEMENT_GROUP_VIEW)))))p={_0:void 0,TAG:9};else if(d==="/read/")p={_0:c!==void 0?{_0:b("bs_caml_format").caml_int64_of_string(c),TAG:3}:void 0,TAG:10};else{if(b("bs_belt_Option").isSome(b("bs_caml_option").null_to_opt(d.match(new RegExp("^"+(b("MessengerURIConstants").COMPOSE_SUBPATH+k))))))g=[{_0:"E2EEToggleOff",TAG:0},void 0,void 0];else if(b("bs_belt_Option").isSome(b("bs_caml_option").null_to_opt(d.match(new RegExp("^"+(b("MessengerURIConstants").PAYMENT_PATH+b("MessengerURIConstants").PAYMENT_PAY_PATH))))))g=a!==void 0?[{_0:void 0,TAG:1},a,void 0]:[{_0:void 0,TAG:2},void 0,void 0];else{i=l(d);try{e=b("bs_belt_Option").map(i,b("bs_caml_format").caml_int64_of_string)}catch(a){e=void 0}c=e!==void 0?[{_0:e,TAG:3},i]:[void 0,void 0];a=m(d);g=[c[0],c[1],a]}p={_0:g[0],TAG:10}}b("bs_belt_Option").isSome(b("bs_caml_option").null_to_opt(d.match(new RegExp("^"+b("MessengerURIConstants").FILTERED_REQUESTS_PATH))))||(b("bs_belt_Option").isSome(b("bs_caml_option").null_to_opt(d.match(new RegExp("^"+b("MessengerURIConstants").ARCHIVED_PATH))))||(b("bs_belt_Option").isSome(b("bs_caml_option").null_to_opt(d.match(new RegExp("^"+b("MessengerURIConstants").MESSAGE_REQUESTS_PATH))))||b("bs_belt_Option").isSome(b("bs_caml_option").null_to_opt(d.match(new RegExp("^"+b("MessengerURIConstants").FOLDERS_PATH))))));b("bs_belt_Option").mapWithDefault(f,!1,b("MercuryFilters.bs").isSupportedFilter)&&b("bs_belt_Option").getExn(f);return p}var q=b("cr:3904")==null?void 0:b("bs_caml_option").some(b("cr:3904"));function r(a){if(!(b("cr:3905")==null)&&!b("MAWGating").isOccamadillo())return b("bs_curry")._1(b("cr:3905").isThreadId,a);else return!1}var s=b("gkx")("1950")||b("gkx")("6975");function t(a){if(a!==void 0&&b("MWCMThreadTypes.bs").isAnyCMThread(a.threadType))return!0;else return!1}function u(a){var c=b("useReStore")();return b("ReQLSubscription.bs").useFirst(i.useMemo(function(){return b("bs_belt_Option").mapWithDefault(a,b("SortedAsyncIterable.bs").empty(),function(a){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("threads")),{hd:a,tl:0})})},[c,JSON.stringify(a)]))}function a(a){return new(h||(h=b("URI")))(a.substring(o.length)).getPath().split("/")}function c(a){a=a==null?void 0:b("bs_caml_option").some(a);var c=b("useCurrentRoute")(),d=b("useGroupThreadViewParams")();try{a=b("bs_belt_Option").map(a,b("bs_caml_format").caml_int64_of_string)}catch(b){a=void 0}var e=u(a);if(!(d==null))return{_0:{_0:b("bs_caml_format").caml_int64_of_string(d.threadKey),TAG:3},TAG:10};if(c==null)return{_0:void 0,TAG:0};d=new(h||(h=b("URI")))(c.url).getPath();if(!d.startsWith(o)&&!d.startsWith(b("MessengerURIConstants").GROUPS_PATH))throw{Error:new Error(),RE_EXN_ID:j};d=c.url.substring(o.length);var f;if(b("cr:3904")==null)f=void 0;else{var g=b("bs_curry")._1(q.getMostRecentSecureThreadKey);f=g!==void 0?g:void 0}g=b("CometRouteParams").useRouteParams();g=g.initial_e2ee_toggle_position==="1"||g.initial_e2ee_toggle_position===1||g.initial_e2ee_toggle_position===!0?"E2EEToggleOn":"E2EEToggleOff";d=new h(d).getPath().split("/");var i;if(a!==void 0){var k;if(d.length!==4)k=2;else{var l=d[0];if(l===""){l=d[1];if(l==="e2ee"){l=d[2];if(l==="t"&&f===void 0){if(b("MAWGating").isOccamadillo())return{_0:{_0:a,TAG:4},TAG:10};k=2}else k=2}else k=2}else k=2}if(k===2){if(r(a))return p(c);l=t(e);if(l&&!s)return{_0:void 0,TAG:0};else return{_0:{_0:a,TAG:3},TAG:10}}}else{k=d.length;if(k>=4)return p(c);switch(k){case 0:return p(c);case 1:e=d[0];if(e!=="")return p(c);if(f===void 0)return p(c);i=f;break;case 2:l=d[0];a=d[1];switch(a){case"":if(f===void 0)return p(c);i=f;break;case"new":return{_0:{_0:g,TAG:0},TAG:10};default:if(l!=="")return p(c);k=d[1];if(k!=="t")return p(c);if(f===void 0)return p(c);i=f}break;case 3:e=d[1];if(e!=="t")return p(c);a=d[2];if(a==="")return p(c);try{g=b("bs_caml_format").caml_int64_of_string(a)}catch(a){g=void 0}if(g!==void 0&&!r(g))return{_0:{_0:g,TAG:3},TAG:10};else return{_0:void 0,TAG:0}}}return{_0:{_0:b("bs_caml_format").caml_int64_of_string(i),TAG:4},TAG:10}}f.MessagingTag=d;f.NonMessengerState=j;f._getFolderID=m;f.isSearchRefactor=n;f.prefix=o;f.parseURI_DEPRECATED=p;f.$MAWSessionStorage$requireCondXplat=b("cr:3904");f.$MAWThreadId$requireCondXplat=b("cr:3905");f.useThread=u;f.getRouteTokens=a;f.useState=c}),null);
__d("MWInboxProvider.bs",["MWInboxURIState.bs","bs_js_null_undefined","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=h.createContext();function a(a){var c=a.children;a=a.threadKey;a=b("bs_js_null_undefined").fromOption(a);a=b("MWInboxURIState.bs").useState(a);return h.createElement(i.Provider,{children:c,value:a})}c=a;f.context=i;f.make=c}),null);
__d("MWInboxPassiveContext.bs",["MWInboxProvider.bs","bs_curry","bs_int64","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){}e={isPassive:!1,setIsPassive:a};var i=h.createContext(e);function c(a){var c=a.children,d=a.isPassive,e=a.setIsPassive;a=h.useContext(b("MWInboxProvider.bs").context);if(a.TAG===10){a=a._0;a=a!==void 0&&a.TAG===3?b("bs_int64").to_string(a._0):""}else a="";h.useEffect(function(){b("bs_curry")._1(e,function(a){return!1})},[a]);a=h.useMemo(function(){return{isPassive:d,setIsPassive:e}},[d]);return h.createElement(i.Provider,{children:c,value:a})}a={make:c};function d(a){return h.useContext(i)}f.Provider=a;f.useContext=d}),null);
__d("MWChatTabFocusHandler.bs",["CometHideLayerOnEscape.react","FocusWithinHandler.react","MWChatFocusComposerContext.bs","MWInboxPassiveContext.bs","bs_caml_js_exceptions","bs_caml_option","bs_curry","bs_js_exn","gkx","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={root:{height:"x5yr21d",":focus":{outline:"x1uvtmcs"}}};function k(a){try{return document.activeElement.getAttribute("data-release-focus-from")==="CLICK"}catch(c){a=b("bs_caml_js_exceptions").internalToOCamlException(c);if(a.RE_EXN_ID===b("bs_js_exn").$$Error)return!1;throw a}}function a(a){var c=a.onEscape,d=a.onFocus,e=a.onBlur,f=a.xstyle;a=a.children;c=c!==void 0?c:function(a){};var g=d!==void 0?d:function(a){},l=e!==void 0?e:function(a){};d=f!==void 0?b("bs_caml_option").valFromOption(f):!1;var m=i.useRef(null);e=b("MWInboxPassiveContext.bs").useContext();var n=e.setIsPassive;f=i.useContext(b("MWChatFocusComposerContext.bs").context);var o=f.focusComposer;e=i.useCallback(function(a){a=m.current;if(!(a==null)&&o!==void 0&&window.getSelection().toString()===""&&(a===document.activeElement||k()))return b("bs_curry")._1(o)},[m,o]);return i.jsx(b("FocusWithinHandler.react"),{onBlurWithin:function(a){return b("bs_curry")._1(l)},onFocusWithin:function(a){a.target.getAttribute("data-prevent_chattab_focus")==null&&b("bs_curry")._1(g);var c=m.current;!(c==null)&&o!==void 0&&c===a.target&&b("bs_curry")._1(o);if(b("gkx")("6531"))return b("bs_curry")._1(n,function(a){return!1})},children:i.jsx(b("CometHideLayerOnEscape.react"),{onHide:c,children:i.jsx("div",{className:(h||(h=b("stylex")))(j.root,d),onClick:e,ref:m,tabIndex:-1,children:a})})})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.styles=j;f.getShouldTakeFocusFromActiveElement=k;f.make=c}),null);
__d("isFacebookMessengerInboxURI",["isFacebookURI"],(function(a,b,c,d,e,f,g){function a(a){return c("isFacebookURI")(a)&&a.getPath().startsWith("/messages")}g["default"]=a}),98);
__d("MWCMUseShouldGoToFullScreenChat.bs",["URI","isFacebookMessengerInboxURI","isMessengerDotComURI"],(function(a,b,c,d,e,f){"use strict";var g;function a(a){a=b("isMessengerDotComURI")(new(g||(g=b("URI")))(window.location.href));var c=b("isFacebookMessengerInboxURI")(new g(window.location.href));if(a)return!0;else return c}f.useHook=a}),null);
__d("LS.re",["LS.bs"],(function(a,b,c,d,e,f){a=b("LS.bs").make;f.make=a}),null);
__d("usePublicChatShortlinkCallback",["ConstUriUtils","I64","JSResourceForInteraction","LS.re","LSOptimisticFetchPendingGroupInvite","ReQL","react","useCometLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useEffect,j=b.useRef,k=c("JSResourceForInteraction")("MWJoinPublicChatDialog.react").__setRef("usePublicChatShortlinkCallback");function l(a){a=d("ConstUriUtils").getUri(a);if(a==null?void 0:a.isSubdomainOfDomain("m.me")){a=a==null?void 0:(a=a.getPath())==null?void 0:a.split("/").filter(function(a){return a!==""});return(a==null?void 0:a.length)===2&&a[0]==="j"?a[1]:null}return null}function a(a){var b=a.onSuccess,e=j(!1),f=j(),g=j(),m=c("useReStore")();a=c("useCometLazyDialog")(k);var n=a[0];i(function(){return function(){f.current==null?void 0:f.current(),g.current==null?void 0:g.current()}},[]);return h(function(a){var h=l(a);h!=null&&(m.runInTransaction(function(a){return c("LSOptimisticFetchPendingGroupInvite")(h,void 0,void 0,d("LS.re").make(a))},"readwrite"),f.current=d("ReQL").fromTableAscending(m.table("group_invitations_pending")).getKeyRange(h).subscribe(function(a,c){if(c.operation!=="delete"){var i=c.value;if((i==null?void 0:i.isSubscribed)&&(i==null?void 0:i.threadId)!=null){b==null?void 0:b(d("I64").to_string(i.threadId));return}(i==null?void 0:i.threadTitle.length)>0&&!e.current&&(e.current=!0,n({linkHash:h},function(){e.current=!1}),f.current==null?void 0:f.current(),Boolean(i.needsAdminApprovalForNewParticipant)||(g.current=d("ReQL").fromTableAscending(m.table("threads")).subscribe(function(a,c){c.operation!=="delete"&&(c.value.threadName===i.threadTitle&&(b==null?void 0:b(d("I64").to_string(c.value.threadKey)),g.current==null?void 0:g.current()))})))}}))},[m,n,b])}g["default"]=a}),98);
__d("MWThreadKey.bs",["bs_int64","react","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=h.createContext();function a(a){var c=a.children,d=a.id;a=b("bs_int64").to_string(d);var e=h.useMemo(function(){return d},[a]),f=h.useContext(i);if(f!==void 0)return b("unrecoverableViolation")("You can't nest MWThreadKey in another MWThreadKey. This will cause SEVs as things might think they're in the wrong thread","messenger_web_product");else return h.jsx(i.Provider,{children:c,value:e},a)}function c(a){return h.useContext(i)}function d(a){a=h.useContext(i);if(a!==void 0)return a;else return b("unrecoverableViolation")("Tried to get a thread key when there was none","messenger_web_product")}e=a;f.make=e;f.useIdMemoized=c;f.useIdMemoizedExn=d}),null);
__d("MWLSMarkThreadAsRead.bs",["LS.bs","LSOptimisticMarkThreadReadV2","LSTransaction.bs","MWInboxPassiveContext.bs","MWThreadKey.bs","ReQL.bs","ServerTime","bs_caml_int64","bs_caml_obj","bs_curry","gkx","promiseDone","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("useReStore")(),d=b("MWThreadKey.bs").useIdMemoizedExn();a=b("MWInboxPassiveContext.bs").useContext();var e=a.setIsPassive;return h.useCallback(function(a){b("gkx")("6531")&&b("bs_curry")._1(e,function(a){return!1}),b("promiseDone")(b("LSTransaction.bs").run(c,function(a){return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("threads")),{hd:d,tl:0})).then(function(c){c=c!==void 0?[c.lastActivityTimestampMs,c.lastReadWatermarkTimestampMs]:[void 0,void 0];if(b("bs_caml_obj").caml_greaterthan(c[0],c[1]))return b("LSOptimisticMarkThreadReadV2")(d,b("bs_caml_int64").of_float(b("ServerTime").getMillis()),b("LS.bs").make(a));else return window.Promise.resolve()})},"readWrite"))},[d,c])}f.useHook=a}),null);
__d("MWLSThread.bs",["ReQL.bs","ReQLSubscription.bs","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("useReStore")();return b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("threads")),{hd:a,tl:0})},[c,JSON.stringify(a)]))}function c(a){var c=b("useReStore")();return b("ReQLSubscription.bs").useFirstExn(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("threads")),{hd:a,tl:0})},[c,JSON.stringify(a)]))}f.useThread=a;f.useThreadExn=c}),null);
__d("MWLSThreadIsPinned.bs",["MWThreadKey.bs","ReQL.bs","ReQLSubscription.bs","bs_belt_Option","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("useReStore")(),d=b("MWThreadKey.bs").useIdMemoizedExn();return b("bs_belt_Option").mapWithDefault(b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("pinned_threads")),{hd:d,tl:0})},[c,d])),!1,function(a){return!0})}f.useHook=a}),null);
__d("MessengerMuteUtils.bs",["fbt","DateStrings","MWCMThreadTypes.bs","bs_caml_int64","formatDate"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a<=0)if(a===-1)return g._("__JHASH__Qqz4BaNxhpZ__JHASH__");else return;if(a<86401)return;var c=new Date(a*1e3).getDay(),d=c===new Date().getDay(),e=c===new Date().getDay()+1;if(e)return g._("__JHASH__oudW1xi6NTV__JHASH__",[g._param("time",b("formatDate")(a,"g:ia"))]);else if(d)return g._("__JHASH__so9VkYDJtTA__JHASH__",[g._param("time",b("formatDate")(a,"g:ia"))]);else return g._("__JHASH__8p1YQCn8sSf__JHASH__",[g._param("time",b("formatDate")(a,"g:ia")),g._param("weekday name",b("DateStrings").getWeekdayName(c))])}function c(a){if(a)return g._("__JHASH__vpk4cwy2c0D__JHASH__");else return g._("__JHASH__eAj1-l7LtAU__JHASH__")}var h=g._("__JHASH__mE99UrtEjlr__JHASH__"),i=g._("__JHASH__UKvmKpgy_Wn__JHASH__");function d(a,b){if(a===void 0)return g._("__JHASH__f_P00nfKfsd__JHASH__");switch(a.TAG){case 0:return g._("__JHASH__y6CbIpxcfjc__JHASH__");case 1:return g._("__JHASH__KZVYUin3ZRV__JHASH__");case 2:return g._("__JHASH__3siRtUcKeun__JHASH__")}}function e(a){var c=a.muteCallsExpireTimeMs,d=a.muteExpireTimeMs;if(b("MWCMThreadTypes.bs").isUnjoinedCMThread(a.threadType))return 0;a=Math.min(b("bs_caml_int64").to_float(d),b("bs_caml_int64").to_float(c));d=Math.max(b("bs_caml_int64").to_float(d),b("bs_caml_int64").to_float(c));if(a===-1)return-1;else return d}var j=0,k=-1;f.mutedUntilLabel=a;f.muteActionLabel=c;f.chatNotificationActionLabel=h;f.manageNotificationsMenuItemLabel=i;f.muteDialogTitle=d;f.unmutedMs=j;f.mutedPermanentlyMs=k;f.calcMuteUntilMs=e}),null);
__d("LSRtcCallState.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];f.noOngoingCall=a;f.audioGroupCall=c;f.videoGroupCall=d;f.video1to1Call=e;f.audio1to1Call=b}),null);
__d("RTCCallState.bs",["LSRtcCallState.bs","MessagingThreadType.bs","bs_caml","bs_int64","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";function g(a){if(a===b("MessagingThreadType.bs").group)return!0;else return a===b("MessagingThreadType.bs").tincanGroupDisappearing}function a(a,c){if(b("bs_caml").i64_eq(a,b("LSRtcCallState.bs").noOngoingCall))return"NO_ONGOING_CALL";else if(b("bs_caml").i64_eq(a,b("LSRtcCallState.bs").audioGroupCall))if(g(c))return"AUDIO_GROUP_CALL";else return"AUDIO_1TO1_CALL";else if(b("bs_caml").i64_eq(a,b("LSRtcCallState.bs").videoGroupCall))if(g(c))return"VIDEO_GROUP_CALL";else return"VIDEO_1TO1_CALL";else{b("recoverableViolation")("Unknown RTCCallState: "+(b("bs_int64").to_string(a)+("L and threadType combination: "+(b("bs_int64").to_string(c)+"L"))),"messenger_web_product");return"NO_ONGOING_CALL"}}f.ofLsRtcCallState=a}),null);
__d("MWThreadListSupportedThreadTypes.bs",["MAWGating","MessagingThreadType.bs","gkx"],(function(a,b,c,d,e,f){"use strict";c=[(a=b("MessagingThreadType.bs")).oneToOne,a.group,a.marketplace,a.folder,a.room].concat(b("MAWGating").isArmadillo()?[b("MessagingThreadType.bs").secureMessageOverWaOneToOne,b("MessagingThreadType.bs").secureMessageOverWaGroup]:[],b("gkx")("1950")?[b("MessagingThreadType.bs").communityGroup,b("MessagingThreadType.bs").communityGroupUnjoined]:[],b("gkx")("6970")?[b("MessagingThreadType.bs").discoverablePublicChat]:[]);f.supportedThreadTypes=c}),null);
__d("MWIsXacGroupThread.bs",["LSThreadBitOffset.bs","LSThreadCapabilityBitOffset.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").addXacUsers,a)}f.check=a}),null);
__d("MWV2HeaderCloseButton.bs",["fbt","CometPressable.react","MWTooltip.react","bs_caml_option","react","stylex","useSetAttributeRef"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k=g._("__JHASH__h_m7dC6Kxvx__JHASH__"),l={svg:{marginTop:"xvijh9v",marginEnd:"xhhsvwb",marginBottom:"x1ty9z65",marginStart:"xgzva0m"}};function a(a){var c=a.label,d=a.color,e=a.onPress;a=a.testid;c=c!==void 0?c:k;var f=b("useSetAttributeRef")("data-prevent_chattab_focus","1");d={"aria-label":c,children:j.jsx("svg",{className:(i||(i=b("stylex")))(l.svg),height:"24px",viewBox:"0 0 24 24",width:"24px",children:j.jsxs("g",{stroke:d,strokeLinecap:"round",strokeWidth:"2",children:[j.jsx("line",{x1:"6",x2:"18",y1:"6",y2:"18"}),j.jsx("line",{x1:"6",x2:"18",y1:"18",y2:"6"})]})}),onPress:e,overlayRadius:"50%",ref:f};a!==void 0&&(d.testid=b("bs_caml_option").valFromOption(a));return j.jsx(b("MWTooltip.react"),{align:"middle",position:"above",tooltip:c,children:j.jsx(b("CometPressable.react"),babelHelpers["extends"]({},d))})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.defaultLabel=k;f.styles=l;f.make=c}),null);
__d("MWV2HeaderContainer.bs",["MDSRow.react","bs_caml_option","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={divider:{boxShadow:"x7m3og9"},root:{alignItems:"x6s0dn4",backgroundColor:"xcrg951",borderTopEndRadius:"xgqcy7u",borderTopStartRadius:"x1lq5wgf",display:"x78zum5",flexShrink:"x2lah0s",height:"x10w6t97",justifyContent:"x1qughib",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",position:"x1n2onr6",zIndex:"xhtitgo"}};function a(a){var c=a.startContent,d=a.endContent,e=a.backgroundColor;a=a.divider;c=c!==void 0?b("bs_caml_option").valFromOption(c):null;d=d!==void 0?b("bs_caml_option").valFromOption(d):null;a=a!==void 0?a:!0;var f={};e!==void 0&&(f.backgroundColor=e);return i.jsxs("div",{className:(h||(h=b("stylex")))(j.root,a?j.divider:!1),style:f,children:[i.jsx(b("MDSRow.react"),{expanding:!0,paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",children:c}),d]})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.styles=j;f.make=c}),null);
__d("MWV2IsTabFocusedContext.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=h.createContext(!1);function a(a){var b=a.children;a=a.isFocused;return h.createElement(i.Provider,{children:b,value:a})}function c(a){return h.useContext(i)}d=a;f.make=d;f.useContext=c}),null);
__d("MWV2TabContainer.bs",["MWChatFocusComposerContext.bs","MWChatStateActions.bs","MWChatStateV2.bs","MWChatTabFocusHandler.bs","UseMWV2CloseTab.bs","bs_curry","cr:3425","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={defaultHeight:{height:"x1rgmuzj","@media (min-height: 1280px)":{height:"xbbk1sx"}},fixedHeight:{height:"xt7dq6l"},tabContainer:{backgroundColor:"xcrg951",borderTopEndRadius:"xgqcy7u",borderTopStartRadius:"x1lq5wgf",boxShadow:"x2c8kfy",display:"x78zum5",flexDirection:"xdt5ytf",fontSize:"x6prxxf",lineHeight:"xvq8zen",marginStart:"x17adc0v",maxHeight:"xcn1v36",width:"xi55695"}};function a(a){var c=a.ariaBusy,d=a.ariaLabel,e=a.children,f=a.domRef,g=a.style,k=a.tab,l=a.tabIndex,m=a.thread;a=a.isFixedHeight;a=a!==void 0?a:!1;var n=b("MWChatStateV2.bs").useDispatch(),o=b("UseMWV2CloseTab.bs").useHook(m,k);i.useEffect(function(){b("cr:3425")==null||b("bs_curry")._1(b("cr:3425").markMessegnerIsActiveOnFacebook)},[]);return i.jsx(b("MWChatFocusComposerContext.bs").provider,{children:i.jsx(b("MWChatTabFocusHandler.bs").make,{onBlur:function(a){return b("bs_curry")._1(n,b("MWChatStateActions.bs").blurTab())},onEscape:function(a){return b("bs_curry")._1(o)},onFocus:function(a){return b("bs_curry")._1(n,b("MWChatStateActions.bs").focusTab(k.tabId))},children:i.jsx("div",{"aria-busy":c,"aria-label":d,className:(h||(h=b("stylex")))(j.tabContainer,a?j.fixedHeight:j.defaultHeight),"data-testid":void 0,ref:f,style:g,tabIndex:l,children:e})})})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.styles=j;f.$MAWMessengerStatusOnFacebookEventEmitter$requireCond=b("cr:3425");f.make=c}),null);
__d("MWPThreadIsPage.bs",["LSContactType.bs","MWPActor.bs","ReQL.bs","ReQLSuspense","bs_caml","bs_caml_option","react","recoverableViolation","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=h.createContext();function a(a){var c=a.children,d=a.threadKey,e=b("useReStore")(),f=b("MWPActor.bs").useActor();a=b("ReQLSuspense").useFirst(function(){var a;return(a=b("ReQL.bs")).map(a.filter(a.getKeyRange(a.fromTableAscending(e.table("participants")),{hd:d,tl:0}),function(a){return b("bs_caml").i64_neq(a.contactId,f)}),function(a){return b("ReQLSuspense").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(e.table("contacts")),{hd:a.contactId,tl:0}))})},[e,d,f]);if(a!==void 0){a=b("bs_caml_option").valFromOption(a);a=a!==void 0?b("bs_caml").i64_eq(a.contactType,b("LSContactType.bs").page):!1}else a=!1;return h.createElement(i.Provider,{children:c,value:a})}function c(a){a=h.useContext(i);if(a!==void 0)return a;else{b("recoverableViolation")("Using hook useIsPage in a place where we didn't include the context","messenger_web_product");return!1}}d=a;f.make=d;f.useIsPage=c}),null);
__d("useOpenThreadAfterJoin",["CurrentEnvironment","MWLSThreadDisplayContext.re","XCometMessengerControllerRouteBuilder","XMessengerDotComCometMainControllerRouteBuilder","useCometRouterDispatcher","useMWChatOpenTabForGroup"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useCometRouterDispatcher")(),b=c("useMWChatOpenTabForGroup")("jewel"),d=b[0];b=c("MWLSThreadDisplayContext.re").useHook();return b==="ChatTab"?function(a){d(a)}:function(b){var d;c("CurrentEnvironment").messengerdotcom?d=c("XMessengerDotComCometMainControllerRouteBuilder").buildURL({thread_key:b}):d=c("XCometMessengerControllerRouteBuilder").buildURL({thread_key:b});a==null?void 0:a.go(d,{})}}g["default"]=a}),98);
__d("MWPColorUtils.bs",["bs_belt_Option","bs_caml_array","bs_caml_int64","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";function g(a){a=b("bs_caml_int64").to_int32(a);var c=(a&16711680)>>>16,d=(a&65280)>>>8;a=a&255;var e=function(a){return a.toString(16).padStart(2,"0")};return"#"+(e(c)+(e(d)+e(a)))}function a(a,c,d){d=a.sort(function(a,c){return b("bs_caml_int64").to_int32(a.gradientIndex)-b("bs_caml_int64").to_int32(c.gradientIndex)|0}).map(function(a){return g(a.color)});a=d.length;if(a!==1){if(a!==0){a=b("bs_belt_Option").isSome(c);var e=[];c!==void 0&&e.push(b("bs_caml_array").get(d,0)+" calc(100vh - "+String(c.totalHeight)+"px + "+String(c.headerHeight)+"px)");for(var f=a?1:0,a=d.length-(a?2:1)|0;f<=a;++f)e.push(b("bs_caml_array").get(d,f));c!==void 0&&(e.push(d[d.length-1|0]+" calc(100% - "+String(c.footerHeight)+"px)"),e.push(d[d.length-1|0]));f=e.join(", ");return"linear-gradient("+f+")"}b("recoverableViolation")("Not enough colors for a gradient","messenger_comet");return""}b("recoverableViolation")("Not enough colors for a gradient","messenger_comet");return""}f.int64ToHex=g;f.gradient=a}),null);
__d("MqttState.bs",[],(function(a,b,c,d,e,f){"use strict";a="Connected";b="Disconnected";c="Connecting";f.connected=a;f.disconnected=b;f.connecting=c}),null);
__d("LSPlatformConnectionStatusContext.bs",["LS.bs","LSDeleteAllAndInsertConnectivityStatus","LSInternetConnectionState.bs","LSPersistedDbGating","LSTransaction.bs","MqttState.bs","bs_caml_array","bs_caml_option","bs_curry","cr:4627","cr:4628","promiseDone","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){}a={setStatus:a,status:b("MqttState.bs").connected};var i=h.createContext(a);function c(a){var c=a.children,d=a.onConnectionStatusChange,e=b("useReStore")();a=h.useState(function(){return b("MqttState.bs").connected});var f=a[1],g=a[0];h.useEffect(function(){return d(function(a){return b("bs_curry")._1(f,function(b){return a})})},[]);h.useEffect(function(){(g===b("MqttState.bs").connected||g===b("MqttState.bs").disconnected)&&b("promiseDone")(b("LSTransaction.bs").run(e,function(a){return b("LSDeleteAllAndInsertConnectivityStatus")(g===b("MqttState.bs").connected?b("LSInternetConnectionState.bs").connected:b("LSInternetConnectionState.bs").notConnected,b("LS.bs").make(a))},"readWrite"))},[e,g]);a=h.useCallback(function(a){return b("bs_curry")._1(f,function(b){return a})},[f]);a={setStatus:a,status:g};return h.createElement(i.Provider,{children:c,value:a})}function d(a){return h.useContext(i)}var j=b("cr:4628")==null?void 0:b("bs_caml_option").some(b("cr:4628")),k=b("cr:4627")==null?void 0:b("bs_caml_option").some(b("cr:4627"));function e(a){a=h.useContext(i);var c=a.setStatus;return h.useMemo(function(){return function(a){if(b("cr:4628")!=null&&b("cr:4627")!=null&&b("LSPersistedDbGating").oneMqttConnectionAcrossTabs){b("bs_curry")._1(b("cr:4628").hasLock)&&(b("bs_curry")._1(c,a),b("bs_curry")._2(b("cr:4627").postMessage,"connection",[a]));return b("bs_curry")._2(b("cr:4627").onEventReceive,"connection",function(a){if(!b("bs_curry")._1(b("cr:4628").hasLock))return b("bs_curry")._1(c,b("bs_caml_array").get(a,0))})}else return b("bs_curry")._1(c,a)}},[c])}c=c;f.emptyValue=a;f.context=i;f.make=c;f.useContext=d;f.$ReStoreDbLock$requireCondXplat=b("cr:4628");f.appLock=j;f.$MWTabNotifier$requireCondXplat=b("cr:4627");f.tabNotifier=k;f.useStatusChangeHandler=e}),null);
__d("LSPlatformClientSingleton.bs",["Promise","bs_caml_exceptions"],(function(a,b,c,d,e,f){"use strict";var g=b("bs_caml_exceptions").create("LSPlatformClientSingleton.LSPlatformConfigIsUnavaiable"),h={contents:void 0};function a(a){return new(b("Promise"))(function(a,b){var c=h.contents;if(c!==void 0)return a(c.db);else return b({RE_EXN_ID:g})})}function c(a){h.contents=a}f.LSPlatformConfigIsUnavaiable=g;f.getDB=a;f.saveInstance=c}),null);
__d("MWLSDatabaseLazySync.bs",["LS.bs","LSForceImmediateSync","LSSyncGroupsUtils","LSTransaction.bs","Promise","ReQL.bs","bs_caml","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a,c){return b("LSTransaction.bs").run(a,function(a){return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("sync_groups")),{hd:c,tl:0})).then(function(d){if(d!==void 0)if(b("bs_caml").i64_eq(d.minTimeToSyncTimestampMs,b("LSSyncGroupsUtils").neverSyncTimestamp))return b("LSForceImmediateSync")(c,b("LS.bs").make(a));else return b("Promise").resolve();else return b("Promise").resolve()})},"readWrite")}function a(a){var c=b("useReStore")();return h.useCallback(function(b){return i(c,a)},[JSON.stringify(a),c])}f.sync=i;f.useSync=a}),null);
__d("MWPBumpEntityKey.bs",["CurrentUser","ODS"],(function(a,b,c,d,e,f){"use strict";function g(a,c){b("ODS").bumpEntityKey(3185,a,c)}function a(a,c){var d=b("CurrentUser").getAppID();d=d==null?"unknown":d;return g(a,c+"."+d)}f.bumpEntityKey=g;f.bumpEntityKeyWithAppId=a}),null);
__d("MWPBumpEntityKey.re",["MWPBumpEntityKey.bs"],(function(a,b,c,d,e,f){a=b("MWPBumpEntityKey.bs").bumpEntityKey;f.bumpEntityKey=a;c=b("MWPBumpEntityKey.bs").bumpEntityKeyWithAppId;f.bumpEntityKeyWithAppId=c}),null);
__d("MessengerThreadThemeGradientType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];f.messageBubbleOutbound=a;f.messageBubbleInbound=c;f.threadviewBackground=d;f.deliveryReceipt=e}),null);
__d("MWPThreadTheme.bs",["LSInt64.bs","MWPColorUtils.bs","MessengerThreadThemeGradientType.bs","ReQL.bs","ReQLSubscription.bs","SortedAsyncIterable.bs","bs_belt_Array","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i={accessibilityLabel:"Default Blue",fallbackColor:[-1,4278224127],fbid:[45690,4245347893],isDeprecated:!1,reverseGradiantsForRadial:!1,themeIdx:[0,94]},j=[],k={gradientColors:j,threadTheme:i};i={accessibilityLabel:"Default Blue",fallbackColor:[-1,4278224127],fbid:[45690,4245347893],isDeprecated:!1,reverseGradiantsForRadial:!1,themeIdx:[0,94]};j=j;function a(a){}j={gradientColors:j,previewId:void 0,setPreviewId:a,threadTheme:i};var l=h.createContext(j);function m(a,c){var d=b("useReStore")(),e=b("ReQLSubscription.bs").useFirst(h.useMemo(function(){if(a!==void 0)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("thread_themes")),{hd:a,tl:0});else return b("SortedAsyncIterable.bs").empty()},[d,JSON.stringify(a)])),f=b("ReQLSubscription.bs").useArray(h.useMemo(function(){if(a!==void 0)return b("ReQL.bs").filter(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("gradient_colors")),{hd:a,tl:0}),function(a){return b("LSInt64.bs").equal(a.type_,b("MessengerThreadThemeGradientType.bs").messageBubbleOutbound)});else return b("SortedAsyncIterable.bs").empty()},[d,JSON.stringify(a)]));return h.useMemo(function(){if(e!==void 0)return{gradientColors:f,threadTheme:e};else return c},[e,f])}function c(a){var b=a.children,c=a.themeFbid;a=a.defaultTheme;a=a!==void 0?a:k;var d=h.useState(function(){}),e=d[1],f=d[0];d=h.useMemo(function(){if(f!==void 0)return f;else return c},[JSON.stringify(c),f]);var g=m(d,a);d=h.useMemo(function(){return{gradientColors:g.gradientColors,previewId:f,setPreviewId:e,threadTheme:g.threadTheme}},[g,e,JSON.stringify(f)]);return h.createElement(l.Provider,{children:b,value:d})}function d(a){return h.useContext(l)}function e(a){a=h.useContext(l);var c=b("bs_belt_Array").get(a.gradientColors,0);if(c!==void 0)return b("MWPColorUtils.bs").int64ToHex(c.color);else return b("MWPColorUtils.bs").int64ToHex(a.threadTheme.fallbackColor)}function n(a){a=h.useContext(l);var c=a.gradientColors;c=b("bs_belt_Array").get(c,c.length-1|0);if(c!==void 0)return b("MWPColorUtils.bs").int64ToHex(c.color);else return b("MWPColorUtils.bs").int64ToHex(a.threadTheme.fallbackColor)}function o(a){return a.gradientColors.length>1}a=c;f.mwDefaultTheme=k;f.defaultContextValue=j;f.context=l;f.make=a;f.useHook=d;f.useTop=e;f.useBottom=n;f.isGradient=o}),null);
__d("MWPActor.re",["MWPActor.bs"],(function(a,b,c,d,e,f){a=b("MWPActor.bs").useActor;f.useActor=a}),null);
__d("MWPThreadsForThreadList.bs",["ReQL.bs","SortedAsyncIterable.bs","bs_caml","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){if(d!==void 0){a=b("ReQL.bs").bounds(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromIndexDescending(a.table("threads").index("parentThreadKeyLastActivityTimestampMs")),{hd:c,tl:0}),{NAME:"greaterThan",VAL:{hd:b("bs_caml_int64").zero,tl:0}});c=d.minLastActivityTimestampMs;d=d.maxLastActivityTimestampMs;c=b("bs_caml").i64_neq(c,b("bs_caml_int64").zero)&&b("bs_caml").i64_neq(c,b("bs_caml_int64").one)?c:void 0;d=b("bs_caml").i64_neq(d,b("bs_caml_int64").zero)&&b("bs_caml").i64_neq(d,b("bs_caml_int64").one)?d:void 0;if(c!==void 0)if(d!==void 0)return b("ReQL.bs").bounds(a,{NAME:"range",VAL:[{NAME:"greaterThanOrEqual",VAL:{hd:c,tl:0}},{NAME:"lessThanOrEqual",VAL:{hd:d,tl:0}}]});else return b("ReQL.bs").bounds(a,{NAME:"greaterThanOrEqual",VAL:{hd:c,tl:0}});else if(d!==void 0)return b("ReQL.bs").bounds(a,{NAME:"lessThanOrEqual",VAL:{hd:d,tl:0}});else return a}else return b("SortedAsyncIterable.bs").empty()}f.createIterable=a}),null);
__d("CometCardedDialogLoadingState.re",["CometCardedDialogLoadingStateLegacy.react"],(function(a,b,c,d,e,f){a=b("CometCardedDialogLoadingStateLegacy.react");f.makeTypeChecked=a;c=a;f.make=c}),null);
__d("WebStorage.bs",["WebStorage","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";var g;function a(a){return(g||(g=b("WebStorage"))).getLocalStorage()}function c(a){return(g||(g=b("WebStorage"))).getSessionStorage()}function d(a){return b("bs_caml_option").nullable_to_opt((g||(g=b("WebStorage"))).getLocalStorage())}function e(a){return b("bs_caml_option").nullable_to_opt((g||(g=b("WebStorage"))).getSessionStorage())}function h(a,c,d){return(g||(g=b("WebStorage"))).setItemGuarded(a,c,d)}f.getLocalStorageExternal=a;f.getSessionStorageExternal=c;f.getLocalStorage=d;f.getSessionStorage=e;f.setItemGuarded=h}),null);
__d("CommunityMessagingEnableState.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").one;c=[0,2];d=[0,3];e=[0,4];b=[0,5];f.enabled=a;f.disableRequested=c;f.disabling=d;f.disabled=e;f.disableFailed=b}),null);
__d("LSSyncStatus.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").one;c=[0,2];d=[0,3];e=[0,4];f.initializing=a;f.complete=c;f.resnapshotting=d;f.paging=e}),null);
__d("LSWhatsAppConnectStatus.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,9],i=[0,13],j=[0,17],k=[0,21],l=[0,25],m=[0,29];f.whatsappNotAddressable=a;f.whatsappAddressable=c;f.whatsappDualSendEligible=d;f.whatsappDualSendWebEligible=e;f.whatsappDualSendXappEligible=b;f.whatsappDstEligible=g;f.whatsappGdstEligible=h;f.whatsappDstGdstEligible=i;f.whatsappDsiEligible=j;f.whatsappDstDsiEligible=k;f.whatsappGdstDsiEligible=l;f.whatsappDstGdstDsiEligible=m}),null);
__d("LsMessengerThreadDamagingActionsEntryPoint.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,15],r=[0,16],s=[0,17],t=[0,18],u=[0,19],v=[0,20],w=[0,21],x=[0,22],y=[0,23],z=[0,24],A=[0,25],B=[0,26],C=[0,27],D=[0,28],E=[0,29],F=[0,30],G=[0,31],H=[0,32],I=[0,33],J=[0,34],K=[0,35],L=[0,36],M=[0,37],N=[0,38],O=[0,39],P=[0,40],Q=[0,41],R=[0,42],S=[0,43],T=[0,44],U=[0,45],V=[0,46],W=[0,47],X=[0,48],Y=[0,49];f.addBlock=a;f.blockComposer=c;f.blockView=d;f.blockedUserRow=e;f.declineMr=b;f.filteredRequest=g;f.frx=h;f.frxConfirmation=i;f.groupBlockMember=j;f.groupMessageContactMenu=k;f.groupWarningDialog=l;f.inboxThreadActions=m;f.inboxThreadList=n;f.manageMessages=o;f.messageRequest=p;f.omniPicker=q;f.pageReport=r;f.proactiveWarning=s;f.profile=t;f.threadSettings=u;f.threadSettingsGroupMembers=v;f.threadSettingsTitleBarMenu=w;f.threadView=x;f.threadViewBlockerComposer=y;f.pageMenu=z;f.unavailableComposer=A;f.upsellBlockNotification=B;f.pseudoBlockWarningDialog=C;f.suggestedBlock=D;f.pendingThreadList=E;f.spamThreadList=F;f.supportInboxReportInReview=G;f.supportInboxReportReviewed=H;f.blockConfirmDialog=I;f.deprecated=J;f.groupCreate=K;f.offlineRetries=L;f.proactiveWarningPopover=M;f.reportedThreadWarning=N;f.rtcAddParticipant=O;f.rtcIncomingCall=P;f.rtcPostDecline=Q;f.xma=R;f.chatMultitabHead=S;f.addRestrict=T;f.restrictComposer=U;f.restrictedAccountsList=V;f.restrictFirstTimeNux=W;f.reportLongPress=X;f.contactManager=Y}),null);/*FB_PKG_DELIM*/
__d("LSVerifyE2EEMetadataThreadExistsV2",["LSCreateOfflineThreadingID","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(b){return c.i64.neq(a[1],f)?c.seq([function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(b,c){var e=b.done;b=b.value;return e?(e=[f,f],d[3]=e[0],d[4]=e[1],e):(c=b.item,e=[a[1],c.authorityLevel],d[3]=e[0],d[4]=e[1],e)})},function(a){return a=[d[3],d[4]],d[0]=a[0],d[1]=a[1],a}]):c.resolve((b=[f,f],d[0]=b[0],d[1]=b[1],b))},function(e){return c.i64.neq(d[0],f)?c.seq([function(e){return c.i64.neq(d[1],f)?c.i64.gt(a[2],d[1])?c.seq([function(b){return c.fe(c.db.table(9).fetch([[[d[0]]]]),function(b){var c=b.update;b.item;return c({authorityLevel:a[2]})})},function(a){return d[3]=new c.Map(),d[3].set("thread_fbid",d[0]),d[3].set("force_upsert",!1),d[3].set("use_open_messenger_transport",!1),d[3].set("sync_group",[0,95]),d[3].set("metadata_only",!1),d[4]=d[3].get("thread_fbid"),d[3],d[5]=c.toJSON(d[3]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[4]),[0,209],d[5],f,f,[0,0],[0,0],f,f,[0,0])}]):c.resolve():c.resolve()},function(a){return d[2]=d[0]}]):c.seq([function(e){return c.i64.neq(a[1],f)?c.seq([function(e){return c.i64.neq(a[2],[0,20])?(d[7]=new c.Map(),d[7].set("thread_fbid",a[1]),d[7].set("force_upsert",!1),d[7].set("use_open_messenger_transport",!1),d[7].set("sync_group",[0,95]),d[7].set("metadata_only",!1),d[8]=d[7].get("thread_fbid"),d[7],d[9]=c.toJSON(d[7]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[8]),[0,209],d[9],f,f,[0,0],[0,0],f,f,[0,0])):c.resolve()},function(b){return d[3]=a[1]}]):c.seq([function(a){return c.sp(b("LSCreateOfflineThreadingID"),c.i64.of_float(Date.now())).then(function(a){return a=a,d[7]=a[0],a})},function(a){return d[3]=d[7]}])},function(b){return d[4]=[64,1083495710],d[5]=[0,0],d[6]=[0,0],c.fe(c.ftr(c.db.table(9).fetch([[[d[3]]]]),function(b){return c.i64.eq(b.threadKey,d[3])&&c.i64.lt(b.authorityLevel,a[2])}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:d[3],mailboxType:[0,4096],threadType:a[0],folderName:"inbox",lastActivityTimestampMs:[-1,4294967295],lastReadWatermarkTimestampMs:[-1,4294967295],removeWatermarkTimestampMs:[-1,4294967295],ongoingCallState:[0,0],parentThreadKey:[0,0],authorityLevel:a[2],capabilities:d[4],capabilities2:d[5],capabilities3:d[6],unsendLimitMs:[-1,4294967295],syncGroup:[0,95]})},function(a){return d[2]=d[3]}])},function(a){return e[0]=d[2]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("MAWCryptoConsts",[],(function(a,b,c,d,e,f){a=60*60;b=24*a;c=32;d=new Uint8Array(0).buffer;e=128;a=256;var g=12,h=1,i=2,j=2;b=b*30*6;var k=3,l="AES-GCM",m="HKDF",n="SHA-256";f.HKDF_SEED_LENGTH_IN_BYTES=c;f.HKDF_INFO=d;f.AES_GCM_TAG_LENGTH=e;f.AES_GCM_KEY_LENGTH=a;f.AES_GCM_IV_LENGTH_IN_BYTES=g;f.VERSION=h;f.CIPHER_ID=i;f.ADDITIONAL_DATA_LENGTH_IN_BYTES=j;f.ENC_KEY_TTL=b;f.MAX_KEYCHAIN_SETUP_RETRIES=k;f.AES_GCM=l;f.HKDF=m;f.SHA256=n}),66);
__d("MAWKeychainUtil",[],(function(a,b,c,d,e,f){function a(a){return self.crypto.getRandomValues(new Uint8Array(a))}function b(a){var b=a.reduce(function(a,b){return a+b.byteLength},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(new Uint8Array(b),a);return a+b.byteLength},0);return c.buffer}function c(a,b){return new Uint8Array([a,b]).buffer}function d(a){var b=a.length;if(b>0&&b%2===0&&/^[\da-f]+$/gi.test(a)){var c=[];for(var d=0,b=b/2;d<b;++d){var e=parseInt(a.substring(d*2,d*2+2),16);c.push(e)}return new Uint8Array(c)}else return null}f.getBufferWithRandomValuesFromLength=a;f.mergeBuffers=b;f.makeAAD=c;f.fromHexString=d}),66);
__d("MAWSubtleCrypto",[],(function(a,b,c,d,e,f){a=self.crypto;b=a&&(a.subtle||a.webkitSubtle||a.subtle);f.MAWSubtleCrypto=b}),66);
__d("WABase64",["WALogger"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Found unexpected character code while decoding B64 at index ",", length ",": ",""]);h=function(){return a};return a}var i=43,j=47,k=61,l=45,m=95,n=3e3,o="data:image/jpeg;base64,",p=function(a){return typeof a==="string"&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(a)};function a(a){return q(a,i,j,!0)}function b(a,b){b===void 0&&(b=!1);return q(a,l,m,b)}function q(a,b,c,d){a=Array.isArray(a)||a instanceof ArrayBuffer?new Uint8Array(a):a;if(a.length<=n)return r(a,b,c,d);else{var e=[];for(var f=0;f<a.length;f+=n)e.push(r(a.subarray(f,f+n),b,c,d));return e.join("")}}function r(a,b,c,d){var e=Math.ceil(a.length*4/3),f=4*Math.ceil(a.length/3),g=new Array(f);for(var h=0,i=0;h<f;h+=4,i+=3){var j=a[i]<<16|a[i+1]<<8|a[i+2];g[h]=j>>18;g[h+1]=j>>12&63;g[h+2]=j>>6&63;g[h+3]=j&63}for(var j=0;j<e;j++){a=g[j];a<26?g[j]=65+a:a<52?g[j]=71+a:a<62?g[j]=a-4:a===62?g[j]=b:g[j]=c}for(var h=e;h<f;h++)g[h]=61;i=String.fromCharCode.apply(String,g);return d?i:i.substring(0,e)}function s(a,b,c,e){var f=a.length,g=new Int32Array(f+f%4);for(var i=0;i<f;i++){var j=a.charCodeAt(i);if(65<=j&&j<=90)g[i]=j-65;else if(97<=j&&j<=122)g[i]=j-71;else if(48<=j&&j<=57)g[i]=j+4;else if(j===b)g[i]=62;else if(j===c)g[i]=63;else if(j===e){f=i;break}else{self.ERROR!=null&&d("WALogger").ERROR(h(),i,f,j);return null}}j=g.length/4;for(var b=0,c=0;b<j;b++,c+=4)g[b]=g[c]<<18|g[c+1]<<12|g[c+2]<<6|g[c+3];e=Math.floor(f*3/4);i=new Uint8Array(e);a=0;b=0;for(;b+3<=e;a++,b+=3){j=g[a];i[b]=j>>16;i[b+1]=j>>8&255;i[b+2]=j&255}switch(e-b){case 2:i[b]=g[a]>>16;i[b+1]=g[a]>>8&255;break;case 1:i[b]=g[a]>>16}return i}function c(a){a=s(a,i,j,k);if(a)return a.buffer;else throw new Error("Base64.decode given invalid string")}function e(a,b){b===void 0&&(b=!1);a=s(a,l,m,b?k:-1);if(a)return a.buffer;else throw new Error("Base64.decode given invalid string")}function f(a){a=a instanceof ArrayBuffer?new Uint8Array(a):s(a,i,j,k);return a&&Array.from(a)}function t(a){return Math.floor(a.length*3/4)}g.BASE64_DATA_URL_SCHEME=o;g.isBase64=p;g.encodeB64=a;g.encodeB64UrlSafe=b;g.decodeB64=c;g.decodeB64UrlSafe=e;g.decodeB64ToJsArray=f;g.sizeWhenB64Decoded=t}),98);
__d("MAWKeychainCrypto",["MAWCryptoConsts","MAWKeychainUtil","MAWSubtleCrypto","MessengerWebInitData","WABase64","err"],(function(a,b,c,d,e,f,g){"use strict";var h=d("MAWKeychainUtil").makeAAD(d("MAWCryptoConsts").VERSION,d("MAWCryptoConsts").CIPHER_ID);function a(a,b,c){var e=d("MAWKeychainUtil").getBufferWithRandomValuesFromLength(d("MAWCryptoConsts").AES_GCM_IV_LENGTH_IN_BYTES),f=c?c:h;return d("MAWSubtleCrypto").MAWSubtleCrypto.encrypt({additionalData:f,iv:new Uint8Array(e),name:d("MAWCryptoConsts").AES_GCM,tagLength:d("MAWCryptoConsts").AES_GCM_TAG_LENGTH},a,b).then(function(a){a=d("MAWKeychainUtil").mergeBuffers([f,e,a]);return d("WABase64").encodeB64(a)})}function b(a,b){b=new Uint8Array(d("WABase64").decodeB64(b));var c=b.subarray(0,d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES),e=b.subarray(d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES,d("MAWCryptoConsts").AES_GCM_IV_LENGTH_IN_BYTES+d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES);b=b.subarray(d("MAWCryptoConsts").AES_GCM_IV_LENGTH_IN_BYTES+d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES);return d("MAWSubtleCrypto").MAWSubtleCrypto.decrypt({additionalData:c,iv:e,name:d("MAWCryptoConsts").AES_GCM,tagLength:d("MAWCryptoConsts").AES_GCM_TAG_LENGTH},a,b)}function e(){var a=d("MAWKeychainUtil").fromHexString(c("MessengerWebInitData").accountKey);if(a==null)throw c("err")("Invalid value for account key");return d("MAWSubtleCrypto").MAWSubtleCrypto.importKey("raw",a.buffer,{name:d("MAWCryptoConsts").AES_GCM},!1,["encrypt","decrypt"])}function f(){return d("WABase64").encodeB64(d("MAWKeychainUtil").getBufferWithRandomValuesFromLength(d("MAWCryptoConsts").HKDF_SEED_LENGTH_IN_BYTES))}function i(a){a=d("WABase64").decodeB64(a);return d("MAWSubtleCrypto").MAWSubtleCrypto.importKey("raw",a,{name:d("MAWCryptoConsts").HKDF},!1,["deriveKey"])}function j(){return d("MAWKeychainUtil").getBufferWithRandomValuesFromLength(d("MAWCryptoConsts").HKDF_SEED_LENGTH_IN_BYTES)}function k(a,b){return d("MAWSubtleCrypto").MAWSubtleCrypto.deriveKey({hash:{name:d("MAWCryptoConsts").SHA256},info:d("MAWCryptoConsts").HKDF_INFO,name:d("MAWCryptoConsts").HKDF,salt:b},a,{length:d("MAWCryptoConsts").AES_GCM_KEY_LENGTH,name:d("MAWCryptoConsts").AES_GCM},!0,["encrypt","decrypt"]).then(function(a){return d("MAWSubtleCrypto").MAWSubtleCrypto.exportKey("raw",a)})}function l(a){a=a.slice(0,d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES);return new DataView(a).getUint8(0)}function m(a){return l(d("WABase64").decodeB64(a))}g.ADDITIONAL_DATA=h;g.encryptDataToStringBuffer=a;g.decryptDataToArrayBuffer=b;g.genAccountKey=e;g.genBrowserEncryptionKeyString=f;g.importBrowserEncryptionKey=i;g.genDatabaseEncryptionSeed=j;g.genDatabaseEncryptionKey=k;g.getKeyVersionFromCipherData=l;g.getKeyVersionFromCipherDataString=m}),98);
/**
 * License: https://www.facebook.com/legal/license/OKBVmODmb-W/
 */
__d("tweetnacl-1.0.3",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){(function(a){var b=function(a){var b,c=new Float64Array(16);if(a)for(b=0;b<a.length;b++)c[b]=a[b];return c},c=function(){throw new Error("no PRNG")},d=new Uint8Array(16),e=new Uint8Array(32);e[0]=9;var f=b(),g=b([1]),h=b([56129,1]),i=b([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),j=b([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),k=b([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),l=b([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),m=b([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function n(a,b,c,d){a[b]=c>>24&255,a[b+1]=c>>16&255,a[b+2]=c>>8&255,a[b+3]=c&255,a[b+4]=d>>24&255,a[b+5]=d>>16&255,a[b+6]=d>>8&255,a[b+7]=d&255}function o(a,b,c,d,e){var f,g=0;for(f=0;f<e;f++)g|=a[b+f]^c[d+f];return(1&g-1>>>8)-1}function p(a,b,c,d){return o(a,b,c,d,16)}function q(a,b,c,d){return o(a,b,c,d,32)}function r(a,b,c,d){var e=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,f=c[0]&255|(c[1]&255)<<8|(c[2]&255)<<16|(c[3]&255)<<24,g=c[4]&255|(c[5]&255)<<8|(c[6]&255)<<16|(c[7]&255)<<24,h=c[8]&255|(c[9]&255)<<8|(c[10]&255)<<16|(c[11]&255)<<24,i=c[12]&255|(c[13]&255)<<8|(c[14]&255)<<16|(c[15]&255)<<24,j=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,k=b[0]&255|(b[1]&255)<<8|(b[2]&255)<<16|(b[3]&255)<<24,l=b[4]&255|(b[5]&255)<<8|(b[6]&255)<<16|(b[7]&255)<<24,m=b[8]&255|(b[9]&255)<<8|(b[10]&255)<<16|(b[11]&255)<<24;b=b[12]&255|(b[13]&255)<<8|(b[14]&255)<<16|(b[15]&255)<<24;var n=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,o=c[16]&255|(c[17]&255)<<8|(c[18]&255)<<16|(c[19]&255)<<24,p=c[20]&255|(c[21]&255)<<8|(c[22]&255)<<16|(c[23]&255)<<24,q=c[24]&255|(c[25]&255)<<8|(c[26]&255)<<16|(c[27]&255)<<24;c=c[28]&255|(c[29]&255)<<8|(c[30]&255)<<16|(c[31]&255)<<24;d=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24;var r=e,s=f,t=g,u=h,v=i,w=j,x=k,y=l,z=m,A=b,B=n,C=o,D=p,E=q,F=c,G=d,H;for(var I=0;I<20;I+=2)H=r+D|0,v^=H<<7|H>>>32-7,H=v+r|0,z^=H<<9|H>>>32-9,H=z+v|0,D^=H<<13|H>>>32-13,H=D+z|0,r^=H<<18|H>>>32-18,H=w+s|0,A^=H<<7|H>>>32-7,H=A+w|0,E^=H<<9|H>>>32-9,H=E+A|0,s^=H<<13|H>>>32-13,H=s+E|0,w^=H<<18|H>>>32-18,H=B+x|0,F^=H<<7|H>>>32-7,H=F+B|0,t^=H<<9|H>>>32-9,H=t+F|0,x^=H<<13|H>>>32-13,H=x+t|0,B^=H<<18|H>>>32-18,H=G+C|0,u^=H<<7|H>>>32-7,H=u+G|0,y^=H<<9|H>>>32-9,H=y+u|0,C^=H<<13|H>>>32-13,H=C+y|0,G^=H<<18|H>>>32-18,H=r+u|0,s^=H<<7|H>>>32-7,H=s+r|0,t^=H<<9|H>>>32-9,H=t+s|0,u^=H<<13|H>>>32-13,H=u+t|0,r^=H<<18|H>>>32-18,H=w+v|0,x^=H<<7|H>>>32-7,H=x+w|0,y^=H<<9|H>>>32-9,H=y+x|0,v^=H<<13|H>>>32-13,H=v+y|0,w^=H<<18|H>>>32-18,H=B+A|0,C^=H<<7|H>>>32-7,H=C+B|0,z^=H<<9|H>>>32-9,H=z+C|0,A^=H<<13|H>>>32-13,H=A+z|0,B^=H<<18|H>>>32-18,H=G+F|0,D^=H<<7|H>>>32-7,H=D+G|0,E^=H<<9|H>>>32-9,H=E+D|0,F^=H<<13|H>>>32-13,H=F+E|0,G^=H<<18|H>>>32-18;r=r+e|0;s=s+f|0;t=t+g|0;u=u+h|0;v=v+i|0;w=w+j|0;x=x+k|0;y=y+l|0;z=z+m|0;A=A+b|0;B=B+n|0;C=C+o|0;D=D+p|0;E=E+q|0;F=F+c|0;G=G+d|0;a[0]=r>>>0&255;a[1]=r>>>8&255;a[2]=r>>>16&255;a[3]=r>>>24&255;a[4]=s>>>0&255;a[5]=s>>>8&255;a[6]=s>>>16&255;a[7]=s>>>24&255;a[8]=t>>>0&255;a[9]=t>>>8&255;a[10]=t>>>16&255;a[11]=t>>>24&255;a[12]=u>>>0&255;a[13]=u>>>8&255;a[14]=u>>>16&255;a[15]=u>>>24&255;a[16]=v>>>0&255;a[17]=v>>>8&255;a[18]=v>>>16&255;a[19]=v>>>24&255;a[20]=w>>>0&255;a[21]=w>>>8&255;a[22]=w>>>16&255;a[23]=w>>>24&255;a[24]=x>>>0&255;a[25]=x>>>8&255;a[26]=x>>>16&255;a[27]=x>>>24&255;a[28]=y>>>0&255;a[29]=y>>>8&255;a[30]=y>>>16&255;a[31]=y>>>24&255;a[32]=z>>>0&255;a[33]=z>>>8&255;a[34]=z>>>16&255;a[35]=z>>>24&255;a[36]=A>>>0&255;a[37]=A>>>8&255;a[38]=A>>>16&255;a[39]=A>>>24&255;a[40]=B>>>0&255;a[41]=B>>>8&255;a[42]=B>>>16&255;a[43]=B>>>24&255;a[44]=C>>>0&255;a[45]=C>>>8&255;a[46]=C>>>16&255;a[47]=C>>>24&255;a[48]=D>>>0&255;a[49]=D>>>8&255;a[50]=D>>>16&255;a[51]=D>>>24&255;a[52]=E>>>0&255;a[53]=E>>>8&255;a[54]=E>>>16&255;a[55]=E>>>24&255;a[56]=F>>>0&255;a[57]=F>>>8&255;a[58]=F>>>16&255;a[59]=F>>>24&255;a[60]=G>>>0&255;a[61]=G>>>8&255;a[62]=G>>>16&255;a[63]=G>>>24&255}function s(a,b,c,d){var e=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,f=c[0]&255|(c[1]&255)<<8|(c[2]&255)<<16|(c[3]&255)<<24,g=c[4]&255|(c[5]&255)<<8|(c[6]&255)<<16|(c[7]&255)<<24,h=c[8]&255|(c[9]&255)<<8|(c[10]&255)<<16|(c[11]&255)<<24,i=c[12]&255|(c[13]&255)<<8|(c[14]&255)<<16|(c[15]&255)<<24,j=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,k=b[0]&255|(b[1]&255)<<8|(b[2]&255)<<16|(b[3]&255)<<24,l=b[4]&255|(b[5]&255)<<8|(b[6]&255)<<16|(b[7]&255)<<24,m=b[8]&255|(b[9]&255)<<8|(b[10]&255)<<16|(b[11]&255)<<24;b=b[12]&255|(b[13]&255)<<8|(b[14]&255)<<16|(b[15]&255)<<24;var n=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,o=c[16]&255|(c[17]&255)<<8|(c[18]&255)<<16|(c[19]&255)<<24,p=c[20]&255|(c[21]&255)<<8|(c[22]&255)<<16|(c[23]&255)<<24,q=c[24]&255|(c[25]&255)<<8|(c[26]&255)<<16|(c[27]&255)<<24;c=c[28]&255|(c[29]&255)<<8|(c[30]&255)<<16|(c[31]&255)<<24;d=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24;e=e;f=f;g=g;h=h;i=i;j=j;k=k;l=l;m=m;b=b;n=n;o=o;p=p;q=q;c=c;d=d;var r;for(var s=0;s<20;s+=2)r=e+p|0,i^=r<<7|r>>>32-7,r=i+e|0,m^=r<<9|r>>>32-9,r=m+i|0,p^=r<<13|r>>>32-13,r=p+m|0,e^=r<<18|r>>>32-18,r=j+f|0,b^=r<<7|r>>>32-7,r=b+j|0,q^=r<<9|r>>>32-9,r=q+b|0,f^=r<<13|r>>>32-13,r=f+q|0,j^=r<<18|r>>>32-18,r=n+k|0,c^=r<<7|r>>>32-7,r=c+n|0,g^=r<<9|r>>>32-9,r=g+c|0,k^=r<<13|r>>>32-13,r=k+g|0,n^=r<<18|r>>>32-18,r=d+o|0,h^=r<<7|r>>>32-7,r=h+d|0,l^=r<<9|r>>>32-9,r=l+h|0,o^=r<<13|r>>>32-13,r=o+l|0,d^=r<<18|r>>>32-18,r=e+h|0,f^=r<<7|r>>>32-7,r=f+e|0,g^=r<<9|r>>>32-9,r=g+f|0,h^=r<<13|r>>>32-13,r=h+g|0,e^=r<<18|r>>>32-18,r=j+i|0,k^=r<<7|r>>>32-7,r=k+j|0,l^=r<<9|r>>>32-9,r=l+k|0,i^=r<<13|r>>>32-13,r=i+l|0,j^=r<<18|r>>>32-18,r=n+b|0,o^=r<<7|r>>>32-7,r=o+n|0,m^=r<<9|r>>>32-9,r=m+o|0,b^=r<<13|r>>>32-13,r=b+m|0,n^=r<<18|r>>>32-18,r=d+c|0,p^=r<<7|r>>>32-7,r=p+d|0,q^=r<<9|r>>>32-9,r=q+p|0,c^=r<<13|r>>>32-13,r=c+q|0,d^=r<<18|r>>>32-18;a[0]=e>>>0&255;a[1]=e>>>8&255;a[2]=e>>>16&255;a[3]=e>>>24&255;a[4]=j>>>0&255;a[5]=j>>>8&255;a[6]=j>>>16&255;a[7]=j>>>24&255;a[8]=n>>>0&255;a[9]=n>>>8&255;a[10]=n>>>16&255;a[11]=n>>>24&255;a[12]=d>>>0&255;a[13]=d>>>8&255;a[14]=d>>>16&255;a[15]=d>>>24&255;a[16]=k>>>0&255;a[17]=k>>>8&255;a[18]=k>>>16&255;a[19]=k>>>24&255;a[20]=l>>>0&255;a[21]=l>>>8&255;a[22]=l>>>16&255;a[23]=l>>>24&255;a[24]=m>>>0&255;a[25]=m>>>8&255;a[26]=m>>>16&255;a[27]=m>>>24&255;a[28]=b>>>0&255;a[29]=b>>>8&255;a[30]=b>>>16&255;a[31]=b>>>24&255}function t(a,b,c,d){r(a,b,c,d)}function u(a,b,c,d){s(a,b,c,d)}var v=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function w(a,b,c,d,e,f,g){var h=new Uint8Array(16),i=new Uint8Array(64),j;for(j=0;j<16;j++)h[j]=0;for(j=0;j<8;j++)h[j]=f[j];while(e>=64){t(i,h,g,v);for(j=0;j<64;j++)a[b+j]=c[d+j]^i[j];f=1;for(j=8;j<16;j++)f=f+(h[j]&255)|0,h[j]=f&255,f>>>=8;e-=64;b+=64;d+=64}if(e>0){t(i,h,g,v);for(j=0;j<e;j++)a[b+j]=c[d+j]^i[j]}return 0}function x(a,b,c,d,e){var f=new Uint8Array(16),g=new Uint8Array(64),h;for(h=0;h<16;h++)f[h]=0;for(h=0;h<8;h++)f[h]=d[h];while(c>=64){t(g,f,e,v);for(h=0;h<64;h++)a[b+h]=g[h];d=1;for(h=8;h<16;h++)d=d+(f[h]&255)|0,f[h]=d&255,d>>>=8;c-=64;b+=64}if(c>0){t(g,f,e,v);for(h=0;h<c;h++)a[b+h]=g[h]}return 0}function y(a,b,c,d,e){var f=new Uint8Array(32);u(f,d,e,v);e=new Uint8Array(8);for(var g=0;g<8;g++)e[g]=d[g+16];return x(a,b,c,e,f)}function z(a,b,c,d,e,f,g){var h=new Uint8Array(32);u(h,f,g,v);g=new Uint8Array(8);for(var i=0;i<8;i++)g[i]=f[i+16];return w(a,b,c,d,e,g,h)}var A=function(a){this.buffer=new Uint8Array(16);this.r=new Uint16Array(10);this.h=new Uint16Array(10);this.pad=new Uint16Array(8);this.leftover=0;this.fin=0;var b,c;b=a[0]&255|(a[1]&255)<<8;this.r[0]=b&8191;c=a[2]&255|(a[3]&255)<<8;this.r[1]=(b>>>13|c<<3)&8191;b=a[4]&255|(a[5]&255)<<8;this.r[2]=(c>>>10|b<<6)&7939;c=a[6]&255|(a[7]&255)<<8;this.r[3]=(b>>>7|c<<9)&8191;b=a[8]&255|(a[9]&255)<<8;this.r[4]=(c>>>4|b<<12)&255;this.r[5]=b>>>1&8190;c=a[10]&255|(a[11]&255)<<8;this.r[6]=(b>>>14|c<<2)&8191;b=a[12]&255|(a[13]&255)<<8;this.r[7]=(c>>>11|b<<5)&8065;c=a[14]&255|(a[15]&255)<<8;this.r[8]=(b>>>8|c<<8)&8191;this.r[9]=c>>>5&127;this.pad[0]=a[16]&255|(a[17]&255)<<8;this.pad[1]=a[18]&255|(a[19]&255)<<8;this.pad[2]=a[20]&255|(a[21]&255)<<8;this.pad[3]=a[22]&255|(a[23]&255)<<8;this.pad[4]=a[24]&255|(a[25]&255)<<8;this.pad[5]=a[26]&255|(a[27]&255)<<8;this.pad[6]=a[28]&255|(a[29]&255)<<8;this.pad[7]=a[30]&255|(a[31]&255)<<8};A.prototype.blocks=function(a,b,c){var d=this.fin?0:1<<11,e,f,g,h,i,j,k,l,m,n,o,p=this.h[0],q=this.h[1],r=this.h[2],s=this.h[3],t=this.h[4],u=this.h[5],v=this.h[6],w=this.h[7],x=this.h[8],y=this.h[9],z=this.r[0],A=this.r[1],B=this.r[2],C=this.r[3],D=this.r[4],E=this.r[5],F=this.r[6],G=this.r[7],H=this.r[8],I=this.r[9];while(c>=16)e=a[b+0]&255|(a[b+1]&255)<<8,p+=e&8191,f=a[b+2]&255|(a[b+3]&255)<<8,q+=(e>>>13|f<<3)&8191,e=a[b+4]&255|(a[b+5]&255)<<8,r+=(f>>>10|e<<6)&8191,f=a[b+6]&255|(a[b+7]&255)<<8,s+=(e>>>7|f<<9)&8191,e=a[b+8]&255|(a[b+9]&255)<<8,t+=(f>>>4|e<<12)&8191,u+=e>>>1&8191,f=a[b+10]&255|(a[b+11]&255)<<8,v+=(e>>>14|f<<2)&8191,e=a[b+12]&255|(a[b+13]&255)<<8,w+=(f>>>11|e<<5)&8191,f=a[b+14]&255|(a[b+15]&255)<<8,x+=(e>>>8|f<<8)&8191,y+=f>>>5|d,e=0,f=e,f+=p*z,f+=q*(5*I),f+=r*(5*H),f+=s*(5*G),f+=t*(5*F),e=f>>>13,f&=8191,f+=u*(5*E),f+=v*(5*D),f+=w*(5*C),f+=x*(5*B),f+=y*(5*A),e+=f>>>13,f&=8191,g=e,g+=p*A,g+=q*z,g+=r*(5*I),g+=s*(5*H),g+=t*(5*G),e=g>>>13,g&=8191,g+=u*(5*F),g+=v*(5*E),g+=w*(5*D),g+=x*(5*C),g+=y*(5*B),e+=g>>>13,g&=8191,h=e,h+=p*B,h+=q*A,h+=r*z,h+=s*(5*I),h+=t*(5*H),e=h>>>13,h&=8191,h+=u*(5*G),h+=v*(5*F),h+=w*(5*E),h+=x*(5*D),h+=y*(5*C),e+=h>>>13,h&=8191,i=e,i+=p*C,i+=q*B,i+=r*A,i+=s*z,i+=t*(5*I),e=i>>>13,i&=8191,i+=u*(5*H),i+=v*(5*G),i+=w*(5*F),i+=x*(5*E),i+=y*(5*D),e+=i>>>13,i&=8191,j=e,j+=p*D,j+=q*C,j+=r*B,j+=s*A,j+=t*z,e=j>>>13,j&=8191,j+=u*(5*I),j+=v*(5*H),j+=w*(5*G),j+=x*(5*F),j+=y*(5*E),e+=j>>>13,j&=8191,k=e,k+=p*E,k+=q*D,k+=r*C,k+=s*B,k+=t*A,e=k>>>13,k&=8191,k+=u*z,k+=v*(5*I),k+=w*(5*H),k+=x*(5*G),k+=y*(5*F),e+=k>>>13,k&=8191,l=e,l+=p*F,l+=q*E,l+=r*D,l+=s*C,l+=t*B,e=l>>>13,l&=8191,l+=u*A,l+=v*z,l+=w*(5*I),l+=x*(5*H),l+=y*(5*G),e+=l>>>13,l&=8191,m=e,m+=p*G,m+=q*F,m+=r*E,m+=s*D,m+=t*C,e=m>>>13,m&=8191,m+=u*B,m+=v*A,m+=w*z,m+=x*(5*I),m+=y*(5*H),e+=m>>>13,m&=8191,n=e,n+=p*H,n+=q*G,n+=r*F,n+=s*E,n+=t*D,e=n>>>13,n&=8191,n+=u*C,n+=v*B,n+=w*A,n+=x*z,n+=y*(5*I),e+=n>>>13,n&=8191,o=e,o+=p*I,o+=q*H,o+=r*G,o+=s*F,o+=t*E,e=o>>>13,o&=8191,o+=u*D,o+=v*C,o+=w*B,o+=x*A,o+=y*z,e+=o>>>13,o&=8191,e=(e<<2)+e|0,e=e+f|0,f=e&8191,e=e>>>13,g+=e,p=f,q=g,r=h,s=i,t=j,u=k,v=l,w=m,x=n,y=o,b+=16,c-=16;this.h[0]=p;this.h[1]=q;this.h[2]=r;this.h[3]=s;this.h[4]=t;this.h[5]=u;this.h[6]=v;this.h[7]=w;this.h[8]=x;this.h[9]=y};A.prototype.finish=function(a,b){var c=new Uint16Array(10),d,e;if(this.leftover){e=this.leftover;this.buffer[e++]=1;for(;e<16;e++)this.buffer[e]=0;this.fin=1;this.blocks(this.buffer,0,16)}d=this.h[1]>>>13;this.h[1]&=8191;for(e=2;e<10;e++)this.h[e]+=d,d=this.h[e]>>>13,this.h[e]&=8191;this.h[0]+=d*5;d=this.h[0]>>>13;this.h[0]&=8191;this.h[1]+=d;d=this.h[1]>>>13;this.h[1]&=8191;this.h[2]+=d;c[0]=this.h[0]+5;d=c[0]>>>13;c[0]&=8191;for(e=1;e<10;e++)c[e]=this.h[e]+d,d=c[e]>>>13,c[e]&=8191;c[9]-=1<<13;d=(d^1)-1;for(e=0;e<10;e++)c[e]&=d;d=~d;for(e=0;e<10;e++)this.h[e]=this.h[e]&d|c[e];this.h[0]=(this.h[0]|this.h[1]<<13)&65535;this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535;this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535;this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535;this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535;this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535;this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535;this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535;c=this.h[0]+this.pad[0];this.h[0]=c&65535;for(e=1;e<8;e++)c=(this.h[e]+this.pad[e]|0)+(c>>>16)|0,this.h[e]=c&65535;a[b+0]=this.h[0]>>>0&255;a[b+1]=this.h[0]>>>8&255;a[b+2]=this.h[1]>>>0&255;a[b+3]=this.h[1]>>>8&255;a[b+4]=this.h[2]>>>0&255;a[b+5]=this.h[2]>>>8&255;a[b+6]=this.h[3]>>>0&255;a[b+7]=this.h[3]>>>8&255;a[b+8]=this.h[4]>>>0&255;a[b+9]=this.h[4]>>>8&255;a[b+10]=this.h[5]>>>0&255;a[b+11]=this.h[5]>>>8&255;a[b+12]=this.h[6]>>>0&255;a[b+13]=this.h[6]>>>8&255;a[b+14]=this.h[7]>>>0&255;a[b+15]=this.h[7]>>>8&255};A.prototype.update=function(a,b,c){var d,e;if(this.leftover){e=16-this.leftover;e>c&&(e=c);for(d=0;d<e;d++)this.buffer[this.leftover+d]=a[b+d];c-=e;b+=e;this.leftover+=e;if(this.leftover<16)return;this.blocks(this.buffer,0,16);this.leftover=0}c>=16&&(e=c-c%16,this.blocks(a,b,e),b+=e,c-=e);if(c){for(d=0;d<c;d++)this.buffer[this.leftover+d]=a[b+d];this.leftover+=c}};function B(a,b,c,d,e,f){f=new A(f);f.update(c,d,e);f.finish(a,b);return 0}function C(a,b,c,d,e,f){var g=new Uint8Array(16);B(g,0,c,d,e,f);return p(a,b,g,0)}function D(a,b,c,d,e){if(c<32)return-1;z(a,0,b,0,c,d,e);B(a,16,a,32,c-32,a);for(b=0;b<16;b++)a[b]=0;return 0}function E(a,b,c,d,e){var f=new Uint8Array(32);if(c<32)return-1;y(f,0,32,d,e);if(C(b,16,b,32,c-32,f)!==0)return-1;z(a,0,b,0,c,d,e);for(f=0;f<32;f++)a[f]=0;return 0}function F(a,b){var c;for(c=0;c<16;c++)a[c]=b[c]|0}function G(a){var b,c,d=1;for(b=0;b<16;b++)c=a[b]+d+65535,d=Math.floor(c/65536),a[b]=c-d*65536;a[0]+=d-1+37*(d-1)}function H(a,b,c){var d;c=~(c-1);for(var e=0;e<16;e++)d=c&(a[e]^b[e]),a[e]^=d,b[e]^=d}function I(a,c){var d,e,f=b(),g=b();for(d=0;d<16;d++)g[d]=c[d];G(g);G(g);G(g);for(c=0;c<2;c++){f[0]=g[0]-65517;for(d=1;d<15;d++)f[d]=g[d]-65535-(f[d-1]>>16&1),f[d-1]&=65535;f[15]=g[15]-32767-(f[14]>>16&1);e=f[15]>>16&1;f[14]&=65535;H(g,f,1-e)}for(d=0;d<16;d++)a[2*d]=g[d]&255,a[2*d+1]=g[d]>>8}function J(a,b){var c=new Uint8Array(32),d=new Uint8Array(32);I(c,a);I(d,b);return q(c,0,d,0)}function K(a){var b=new Uint8Array(32);I(b,a);return b[0]&1}function L(a,b){var c;for(c=0;c<16;c++)a[c]=b[2*c]+(b[2*c+1]<<8);a[15]&=32767}function M(a,b,c){for(var d=0;d<16;d++)a[d]=b[d]+c[d]}function N(a,b,c){for(var d=0;d<16;d++)a[d]=b[d]-c[d]}function O(a,b,c){var d,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=c[0],K=c[1],L=c[2],M=c[3],N=c[4],O=c[5],P=c[6],Q=c[7],R=c[8],S=c[9],T=c[10],U=c[11],V=c[12],W=c[13],X=c[14];c=c[15];d=b[0];e+=d*J;f+=d*K;g+=d*L;h+=d*M;i+=d*N;j+=d*O;k+=d*P;l+=d*Q;m+=d*R;n+=d*S;o+=d*T;p+=d*U;q+=d*V;r+=d*W;s+=d*X;t+=d*c;d=b[1];f+=d*J;g+=d*K;h+=d*L;i+=d*M;j+=d*N;k+=d*O;l+=d*P;m+=d*Q;n+=d*R;o+=d*S;p+=d*T;q+=d*U;r+=d*V;s+=d*W;t+=d*X;u+=d*c;d=b[2];g+=d*J;h+=d*K;i+=d*L;j+=d*M;k+=d*N;l+=d*O;m+=d*P;n+=d*Q;o+=d*R;p+=d*S;q+=d*T;r+=d*U;s+=d*V;t+=d*W;u+=d*X;v+=d*c;d=b[3];h+=d*J;i+=d*K;j+=d*L;k+=d*M;l+=d*N;m+=d*O;n+=d*P;o+=d*Q;p+=d*R;q+=d*S;r+=d*T;s+=d*U;t+=d*V;u+=d*W;v+=d*X;w+=d*c;d=b[4];i+=d*J;j+=d*K;k+=d*L;l+=d*M;m+=d*N;n+=d*O;o+=d*P;p+=d*Q;q+=d*R;r+=d*S;s+=d*T;t+=d*U;u+=d*V;v+=d*W;w+=d*X;x+=d*c;d=b[5];j+=d*J;k+=d*K;l+=d*L;m+=d*M;n+=d*N;o+=d*O;p+=d*P;q+=d*Q;r+=d*R;s+=d*S;t+=d*T;u+=d*U;v+=d*V;w+=d*W;x+=d*X;y+=d*c;d=b[6];k+=d*J;l+=d*K;m+=d*L;n+=d*M;o+=d*N;p+=d*O;q+=d*P;r+=d*Q;s+=d*R;t+=d*S;u+=d*T;v+=d*U;w+=d*V;x+=d*W;y+=d*X;z+=d*c;d=b[7];l+=d*J;m+=d*K;n+=d*L;o+=d*M;p+=d*N;q+=d*O;r+=d*P;s+=d*Q;t+=d*R;u+=d*S;v+=d*T;w+=d*U;x+=d*V;y+=d*W;z+=d*X;A+=d*c;d=b[8];m+=d*J;n+=d*K;o+=d*L;p+=d*M;q+=d*N;r+=d*O;s+=d*P;t+=d*Q;u+=d*R;v+=d*S;w+=d*T;x+=d*U;y+=d*V;z+=d*W;A+=d*X;B+=d*c;d=b[9];n+=d*J;o+=d*K;p+=d*L;q+=d*M;r+=d*N;s+=d*O;t+=d*P;u+=d*Q;v+=d*R;w+=d*S;x+=d*T;y+=d*U;z+=d*V;A+=d*W;B+=d*X;C+=d*c;d=b[10];o+=d*J;p+=d*K;q+=d*L;r+=d*M;s+=d*N;t+=d*O;u+=d*P;v+=d*Q;w+=d*R;x+=d*S;y+=d*T;z+=d*U;A+=d*V;B+=d*W;C+=d*X;D+=d*c;d=b[11];p+=d*J;q+=d*K;r+=d*L;s+=d*M;t+=d*N;u+=d*O;v+=d*P;w+=d*Q;x+=d*R;y+=d*S;z+=d*T;A+=d*U;B+=d*V;C+=d*W;D+=d*X;E+=d*c;d=b[12];q+=d*J;r+=d*K;s+=d*L;t+=d*M;u+=d*N;v+=d*O;w+=d*P;x+=d*Q;y+=d*R;z+=d*S;A+=d*T;B+=d*U;C+=d*V;D+=d*W;E+=d*X;F+=d*c;d=b[13];r+=d*J;s+=d*K;t+=d*L;u+=d*M;v+=d*N;w+=d*O;x+=d*P;y+=d*Q;z+=d*R;A+=d*S;B+=d*T;C+=d*U;D+=d*V;E+=d*W;F+=d*X;G+=d*c;d=b[14];s+=d*J;t+=d*K;u+=d*L;v+=d*M;w+=d*N;x+=d*O;y+=d*P;z+=d*Q;A+=d*R;B+=d*S;C+=d*T;D+=d*U;E+=d*V;F+=d*W;G+=d*X;H+=d*c;d=b[15];t+=d*J;u+=d*K;v+=d*L;w+=d*M;x+=d*N;y+=d*O;z+=d*P;A+=d*Q;B+=d*R;C+=d*S;D+=d*T;E+=d*U;F+=d*V;G+=d*W;H+=d*X;I+=d*c;e+=38*u;f+=38*v;g+=38*w;h+=38*x;i+=38*y;j+=38*z;k+=38*A;l+=38*B;m+=38*C;n+=38*D;o+=38*E;p+=38*F;q+=38*G;r+=38*H;s+=38*I;b=1;d=e+b+65535;b=Math.floor(d/65536);e=d-b*65536;d=f+b+65535;b=Math.floor(d/65536);f=d-b*65536;d=g+b+65535;b=Math.floor(d/65536);g=d-b*65536;d=h+b+65535;b=Math.floor(d/65536);h=d-b*65536;d=i+b+65535;b=Math.floor(d/65536);i=d-b*65536;d=j+b+65535;b=Math.floor(d/65536);j=d-b*65536;d=k+b+65535;b=Math.floor(d/65536);k=d-b*65536;d=l+b+65535;b=Math.floor(d/65536);l=d-b*65536;d=m+b+65535;b=Math.floor(d/65536);m=d-b*65536;d=n+b+65535;b=Math.floor(d/65536);n=d-b*65536;d=o+b+65535;b=Math.floor(d/65536);o=d-b*65536;d=p+b+65535;b=Math.floor(d/65536);p=d-b*65536;d=q+b+65535;b=Math.floor(d/65536);q=d-b*65536;d=r+b+65535;b=Math.floor(d/65536);r=d-b*65536;d=s+b+65535;b=Math.floor(d/65536);s=d-b*65536;d=t+b+65535;b=Math.floor(d/65536);t=d-b*65536;e+=b-1+37*(b-1);b=1;d=e+b+65535;b=Math.floor(d/65536);e=d-b*65536;d=f+b+65535;b=Math.floor(d/65536);f=d-b*65536;d=g+b+65535;b=Math.floor(d/65536);g=d-b*65536;d=h+b+65535;b=Math.floor(d/65536);h=d-b*65536;d=i+b+65535;b=Math.floor(d/65536);i=d-b*65536;d=j+b+65535;b=Math.floor(d/65536);j=d-b*65536;d=k+b+65535;b=Math.floor(d/65536);k=d-b*65536;d=l+b+65535;b=Math.floor(d/65536);l=d-b*65536;d=m+b+65535;b=Math.floor(d/65536);m=d-b*65536;d=n+b+65535;b=Math.floor(d/65536);n=d-b*65536;d=o+b+65535;b=Math.floor(d/65536);o=d-b*65536;d=p+b+65535;b=Math.floor(d/65536);p=d-b*65536;d=q+b+65535;b=Math.floor(d/65536);q=d-b*65536;d=r+b+65535;b=Math.floor(d/65536);r=d-b*65536;d=s+b+65535;b=Math.floor(d/65536);s=d-b*65536;d=t+b+65535;b=Math.floor(d/65536);t=d-b*65536;e+=b-1+37*(b-1);a[0]=e;a[1]=f;a[2]=g;a[3]=h;a[4]=i;a[5]=j;a[6]=k;a[7]=l;a[8]=m;a[9]=n;a[10]=o;a[11]=p;a[12]=q;a[13]=r;a[14]=s;a[15]=t}function P(a,b){O(a,b,b)}function Q(a,c){var d=b(),e;for(e=0;e<16;e++)d[e]=c[e];for(e=253;e>=0;e--)P(d,d),e!==2&&e!==4&&O(d,d,c);for(e=0;e<16;e++)a[e]=d[e]}function R(a,c){var d=b(),e;for(e=0;e<16;e++)d[e]=c[e];for(e=250;e>=0;e--)P(d,d),e!==1&&O(d,d,c);for(e=0;e<16;e++)a[e]=d[e]}function S(a,c,d){var e=new Uint8Array(32),f=new Float64Array(80),g,i=b(),j=b(),k=b(),l=b(),m=b(),n=b();for(g=0;g<31;g++)e[g]=c[g];e[31]=c[31]&127|64;e[0]&=248;L(f,d);for(g=0;g<16;g++)j[g]=f[g],l[g]=i[g]=k[g]=0;i[0]=l[0]=1;for(g=254;g>=0;--g)c=e[g>>>3]>>>(g&7)&1,H(i,j,c),H(k,l,c),M(m,i,k),N(i,i,k),M(k,j,l),N(j,j,l),P(l,m),P(n,i),O(i,k,i),O(k,j,m),M(m,i,k),N(i,i,k),P(j,i),N(k,l,n),O(i,k,h),M(i,i,l),O(k,k,i),O(i,l,n),O(l,j,f),P(j,m),H(i,j,c),H(k,l,c);for(g=0;g<16;g++)f[g+16]=i[g],f[g+32]=k[g],f[g+48]=j[g],f[g+64]=l[g];d=f.subarray(32);c=f.subarray(16);Q(d,d);O(c,c,d);I(a,c);return 0}function T(a,b){return S(a,b,e)}function U(a,b){c(b,32);return T(a,b)}function V(a,b,c){var e=new Uint8Array(32);S(e,c,b);return u(a,d,e,v)}var W=D,X=E;function aa(a,b,c,d,e,f){var g=new Uint8Array(32);V(g,e,f);return W(a,b,c,d,g)}function ba(a,b,c,d,e,f){var g=new Uint8Array(32);V(g,e,f);return X(a,b,c,d,g)}var ca=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function da(a,b,c,d){var e=new Int32Array(16),f=new Int32Array(16),g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=a[0],H=a[1],I=a[2],J=a[3],K=a[4],L=a[5],M=a[6],N=a[7],O=b[0],P=b[1],Q=b[2],R=b[3],S=b[4],T=b[5],U=b[6],V=b[7],W=0;while(d>=128){for(y=0;y<16;y++)z=8*y+W,e[y]=c[z+0]<<24|c[z+1]<<16|c[z+2]<<8|c[z+3],f[y]=c[z+4]<<24|c[z+5]<<16|c[z+6]<<8|c[z+7];for(y=0;y<80;y++){g=G;h=H;i=I;j=J;k=K;l=L;m=M;N;o=O;p=P;q=Q;r=R;s=S;t=T;u=U;V;A=N;B=V;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=(K>>>14|S<<32-14)^(K>>>18|S<<32-18)^(S>>>41-32|K<<32-(41-32));B=(S>>>14|K<<32-14)^(S>>>18|K<<32-18)^(K>>>41-32|S<<32-(41-32));C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=K&L^~K&M;B=S&T^~S&U;C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=ca[y*2];B=ca[y*2+1];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=e[y%16];B=f[y%16];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;w=E&65535|F<<16;x=C&65535|D<<16;A=w;B=x;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=(G>>>28|O<<32-28)^(O>>>34-32|G<<32-(34-32))^(O>>>39-32|G<<32-(39-32));B=(O>>>28|G<<32-28)^(G>>>34-32|O<<32-(34-32))^(G>>>39-32|O<<32-(39-32));C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=G&H^G&I^H&I;B=O&P^O&Q^P&Q;C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;n=E&65535|F<<16;v=C&65535|D<<16;A=j;B=r;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=w;B=x;C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;j=E&65535|F<<16;r=C&65535|D<<16;H=g;I=h;J=i;K=j;L=k;M=l;N=m;G=n;P=o;Q=p;R=q;S=r;T=s;U=t;V=u;O=v;if(y%16===15)for(z=0;z<16;z++)A=e[z],B=f[z],C=B&65535,D=B>>>16,E=A&65535,F=A>>>16,A=e[(z+9)%16],B=f[(z+9)%16],C+=B&65535,D+=B>>>16,E+=A&65535,F+=A>>>16,w=e[(z+1)%16],x=f[(z+1)%16],A=(w>>>1|x<<32-1)^(w>>>8|x<<32-8)^w>>>7,B=(x>>>1|w<<32-1)^(x>>>8|w<<32-8)^(x>>>7|w<<32-7),C+=B&65535,D+=B>>>16,E+=A&65535,F+=A>>>16,w=e[(z+14)%16],x=f[(z+14)%16],A=(w>>>19|x<<32-19)^(x>>>61-32|w<<32-(61-32))^w>>>6,B=(x>>>19|w<<32-19)^(w>>>61-32|x<<32-(61-32))^(x>>>6|w<<32-6),C+=B&65535,D+=B>>>16,E+=A&65535,F+=A>>>16,D+=C>>>16,E+=D>>>16,F+=E>>>16,e[z]=E&65535|F<<16,f[z]=C&65535|D<<16}A=G;B=O;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[0];B=b[0];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[0]=G=E&65535|F<<16;b[0]=O=C&65535|D<<16;A=H;B=P;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[1];B=b[1];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[1]=H=E&65535|F<<16;b[1]=P=C&65535|D<<16;A=I;B=Q;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[2];B=b[2];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[2]=I=E&65535|F<<16;b[2]=Q=C&65535|D<<16;A=J;B=R;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[3];B=b[3];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[3]=J=E&65535|F<<16;b[3]=R=C&65535|D<<16;A=K;B=S;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[4];B=b[4];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[4]=K=E&65535|F<<16;b[4]=S=C&65535|D<<16;A=L;B=T;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[5];B=b[5];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[5]=L=E&65535|F<<16;b[5]=T=C&65535|D<<16;A=M;B=U;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[6];B=b[6];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[6]=M=E&65535|F<<16;b[6]=U=C&65535|D<<16;A=N;B=V;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[7];B=b[7];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[7]=N=E&65535|F<<16;b[7]=V=C&65535|D<<16;W+=128;d-=128}return d}function Y(a,b,c){var d=new Int32Array(8),e=new Int32Array(8),f=new Uint8Array(256),g,h=c;d[0]=1779033703;d[1]=3144134277;d[2]=1013904242;d[3]=2773480762;d[4]=1359893119;d[5]=2600822924;d[6]=528734635;d[7]=1541459225;e[0]=4089235720;e[1]=2227873595;e[2]=4271175723;e[3]=1595750129;e[4]=2917565137;e[5]=725511199;e[6]=4215389547;e[7]=327033209;da(d,e,b,c);c%=128;for(g=0;g<c;g++)f[g]=b[h-c+g];f[c]=128;c=256-128*(c<112?1:0);f[c-9]=0;n(f,c-8,h/536870912|0,h<<3);da(d,e,f,c);for(g=0;g<8;g++)n(a,8*g,d[g],e[g]);return 0}function ea(a,c){var d=b(),e=b(),f=b(),g=b(),h=b(),i=b(),k=b(),l=b(),m=b();N(d,a[1],a[0]);N(m,c[1],c[0]);O(d,d,m);M(e,a[0],a[1]);M(m,c[0],c[1]);O(e,e,m);O(f,a[3],c[3]);O(f,f,j);O(g,a[2],c[2]);M(g,g,g);N(h,e,d);N(i,g,f);M(k,g,f);M(l,e,d);O(a[0],h,i);O(a[1],l,k);O(a[2],k,i);O(a[3],h,l)}function fa(a,b,c){var d;for(d=0;d<4;d++)H(a[d],b[d],c)}function ga(a,c){var d=b(),e=b(),f=b();Q(f,c[2]);O(d,c[0],f);O(e,c[1],f);I(a,e);a[31]^=K(d)<<7}function ha(a,b,c){var d,e;F(a[0],f);F(a[1],g);F(a[2],g);F(a[3],f);for(e=255;e>=0;--e)d=c[e/8|0]>>(e&7)&1,fa(a,b,d),ea(b,a),ea(a,a),fa(a,b,d)}function ia(a,c){var d=[b(),b(),b(),b()];F(d[0],k);F(d[1],l);F(d[2],g);O(d[3],k,l);ha(a,d,c)}function ja(a,d,e){var f=new Uint8Array(64),g=[b(),b(),b(),b()];e||c(d,32);Y(f,d,32);f[0]&=248;f[31]&=127;f[31]|=64;ia(g,f);ga(a,g);for(e=0;e<32;e++)d[e+32]=a[e];return 0}var ka=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function la(a,b){var c,d,e,f;for(d=63;d>=32;--d){c=0;for(e=d-32,f=d-12;e<f;++e)b[e]+=c-16*b[d]*ka[e-(d-32)],c=Math.floor((b[e]+128)/256),b[e]-=c*256;b[e]+=c;b[d]=0}c=0;for(e=0;e<32;e++)b[e]+=c-(b[31]>>4)*ka[e],c=b[e]>>8,b[e]&=255;for(e=0;e<32;e++)b[e]-=c*ka[e];for(d=0;d<32;d++)b[d+1]+=b[d]>>8,a[d]=b[d]&255}function ma(a){var b=new Float64Array(64),c;for(c=0;c<64;c++)b[c]=a[c];for(c=0;c<64;c++)a[c]=0;la(a,b)}function na(a,c,d,e){var f=new Uint8Array(64),g=new Uint8Array(64),h=new Uint8Array(64),i,j=new Float64Array(64),k=[b(),b(),b(),b()];Y(f,e,32);f[0]&=248;f[31]&=127;f[31]|=64;var l=d+64;for(i=0;i<d;i++)a[64+i]=c[i];for(i=0;i<32;i++)a[32+i]=f[32+i];Y(h,a.subarray(32),d+32);ma(h);ia(k,h);ga(a,k);for(i=32;i<64;i++)a[i]=e[i];Y(g,a,d+64);ma(g);for(i=0;i<64;i++)j[i]=0;for(i=0;i<32;i++)j[i]=h[i];for(i=0;i<32;i++)for(c=0;c<32;c++)j[i+c]+=g[i]*f[c];la(a.subarray(32),j);return l}function oa(a,c){var d=b(),e=b(),h=b(),j=b(),k=b(),l=b(),n=b();F(a[2],g);L(a[1],c);P(h,a[1]);O(j,h,i);N(h,h,a[2]);M(j,a[2],j);P(k,j);P(l,k);O(n,l,k);O(d,n,h);O(d,d,j);R(d,d);O(d,d,h);O(d,d,j);O(d,d,j);O(a[0],d,j);P(e,a[0]);O(e,e,j);J(e,h)&&O(a[0],a[0],m);P(e,a[0]);O(e,e,j);if(J(e,h))return-1;K(a[0])===c[31]>>7&&N(a[0],f,a[0]);O(a[3],a[0],a[1]);return 0}function pa(a,c,d,e){var f,g=new Uint8Array(32),h=new Uint8Array(64),i=[b(),b(),b(),b()],j=[b(),b(),b(),b()];if(d<64)return-1;if(oa(j,e))return-1;for(f=0;f<d;f++)a[f]=c[f];for(f=0;f<32;f++)a[f+32]=e[f];Y(h,a,d);ma(h);ha(i,j,h);ia(j,c.subarray(32));ea(i,j);ga(g,i);d-=64;if(q(c,0,g,0)){for(f=0;f<d;f++)a[f]=0;return-1}for(f=0;f<d;f++)a[f]=c[f+64];return d}var qa=32,ra=24,sa=32,ta=16,ua=32,va=32,wa=32,xa=32,ya=32,za=ra,Aa=sa,Ba=ta,Z=64,Ca=32,Da=64,Ea=32,Fa=64;a.lowlevel={crypto_core_hsalsa20:u,crypto_stream_xor:z,crypto_stream:y,crypto_stream_salsa20_xor:w,crypto_stream_salsa20:x,crypto_onetimeauth:B,crypto_onetimeauth_verify:C,crypto_verify_16:p,crypto_verify_32:q,crypto_secretbox:D,crypto_secretbox_open:E,crypto_scalarmult:S,crypto_scalarmult_base:T,crypto_box_beforenm:V,crypto_box_afternm:W,crypto_box:aa,crypto_box_open:ba,crypto_box_keypair:U,crypto_hash:Y,crypto_sign:na,crypto_sign_keypair:ja,crypto_sign_open:pa,crypto_secretbox_KEYBYTES:qa,crypto_secretbox_NONCEBYTES:ra,crypto_secretbox_ZEROBYTES:sa,crypto_secretbox_BOXZEROBYTES:ta,crypto_scalarmult_BYTES:ua,crypto_scalarmult_SCALARBYTES:va,crypto_box_PUBLICKEYBYTES:wa,crypto_box_SECRETKEYBYTES:xa,crypto_box_BEFORENMBYTES:ya,crypto_box_NONCEBYTES:za,crypto_box_ZEROBYTES:Aa,crypto_box_BOXZEROBYTES:Ba,crypto_sign_BYTES:Z,crypto_sign_PUBLICKEYBYTES:Ca,crypto_sign_SECRETKEYBYTES:Da,crypto_sign_SEEDBYTES:Ea,crypto_hash_BYTES:Fa,gf:b,D:i,L:ka,pack25519:I,unpack25519:L,M:O,A:M,S:P,Z:N,pow2523:R,add:ea,set25519:F,modL:la,scalarmult:ha,scalarbase:ia};function Ga(a,b){if(a.length!==qa)throw new Error("bad key size");if(b.length!==ra)throw new Error("bad nonce size")}function Ha(a,b){if(a.length!==wa)throw new Error("bad public key size");if(b.length!==xa)throw new Error("bad secret key size")}function $(){for(var a=0;a<arguments.length;a++)if(!(arguments[a]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Ia(a){for(var b=0;b<a.length;b++)a[b]=0}a.randomBytes=function(a){var b=new Uint8Array(a);c(b,a);return b};a.secretbox=function(a,b,c){$(a,b,c);Ga(c,b);var d=new Uint8Array(sa+a.length),e=new Uint8Array(d.length);for(var f=0;f<a.length;f++)d[f+sa]=a[f];D(e,d,d.length,b,c);return e.subarray(ta)};a.secretbox.open=function(a,b,c){$(a,b,c);Ga(c,b);var d=new Uint8Array(ta+a.length),e=new Uint8Array(d.length);for(var f=0;f<a.length;f++)d[f+ta]=a[f];if(d.length<32)return null;return E(e,d,d.length,b,c)!==0?null:e.subarray(sa)};a.secretbox.keyLength=qa;a.secretbox.nonceLength=ra;a.secretbox.overheadLength=ta;a.scalarMult=function(a,b){$(a,b);if(a.length!==va)throw new Error("bad n size");if(b.length!==ua)throw new Error("bad p size");var c=new Uint8Array(ua);S(c,a,b);return c};a.scalarMult.base=function(a){$(a);if(a.length!==va)throw new Error("bad n size");var b=new Uint8Array(ua);T(b,a);return b};a.scalarMult.scalarLength=va;a.scalarMult.groupElementLength=ua;a.box=function(b,c,d,e){d=a.box.before(d,e);return a.secretbox(b,c,d)};a.box.before=function(a,b){$(a,b);Ha(a,b);var c=new Uint8Array(ya);V(c,a,b);return c};a.box.after=a.secretbox;a.box.open=function(b,c,d,e){d=a.box.before(d,e);return a.secretbox.open(b,c,d)};a.box.open.after=a.secretbox.open;a.box.keyPair=function(){var a=new Uint8Array(wa),b=new Uint8Array(xa);U(a,b);return{publicKey:a,secretKey:b}};a.box.keyPair.fromSecretKey=function(a){$(a);if(a.length!==xa)throw new Error("bad secret key size");var b=new Uint8Array(wa);T(b,a);return{publicKey:b,secretKey:new Uint8Array(a)}};a.box.publicKeyLength=wa;a.box.secretKeyLength=xa;a.box.sharedKeyLength=ya;a.box.nonceLength=za;a.box.overheadLength=a.secretbox.overheadLength;a.sign=function(a,b){$(a,b);if(b.length!==Da)throw new Error("bad secret key size");var c=new Uint8Array(Z+a.length);na(c,a,a.length,b);return c};a.sign.open=function(a,b){$(a,b);if(b.length!==Ca)throw new Error("bad public key size");var c=new Uint8Array(a.length);a=pa(c,a,a.length,b);if(a<0)return null;b=new Uint8Array(a);for(var a=0;a<b.length;a++)b[a]=c[a];return b};a.sign.detached=function(b,c){b=a.sign(b,c);c=new Uint8Array(Z);for(var d=0;d<c.length;d++)c[d]=b[d];return c};a.sign.detached.verify=function(a,b,c){$(a,b,c);if(b.length!==Z)throw new Error("bad signature size");if(c.length!==Ca)throw new Error("bad public key size");var d=new Uint8Array(Z+a.length),e=new Uint8Array(Z+a.length),f;for(f=0;f<Z;f++)d[f]=b[f];for(f=0;f<a.length;f++)d[f+Z]=a[f];return pa(e,d,d.length,c)>=0};a.sign.keyPair=function(){var a=new Uint8Array(Ca),b=new Uint8Array(Da);ja(a,b);return{publicKey:a,secretKey:b}};a.sign.keyPair.fromSecretKey=function(a){$(a);if(a.length!==Da)throw new Error("bad secret key size");var b=new Uint8Array(Ca);for(var c=0;c<b.length;c++)b[c]=a[32+c];return{publicKey:b,secretKey:new Uint8Array(a)}};a.sign.keyPair.fromSeed=function(a){$(a);if(a.length!==Ea)throw new Error("bad seed size");var b=new Uint8Array(Ca),c=new Uint8Array(Da);for(var d=0;d<32;d++)c[d]=a[d];ja(b,c,!0);return{publicKey:b,secretKey:c}};a.sign.publicKeyLength=Ca;a.sign.secretKeyLength=Da;a.sign.seedLength=Ea;a.sign.signatureLength=Z;a.hash=function(a){$(a);var b=new Uint8Array(Fa);Y(b,a,a.length);return b};a.hash.hashLength=Fa;a.verify=function(a,b){$(a,b);if(a.length===0||b.length===0)return!1;return a.length!==b.length?!1:o(a,0,b,0,a.length)===0?!0:!1};a.setPRNG=function(a){c=a};(function(){var b=typeof self!=="undefined"?self.crypto||self.msCrypto:null;if(b&&b.getRandomValues){var c=65536;a.setPRNG(function(a,d){var e,f=new Uint8Array(d);for(e=0;e<d;e+=c)b.getRandomValues(f.subarray(e,e+Math.min(d-e,c)));for(e=0;e<d;e++)a[e]=f[e];Ia(f)})}else b&&b.randomBytes&&a.setPRNG(function(a,c){var d,e=b.randomBytes(c);for(d=0;d<c;d++)a[d]=e[d];Ia(e)})})()})(typeof g!=="undefined"&&g.exports?g.exports:self.nacl=self.nacl||{})}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
__d("tweetnacl",["tweetnacl-1.0.3"],(function(a,b,c,d,e,f){e.exports=b("tweetnacl-1.0.3")()}),null);
__d("MAWKeychainNaClCrypto",["MAWCryptoConsts","MAWKeychainCrypto","WABase64","tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;c.name="EARError";c.message=a;return c}return a}(babelHelpers.wrapNativeSuper(Error));function i(a,b,c){c=c?c:d("MAWKeychainCrypto").ADDITIONAL_DATA;c=new Uint8Array(c);var e=d("tweetnacl").randomBytes(d("tweetnacl").secretbox.nonceLength);b=d("tweetnacl").secretbox(b,e,new Uint8Array(a));a=new Uint8Array(d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES+e.length+b.length);a.set(c);a.set(e,d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES);a.set(b,d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES+e.length);return a.buffer}function j(a,b,c){return d("WABase64").encodeB64(i(a,b,c))}function k(a,b,c){b.slice(0,d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES);var e=b.slice(d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES,d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES+d("tweetnacl").secretbox.nonceLength);b=b.slice(d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES+d("tweetnacl").secretbox.nonceLength,d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES+d("tweetnacl").secretbox.nonceLength+4*Math.ceil(b.byteLength/3));b=d("tweetnacl").secretbox.open(new Uint8Array(b),new Uint8Array(e),new Uint8Array(a));if(b==null){throw new h("Encrypted dexie was unable to decrypt an entity. Attempting to use key version : "+((e=c)!=null?e:"non-provided")+".")}return b}function l(a,b,c){return k(a,d("WABase64").decodeB64(b),c)}function a(a,b,c){return j(a,b,c)}function b(a,b,c){return l(a,b,c)}g.EARDecryptionError=h;g.encryptTweetNaClArrayBuffer=i;g.encryptTweetNaCl=j;g.decryptTweetNaClArrayBuffer=k;g.decryptTweetNaCl=l;g.encrypt=a;g.decrypt=b}),98);
__d("WAArrayBufferUtils",["Promise"],(function(a,b,c,d,e,f){function a(a){var b=new ArrayBuffer(a.length);b=new Uint8Array(b);var c,d;for(c=0,d=a.length;c<d;c++)b[c]=a.charCodeAt(c);return b.buffer}function c(a,c){c===void 0&&(c=5e5);return new(b("Promise"))(function(b,d){var e=a.length,f=new ArrayBuffer(e),g=new Uint8Array(f),h=0;requestAnimationFrame(i);function i(){var d=Math.min(h+c,e);while(h<d)g[h]=a.charCodeAt(h),h++;if(h===e){b(f);return}requestAnimationFrame(i)}})}function d(a){return String.fromCharCode.apply(null,new Uint8Array(a))}var g=8388607;function e(a,b){a=new Uint8Array(a);if(b>g)throw new Error("Divisor is too big");var c=0;for(var d=0;d<a.length;++d)c=((c<<8)+a[d])%b;return c}function h(a){a=a.map(function(a){return new Uint8Array(a)});var b=a.reduce(function(a,b){return a+b.byteLength},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(b,a);return a+b.byteLength},0);return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}function i(a,b){a=new Uint8Array(a);b=new Uint8Array(b);return j(a,b)}function j(a,b){if(a.byteLength!==b.byteLength)return!1;for(var c=0;c!==a.byteLength;c++)if(a[c]!==b[c])return!1;return!0}f.stringToArrayBuffer=a;f.largeStringToArrayBuffer=c;f.arrayBufferToString=d;f.arrayBufferMod=e;f.concatBuffers=h;f.arrayBuffersEqualUNSAFE=i;f.uint8ArraysEqualUNSAFE=j}),66);
__d("MAWVaultMaterials",["WAArrayBufferUtils","WALogger","err","randomInt","tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Setting vault materials -- vaultMaterials=",", previouslySetup=",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);j=function(){return a};return a}var k={encryptionKey:null,prefixAndSuffix:null};function l(a){k.prefixAndSuffix=a}function m(){return k.encryptionKey}function n(a){k.encryptionKey=a}function a(){k.encryptionKey=null,k.prefixAndSuffix=null}function o(){return q()!=null&&m()!=null}function p(){var a=1e9,b=9999999999;return c("randomInt")(a,b)+"##"+c("randomInt")(a,b)}function q(){return k.prefixAndSuffix}function r(){if(!o()){var a="Vault materials are null";d("WALogger").ERROR(j(),a);throw c("err")(a)}return babelHelpers["extends"]({},k)}function b(a){var b=o();d("WALogger").LOG(i(),Boolean(a).toString(),b);if(!b){s((b=a)!=null?b:{encryptionKey:d("tweetnacl").randomBytes(32).buffer,prefixAndSuffix:p()})}return r()}function s(a){var b=a.encryptionKey;a=a.prefixAndSuffix;if(b==null||a==null){var e="Cannot set null values for encryption key and prefix";d("WALogger").ERROR(h(),e);throw c("err")(e)}n(b);l(a)}function e(){return t(r())}function t(a){var b=a.encryptionKey;a=a.prefixAndSuffix;if(a!=null&&b!=null){b=d("WAArrayBufferUtils").arrayBufferToString(b);return JSON.stringify({encryptionKey:b,prefixAndSuffix:a})}else return""}function f(a){if(a==="")return null;else{a=JSON.parse(a);if(a.encryptionKey==null||a.prefixAndSuffix==null)throw c("err")("Vault materials were not in correct format");var b=d("WAArrayBufferUtils").stringToArrayBuffer(a.encryptionKey);a=a.prefixAndSuffix;return{encryptionKey:b,prefixAndSuffix:a}}}g.TEST_ONLY_clearVaultMaterials=a;g.hasVaultBeenSetup=o;g.getVaultPrefixAndSuffix=q;g.getVaultMaterials=r;g.initializeVaultMaterials=b;g.materialsToString=e;g.fromMaterialsToString=t;g.fromStringToMaterials=f}),98);
__d("MAWVault",["MAWGating","MAWKeychainNaClCrypto","MAWVaultMaterials","WALogger","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Attempted to vault value that's already been vaulted"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Attempted to vault value while materials were not setup"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);m=function(){return a};return a}function n(a){if(!d("MAWGating").isVaultingEnabled())return!1;var b=d("MAWVaultMaterials").getVaultPrefixAndSuffix();if(b==null)return!1;b=new RegExp(b+".*"+b);return b.test(a)}function o(a){if(!d("MAWGating").isVaultingEnabled())return a;if(n(a)){var b=d("MAWVaultMaterials").getVaultMaterials(),e=b.encryptionKey;b=b.prefixAndSuffix;if(b==null){var f="Vault prefix and suffix should not be null when unvaulting";d("WALogger").ERROR(m(),f);throw c("err")(f)}f=new RegExp(b+"(.*)"+b);f=a.match(f);if(f==null||f.length!=2){var g="Could not retrieve inner value to unvault";d("WALogger").ERROR(l(),g);throw c("err")(g)}if(e==null){g="Vault encryption key was null before unvault";d("WALogger").ERROR(k(),g);throw c("err")(g)}g=f[1];f=""+b+g+b;var h=q(e,g);return a.replace(f,function(){return h})}return a}function a(a){if(a==="")return a;if(!d("MAWGating").isVaultingEnabled())return a;if(!d("MAWVaultMaterials").hasVaultBeenSetup()){d("WALogger").ERROR(j());return a}if(n(a)){d("WALogger").ERROR(i());return a}var b=d("MAWVaultMaterials").getVaultMaterials(),e=b.encryptionKey;b=b.prefixAndSuffix;if(b==null||e==null){var f="Cannot vault before vault materials are set";d("WALogger").ERROR(h(),f);throw c("err")(f)}f=p(e,a);return""+b+f+b}function b(a){if(!d("MAWGating").isVaultingEnabled())return a;if(!n(a))throw c("err")("Value should be vaulted");return o(a)}function p(a,b){b=new TextEncoder().encode(b).buffer;return d("MAWKeychainNaClCrypto").encryptTweetNaCl(a,new Uint8Array(b))}function q(a,b){a=d("MAWKeychainNaClCrypto").decryptTweetNaCl(a,b);return new TextDecoder().decode(a)}g.isVaulted=n;g.unvault=o;g.vault=a;g.unvaultOrThrow=b}),98);
__d("MAWFolderTypes",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=10;e={ARCHIVED:d,INBOX:a,OTHER:c,PENDING:b};f.INBOX=a;f.PENDING=b;f.OTHER=c;f.ARCHIVED=d;f.FOLDER_ID=e}),66);
__d("MAWTimeUtils.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function a(a){if(!(a==null))if(a>2147483647)return a;else return a*1e3}c=2147483647;d=[2328,1316134911];e=b("bs_caml_int64").zero;f.maxUnixTime=c;f.maxTimestampMs=d;f.minTimestampMs=e;f.getMillisTime=a}),null);
__d("MAWVerifyExistingThreadExists.bs",["LS.bs","LSAuthorityLevel.bs","LSTransaction.bs","LSVerifyE2EEMetadataThreadExistsV2","MAWGating","MAWThreadId.bs","MessagingThreadType.bs","Promise","ReQL.bs","bs_curry","cr:2629"],(function(a,b,c,d,e,f){"use strict";function a(a,c){if(b("cr:2629")==null)return b("Promise").resolve();else if(b("MAWGating").isOccamadillo())return b("LSTransaction.bs").run(a,function(a){return b("LSVerifyE2EEMetadataThreadExistsV2")(b("MessagingThreadType.bs").secureMessageOverWaOneToOne,c,b("LSAuthorityLevel.bs").authoritative,b("LS.bs").make(a)).then(function(a){})},"readWrite");else return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("threads")),{hd:c,tl:0})).then(function(d){if(d!==void 0||!b("MAWThreadId.bs").isThreadId(c))return b("Promise").resolve();else return b("MAWThreadId.bs").ofThreadKey(a,c).then(function(a){if(a.TAG===0)return b("bs_curry")._1(b("bs_curry")._1(b("cr:2629").fetchExistingThread,{threadId:a._0}).sendAndReceive);else return b("Promise").resolve()})})}c=b("cr:2629");f.$MAWBackendBridge$requireCondXplat=b("cr:2629");f.mawBackendBridge=c;f.call=a}),null);
__d("MAWUnvaultTransform",["MAWVault","baseTextTransformAllStrings"],(function(a,b,c,d,e,f,g){"use strict";function a(){return function(a){return c("baseTextTransformAllStrings")(a,function(a,b){return h(a,b)})}}function h(a,b){if(a.length===0)return[a];return d("MAWVault").isVaulted(a)?[d("MAWVault").unvault(a)]:[a]}g["default"]=a}),98);
__d("MAWUnvaultTransform.bs",["MAWUnvaultTransform"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("MAWUnvaultTransform")()}f.unvaultTransform=a}),null);/*FB_PKG_DELIM*/
__d("LSClearTables",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(a){return b.seq([function(a){return b.fe(b.db.table(67).fetch(),function(a){return a["delete"]()})},function(a){return b.fe(b.db.table(66).fetch(),function(a){return a["delete"]()})},function(a){return b.fe(b.db.table(65).fetch(),function(a){return a["delete"]()})},function(a){return b.fe(b.db.table(69).fetch(),function(a){return a["delete"]()})}])},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSInsertRankingContacts",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return d[0]=new c.Map(),d[0].set("limit",a[0]),d[1]=c.createArray(),d[4]=(d[1].push("search_contacts"),d[1]),d[4]=(d[1].push(c.i64.to_string(c.i64.of_float(Date.now()))),d[1]),d[2]=c.toJSON(d[1]),d[3]=c.toJSON(d[0]),c.sp(b("LSIssueNewTask"),d[2],[0,452],d[3],f,f,[0,0],[0,0],f,f,[0,0])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSIssueSearchQuery",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.db.table(67).fetch([[[a[0]]]]).next().then(function(e,g){g=e.done;e=e.value;return g?c.seq([function(b){return c.db.table(67).add({query:a[0],statusPrimary:[0,1],statusSecondary:[0,1],startTimeMs:c.i64.of_float(Date.now())})},function(e){return d[1]=new c.Map(),d[1].set("query",a[0]),d[1].set("supported_types",a[1]),d[1].set("session_id",a[2]),d[1].set("surface_type",a[3]),d[1].set("group_id",a[4]),d[1].set("thread_id",a[5]),d[2]=c.createArray(),d[7]=(d[2].push("search_primary"),d[2]),d[7]=(d[2].push(c.i64.to_string(c.i64.of_float(Date.now()))),d[2]),d[3]=c.toJSON(d[2]),d[4]=c.toJSON(d[1]),c.sp(b("LSIssueNewTask"),d[3],[0,30],d[4],f,f,[0,0],[0,0],f,f,[0,0])},function(e){return d[5]=new c.Map(),d[5].set("query",a[0]),d[5].set("supported_types",a[1]),d[5].set("session_id",a[2]),d[5].set("surface_type",a[3]),d[5].set("group_id",a[4]),d[5].set("thread_id",a[5]),d[6]=c.toJSON(d[5]),c.sp(b("LSIssueNewTask"),"search_secondary",[0,31],d[6],f,f,[0,0],[0,0],f,f,[0,0])}]):(e.item,0)})},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSInitSyncCompleteSubscription.bs",["LSDatabaseType.bs","LSSyncStatus.bs","Promise","ReQL.bs","ReQLSubscription.bs","SortedAsyncIterable.bs","bs_caml","bs_curry"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return new(b("Promise"))(function(d,e){var f={contents:function(a){}};f.contents=b("SortedAsyncIterable.bs").subscribe(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("sync_groups")),{hd:c,tl:0}),function(a,c){switch(c.TAG){case 0:case 1:break;case 2:return}if(b("bs_caml").i64_eq(c._0.syncStatus,b("LSSyncStatus.bs").complete)){b("bs_curry")._1(f.contents);return d()}})})}function a(a,c){return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("sync_groups")),{hd:c,tl:0})).then(function(d){if(d!==void 0&&!b("bs_caml").i64_neq(d.syncStatus,b("LSSyncStatus.bs").complete))return b("Promise").resolve();else return g(a,c)})}function c(a){return new(b("Promise"))(function(c,d){var e={contents:function(a){}};e.contents=b("ReQLSubscription.bs").subscribe(a,b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("sync_groups")),{hd:b("LSDatabaseType.bs").mailbox,tl:0}),function(a){if(a===void 0)return;if(a.length!==1)return;a=a[0];if(b("bs_caml").i64_eq(a.syncStatus,b("LSSyncStatus.bs").complete)){c();return b("bs_curry")._1(e.contents)}})})}f.waitForSyncGroup=g;f.maybeWaitForSyncGroup=a;f.use=c}),null);
__d("MWChatProfile.re",["MWChatProfile.bs"],(function(a,b,c,d,e,f){a=b("MWChatProfile.bs").make;f.make=a}),null);
__d("LSMessageSearchType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").one;c=[0,2];f.thread=a;f.message=c}),null);
__d("LSSearchRequestStatusType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").one;c=[0,2];d=[0,3];f.pending=a;f.complete=c;f.failed=d}),null);
__d("MWLSParticipant.bs",["LSContactBlockedByViewerStatus.bs","LSContactGender.bs","LSContactType.bs","LSContactWorkForeignEntityType.bs","LSMailboxType.bs","LSMediaUrl.bs","MWLSContactTypeExactUtils.bs","ReQL.bs","bs_belt_Option","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";e={actual_name:"",blocked_by_viewer_status:b("LSContactBlockedByViewerStatus.bs").unblocked,contact_id:(d=b("bs_caml_int64")).zero,contactType:b("LSContactType.bs").unknown,delivered_watermark_timestamp_ms:d.zero,gender:b("LSContactGender.bs").unknown,is_admin:!1,is_messenger_user:!1,mailbox_type:b("LSMailboxType.bs").messenger,name:"",nickname:void 0,profile_picture_url:"",rank:0,read_action_timestamp_ms:d.zero,read_watermark_timestamp_ms:d.zero,secondary_name:void 0,thread_key:d.zero,work_company_name:void 0,work_foreign_entity_info:b("LSContactWorkForeignEntityType.bs").unknown,work_job_title:void 0};function g(a){var c=a[1];a=a[0];var d=a.nickname;if(d!==void 0)d=d;else{var e=c.firstName;d=e!==void 0?e:c.name}return{actual_name:c.name,blocked_by_viewer_status:c.blockedByViewerStatus,contact_id:a.contactId,contactType:c.contactType,delivered_watermark_timestamp_ms:a.deliveredWatermarkTimestampMs,gender:c.gender,is_admin:b("bs_belt_Option").getWithDefault(a.isAdmin,!1),is_messenger_user:c.isMessengerUser,mailbox_type:b("LSMailboxType.bs").messenger,name:d,nickname:a.nickname,profile_picture_url:b("LSMediaUrl.bs").Contact.profilePictureUrl(c),rank:c.rank,read_action_timestamp_ms:a.readActionTimestampMs,read_watermark_timestamp_ms:a.readWatermarkTimestampMs,secondary_name:b("MWLSContactTypeExactUtils.bs").isIgContact(c)?c.secondaryName:void 0,thread_key:a.threadKey,work_company_name:c.workCompanyName,work_foreign_entity_info:c.workForeignEntityType,work_job_title:c.workJobTitle}}function a(a,c,d){var e;return(e=b("ReQL.bs")).map(e.mergeJoin(e.getKeyRange(e.fromTableAscending(a.table("participants")),{hd:d,tl:0}),c),g)}function c(a,c){return b("ReQL.bs").getKeyRange(a,{hd:c,tl:0})}f.empty=e;f.projectOpen=g;f.getAllInOpenThread=a;f.getInOpenThread=c}),null);
__d("MWLSThreadTitle.bs",["fbt","LSMessagingThreadTypeUtil.bs","bs_caml","bs_caml_array","bs_curry","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var c=a.length,d=a.length;return(d!==1?d!==0?c===2?g._("__JHASH__CYtAjqXrfJL__JHASH__",[g._param("participant1",b("bs_caml_array").get(a,0)),g._param("participant2",b("bs_caml_array").get(a,1))]):c===3?g._("__JHASH__0GwsaOqt1zM__JHASH__",[g._param("participant1",b("bs_caml_array").get(a,0)),g._param("participant2",b("bs_caml_array").get(a,1)),g._param("participant3",b("bs_caml_array").get(a,2))]):g._("__JHASH__-HjU-GfOUIJ__JHASH__",[g._param("participant1",b("bs_caml_array").get(a,0)),g._param("participant2",b("bs_caml_array").get(a,1)),g._param("others_count",String(c-2|0))]):b("gkx")("1341692")?g._("__JHASH__ypNvBdrcgnu__JHASH__"):g._("__JHASH__v1-lXqbvI1-__JHASH__"):a[0]).toString()}var i=b("gkx")("1846003");function j(a){var b=a.actual_name;a=a.nickname;if(a!==void 0&&i)return a;else return b}function k(a){var b=a.name;a=a.nickname;if(a!==void 0&&i)return a;else return b}function l(a,c,d,e,f,g){e=b("LSMessagingThreadTypeUtil.bs").isGroup(e);var i=d.filter(function(a){return b("bs_caml").i64_neq(a.contact_id,c)});if(a!==void 0)return a;else if(e)return h(i.map(b("bs_curry").__1(f)));else if(d.length!==1)return h(i.map(b("bs_curry").__1(g)));else return b("bs_curry")._1(g,d[0])}function a(a,b,c,d){return l(a,b,c,d,k,j)}function c(a,b,c,d){var e=function(a){return a.actual_name};return l(a,b,c,d,e,e)}f.getTitleFromParticipants=h;f.nicknamesEnabled=i;f.internalMake=l;f.make=a;f.makeFullName=c}),null);
__d("groupBy",[],(function(a,b,c,d,e,f){function a(a,b){return a.reduce(function(a,c){(a[b(c)]=a[b(c)]||[]).push(c);return a},{})}f["default"]=a}),66);
__d("MWInboxSecureContentSearch.bs",["fbt","LSMediaUrl.bs","LSMessageSearchType.bs","LSSearchRequestStatusType.bs","LSTransaction.bs","MAWBackendBridge.bs","MAWThreadId.bs","MAWTimeUtils","MWLSParticipant.bs","MWLSThreadTitle.bs","Promise","ReQL.bs","bs_belt_Array","bs_caml","bs_caml_array","bs_caml_int64","bs_curry","bs_int64","bs_js_dict","groupBy"],(function(a,b,c,d,e,f,g){"use strict";function h(a,c){return b("MAWThreadId.bs").toThreadKey_DEPRECATED(c,a.chatId).then(function(d){return b("Promise").all([b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("threads")),{hd:d,tl:0})),b("Promise").resolve(a)])})}function i(a,c,d){var e=b("LSMediaUrl.bs").Thread.threadPictureUrl(a);if(e!==void 0)return b("Promise").resolve([e,void 0]);else{return(e=b("ReQL.bs")).toArray(e.map(e.leftJoin(e.getKeyRange(e.fromTableAscending(d.table("participants")),{hd:a.threadKey,tl:0}),e.fromTableAscending(d.table("contacts"))),function(a){return a[1]})).then(function(a){a=b("bs_belt_Array").keepMap(a,function(a){return a}).sort(function(a,b){return a.rank-b.rank}).filter(function(a){return b("bs_caml").i64_neq(a.id,c)}).map(function(a){return b("LSMediaUrl.bs").Contact.profilePictureUrl(a)});var d=b("bs_belt_Array").get(a,0);a=b("bs_belt_Array").get(a,1);if(d!==void 0)if(a!==void 0)return b("Promise").resolve([d,a]);else return b("Promise").resolve([d,void 0]);else return b("Promise").resolve(["",void 0])})}}function j(a,c,d){if(a===1||d===b("LSMessageSearchType.bs").message)return c.content;else return g._("__JHASH__MOcENwPdyTO__JHASH__",[g._plural(a,"number")]).toString()}function k(a,c){return b("ReQL.bs").toArray(b("MWLSParticipant.bs").getAllInOpenThread(c,b("ReQL.bs").fromTableAscending(c.table("contacts")),a.threadKey))}function l(a,c,d,e,f,g){return b("LSTransaction.bs").run(g,function(l){return h(a,l).then(function(a){var h=a[0];if(h===void 0)return b("Promise").resolve();var m=a[1];if(m!==void 0)return b("Promise").all([i(h,f,g),k(h,g)]).then(function(a){var g=a[0],i=m.content;return b("Promise").all([l.table("message_search_queries").put({hasNextPage:void 0,nextPageCursor:void 0,query:d,resultCount:b("bs_caml_int64").of_int32(c),status:b("LSSearchRequestStatusType.bs").complete,threadKeyV2:h.threadKey,type_:e}),l.table("message_search_results").put({contextLine:j(c,m,e),displayName:b("MWLSThreadTitle.bs").make(h.threadName,f,a[1],h.threadType),globalIndex:b("bs_caml_int64").of_int32(-m.rowId|0),matchLengths:String(d.length),matchOffsets:i!==void 0?String(i.indexOf(d)):void 0,messageId:m.msgId,messageTimestampMs:b("MAWTimeUtils").toTimestamp(m.ts),profilePicUrl:g[0],query:d,secondaryProfilePicUrl:g[1],threadKey:h.threadKey,threadType:h.threadType,type_:e})]).then(function(a){})});else return b("Promise").resolve()})},"readWrite")}function m(a,c){return b("bs_curry")._1(b("MAWBackendBridge.bs").search({search:c}).sendAndReceive).then(function(c){var d=[];for(var e=0,f=c.length;e<f;++e){var g=b("bs_caml_array").get(c,e);if(g.TAG===0){g=g._0;d.push(b("MAWThreadId.bs").toThreadKey_DEPRECATED(a,g.chatId).then(function(a){return function(b){return[a,b]}}(g)))}}return b("Promise").all(d)})}function a(a,c,d){return m(d,a).then(function(e){return b("bs_js_dict").values(b("groupBy")(e,function(a){return b("bs_int64").to_string(a[1])})).map(function(e){var f=b("bs_belt_Array").get(e,0);if(f!==void 0)return l(f[0],e.length,a,b("LSMessageSearchType.bs").thread,c,d);else return b("Promise").resolve()}).reduce(function(a,c){return b("Promise").all([a,c]).then(function(a){})},b("Promise").resolve())})}function c(a,c,d,e){return m(e,a).then(function(f){f=f.filter(function(a){if(c!==void 0)return b("bs_caml").i64_eq(a[1],c);else return!1});var g=f.length;return f.map(function(c){return l(c[0],g,a,b("LSMessageSearchType.bs").message,d,e)}).reduce(function(a,c){return b("Promise").all([a,c]).then(function(a){})},b("Promise").resolve())})}f.getThreadPics=i;f.getThreadParticipants=k;f.searchSecureDatabaseThreads=a;f.searchSecureDatabaseMessages=c}),null);
__d("LSSearchType",[],(function(a,b,c,d,e,f){a=Object.freeze({CONTACT:1,NONCONTACT:2,GROUP:3,PAGE:4,INTEGRATED_MESSAGE_SEARCH_THREAD:5,IG_CONTACT_FOLLOWING:6,IG_CONTACT_NONFOLLOWING:7,IG_NONCONTACT_FOLLOWING:8,IG_NONCONTACT_NONFOLLOWING:9,IG_BUSINESS:10,TAM_CONTACT:11,TAM_THREAD:12,COMMUNITY_MESSAGING_THREAD:13,RECOMMENDED_COMMUNITIES:14});f["default"]=a}),66);
__d("MDSLockSvgIcon.re",["MDSLockSvgIcon.bs"],(function(a,b,c,d,e,f){a=b("MDSLockSvgIcon.bs").make;f.make=a}),null);
__d("MWChatSearchResultType",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({GROUP:"group",MESSAGE:"message",MESSAGES:"messages",PAGE:"page",USER:"user"});f["default"]=a}),66);
__d("MWJewelSearchTypeaheadViewItem.react",["fbt","ix","CometIcon.react","CometMiddot.react","CometPageVerificationIcon.react","CometTextWithIcon.react","CometTypeaheadViewItem.react","CurrentEnvironment","I64","LSSearchType","MAWGating","MDSLockSvgIcon.re","MWChatFacepile.re","MWChatProfile.re","MWChatSearchResultType","TetraText.react","TetraTextPairing.react","XCometMessengerControllerRouteBuilder","cr:4538","cr:4539","deferredLoadComponent","fbicon","react","requireDeferred","stylex"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=d("react").useState,l=c("deferredLoadComponent")(c("requireDeferred")("MAWChatVerifyCutover.react").__setRef("MWJewelSearchTypeaheadViewItem.react")),m=d("MAWGating").isTlcSearchEnabled(),n={contentRoot:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",marginTop:"xdj266r",marginBottom:"xat24cr",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",":hover":{backgroundColor:"x8du52y"}},searchIcon:{paddingTop:"x123j3cw",paddingEnd:"x1mpkggp",paddingBottom:"xs9asl8",paddingStart:"x1t2a60a"},verifiedBadge:{paddingStart:"xurb0ha"}};function a(a){var e=a.entry;a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","queryString"]);var f=e.rawData,g=f.id,o=f.imageUrl,p=f.isE2e,q=f.isInstagramAccount,r=f.isInteropEligible,s=f.resultType,t=f.secondaryImageUrl,u=f.section,v=f.serverSearchResult,w=f.subtext;f=f.verificationStatus;var x=b("cr:4538")==null?void 0:b("cr:4538")(),y=b("cr:4539")==null?void 0:b("cr:4539")({onSuccess:function(a){return x==null?void 0:x(a)}}),z=(v==null?void 0:v.threadType)!=null&&d("I64").to_int32(v.threadType)===151&&(v==null?void 0:v.type_)!=null&&d("I64").to_int32(v.type_)===c("LSSearchType").RECOMMENDED_COMMUNITIES&&(v==null?void 0:v.threadJoinLinkHash)!=null;w=p?h._("__JHASH__sZy-tIh1kQ2__JHASH__"):w;s=s==="messages"?j.jsx("div",{className:c("stylex")(n.searchIcon),children:j.jsx(c("CometIcon.react"),{color:"primary",icon:d("fbicon")._(i("491284"),24),size:24})}):t!==""?j.jsx(d("MWChatFacepile.re").make,{firstParticipantURI:o,secondParticipantURI:t,size:36}):j.jsx(d("MWChatProfile.re").make,{size:36,src:o});t=k();o=t[0];t=t[1];var A=e.rawData.otherUserId;o=(o=o)!=null?o:g;var B=c("CurrentEnvironment").facebookdotcom?c("XCometMessengerControllerRouteBuilder").buildURL({thread_key:o}):"/t/"+o+"/",C=e.rawData.resultType===c("MWChatSearchResultType").USER||e.rawData.resultType===c("MWChatSearchResultType").GROUP;A=babelHelpers["extends"]({},e,{key:o,rawData:babelHelpers["extends"]({},e.rawData,{id:o},A==null&&g!==o?{otherUserId:g}:{})});return j.jsxs(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:A,isDisabled:q===!0&&r===!1,itemStartContent:s,linkProps:z?void 0:{preventLocalNavigation:!0,url:B}},z&&{onPressEntry:function(){(v==null?void 0:v.threadJoinLinkHash)!=null&&(y==null?void 0:y(v.threadJoinLinkHash))}},{testid:void 0,xstyle:n.contentRoot,children:[m===!0&&C?j.jsx(l,{id:g.toString(),updateThreadKey:t}):null,j.jsx(c("TetraTextPairing.react"),{body:j.jsxs(c("TetraText.react"),{numberOfLines:1,type:"body3",children:[e.label,f!=null?j.jsx("span",{className:c("stylex")(n.verifiedBadge),children:j.jsx(c("CometPageVerificationIcon.react"),{size:"small",verificationBadge:f})}):null]}),level:3,meta:w&&w!==""?j.jsx(c("TetraText.react"),{numberOfLines:1,type:"meta4",children:j.jsxs(c("CometTextWithIcon.react"),{iconBefore:p?j.jsx(d("MDSLockSvgIcon.re").make,{color:"primary",size:"12"}):null,children:[w,(u==null||u==="")&&Boolean(e.rawData.isInstagramAccount)?j.jsxs(j.Fragment,{children:[j.jsx(c("CometMiddot.react"),{}),"Instagram"]}):null]})}):null})]}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSSearchType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").one;c=[0,2];d=[0,3];e=[0,4];b=[0,5];var g=[0,6],h=[0,7],i=[0,8],j=[0,9],k=[0,10],l=[0,11],m=[0,12],n=[0,13],o=[0,14];f.contact=a;f.noncontact=c;f.group=d;f.page=e;f.integratedMessageSearchThread=b;f.igContactFollowing=g;f.igContactNonfollowing=h;f.igNoncontactFollowing=i;f.igNoncontactNonfollowing=j;f.igBusiness=k;f.tamContact=l;f.tamThread=m;f.communityMessagingThread=n;f.recommendedCommunities=o}),null);
__d("MWLSSearchIssueSearchQuerySupportedTypes.bs",["LSSearchType.bs","gkx"],(function(a,b,c,d,e,f){"use strict";c=[(a=b("LSSearchType.bs")).contact,a.group,a.page,a.noncontact,a.igContactFollowing,a.igContactNonfollowing,a.igNoncontactFollowing,a.igNoncontactNonfollowing].concat(b("gkx")("6970")?[b("LSSearchType.bs").recommendedCommunities]:[]);d=[b("LSSearchType.bs").contact,b("LSSearchType.bs").group,b("LSSearchType.bs").page,b("LSSearchType.bs").noncontact,b("LSSearchType.bs").igContactFollowing,b("LSSearchType.bs").igContactNonfollowing,b("LSSearchType.bs").igNoncontactFollowing,b("LSSearchType.bs").igNoncontactNonfollowing,b("LSSearchType.bs").integratedMessageSearchThread];e=[b("LSSearchType.bs").contact,b("LSSearchType.bs").group,b("LSSearchType.bs").page,b("LSSearchType.bs").noncontact,b("LSSearchType.bs").igContactFollowing,b("LSSearchType.bs").igContactNonfollowing,b("LSSearchType.bs").igNoncontactFollowing,b("LSSearchType.bs").igNoncontactNonfollowing];a=[b("LSSearchType.bs").contact];var g=[b("LSSearchType.bs").contact,b("LSSearchType.bs").group,b("LSSearchType.bs").page,b("LSSearchType.bs").igContactFollowing,b("LSSearchType.bs").igContactNonfollowing,b("LSSearchType.bs").igNoncontactFollowing,b("LSSearchType.bs").igNoncontactNonfollowing],h=[b("LSSearchType.bs").contact,b("LSSearchType.bs").noncontact];b=[b("LSSearchType.bs").contact,b("LSSearchType.bs").noncontact,b("LSSearchType.bs").igContactFollowing,b("LSSearchType.bs").igContactNonfollowing,b("LSSearchType.bs").igNoncontactFollowing,b("LSSearchType.bs").igNoncontactNonfollowing];f.allSupportedTypes=c;f.allSupportedTypesWithMessageSearch=d;f.armadilloSupportedTypes=e;f.onlyContacts=a;f.broadcastFlowSupportedTypes=g;f.addParticipantBase=h;f.addParticipantXac=b}),null);
__d("MWLSSearchIssueSearchQuerySupportedTypes.re",["MWLSSearchIssueSearchQuerySupportedTypes.bs"],(function(a,b,c,d,e,f){c=(a=b("MWLSSearchIssueSearchQuerySupportedTypes.bs")).allSupportedTypes;f.allSupportedTypes=c;d=a.allSupportedTypesWithMessageSearch;f.allSupportedTypesWithMessageSearch=d;e=a.armadilloSupportedTypes;f.armadilloSupportedTypes=e;b=a.onlyContacts;f.onlyContacts=b;c=a.broadcastFlowSupportedTypes;f.broadcastFlowSupportedTypes=c}),null);
__d("createMWChatSearchTypeaheadDataEntry",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return{key:a.id,label:a.displayName,rawData:{displayName:a.displayName,id:a.id,imageUrl:a.imageUrl,isContact:a.isContact,isE2e:a.isE2e,isEPD:a.isEPD,isGroupsXacEligible:Boolean(a.isGroupsXacEligible),isInstagramAccount:Boolean(a.isInstagramAccount),isInteropEligible:a.isInteropEligible!==!1,isWAEligible:a.isWAEligible,otherUserId:a.otherUserId,rankingScore:a.rankingScore,renderIndex:b,resultType:a.resultType,searchSource:a.searchSource,secondaryImageUrl:(b=a.secondaryImageUrl)!=null?b:"",section:a.section,serverSearchResult:a.serverSearchResult,subtext:a.subtext,verificationStatus:a.isVerified?"BLUE_VERIFIED":"NOT_VERIFIED",waAddressable:a.waAddressable,waEligibility:a.waEligibility},type:"entry"}}f["default"]=a}),66);
__d("MWChatSearchThreadCutover",["I64","ReQL","ReQLSuspense"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b){b=d("I64").of_string_opt(b);if(!b)return!1;a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(a.table("cutover_threads")).getKeyRange(b));return Boolean(a)};g.isCutoverOpenThread=a}),98);
__d("LSPlatformWaitForTaskCompletion",["I64","Promise","emptyFunction","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e){var f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:f=new Set();h=new(b("Promise"))(function(a){g=a});j.next=4;return b("regeneratorRuntime").awrap(a.runInTransaction(function(b){var h=c("emptyFunction"),j=a.table("pending_tasks").subscribe(function(a,b){b.operation==="add"||b.operation==="put"?f.add(d("I64").to_string(a.hd)):f["delete"](d("I64").to_string(a.hd))});h=a.subscribeToCommit(function(){j();h();if(f.size===0)g(i);else{var b=c("emptyFunction");b=a.table("pending_tasks").subscribe(function(a,c){c.operation==="delete"&&(f["delete"](d("I64").to_string(a.hd)),f.size===0&&(b(),g(i)))})}});return e(b)},"readwrite"));case 4:i=j.sent;return j.abrupt("return",h);case 6:case"end":return j.stop()}},null,this)}g["default"]=a}),98);
__d("LSSearchGranularSurfaceType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").one;c=[0,2];d=[0,3];e=[0,4];b=[0,18];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,15],r=[0,16],s=[0,17],t=[0,19],u=[0,20],v=[0,21],w=[0,22];f.universalAll=a;f.universalMorePeople=c;f.universalIgFollowing=d;f.universalBusiness=e;f.universalCmThreads=b;f.omnipicker=g;f.broadcast=h;f.blockList=i;f.impersonationEvidence=j;f.universalIgNonfollowing=k;f.groups=l;f.omnipickerArmadillo=m;f.restrictedList=n;f.callsTab=o;f.cmInviteAllMembers=p;f.instagramAll=q;f.cmMemberList=r;f.cmThreadParticipantSearch=s;f.cmCommunityCreationInvite=t;f.cmInviteFbFriends=u;f.cmCommunityInviteAllMembers=v;f.cmCommunityInviteFbFriends=w}),null);
__d("MNetRankType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,15],r=[0,16],s=[0,17],t=[0,18],u=[0,19],v=[0,20],w=[0,21],x=[0,22],y=[0,23],z=[0,24],A=[0,26],B=[0,27],C=[0,28],D=[0,29],E=[0,30],F=[0,31],G=[0,32],H=[0,33],I=[0,34],J=[0,35],K=[0,36],L=[0,37],M=[0,38],N=[0,39],O=[0,40],P=[0,41],Q=[0,42],R=[0,43],S=[0,44],T=[0,45],U=[0,46],V=[0,47],W=[0,48],X=[0,49],Y=[0,50];f.inboxActiveNow=a;f.messengerUserSearch=c;f.montageUser=d;f.broadcastFlowTopContacts=e;f.broadcastFlowNeedyContacts=b;f.messengerGroupSearch=g;f.rtcTopContacts=h;f.pstnTopContacts=i;f.messengerNonContactSearch=j;f.messengerSearchBootstrap=k;f.activeBeeper=l;f.montageAndActiveNow=m;f.messengerPageSearch=n;f.messengerGameSearch=o;f.wwwNullstate=p;f.rtcGrowth=q;f.messengerOmnipickerNullstate=r;f.rtcSequentialTopContacts=s;f.messengerUserSearchNullstate=t;f.mliteDiodePromotion=u;f.messengerPendingRequest=v;f.messengerCloseConnection=w;f.messengerMontageSeenSheet=x;f.messengerOmnipickerKeypress=y;f.messengerNotifQpTargetingUpsellType=z;f.contactTabActiveNow=A;f.messengerUnivNullstateBlend=B;f.messengerInboxThreads=C;f.inboxActiveNowNoBoosting=D;f.broadcastFlowTopContactsFbShare=E;f.broadcastFlowTopContactsMessengerShare=F;f.broadcastFlowTopContactsExternalShare=G;f.messengerTrendingStickers=H;f.messengerBroadcastFlowTopThreads=I;f.messengerSends28d=J;f.messengerRoomInvite=K;f.messengerRoomInviteSearch=L;f.inboxActiveNowPrefetch=M;f.messengerBlendedKeypress=N;f.messengerBlendedNullstate=O;f.messengerCarrierMessaging=P;f.messengerRoomInviteGroup=Q;f.messengerInboxBirthdayItem=R;f.instagramDirectSearchNullstate=S;f.broadcastFlowTopContactsAndTopThreadFbShare=T;f.broadcastFlowTopThreadsFbShare=U;f.fbHScrollRanking=V;f.fbMessagingUserSearch=W;f.fbMessagingUserSearchNullstate=X;f.messengerActiveNowTrayActiveCc=Y}),null);
__d("MNetContactItemType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13];f.contact=a;f.nonContact=c;f.group=d;f.page=e;f.bot=b;f.game=g;f.igUser=h;f.igThread=i;f.sticker=j;f.interopThread=k;f.msgrThread=l;f.textSuggestion=m;f.communityMessagingThread=n;f.ibcSocialThread=o}),null);
__d("LSInstagramE2EEEligibility.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").neg_one;c=b("bs_caml_int64").zero;d=b("bs_caml_int64").one;e=[0,2];b=[0,3];var g=[0,4];f.unknown=a;f.ineligible=c;f.eligible=d;f.required=e;f.dualSendEligible=b;f.groupsEligible=g}),null);
__d("MWChatTemporarySearchResult.bs",["LSContactBitOffset.bs","LSContactCapabilityBitOffset.bs","LSContactType.bs","LSContactViewerRelationship.bs","LSInstagramE2EEEligibility.bs","LSMediaUrl.bs","LSMessagingThreadTypeUtil.bs","LSRestrictionType.bs","LSSearchType.bs","LSWhatsAppConnectStatus.bs","MWLSContactTypeExactUtils.bs","MWLSThreadTitle.bs","bs_belt_Option","bs_caml","bs_caml_option","bs_int64","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";function g(a){if(b("bs_caml").i64_eq(a,b("LSSearchType.bs").igContactFollowing)||b("bs_caml").i64_eq(a,b("LSSearchType.bs").igContactNonfollowing)||b("bs_caml").i64_eq(a,b("LSSearchType.bs").igNoncontactFollowing))return!0;else return b("bs_caml").i64_eq(a,b("LSSearchType.bs").igNoncontactNonfollowing)}function h(a){if(b("bs_caml").i64_eq(a,b("LSSearchType.bs").contact)||b("bs_caml").i64_eq(a,b("LSSearchType.bs").noncontact)||g(a))return"user";else if(b("bs_caml").i64_eq(a,b("LSSearchType.bs").group))return"group";else if(b("bs_caml").i64_eq(a,b("LSSearchType.bs").page))return"page";else if(b("bs_caml").i64_eq(a,b("LSSearchType.bs").integratedMessageSearchThread))return"message";else{b("recoverableViolation")("Unknown Search Result Type "+b("bs_int64").to_string(a),"messenger_web_product");return"user"}}function a(a,c,d,e){a=a!==void 0?b("bs_caml_option").valFromOption(a):void 0;var f=b("MWLSContactTypeExactUtils.bs").isIgContact(c),g=c.secondaryName;g=f&&g!==void 0?g:"";d=d!==void 0?[d.e2eeEligibility,b("bs_caml").i64_neq(d.e2eeEligibility,b("LSInstagramE2EEEligibility.bs").ineligible)]:[void 0,void 0];var h=c.contactType;return{canViewerMessage:void 0,communityId:void 0,displayName:c.name,id:b("bs_int64").to_string(c.id),imageUrl:b("LSMediaUrl.bs").Contact.profilePictureUrl(c),isContact:b("bs_caml").i64_eq(c.contactViewerRelationship,b("LSContactViewerRelationship.bs").contactOfViewer),isE2e:!1,isEligibleForCmInvite:void 0,isEPD:b("bs_caml").i64_eq(c.restrictionType,b("LSRestrictionType.bs").dataPrivacy),isGroupsXacEligible:b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").isGroupsXacEligible,c),isInstagramAccount:f,isInteropEligible:b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").isXacEligible,c),isInvitedToCmChannel:void 0,isVerified:b("bs_belt_Option").getWithDefault(b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").verified,c),!1),isWAEligible:d[1],otherUserId:void 0,rankingScore:a,restrictionType:void 0,resultType:b("bs_caml").i64_eq(h,b("LSContactType.bs").user)||!(b("bs_caml").i64_eq(h,b("LSContactType.bs").page)||b("bs_caml").i64_eq(h,b("LSContactType.bs").pagePersona))?"user":"page",searchSource:e,secondaryImageUrl:void 0,section:"",serverSearchResult:void 0,subtext:g,threadJoinLinkHash:void 0,threadKey:void 0,threadType:void 0,waAddressable:b("bs_caml").i64_eq(c.waConnectStatus,b("LSWhatsAppConnectStatus.bs").whatsappAddressable),waEligibility:d[0]}}function i(a,c,d){var e=a.threadDescription,f=a.threadName;if(e!==void 0)return e;else if(f!==void 0&&f!=="")return b("MWLSThreadTitle.bs").make(void 0,c,d,a.threadType);else return""}function c(a,c,d,e,f,g,h){var j=i(a,d,g);return{canViewerMessage:void 0,communityId:void 0,displayName:b("MWLSThreadTitle.bs").make(a.threadName,d,g,a.threadType),id:b("bs_int64").to_string(a.threadKey),imageUrl:e,isContact:!1,isE2e:b("LSMessagingThreadTypeUtil.bs").isSecure(a.threadType),isEligibleForCmInvite:void 0,isEPD:!1,isGroupsXacEligible:void 0,isInstagramAccount:!1,isInteropEligible:void 0,isInvitedToCmChannel:void 0,isVerified:!1,isWAEligible:void 0,otherUserId:void 0,rankingScore:h,restrictionType:void 0,resultType:"group",searchSource:c,secondaryImageUrl:f,section:"",serverSearchResult:void 0,subtext:j,threadJoinLinkHash:void 0,threadKey:a.threadKey,threadType:a.threadType,waAddressable:void 0,waEligibility:void 0}}function d(a,c,d){var e=b("bs_caml").i64_eq(a.type_,b("LSSearchType.bs").contact),f=g(a.type_);c=c!==void 0?b("bs_belt_Option").getWithDefault(c.displayName,""):"";var i=a.isVerified,j=a.waEligibility;return{canViewerMessage:a.canViewerMessage,communityId:a.communityId,displayName:a.displayName,id:a.resultId,imageUrl:a.profilePicUrl,isContact:e,isE2e:b("LSMessagingThreadTypeUtil.bs").isSecure(a.threadType),isEligibleForCmInvite:void 0,isEPD:!1,isGroupsXacEligible:a.isGroupsXacEligible,isInstagramAccount:f,isInteropEligible:a.isInteropEligible,isInvitedToCmChannel:void 0,isVerified:i!==void 0?i:!1,isWAEligible:j!==void 0?b("bs_caml").i64_neq(j,b("LSInstagramE2EEEligibility.bs").ineligible):void 0,otherUserId:void 0,rankingScore:void 0,restrictionType:a.restrictionType,resultType:h(a.type_),searchSource:d,secondaryImageUrl:a.secondaryProfilePicUrl,section:c,serverSearchResult:a,subtext:e?"":a.contextLine,threadJoinLinkHash:a.threadJoinLinkHash,threadKey:void 0,threadType:a.threadType,waAddressable:a.isWaAddressable,waEligibility:a.waEligibility}}f.checkIsInstagramAccount=g;f.getResultType=h;f.fromContact=a;f.getSubtext=i;f.fromThread=c;f.fromServerSearchResult=d}),null);
__d("MWChatSearchFetchContactRecommendations.bs",["LSContactBitOffset.bs","LSContactCapabilityBitOffset.bs","LSContactViewerRelationship.bs","LSDatabaseType.bs","LSMediaUrl.bs","LSPlatformClientSingleton.bs","LSSearchType.bs","LSWhatsAppConnectStatus.bs","MNetContactItemType.bs","MNetRankType.bs","MWChatTemporarySearchResult.bs","MWLSContactTypeExactUtils.bs","MWLSDatabaseLazySync.bs","MessagingThreadType.bs","Promise","ReQL.bs","ReQLSubscription.bs","bs_belt_Option","bs_caml","bs_caml_int64","bs_curry","bs_int64","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a){if(a<0)return-1;else if(a>0)return 1;else return 0}function j(a){return a.sort(function(a,b){b=b[0];var c=b[1];b=b[0];a=a[0];var d=a[1];a=a[0];if(b.score!==a.score)return i(b.score-a.score);else if(d!==void 0)if(c!==void 0)return i(c.rank-d.rank);else return-1;else if(c!==void 0)return 1;else return 0})}function k(a){var c=b("MWLSContactTypeExactUtils.bs").isIgContact(a);a=a.contactViewerRelationship;if(c)if(b("bs_caml").i64_eq(a,b("LSContactViewerRelationship.bs").notContact))return b("LSSearchType.bs").igNoncontactFollowing;else if(b("bs_caml").i64_eq(a,b("LSContactViewerRelationship.bs").contactOfViewer))return b("LSSearchType.bs").igContactFollowing;else return b("LSSearchType.bs").igNoncontactNonfollowing;else return b("LSSearchType.bs").contact}function l(a){var c=[];a.forEach(function(a,d){var e=a[1];a=a[0];var f=a[1];a=a[0];e=e!==void 0?e.e2eeEligibility:void 0;if(f===void 0)return;var g=a.contactType,h;if(b("bs_belt_Option").getWithDefault(b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").hasCutoverThread,f),!1))h=b("MessagingThreadType.bs").secureMessageOverWaOneToOne;else{a=a.contactType;h=b("bs_caml").i64_eq(a,b("MNetContactItemType.bs").group)?b("MessagingThreadType.bs").group:b("MessagingThreadType.bs").oneToOne}a=f.secondaryName;var i=b("bs_int64").to_string(f.id);d=b("bs_caml_int64").of_int32(d);g=b("bs_caml").i64_eq(g,b("MNetContactItemType.bs").contact)?k(f):b("bs_caml").i64_eq(g,b("MNetContactItemType.bs").group)?b("LSSearchType.bs").group:b("bs_caml").i64_eq(g,b("MNetContactItemType.bs").page)?b("LSSearchType.bs").page:b("bs_caml").i64_eq(g,b("MNetContactItemType.bs").nonContact)?b("LSSearchType.bs").noncontact:b("bs_caml").i64_eq(g,b("MNetContactItemType.bs").igThread)||b("bs_caml").i64_eq(g,b("MNetContactItemType.bs").interopThread)||b("bs_caml").i64_eq(g,b("MNetContactItemType.bs").msgrThread)?b("LSSearchType.bs").integratedMessageSearchThread:b("bs_caml").i64_eq(g,b("MNetContactItemType.bs").igUser)?b("LSSearchType.bs").igContactFollowing:b("bs_caml").i64_eq(g,b("MNetContactItemType.bs").bot)||b("bs_caml").i64_eq(g,b("MNetContactItemType.bs").game)||b("bs_caml").i64_eq(g,b("MNetContactItemType.bs").sticker)?b("LSSearchType.bs").page:b("LSSearchType.bs").noncontact;var j=f.name,l=b("LSMediaUrl.bs").Contact.profilePictureUrl(f);a=a!==void 0?a:"";var m=f.blockedByViewerStatus,n=b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").verified,f),o=b("MWLSContactTypeExactUtils.bs").isIgContact(f)?b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").isXacEligible,f):void 0,p=b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").isGroupsXacEligible,f),q=b("bs_caml").i64_eq(f.waConnectStatus,b("LSWhatsAppConnectStatus.bs").whatsappAddressable);m={blockedByViewerStatus:m,canViewerMessage:void 0,communityId:void 0,contextLine:a,displayName:j,globalIndex:d,isArmadilloTlcEligible:void 0,isEligibleForCmInvite:void 0,isGroupsXacEligible:p,isInteropEligible:o,isInvitedToCmChannel:void 0,isVerified:n,isWaAddressable:q,messageId:void 0,messageTimestampMs:void 0,otherUserId:void 0,profilePicUrl:l,query:"",restrictionType:void 0,resultId:i,secondaryProfilePicUrl:void 0,threadJoinLinkHash:void 0,threadType:h,type_:g,waEligibility:e};a=b("MWChatTemporarySearchResult.bs").fromServerSearchResult(m,void 0,"offline_nullstate");c.push([a,f])});return c}function m(a,c){var d;return(d=b("ReQL.bs")).leftJoin(d.leftJoin(d.getKeyRange(d.fromIndexAscending(a.table("ranking_scores").index("scoreTypeContactId")),{hd:c,tl:0}),d.fromTableAscending(a.table("contacts"))),d.fromTableAscending(a.table("ig_contact_info")))}function n(a,c){var d=a!==void 0?a:b("MNetRankType.bs").messengerUserSearchNullstate,e=b("useReStore")(),f=b("ReQLSubscription.bs").useArray(h.useMemo(function(){return m(e,d)},[d,e]));return h.useMemo(function(){return l(j(f))},[f])}function a(a){var c=b("MWLSDatabaseLazySync.bs").useSync(b("LSDatabaseType.bs").ranking);a=n(b("MNetRankType.bs").inboxActiveNow);h.useEffect(function(){b("bs_curry")._1(c)},[c]);return a.length}function c(a,c){var d=a!==void 0?a:b("MNetRankType.bs").messengerUserSearchNullstate;return b("LSPlatformClientSingleton.bs").getDB().then(function(a){return b("ReQL.bs").toArray(m(a,d))}).then(function(a){return b("Promise").resolve(l(j(a)))})}f.sortInPlaceQueryResults=j;f.matchContactType=k;f.mapToServerSearchResults=l;f.makeQuery=m;f.useHook=n;f.useActiveContactCount=a;f.fetchRecommendations=c}),null);
__d("MWChatSearchFetchThreadRecommendations.bs",["LSMessagingThreadTypeUtil.bs","LSPlatformClientSingleton.bs","MWInboxSecureContentSearch.bs","MWLSThreadTitle.bs","Promise","ReQL.bs","bs_belt_Option","bs_caml_int64","bs_int64"],(function(a,b,c,d,e,f){"use strict";function g(a,c,d,e,f,g,h,i){return{canViewerMessage:void 0,communityId:void 0,displayName:b("MWLSThreadTitle.bs").make(a.threadName,d,g,a.threadType),id:b("bs_int64").to_string(a.threadKey),imageUrl:e,isContact:!1,isE2e:b("LSMessagingThreadTypeUtil.bs").isSecure(a.threadType),isEligibleForCmInvite:void 0,isEPD:!1,isGroupsXacEligible:void 0,isInstagramAccount:!1,isInteropEligible:void 0,isInvitedToCmChannel:void 0,isVerified:!1,isWAEligible:void 0,otherUserId:void 0,rankingScore:h,restrictionType:void 0,resultType:i?"group":"user",searchSource:c,secondaryImageUrl:f,section:"",serverSearchResult:void 0,subtext:b("bs_belt_Option").getWithDefault(a.threadDescription,""),threadJoinLinkHash:void 0,threadKey:a.threadKey,threadType:void 0,waAddressable:void 0,waEligibility:void 0}}function h(a,c,d){return b("Promise").all([b("MWInboxSecureContentSearch.bs").getThreadPics(d,c,a),b("MWInboxSecureContentSearch.bs").getThreadParticipants(d,a)]).then(function(a){var e,f=a[0],h=(e=b("bs_caml_int64")).to_float(d.lastActivityTimestampMs);h={contactId:e.zero,contactType:e.zero,score:h,scoreIndex:e.zero,scoreType:e.zero};e=b("LSMessagingThreadTypeUtil.bs").isGroup(d.threadType);return g(d,"offline_nullstate",c,f[0],f[1],a[1],h,e)})}function i(a,c,d){var e=[];c.forEach(function(b,c){c=h(a,d,b);e.push(c)});return b("Promise").all(e).then(function(a){return a})}function j(a){var c;return(c=b("ReQL.bs")).toArray(c.take(c.filter(c.fromIndexDescending(a.table("threads").index("parentThreadKeyLastActivityTimestampMs")),function(a){if(b("LSMessagingThreadTypeUtil.bs").isRecentsSectionAllowedTypes(a.threadType))return b("LSMessagingThreadTypeUtil.bs").isMessengerOrE2EEInbox(a.folderName);else return!1}),5))}function k(a){return b("ReQL.bs").firstExn(b("ReQL.bs").map(b("ReQL.bs").fromTableAscending(a.table("_user_info")),function(a){return a.facebookUserId}))}function l(a){return b("Promise").all([j(a),k(a)]).then(function(b){return i(a,b[0],b[1])}).then(function(a){return b("Promise").resolve(a)})}function a(a,c){return b("LSPlatformClientSingleton.bs").getDB().then(l).then(function(a){return b("Promise").resolve(a)})}f.toSearchresult=g;f.mapThreadHelper=h;f.mapToServerSearchResults=i;f.makeThreadQuery=j;f.getActor=k;f.fetchThreadsAsSearchResults=l;f.fetchRecommendations=a}),null);
__d("MWChatSearchIssueLightspeedQuery.bs",["LS.bs","LSContactBlockedByViewerStatus.bs","LSIssueSearchQuery","LSPlatformClientSingleton.bs","LSPlatformWaitForTaskCompletion","LSSearchGranularSurfaceType.bs","LSSearchRequestStatusType.bs","LSSearchType.bs","LSTransaction.bs","LSVec","MNetRankType.bs","MWChatSearchFetchContactRecommendations.bs","MWChatSearchFetchThreadRecommendations.bs","MWChatTemporarySearchResult.bs","Promise","ReQL.bs","ReQLSubscription.bs","bs_caml","bs_caml_array","bs_caml_exceptions","bs_curry","bs_int64","gkx"],(function(a,b,c,d,e,f){"use strict";var g,h=b("bs_caml_exceptions").create("MWChatSearchIssueLightspeedQuery.FailedToFetchSearchResults"),i=b("gkx")("4164");function a(a){return b("bs_caml").i64_eq(a,b("LSSearchType.bs").contact)}function j(a,c){var d=a[1];a=a[0];var e=[],f=0;a.sort(function(a,c){return b("bs_int64").compare(a.globalIndex,c.globalIndex)});d.sort(function(a,c){return b("bs_int64").compare(a.globalIndex,c.globalIndex)});for(var g=0,h=a.length;g<h;++g){var i=b("bs_caml_array").get(a,g);while(f<d.length&&b("bs_caml").i64_ge(b("bs_caml_array").get(d,f).globalIndex,i.startIndex)&&b("bs_caml").i64_le(b("bs_caml_array").get(d,f).globalIndex,i.endIndex)){var j=b("bs_caml_array").get(d,f);e.push(b("MWChatTemporarySearchResult.bs").fromServerSearchResult(j,i,"server"));f=f+1|0}}return e.filter(function(a){if(c)return!0;else return a.resultType!=="group"})}var k=[b("LSSearchType.bs").integratedMessageSearchThread];g={broadcast:(g=b("LSSearchGranularSurfaceType.bs")).broadcast,cmInviteAllMembers:g.cmInviteAllMembers,instagramAll:g.instagramAll,omnipickerArmadillo:g.omnipickerArmadillo,universal:g.universalAll};function l(a,c,d){var e=d.query;return b("LSPlatformClientSingleton.bs").getDB().then(function(d){return b("LSTransaction.bs").run(d,function(d){return b("LSIssueSearchQuery")(e,b("LSVec").make(a),void 0,c,void 0,void 0,b("LS.bs").make(d))},"readWrite").then(function(a){return d})})}function c(a,c,d,e,f){if(c.length>0&&!c.includes("server"))return b("Promise").resolve([]);else return b("LSPlatformClientSingleton.bs").getDB().then(function(c){return b("LSPlatformWaitForTaskCompletion")(c,function(c){return b("LSIssueSearchQuery")(f.query,b("LSVec").make(a),void 0,d,void 0,void 0,b("LS.bs").make(c))}).then(function(a){return c})}).then(function(a){var c,d=(c=b("ReQL.bs")).toArray(c.filter(c.getKeyRange(c.fromTableAscending(a.table("server_search_results")),{hd:f.query,tl:0}),function(a){return b("bs_caml").i64_eq(a.blockedByViewerStatus,b("LSContactBlockedByViewerStatus.bs").unblocked)}));c=c.toArray(c.getKeyRange(c.fromTableAscending(a.table("server_search_sections")),{hd:f.query,tl:0}));return b("Promise").all([c,d]).then(function(a){return j(a,e)})})}function d(a,c,d,e){return b("MWChatSearchFetchContactRecommendations.bs").fetchRecommendations(e).then(function(a){return b("Promise").resolve(a.map(function(a){return a[0]}))})}function e(a,c,d,e){return b("MWChatSearchFetchThreadRecommendations.bs").fetchRecommendations(e).then(function(a){return b("Promise").resolve(a)})}function m(a,c,d,e){var f,g=(f=b("ReQL.bs")).filter(f.getKeyRange(f.fromTableAscending(a.table("server_search_results")),{hd:c,tl:0}),function(a){return b("bs_caml").i64_eq(a.blockedByViewerStatus,b("LSContactBlockedByViewerStatus.bs").unblocked)}),h=f.getKeyRange(f.fromTableAscending(a.table("server_search_sections")),{hd:c,tl:0});f=f.getKeyRange(f.fromTableAscending(a.table("search_queries")),{hd:c,tl:0});c=function(a){var c=a[0];if(c===void 0)return;var f=a[1];if(f===void 0)return;a=a[2];if(a===void 0)return;if(a.length!==1)return;a=a[0];if(!i||b("bs_caml").i64_neq(a.statusPrimary,b("LSSearchRequestStatusType.bs").pending))return b("bs_curry")._1(e,j([f,c],d))};return b("ReQLSubscription.bs").combineLatest3(a,g,h,f,c)}function n(a,b,c,d,e,f){l(b,c,e);return m(a,e.query,d,f)}function o(a,c,d,e,f,g){l(c,e,f);d=b("MWChatSearchFetchContactRecommendations.bs").makeQuery(a,b("MNetRankType.bs").messengerUserSearchNullstate);c=function(a){if(a!==void 0)return b("bs_curry")._1(g,b("MWChatSearchFetchContactRecommendations.bs").mapToServerSearchResults(b("MWChatSearchFetchContactRecommendations.bs").sortInPlaceQueryResults(a)).map(function(a){return a[0]}))};return b("ReQLSubscription.bs").subscribe(a,d,c)}f.FailedToFetchSearchResults=h;f.loaderIndicatorFix=i;f.checkIsContact=a;f.toSearchResults=j;f.contentSearchTypes=k;f.Surfaces=g;f.fetchResults=c;f.fetchRecommendations=d;f.fetchThreadRecommendations=e;f.subscribe=m;f.requestResults=n;f.requestRecommendations=o}),null);
__d("MWChatSearchIssueLightspeedQuery.re",["MWChatSearchIssueLightspeedQuery.bs"],(function(a,b,c,d,e,f){c=(a=b("MWChatSearchIssueLightspeedQuery.bs")).contentSearchTypes;f.contentSearchTypes=c;d=a.Surfaces.universal;f.Surfaces_universal=d;e=a.Surfaces.broadcast;f.Surfaces_broadcast=e;b=a.Surfaces.omnipickerArmadillo;f.Surfaces_omnipickerArmadillo=b;c=a.Surfaces.instagramAll;f.Surfaces_instagramAll=c;d=a.Surfaces.cmInviteAllMembers;f.Surfaces_cmInviteAllMembers=d;e=a.fetchResults;f.fetchResults=e;b=a.fetchRecommendations;f.fetchRecommendations=b;c=a.fetchThreadRecommendations;f.fetchThreadRecommendations=c;d=a.subscribe;f.subscribe=d;e=a.requestResults;f.requestResults=e;b=a.requestRecommendations;f.requestRecommendations=b;c=a.Surfaces;f.Surfaces=c}),null);
__d("MWChatSearchInsertRankingContacts.bs",["LS.bs","LSInsertRankingContacts","LSTransaction.bs","bs_caml","bs_caml_int64","gkx","promiseDone"],(function(a,b,c,d,e,f){"use strict";var g={contents:!1},h={contents:!1},i=b("gkx")("4164")?[0,100]:b("bs_caml_int64").zero;function a(a){if(!g.contents&&b("bs_caml").i64_gt(i,b("bs_caml_int64").zero)){g.contents=!0;b("promiseDone")(b("LSTransaction.bs").run(a,function(a){return b("LSInsertRankingContacts")(i,b("LS.bs").make(a))},"readWrite"),function(a){h.contents=!0});return}}function c(a){return h.contents}f.rankingContactsStarted=g;f.rankingContactsDone=h;f.numRankingContacts=i;f.insertRankingContacts=a;f.isDone=c}),null);
__d("MWLSUseSyncRankings.bs",["LSDatabaseType.bs","MWLSDatabaseLazySync.bs","promiseDone"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("MWLSDatabaseLazySync.bs").useSync(b("LSDatabaseType.bs").ranking)}var g={contents:!1},h={contents:!1};function c(a){if(!g.contents){g.contents=!0;b("promiseDone")(b("MWLSDatabaseLazySync.bs").sync(a,b("LSDatabaseType.bs").ranking),function(a){h.contents=!0});return}}function d(a){return h.contents}f.useHook=a;f.rankingSyncStarted=g;f.rankingSyncDone=h;f.sync=c;f.isDone=d}),null);
__d("MWPSearchIndexingSource.bs",["MessagingThreadType.bs","ReQL.bs","ReQLSuspense","SortedAsyncIterable.bs","bs_caml","bs_curry"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("ReQL.bs").toArray(b("ReQL.bs").fromTableAscending(a.table("contacts")))}function c(a,c){return b("SortedAsyncIterable.bs").subscribe(b("ReQL.bs").fromTableAscending(a.table("contacts")),function(a,d){return b("bs_curry")._2(c,a.hd,d)})}function d(a){return b("ReQL.bs").toArray(b("ReQL.bs").filter(b("ReQL.bs").fromTableAscending(a.table("threads")),function(a){return b("bs_caml").i64_eq(a.threadType,b("MessagingThreadType.bs").group)}))}function e(a,c){return b("SortedAsyncIterable.bs").subscribe(b("ReQL.bs").filter(b("ReQL.bs").fromTableAscending(a.table("threads")),function(a){return b("bs_caml").i64_eq(a.threadType,b("MessagingThreadType.bs").group)}),function(a,d){return b("bs_curry")._2(c,a.hd,d)})}function g(a,c){var d;return(d=b("ReQL.bs")).toArray(d.map(d.filter(d.fromTableAscending(c.table("participants")),function(c){return b("bs_caml").i64_neq(c.contactId,a)}),function(a){return[a,b("ReQLSuspense").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("contacts")),{hd:a.contactId,tl:0}))]}))}function h(a,c,d){return b("SortedAsyncIterable.bs").subscribe(b("ReQL.bs").filter(b("ReQL.bs").fromTableAscending(c.table("participants")),function(c){return b("bs_caml").i64_neq(c.contactId,a)}),function(a,c){return b("bs_curry")._3(d,a.hd,a.tl.hd,c)})}f.fetchContacts=a;f.subToContacts=c;f.fetchGroupThreads=d;f.subToGroupThreads=e;f.fetchGroupParticipants=g;f.subToGroupParticipants=h}),null);
__d("MWPSearchSystem.bs",["CurrentUser","JSScheduler","LS.bs","LSClearTables","LSTransaction.bs","MWChatSearchInsertRankingContacts.bs","MWLSUseSyncRankings.bs","MWPSearchIndexingSource.bs","Promise","bs_caml_format","bs_caml_option","bs_curry","cr:3072","cr:4228","promiseDone","qex","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g={contents:!1},h={contents:!1},i={contents:!1};e=b("qex")._("84");var j=e==null?!1:e,k=b("cr:4228")==null?void 0:b("bs_caml_option").some(b("cr:4228")),l=b("cr:3072")==null?void 0:b("bs_caml_option").some(b("cr:3072"));function a(a){if(!i.contents){i.contents=!0;b("JSScheduler").scheduleSpeculativeCallback(function(){b("MWChatSearchInsertRankingContacts.bs").insertRankingContacts(a);b("MWLSUseSyncRankings.bs").sync(a);if(l!==void 0||k!==void 0){var c=b("bs_caml_format").caml_int64_of_string(b("CurrentUser").getID());if(!g.contents){g.contents=!0;b("promiseDone")(b("Promise").all([b("MWPSearchIndexingSource.bs").fetchContacts(a),j?b("MWPSearchIndexingSource.bs").fetchGroupThreads(a):b("Promise").resolve([]),j?b("MWPSearchIndexingSource.bs").fetchGroupParticipants(c,a):b("Promise").resolve([])]).then(function(c){var d=c[0];b("cr:3072")==null||b("bs_curry")._4(b("cr:3072").startInitialIndex,a,d,c[1],c[2]);if(!(b("cr:4228")==null))return b("bs_curry")._2(b("cr:4228").startInitialIndex,a,d)}),function(a){h.contents=!0},function(a){b("recoverableViolation")("Error indexing contacts for search","messenger_search",{error:b("bs_caml_option").some(a)})});b("MWPSearchIndexingSource.bs").subToContacts(a,function(a,c){b("cr:4228")==null||b("bs_curry")._2(b("cr:4228").onContactChanged,a,c);if(!(b("cr:3072")==null))return b("bs_curry")._2(b("cr:3072").onContactChanged,a,c)});if(j){b("MWPSearchIndexingSource.bs").subToGroupThreads(a,function(a,c){if(!(b("cr:3072")==null))return b("bs_curry")._2(b("cr:3072").onGroupThreadChanged,a,c)});b("MWPSearchIndexingSource.bs").subToGroupParticipants(c,a,function(c,d,e){if(!(b("cr:3072")==null))return b("bs_curry")._4(b("cr:3072").onGroupParticipantChanged,a,c,d,e)});return}else return}else return}});return}}function c(a){return b("LSTransaction.bs").run(a,function(a){return b("LSClearTables")(b("LS.bs").make(a))},"readWrite")}function d(a){if(b("MWLSUseSyncRankings.bs").isDone()&&b("MWChatSearchInsertRankingContacts.bs").isDone())return h.contents;else return!1}f.initialIndexingStarted=g;f.initialIndexingDone=h;f.makeAllStarted=i;f.$MWPSearchOpenIndexer$requireCond=b("cr:3072");f.$MWPSearchSecureIndexer$OR$null$requireCondXplat=b("cr:4228");f.makeAll=a;f.clearAll=c;f.isDone=d}),null);
__d("MWPSearchSystem.re",["MWPSearchSystem.bs"],(function(a,b,c,d,e,f){a=b("MWPSearchSystem.bs").makeAll;f.makeAll=a;c=b("MWPSearchSystem.bs").clearAll;f.clearAll=c;d=b("MWPSearchSystem.bs").isDone;f.isDone=d}),null);
__d("mwChatSearchPayloadDecoratorRemoveExcluded",[],(function(a,b,c,d,e,f){"use strict";function a(a){return function(b){var c=b.entries;b=babelHelpers.objectWithoutPropertiesLoose(b,["entries"]);return babelHelpers["extends"]({entries:c.filter(function(b){return!a.includes(b.key)})},b)}}f["default"]=a}),66);
__d("mwChatSearchPayloadEnumerate",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.entries;a=babelHelpers.objectWithoutPropertiesLoose(a,["entries"]);b=b.map(function(a,b){var c=a.key,d=a.label;a=a.rawData;return{key:c,label:d,rawData:babelHelpers["extends"]({},a,{renderIndex:b}),type:"entry"}});return babelHelpers["extends"]({entries:b},a)}f["default"]=a}),66);
__d("mwStaticSearchEntries",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var b=h._("__JHASH__--dZZ_HGKAA__JHASH__",[h._param("query_value",a)]);return{key:a,label:b,rawData:{displayName:b,id:a,imageUrl:"",isContact:!1,isE2e:!1,isEPD:!1,resultType:"messages",secondaryImageUrl:"",subtext:""},type:"entry"}}g.createMessageSearchEntry=a}),98);
__d("sortMWChatSearchLocalEntries",[],(function(a,b,c,d,e,f){"use strict";var g={group:1,message:2,messages:3,page:4,user:0};function a(a){var b={};for(var c=0;c<a.length;c++){var d=a[c];b[d.id]=(d=d.rankingScore)==null?void 0:d.score}return a.sort(function(a,c){var d=g[a.resultType],e=g[c.resultType];if(d!==e)return d-e;e=(d=b[a.id])!=null?d:0;d=(a=b[c.id])!=null?a:0;return d-e})}f["default"]=a}),66);
__d("MWChatSearchTypeaheadLightspeedSubscriptionDataSource",["FBLogger","MAWGating","MWChatSearchIssueLightspeedQuery.re","MWChatSearchResultType","MWChatSearchThreadCutover","MWLSSearchIssueSearchQuerySupportedTypes.re","MWPSearchSystem.re","Promise","cr:10864","cr:3071","createMWChatSearchTypeaheadDataEntry","gkx","justknobx","mwChatSearchPayloadDecoratorRemoveExcluded","mwChatSearchPayloadEnumerate","mwStaticSearchEntries","promiseDone","qex","relay-runtime/network/RelayObservable","setTimeout","sortMWChatSearchLocalEntries"],(function(a,b,c,d,e,f,g){"use strict";var h=c("gkx")("6438");a=c("gkx")("4164");var i=a&&((e=c("qex")._("73"))!=null?e:!1),j=(f=c("qex")._("962"))!=null?f:a?10:0,k=(e=c("qex")._("963"))!=null?e:a?10:0,l=d("MAWGating").isArmadillo()&&d("MAWGating").isTlcSearchEnabled();f=function(){function a(a){var b=a.database,d=a.excludedIDs;d=d===void 0?[]:d;var e=a.lightspeedSupportedTypes;e=e===void 0?c("MWLSSearchIssueSearchQuerySupportedTypes.re").allSupportedTypes:e;var f=a.source;f=f===void 0?c("MWChatSearchIssueLightspeedQuery.re").Surfaces.universal:f;var g=a.includeRecommendations;g=g===void 0?!0:g;var h=a.includeGroupSearch;h=h===void 0?!1:h;a=a.includeMessageSearchEntry;a=a===void 0?!0:a;this.$1=[];this.$5=function(){};this.$1=d;this.$2=f===c("MWChatSearchIssueLightspeedQuery.re").Surfaces.omnipickerArmadillo?c("MWLSSearchIssueSearchQuerySupportedTypes.re").armadilloSupportedTypes:e;this.$3=f;this.$4=b;this.$6=g;this.$7=h;this.$8=a}var e=a.prototype;e.resolveData=function(a,b){var e=this;b=b.map(c("createMWChatSearchTypeaheadDataEntry"));b=[].concat(this.$8&&this.$7&&a.query.length?[d("mwStaticSearchEntries").createMessageSearchEntry(a.query)]:[],b);var f=[],g=new Set();for(var b=b,h=Array.isArray(b),i=0,b=h?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=b.length)break;j=b[i++]}else{i=b.next();if(i.done)break;j=i.value}j=j;g.has(j.key)||(f.push(j),g.add(j.key))}j=l?f.filter(function(a){var b=a.key;a=a.rawData;return a.resultType!==c("MWChatSearchResultType").USER||a.searchSource==="offline_nullstate"?!0:!d("MWChatSearchThreadCutover").isCutoverOpenThread(e.$4,b)}):f;i={entries:j,params:a};h=c("mwChatSearchPayloadDecoratorRemoveExcluded")(this.$1);return c("mwChatSearchPayloadEnumerate")(h(i))};e.fetchNetwork=function(a){var d=this;this.$5();return c("relay-runtime/network/RelayObservable").create(function(e){if(a.query.length===0&&!d.$6){e.next({entries:[],params:a});e.complete();return}if(a.query.length===0){d.$5=c("MWChatSearchIssueLightspeedQuery.re").requestRecommendations(d.$4,d.$2,d.$7,d.$3,a,function(b){if(c("justknobx")._("449")&&b.length===0){c("setTimeout")(function(){e.next(d.resolveData(a,[])),e.complete()},1500);return}e.next(d.resolveData(a,b));e.complete()});return}var f=[],g=[],l=!1,m=!1;c("promiseDone")(b("Promise").allSettled([b("cr:10864")!=null?b("cr:10864").fetchResults(d.$2,d.$3,d.$7,a):b("Promise").resolve([]),b("cr:3071")!=null&&(d.$3!==c("MWChatSearchIssueLightspeedQuery.re").Surfaces.broadcast||i)?b("cr:3071").search(a.query,d.$7):b("Promise").resolve([])]).then(function(b){var h=b[0];b=b[1];h=h.status==="fulfilled"?h.value:[];b=b.status==="fulfilled"?b.value:[];b=j<=0?b:b.slice(0,j);h=k<=0?h:h.slice(0,k);f=b.concat(h);f=c("sortMWChatSearchLocalEntries")(f);l||e.next(d.resolveData(a,f.concat(g)))})["catch"](function(a){c("FBLogger")("messenger_search").catching(a).mustfix("Error performing MWChatSearchIssueMAWFTSQuery.fetchResults")})["finally"](function(a){m=!0}));var n=function b(){if(a.query.length>0&&c("MWPSearchSystem.re").isDone()&&h&&m!==!0){c("setTimeout")(b,100);return}e.next(d.resolveData(a,f.concat(g)));e.complete()},o=c("MWChatSearchIssueLightspeedQuery.re").requestResults(d.$4,d.$2,d.$3,d.$7,a,function(a){g=a,n()});d.$5=function(){o(),l=!0}})};e.setExcludedIds=function(a){this.$1=a};return a}();g["default"]=f}),98);
__d("MWChatSearchClearSearchResults.bs",["LS.bs","LSClearTables","LSTransaction.bs","promiseDone","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("useReStore")();return h.useCallback(function(a){a=b("LSTransaction.bs").run(c,function(a){return b("LSClearTables")(b("LS.bs").make(a))},"readWrite");b("promiseDone")(a)},[c])}f.useHook=a}),null);
__d("MWChatSearchClearSearchResults.re",["MWChatSearchClearSearchResults.bs"],(function(a,b,c,d,e,f){a=b("MWChatSearchClearSearchResults.bs").useHook;f.useHook=a}),null);
__d("mwGroupEntriesForDisplay",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=new Map();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e,f,g;if(c){if(d>=a.length)break;g=a[d++]}else{d=a.next();if(d.done)break;g=d.value}g=g;e=(e=g.rawData.section)!=null?e:"";f=(f=b.get(e))!=null?f:[];f.push(g);b.set(e,f)}return b}f.mwGroupEntriesForDisplay=a}),66);
__d("mwChatSearchPayloadDecoratorRemoveDuplicates",["MWChatSearchResultType","MWXacGating.re"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b=!1);return function(d){var e=d.entries;d=babelHelpers.objectWithoutPropertiesLoose(d,["entries"]);var f=a.some(function(a){a=a.rawData;return a.resultType===c("MWChatSearchResultType").USER}),g=a.some(function(a){a=a.rawData;return!a.isInstagramAccount}),h=new Set(),i=new Set();a.forEach(function(a){return i.add(a.key)});b&&a.forEach(function(a){a.rawData.otherUserId!=null&&i.add(a.rawData.otherUserId)});e=e.filter(function(a){var d=a.key;a=a.rawData;if(f&&a.resultType!==c("MWChatSearchResultType").USER)return!1;if(!c("MWXacGating.re").isGroupsEnabled()&&(g&&Boolean(a.isInstagramAccount)))return!1;a=!h.has(d)&&!i.has(d)&&!(b&&a.otherUserId!=null&&i.has(a.otherUserId));h.add(d);return a});return babelHelpers["extends"]({entries:e},d)}}g["default"]=a}),98);
__d("MWChatSearchLightspeedTypeaheadViewList.react",["TetraText.react","getItemRoleFromCompositeRole","mwGroupEntriesForDisplay","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useMemo;function j(a){var b=a.activeEntryKey,d=a.children,e=a.entries,f=a.itemRole;a=a.title;return e!=null&&e.length>0?h.jsxs("li",{className:"x16hj40l x18d9i69 xsyo7zv xexx8yu",children:[a?h.jsx("div",{className:"xurb0ha xwib8y2 x1sxyh0 x1y1aw1k",children:h.jsx(c("TetraText.react"),{type:"entityHeaderMeta1",children:a})}):null,h.jsx("ul",{children:e.map(function(a,c){var e=b===a.key;return d({entry:a,index:c,isActive:e,itemRole:f})})})]}):null}function a(a){var b=a.ariaProps,e=a.children,f=a.entries,g=a.highlightedEntry;a=babelHelpers.objectWithoutPropertiesLoose(a,["ariaProps","children","entries","highlightedEntry"]);var k=g!=null?g.key:null;a=i(function(){return d("mwGroupEntriesForDisplay").mwGroupEntriesForDisplay(f)},[f]);var l=c("getItemRoleFromCompositeRole")(b.role);return h.jsx("ul",{"data-testid":void 0,role:"listbox",children:Array.from(a.entries()).map(function(a){var b=a[0];a=a[1];return h.jsx(j,{activeEntryKey:k,children:e,entries:a,itemRole:l,title:b},b)})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("ReStore.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}b={};f.toGenericStorage=a;f.Provider=b}),null);
__d("MWPSearchOfflineOpenConversations",["minisearch"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("minisearch"))({fields:["content"],searchOptions:{fuzzy:.2,prefix:!0},storeFields:["category"]});function a(a){return h.search(a)}function b(a){h.add(a)}function d(a){h.remove(a)}g.search=a;g.add=b;g.remove=d}),98);
__d("bs_belt_SortArray",["bs_belt_Array","bs_curry"],(function(a,b,c,d,e,f){"use strict";function g(a,b,c,d,e){while(!0){var f=c,g=b;if(f>=d)return f;var h=a[f];if(!e(h,g))return f;c=f+1|0;b=h;continue}}function h(a,b){var c=a.length;if(c===0||c===1)return c;var d=a[0],e=a[1];if(b(d,e)){var f=e,h=2;while(!0){var i=h,j=f;if(i>=c)return i;var k=a[i];if(!b(j,k))return i;h=i+1|0;f=k;continue}}else if(b(e,d))return-g(a,e,2,c,b)|0;else return 1}function a(a,c){return h(a,b("bs_curry").__2(c))}function i(a,b){var c=a.length;if(c===0)return!0;else{var d=0;c=c-1|0;while(!0){var e=d;if(e===c)return!0;if(b(a[e],a[e+1|0])>0)return!1;d=e+1|0;continue}}}function c(a,c){return i(a,b("bs_curry").__2(c))}function j(a,c,d,e,f,g,h,i,j){d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k;if(j(p,n)<=0){h[m]=p;p=q+1|0;if(p>=d)return b("bs_belt_Array").blitUnsafe(e,o,h,m+1|0,g-o|0);i=m+1|0;c=a[p];k=p;continue}h[m]=n;p=o+1|0;if(p>=g)return b("bs_belt_Array").blitUnsafe(a,q,h,m+1|0,d-q|0);i=m+1|0;f=e[p];l=p;continue}}function k(a,c,d,e,f,g,h,i,j){d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k,r=j(p,n);if(r<0){h[m]=p;var s=q+1|0,t=m+1|0;if(s<d){i=t;c=a[s];k=s;continue}b("bs_belt_Array").blitUnsafe(e,o,h,t,g-o|0);return(t+g|0)-o|0}if(r===0){h[m]=p;s=q+1|0;t=o+1|0;r=m+1|0;if(!(s<d&&t<g))if(s===d){b("bs_belt_Array").blitUnsafe(e,t,h,r,g-t|0);return(r+g|0)-t|0}else{b("bs_belt_Array").blitUnsafe(a,s,h,r,d-s|0);return(r+d|0)-s|0}i=r;f=e[t];l=t;c=a[s];k=s;continue}h[m]=n;p=o+1|0;r=m+1|0;if(p<g){i=r;f=e[p];l=p;continue}b("bs_belt_Array").blitUnsafe(a,q,h,r,d-q|0);return(r+d|0)-q|0}}function d(a,c,d,e,f,g,h,i,j){return k(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function l(a,b,c,d,e,f,g,h,i){c=b+c|0;f=e+f|0;var j=b;b=a[b];var k=e;e=d[e];h=h;while(!0){var l=h,m=e,n=k,o=b,p=j;m=i(o,m);if(m<0){var q=p+1|0;if(q>=c)return l;b=a[q];j=q;continue}if(m===0){g[l]=o;q=p+1|0;m=n+1|0;o=l+1|0;if(!(q<c&&m<f))return o;h=o;e=d[m];k=m;b=a[q];j=q;continue}p=n+1|0;if(p>=f)return l;e=d[p];k=p;continue}}function e(a,c,d,e,f,g,h,i,j){return l(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function m(a,c,d,e,f,g,h,i,j){d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k;n=j(p,n);if(n<0){h[m]=p;p=m+1|0;var r=q+1|0;if(r>=d)return p;i=p;c=a[r];k=r;continue}if(n===0){p=q+1|0;r=o+1|0;if(!(p<d&&r<g))if(p===d)return m;else{b("bs_belt_Array").blitUnsafe(a,p,h,m,d-p|0);return(m+d|0)-p|0}f=e[r];l=r;c=a[p];k=p;continue}n=o+1|0;if(n<g){f=e[n];l=n;continue}b("bs_belt_Array").blitUnsafe(a,q,h,m,d-q|0);return(m+d|0)-q|0}}function n(a,c,d,e,f,g,h,i,j){return m(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function o(a,b,c,d,e,f){for(var g=0;g<e;++g){var h=a[b+g|0],i=(d+g|0)-1|0;while(i>=d&&f(c[i],h)>0)c[i+1|0]=c[i],i=i-1|0;c[i+1|0]=h}}function p(a,b,c,d,e,f){if(e<=5)return o(a,b,c,d,e,f);var g=e/2|0;e=e-g|0;p(a,b+g|0,c,d+g|0,e,f);p(a,b,a,b+e|0,g,f);return j(a,b+e|0,g,c,d+g|0,e,c,d,f)}function q(a,b){var c=a.length;if(c<=5)return o(a,0,a,0,c,b);var d=c/2|0;c=c-d|0;var e=new Array(c);p(a,d,e,0,c,b);p(a,0,a,c,d,b);return j(a,c,d,e,0,c,a,0,b)}function r(a,c){return q(a,b("bs_curry").__2(c))}function s(a,b){a=a.slice(0);q(a,b);return a}function t(a,c){return s(a,b("bs_curry").__2(c))}function u(a,b,c){var d=a.length;if(d===0)return-1;var e=a[0];e=c(b,e);if(e<0)return-1;e=a[d-1|0];e=c(b,e);if(e>0)return-(d+1|0)|0;else{e=0;d=d-1|0;while(!0){var f=d,g=e,h=(g+f|0)/2|0,i=a[h];i=c(b,i);if(i===0)return h;if(i<0){if(f===h)if(c(a[g],b)===0)return g;else return-(f+1|0)|0;d=h;continue}if(g===h)if(c(a[f],b)===0)return f;else return-(f+1|0)|0;e=h;continue}}}function v(a,c,d){return u(a,c,b("bs_curry").__2(d))}var w,x;f.Int=w;f.$$String=x;f.strictlySortedLengthU=h;f.strictlySortedLength=a;f.isSortedU=i;f.isSorted=c;f.stableSortInPlaceByU=q;f.stableSortInPlaceBy=r;f.stableSortByU=s;f.stableSortBy=t;f.binarySearchByU=u;f.binarySearchBy=v;f.unionU=k;f.union=d;f.intersectU=l;f.intersect=e;f.diffU=m;f.diff=n}),null);
__d("MWPSearchOfflineOpenConversations.bs",["LSContactBitOffset.bs","LSContactCapabilityBitOffset.bs","LSDatabaseType.bs","LSInitSyncCompleteSubscription.bs","MNetRankType.bs","MWChatTemporarySearchResult.bs","MWInboxSecureContentSearch.bs","MWPSearchOfflineOpenConversations","Promise","ReQL.bs","ReStore.bs","bs_belt_Array","bs_belt_Option","bs_belt_SortArray","bs_caml","bs_caml_array","bs_caml_format","bs_caml_int64","bs_caml_option","bs_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return"p__"+b("bs_int64").to_string(a)+"__"+b("bs_int64").to_string(c)}function g(a){a=a.split("__");var c=a.length;if(c!==3)return;else return[b("bs_caml_format").caml_int64_of_string(b("bs_caml_array").get(a,1)),b("bs_caml_format").caml_int64_of_string(b("bs_caml_array").get(a,2))]}function h(a,c){var d;return b("Promise").all([(d=b("ReQL.bs")).firstExn(d.map(d.fromTableAscending(a.table("_user_info")),function(a){return a.facebookUserId})),d.first(d.getKeyRange(d.fromTableAscending(a.table("threads")),{hd:b("bs_caml_format").caml_int64_of_string(c),tl:0}))]).then(function(c){var d=c[1];if(d!==void 0){var e=c[0];return b("Promise").all([b("MWInboxSecureContentSearch.bs").getThreadPics(d,e,a),b("MWInboxSecureContentSearch.bs").getThreadParticipants(d,a)]).then(function(a){var c,f=a[0],g=(c=b("bs_caml_int64")).to_float(d.lastActivityTimestampMs);g={contactId:c.zero,contactType:c.zero,score:g,scoreIndex:c.zero,scoreType:c.zero};return b("MWChatTemporarySearchResult.bs").fromThread(d,"offline",e,f[0],f[1],a[1],g)})}else return b("Promise").resolve()})}function i(a,b){a=a.rankingScore;a=a!==void 0?a.score:0;b=b.rankingScore;b=b!==void 0?b.score:0;if(b>a)return 1;else if(b<a)return-1;else return 0}function j(a,c){return b("Promise").all(c.map(function(c){var d=c.category;switch(d.TAG){case 0:d=c.id;d=g(d);if(d!==void 0)return h(a,b("bs_int64").to_string(d[0]));else return b("Promise").resolve();case 1:return h(a,c.id);case 2:var e=c.id;return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("contacts")),{hd:b("bs_caml_format").caml_int64_of_string(e),tl:0})).then(function(c){if(c!==void 0&&!(c.isMemorialized||b("bs_caml").i64_eq(c.contactViewerRelationship,b("bs_caml_int64").one)||b("bs_caml").i64_neq(c.blockedByViewerStatus,b("bs_caml_int64").zero)||b("bs_belt_Option").getWithDefault(b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").restrictPlaced,c),!1)))return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("ranking_scores")),{hd:b("bs_caml_format").caml_int64_of_string(e),tl:{hd:b("MNetRankType.bs").messengerUserSearch,tl:0}})).then(function(a){return b("MWChatTemporarySearchResult.bs").fromContact(b("bs_caml_option").some(a),c,void 0,"offline")});else return b("Promise").resolve()})}})).then(function(a){a=b("bs_belt_Array").keepMap(a,function(a){return a});var c=b("bs_belt_SortArray").stableSortByU(a.filter(function(a){return a.resultType!=="group"}),i);a=b("bs_belt_SortArray").stableSortByU(a.filter(function(a){return a.resultType==="group"}),i);return c.concat(a)})}var k={contents:void 0};function c(a,c){var d=k.contents;if(d===void 0)return b("Promise").resolve([]);var e=b("bs_caml_option").valFromOption(d),f=b("MWPSearchOfflineOpenConversations").search(a).map(function(a){return a}).filter(function(a){if(c)return!0;a=a.category;switch(a.TAG){case 0:case 1:return!1;case 2:return!0}});return b("LSInitSyncCompleteSubscription.bs").maybeWaitForSyncGroup(e,b("LSDatabaseType.bs").ranking).then(function(a){return j(e,f)})}function l(a,c,d){return b("LSInitSyncCompleteSubscription.bs").maybeWaitForSyncGroup(a,b("LSDatabaseType.bs").ranking).then(function(e){var f=b("ReStore.bs").toGenericStorage(a);return b("Promise").all(c.map(function(a){return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(f.table("ranking_scores")),{hd:b("bs_caml_format").caml_int64_of_string(a),tl:{hd:d,tl:0}})).then(function(b){if(b!==void 0)return[a,b.score]})}))})}function d(a,c){return l(a,c,b("MNetRankType.bs").messengerUserSearch)}f.getGroupParticipantKey=a;f.parseGroupParticipantKey=g;f.sortByRankingScore=i;f.searchHelper=j;f.db=k;f.search=c;f.fetchRankingScoresHelper=l;f.fetchRankingScoresKP=d}),null);
__d("MWPSearchOfflineOpenConversations.re",["MWPSearchOfflineOpenConversations.bs"],(function(a,b,c,d,e,f){a=b("MWPSearchOfflineOpenConversations.bs").getGroupParticipantKey;f.getGroupParticipantKey=a;c=b("MWPSearchOfflineOpenConversations.bs").search;f.search=c;d=b("MWPSearchOfflineOpenConversations.bs").fetchRankingScoresKP;f.fetchRankingScoresKP=d}),null);
__d("MWPSearchOpenIndexer.bs",["MWPSearchOfflineOpenConversations","MWPSearchOfflineOpenConversations.bs","ReQL.bs","ReQLSuspense","bs_caml_option","bs_int64"],(function(a,b,c,d,e,f){"use strict";var g=new Map();function h(a){var c=b("bs_int64").to_string(a.id);a=a.name;var d={_0:void 0,TAG:2};d={category:d,content:a,id:c};b("MWPSearchOfflineOpenConversations").add(d);g.set(c,d)}function i(a){var c=g.get(a);if(!(c==null)){g["delete"](a);b("MWPSearchOfflineOpenConversations").remove(c);return}}var j={addToIndex:h,contactRecords:g,remove:i},k=new Map();function l(a){var c=a.threadName;if(c===void 0)return;a=b("bs_int64").to_string(a.threadKey);var d={_0:void 0,TAG:1};d={category:d,content:c,id:a};b("MWPSearchOfflineOpenConversations").add(d);k.set(a,d)}function m(a){var c=k.get(a);if(!(c==null)){k["delete"](a);b("MWPSearchOfflineOpenConversations").remove(c);return}}var n={addToIndex:l,remove:m,threadRecords:k},o=new Map();function p(a,c){if(c===void 0)return;a=b("MWPSearchOfflineOpenConversations.bs").getGroupParticipantKey(a.threadKey,a.contactId);c=c.name;var d={_0:void 0,TAG:0};d={category:d,content:c,id:a};b("MWPSearchOfflineOpenConversations").add(d);o.set(a,d)}function q(a,c){a=b("ReQLSuspense").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("contacts")),{hd:c.contactId,tl:0}));return p(c,a)}function r(a,c){a=b("MWPSearchOfflineOpenConversations.bs").getGroupParticipantKey(a,c);c=o.get(a);if(!(c==null)){o["delete"](a);b("MWPSearchOfflineOpenConversations").remove(c);return}}var s={addToIndex:p,addToIndexWithoutContact:q,participantRecords:o,remove:r};function a(a,c){switch(c.TAG){case 0:return h(c._0);case 1:c=c._0;i(b("bs_int64").to_string(c.id));return h(c);case 2:return i(b("bs_int64").to_string(a))}}function c(a,c){switch(c.TAG){case 0:return l(c._0);case 1:c=c._0;m(b("bs_int64").to_string(c.threadKey));return l(c);case 2:return m(b("bs_int64").to_string(a))}}function d(a,b,c,d){switch(d.TAG){case 0:return q(a,d._0);case 1:r(b,c);return q(a,d._0);case 2:return r(b,c)}}function e(a,c,d,e){b("MWPSearchOfflineOpenConversations.bs").db.contents=b("bs_caml_option").some(a),c.forEach(h),d.forEach(l),e.forEach(function(a){return p(a[0],a[1])})}f.Contacts=j;f.GroupThreads=n;f.GroupParticipants=s;f.onContactChanged=a;f.onGroupThreadChanged=c;f.onGroupParticipantChanged=d;f.startInitialIndex=e}),null);/*FB_PKG_DELIM*/
__d("LSVersion",[],(function(a,b,c,d,e,f){e.exports="5403837853059087"}),null);
__d("CometNotificationsBadgeCountFragment_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"environment"}],kind:"Fragment",metadata:null,name:"CometNotificationsBadgeCountFragment_viewer",selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("CometNotificationsBadgeCountQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"environment"}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometNotificationsBadgeCountQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometNotificationsBadgeCountFragment_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometNotificationsBadgeCountQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null}],storageKey:null}]},params:{id:"4886725694759503",metadata:{},name:"CometNotificationsBadgeCountQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWChatSettingsQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5248437728509060"}),null);
__d("MWChatSettingsQuery.graphql",["MWChatSettingsQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"chat_tabs_turned_off",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_sounds_on",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatSettingsQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatSettingsQuery",selections:a},params:{id:b("MWChatSettingsQuery_facebookRelayOperation"),metadata:{},name:"MWChatSettingsQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWXACIntroViewQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"xacIntroNuxId"}],b=[{kind:"Variable",name:"nux_id",variableName:"xacIntroNuxId"},{kind:"Literal",name:"supported",value:["MessengerXacIntroViewRenderer"]}],c={kind:"InlineFragment",selections:[{args:null,documentName:"MWXACIntroViewQuery_xacIntroCometNux",fragmentName:"MWXACIntroFlow_introRenderer",fragmentPropName:"introRenderer",kind:"ModuleImport"}],type:"MessengerXacIntroViewRenderer",abstractKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWXACIntroViewQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"messenger_xac_intro_renderer",plural:!1,selections:[c],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWXACIntroViewQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"messenger_xac_intro_renderer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c],storageKey:null}],storageKey:null}]},params:{id:"7403839336352965",metadata:{},name:"MWXACIntroViewQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWChatBadgeCountQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"suppress_xac_groups"}],b=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"message_threads",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"suppress_xac_groups",variableName:"suppress_xac_groups"}],kind:"ScalarField",name:"unseen_count",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_loading_client_threads",storageKey:null}]}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatBadgeCountQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatBadgeCountQuery",selections:b},params:{id:"5218522061549416",metadata:{},name:"MWChatBadgeCountQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("LSPlatformGraphQLLightspeedRequestQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"deviceId"},{defaultValue:null,kind:"LocalArgument",name:"requestId"},{defaultValue:null,kind:"LocalArgument",name:"requestPayload"},{defaultValue:null,kind:"LocalArgument",name:"requestType"}],b=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"device_id",variableName:"deviceId"},{kind:"Variable",name:"request_id",variableName:"requestId"},{kind:"Variable",name:"request_payload",variableName:"requestPayload"},{kind:"Variable",name:"request_type",variableName:"requestType"}],concreteType:"LightspeedWebResponse",kind:"LinkedField",name:"lightspeed_web_request",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"payload",storageKey:null},{alias:null,args:null,concreteType:"LightspeedWebRequestDependency",kind:"LinkedField",name:"dependencies",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"experiments",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"LSPlatformGraphQLLightspeedRequestQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"LSPlatformGraphQLLightspeedRequestQuery",selections:b},params:{id:"4998154276938803",metadata:{},name:"LSPlatformGraphQLLightspeedRequestQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("CometTopNavTabBadge.react",["CometNumberedBadge.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useEffect;function a(a){var b=a.isBadgeHidden,d=a.isTab,e=a.overflow,f=a.setBadgeCount,g=a.testid,j=a.value;g=babelHelpers.objectWithoutPropertiesLoose(a,["isBadgeHidden","isTab","overflow","setBadgeCount","testid","value"]);i(function(){f&&f(j)},[j,f]);if(b===!0||j===0)return null;a=d===!0?"red":void 0;return h.jsx(c("CometNumberedBadge.react"),babelHelpers["extends"]({},g,{color:a,overflow:e,testid:void 0,value:j}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useCometPageletVCTracker",["InteractionTracingMetrics","cr:683059","performanceAbsoluteNow","react"],(function(a,b,c,d,e,f,g){"use strict";e=d("react");var h=e.useCallback,i=e.useRef;function a(a){var d=i(null);return h(function(e){if(d.current!==e){d.current=e;var f;if(e){if(a.interactionUUID!=null){var g=c("InteractionTracingMetrics").get(a.interactionUUID);g&&g.vcTracker&&(f=g.vcTracker)}else b("cr:683059")&&a.excludeFromMainVC===!0&&(f=b("cr:683059").getCurrentNavigationTrace());if(f!=null){g=c("performanceAbsoluteNow")();a.isMutationRoot===!0&&a.interactionUUID!=null&&f.addMutationRoot(e);f.addMountPoint(e,g,a.pageletName);f.trackPagelet(e,a.pageletName,g,a.vcCallback,a.pageletType,a.excludeFromMainVC)}}}},[a])}g["default"]=a}),98);
__d("CometNotificationsBadgeCount.react",["CometHeroInteractionIDContext","CometNotificationsBadgeCountFragment_viewer.graphql","CometNotificationsBadgeCountQuery.graphql","CometNumberedBadge.react","CometPlaceholder.react","CometRelay","react","setupNotificationsLiveQuery","unrecoverableViolation","useCometPageletVCTracker"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("react");e=d("react");var k=e.useContext,l=e.useEffect;function a(a){var e=d("CometRelay").useLazyLoadQuery(h!==void 0?h:h=b("CometNotificationsBadgeCountQuery.graphql"),{environment:"MAIN_SURFACE"});e=e.viewer;if(e==null)throw c("unrecoverableViolation")("The viewer recieving these notifications cannot be null","comet_feed");e=d("CometRelay").useFragment(i!==void 0?i:i=b("CometNotificationsBadgeCountFragment_viewer.graphql"),e);var f=(e=e==null?void 0:e.notifications_unseen_count)!=null?e:0;e=a.isBadgeHidden;var g=a.overflow,m=a.setBadgeCount,n=d("CometRelay").useRelayEnvironment();l(function(){var a=c("setupNotificationsLiveQuery")(n);return function(){return a.dispose()}},[n]);l(function(){m&&m(f)},[f,m]);a=k(c("CometHeroInteractionIDContext"));a=c("useCometPageletVCTracker")({interactionUUID:a,pageletName:"NotificationsBadge"});return j.jsx(c("CometPlaceholder.react"),{fallback:j.jsx("span",{}),children:e!==!0&&f>0?j.jsx(c("CometNumberedBadge.react"),{overflow:g,ref:a,testid:void 0,value:f}):null})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWCondWrapper.react",["cr:2895","cr:2896","cr:3921","cr:4891","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";d("react");function a(a){a=a.children;return a}e=c("gkx")("1224637")?a:(c=(d=(f=(e=b("cr:2895"))!=null?e:b("cr:2896"))!=null?f:b("cr:4891"))!=null?d:b("cr:3921"))!=null?c:a;f=e;g["default"]=f}),98);
__d("LSErrorHandlerDeferred.bs",["Promise","bs_curry","promiseDone","requireDeferred"],(function(a,b,c,d,e,f){"use strict";var g=b("requireDeferred")("LSErrorHandler.bs").__setRef("LSErrorHandlerDeferred.bs");function a(a){var c=g.load().then(function(c){return b("Promise").resolve(b("bs_curry")._1(c.subscribeToErrorTableAndShowToast,a))});return function(a){a=c.then(function(a){a!==void 0&&b("bs_curry")._1(a);return b("Promise").resolve()});b("promiseDone")(a)}}f.$LSErrorHandler$Deferred=g;f.subscribeToErrors=a}),null);
__d("LSErrorHandlerDeferred.re",["LSErrorHandlerDeferred.bs"],(function(a,b,c,d,e,f){a=b("LSErrorHandlerDeferred.bs").subscribeToErrors;f.subscribeToErrors=a}),null);
__d("ClearInterval.re",["clearInterval"],(function(a,b,c,d,e,f){a=b("clearInterval");f.clearIntervalTypeChecked=a;c=a;f.clearInterval=c}),null);
__d("MWChatConfig.bs",["CurrentEnvironment","bx"],(function(a,b,c,d,e,f){"use strict";a=b("CurrentEnvironment").messengerdotcom?b("bx").getURL(b("bx")("273041")):b("bx").getURL(b("bx")("273022"));c=b("CurrentEnvironment").messengerdotcom?b("bx").getURL(b("bx")("273042")):b("bx").getURL(b("bx")("273023"));f.soundNotifMp3Url=a;f.soundNotifOggUrl=c}),null);
__d("MWChatOpenTabFromNewMessage.bs",["LSThreadAttributionStore.bs","MWChatStateActions.bs","MWChatStateV2.bs","MWChatThreadId.bs","ODS","bs_curry","react","setTimeout","useCometFeedNoRoutingNavigationEventLogger"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("useCometFeedNoRoutingNavigationEventLogger")(),d=b("MWChatStateV2.bs").useDispatch();return h.useCallback(function(e){return function(f,g){c(Date.now(),"","messenger");b("ODS").bumpEntityKey(3185,"mwchat_tab","open_incoming");b("LSThreadAttributionStore.bs").setSource(b("MWChatThreadId.bs").getFBID(e),a);var h=Date.now();b("bs_curry")._1(d,b("MWChatStateActions.bs").openTabOrFlyout(h,{shouldFocus:!1},{_0:{clientThreadKey:void 0,threadKey:f.threadKey,threadType:f.threadType},TAG:1}));b("setTimeout")(function(a){return b("bs_curry")._1(d,b("MWChatStateActions.bs").closeFlyout(h,f.threadKey))},3e3);return b("bs_curry")._1(g)}},[c,a,d])}f.useHook=a}),null);
__d("MWChatSettingsQuery",["CometRelay","CometRelayEnvironment","MWChatSettingsQuery.graphql","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){var b=d("CometRelay").fetchQuery(c("CometRelayEnvironment"),j,{},c("gkx")("1820749")?{fetchPolicy:"store-or-network"}:void 0).toPromise().then(function(b){var c;c=b==null?void 0:(c=b.viewer)==null?void 0:c.chat_tabs_turned_off;b=b==null?void 0:(b=b.viewer)==null?void 0:b.chat_sounds_on;a(c,b);return});c("promiseDone")(b)},j=h!==void 0?h:h=b("MWChatSettingsQuery.graphql");a=function(a){i(function(b,c){return a(b)})};e=function(a){i(function(b,c){return a(c!=null&&c)})};g.areChatTabsTurnedOff=a;g.areChatTabsSoundsOn=e}),98);
__d("MWChatThreadPingCounter.bs",[],(function(a,b,c,d,e,f){"use strict";var g=new Map();function h(a){a=g.get(a);if(!(a==null))return a;else return 0}function a(a){var b=h(a);g.set(a,b+1|0)}function b(a){g.clear()}f.getCount=h;f.incrementCount=a;f.clear=b}),null);
__d("MWGetCurrentThreadIDForLSThread.bs",["FBID.bs","MWCMThreadTypes.bs","MessagingThreadType.bs","bs_caml","bs_int64","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){if(d)return{NAME:"Page",VAL:b("FBID.bs").ofStringExn(b("bs_int64").to_string(a))};else if(b("bs_caml").i64_eq(c,b("MessagingThreadType.bs").tincanOneToOne)||b("bs_caml").i64_eq(c,b("MessagingThreadType.bs").secureMessageOverWaOneToOne)||b("bs_caml").i64_eq(c,b("MessagingThreadType.bs").secureMessageOverWaGroup))return{NAME:"UserSecret",VAL:b("FBID.bs").ofStringExn(b("bs_int64").to_string(a))};else if(b("bs_caml").i64_eq(c,b("MessagingThreadType.bs").oneToOne)||b("bs_caml").i64_eq(c,b("MessagingThreadType.bs").tincanOneToOneDisappearing))return{NAME:"User",VAL:b("FBID.bs").ofStringExn(b("bs_int64").to_string(a))};else if(b("bs_caml").i64_eq(c,b("MessagingThreadType.bs").group)||b("bs_caml").i64_eq(c,b("MessagingThreadType.bs").marketplace)||b("MWCMThreadTypes.bs").isAnyCMThread(c)||b("bs_caml").i64_eq(c,b("MessagingThreadType.bs").discoverablePublicChat)||b("bs_caml").i64_eq(c,b("MessagingThreadType.bs").discoverablePublicChatUnjoined))return{NAME:"Group",VAL:b("FBID.bs").ofStringExn(b("bs_int64").to_string(a))};else return b("unrecoverableViolation")("Unsupported MWMessagingThreadType "+b("bs_int64").to_string(c),"messenger_web_product")}f.get=a}),null);
__d("MWLSChatTabPolicy.bs",["LSContactBlockedByViewerStatus.bs","MWCMThreadTypes.bs","MWChatSettingsQuery","MWCount.bs","MessengerWebEventsFalcoEvent.bs","bs_caml","bs_caml_int64","bs_curry","gkx","killswitch"],(function(a,b,c,d,e,f){"use strict";function g(a,c,d){d=d.TAG===0?!0:!1;if(d)return b("bs_curry")._1(a,c)}function a(a,c,d,e,f){var h=function(a){return b("MessengerWebEventsFalcoEvent.bs").log(function(){return{event_name:"suppress_new_message",extra_data:{reason:a}}})},i=function(a){if(b("killswitch")("MESSENGER_WEB_STOP_AUTOMATIC_CHAT_TAB_RAISING")||!b("gkx")("1812191")){b("bs_curry")._1(b("MWCount.bs").Comet.NewMessage.reject);return b("bs_curry")._1(a,{_0:void 0,TAG:1})}else return b("bs_curry")._1(a,{_0:void 0,TAG:0})},j=function(c){if(b("bs_caml").i64_eq(a.senderId,e)){h("message_outgoing");b("bs_curry")._1(b("MWCount.bs").Comet.NewMessage.reject);return b("bs_curry")._1(c,{_0:void 0,TAG:1})}else return b("bs_curry")._1(c,{_0:void 0,TAG:0})},k=function(a){if(b("gkx")("1968579"))return b("bs_curry")._1(a,{_0:void 0,TAG:0});else{b("MWChatSettingsQuery").areChatTabsTurnedOff(function(c){if(!(c==null)&&c){h("turn_off_chat_tab");b("bs_curry")._1(b("MWCount.bs").Comet.NewMessage.reject);return b("bs_curry")._1(a,{_0:void 0,TAG:1})}else return b("bs_curry")._1(a,{_0:void 0,TAG:0})});return}},l=function(a){var d=b("bs_caml_int64").to_float(c.muteExpireTimeMs);if(d>Date.now()||d<0){h("mention_muted");b("bs_curry")._1(b("MWCount.bs").Comet.NewMessage.reject);return b("bs_curry")._1(a,{_0:void 0,TAG:1})}else return b("bs_curry")._1(a,{_0:void 0,TAG:0})},m=function(c){if(a.isAdminMessage){h("message_non_user_generated");b("bs_curry")._1(b("MWCount.bs").Comet.NewMessage.reject);return b("bs_curry")._1(c,{_0:void 0,TAG:1})}else return b("bs_curry")._1(c,{_0:void 0,TAG:0})},n=function(a){if(c.folderName==="inbox")return b("bs_curry")._1(a,{_0:void 0,TAG:0});else{h("message_no_inbox");b("bs_curry")._1(b("MWCount.bs").Comet.NewMessage.reject);return b("bs_curry")._1(a,{_0:void 0,TAG:1})}},o=function(a){if(b("bs_caml").i64_neq(d.blockedByViewerStatus,b("LSContactBlockedByViewerStatus.bs").unblocked)){h("message_blocked_participants");b("bs_curry")._1(b("MWCount.bs").Comet.NewMessage.reject);return b("bs_curry")._1(a,{_0:void 0,TAG:1})}else return b("bs_curry")._1(a,{_0:void 0,TAG:0})},p=function(a){if(b("MWCMThreadTypes.bs").isJoinedCMThread(c.threadType)){h("community_messaging_group_blocked");return b("bs_curry")._1(a,{_0:void 0,TAG:1})}else return b("bs_curry")._1(a,{_0:void 0,TAG:0})},q=function(c){var d=a.mentionTypes;if(d!==void 0&&"s".includes(d))return b("bs_curry")._1(c,{_0:void 0,TAG:1});else return b("bs_curry")._1(c,{_0:void 0,TAG:0})};i={hd:i,tl:{hd:j,tl:{hd:k,tl:{hd:l,tl:{hd:m,tl:{hd:n,tl:{hd:o,tl:{hd:p,tl:{hd:q,tl:0}}}}}}}}};if(!i)return;j=function a(c){if(!c)return function(a){return g(function(a){return b("bs_curry")._1(f)},function(a){},a)};var d=c.hd,e=a(c.tl);return function(a){return g(d,e,a)}};return b("bs_curry")._1(i.hd,j(i.tl))}f.proceedIfAllow=g;f.shouldMessageBeAllowed=a}),null);
__d("MWNotificationRenderer.bs",["fbt","MessagingThreadType.bs","bs_caml","bs_curry"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c,d,e,f,h){if(!b("bs_caml").i64_neq(a.senderId,c))return b("bs_curry")._1(h,g._("__JHASH__rY0dxFqgz-w__JHASH__"));a=f.nickname;if(a!==void 0)c=a;else{f=e.firstName;c=f!==void 0?f:e.name}a=d.threadName;if(a!==void 0)return b("bs_curry")._1(h,g._("__JHASH__OUbuC9yLTGc__JHASH__",[g._param("senderName",c),g._param("groupName",a)]));else if(b("bs_caml").i64_eq(d.threadType,b("MessagingThreadType.bs").group))return b("bs_curry")._1(h,g._("__JHASH__xWtep4OGpvD__JHASH__",[g._param("name",c)]));else return b("bs_curry")._1(h,g._("__JHASH__uh-zU0Y_fAB__JHASH__",[g._param("name",c)]))}f.renderDocumentTitle=a}),null);
__d("MWLSChatPopperUpper.bs",["ClearInterval.re","CometSetBlinkingTitleMessageContext","CurrentUser","FBID.bs","LSContactType.bs","MWChatConfig.bs","MWChatOpenTabFromNewMessage.bs","MWChatSettingsQuery","MWChatThreadPingCounter.bs","MWCount.bs","MWGetCurrentThreadIDForLSThread.bs","MWIsXacGroupThread.bs","MWLSChatTabPolicy.bs","MWNotificationRenderer.bs","MWPActor.bs","MWPIsThreadUnread.bs","MWXacGating.bs","MercuryIDs","ReQL.bs","ServerTime","SortedAsyncIterable.bs","bs_belt_Option","bs_caml","bs_caml_int64","bs_caml_option","bs_curry","bs_int64","promiseDone","react","requireDeferred","setInterval","useGlobalEventListener"],(function(a,b,c,d,e,f){"use strict";var g,h=b("requireDeferred")("Sound").__setRef("MWLSChatPopperUpper.bs"),i=g||(g=b("react")),j=b("CometSetBlinkingTitleMessageContext");function k(a){var c=b("bs_int64").to_string(a.senderId)!==b("CurrentUser").getID();if(c)return h.onReady(function(c){c.play([b("MWChatConfig.bs").soundNotifOggUrl,b("MWChatConfig.bs").soundNotifMp3Url],b("bs_caml_int64").to_float(a.timestampMs),!1)})}var l={contents:void 0};function m(a,c,d,e,f,g,h,i){var j=b("MWGetCurrentThreadIDForLSThread.bs").get(d.threadKey,d.threadType,b("bs_caml").i64_eq(e.contactType,b("LSContactType.bs").page)||b("bs_caml").i64_eq(e.contactType,b("LSContactType.bs").pagePersona));return b("MWLSChatTabPolicy.bs").shouldMessageBeAllowed(c,d,e,h,function(m){var n=b("MercuryIDs").getThreadIDFromThreadFBID(b("FBID.bs").ofStringExn(b("bs_int64").to_string(d.threadKey)));b("bs_curry")._1(b("MWCount.bs").Comet.NewMessage.lift);return b("bs_curry")._3(a,j,d,function(a){b("MWNotificationRenderer.bs").renderDocumentTitle(c,h,d,e,f,function(a){var e=l.contents;e!==void 0&&b("bs_curry")._1(e);l.contents=b("SortedAsyncIterable.bs").subscribe(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(i.table("threads")),{hd:d.threadKey,tl:0}),function(a,c){switch(c.TAG){case 0:case 1:break;case 2:return}a=c._0;if(b("MWPIsThreadUnread.bs").isThreadUnread(a))return;c=l.contents;c!==void 0&&b("bs_curry")._1(c);l.contents=void 0;return b("bs_curry")._2(g,void 0,b("bs_caml_int64").to_float(a.lastReadWatermarkTimestampMs))});return b("bs_curry")._2(g,a,b("bs_caml_int64").to_float(c.timestampMs))});if(b("MWChatThreadPingCounter.bs").getCount(n)<3){b("MWChatThreadPingCounter.bs").incrementCount(n);b("MWChatSettingsQuery").areChatTabsSoundsOn(function(a){if(!(a==null)&&a)return k(c)});return}})})}function n(a,c,d,e,f){b("bs_curry")._1(b("MWCount.bs").Comet.NewMessage.$$process),b("promiseDone")(window.Promise.all([c.table("threads").get({hd:a.threadKey,tl:0}),c.table("contacts").get({hd:a.senderId,tl:0}),c.table("participants").get({hd:a.threadKey,tl:{hd:a.senderId,tl:0}})]),function(g){var h=g[2],i=g[1];if(i!==void 0&&h!==void 0)return m(d,a,b("bs_belt_Option").getExn(g[0]),i,h,e,f,c)})}function o(a,c,d,e,f){b("promiseDone")(window.Promise.all([c.table("threads").get({hd:a.threadKey,tl:0}),c.table("contacts").get({hd:a.senderId,tl:0}),c.table("participants").get({hd:a.threadKey,tl:{hd:a.senderId,tl:0}})]),function(g){var h=g[2],i=g[1];g=g[0];if(g!==void 0&&i!==void 0&&h!==void 0&&!b("MWIsXacGroupThread.bs").check(g)){b("bs_curry")._1(b("MWCount.bs").Comet.NewMessage.$$process);return m(d,a,g,i,h,e,f,c)}})}function a(a){var c=i.useContext(j),d=b("MWChatOpenTabFromNewMessage.bs").useHook("notificationInThreadReply"),e=b("MWPActor.bs").useActor(),f=i.useRef(b("ServerTime").getMillis());i.useEffect(function(){return b("SortedAsyncIterable.bs").subscribe(b("ReQL.bs").fromTableAscending(a.table("messages")),function(g,h){switch(h.TAG){case 0:g=h._0;if(b("bs_caml_int64").to_float(g.timestampMs)<=f.current)return;f.current=b("bs_caml_int64").to_float(g.timestampMs);h=b("MWXacGating.bs").isGroupsEnabled()?n:o;return b("bs_curry")._5(h,g,a,d,c,e);case 1:case 2:return}})},[c,d,a]);var g=i.useRef(),h=function(a){a=g.current;if(a!==void 0){b("ClearInterval.re").clearInterval(b("bs_caml_option").valFromOption(a));return}},k=function(a){h(),g.current=b("bs_caml_option").some(b("setInterval")(function(a){return b("MWChatThreadPingCounter.bs").clear()},6e5))},l=function(a){b("MWChatThreadPingCounter.bs").clear();return h()};b("useGlobalEventListener")("blur",k,{});b("useGlobalEventListener")("focus",l,{});i.useEffect(function(){return function(a){return h()}},[])}c=6e5;d=3;f.cometSetBlinkingTitleMessageContext=j;f.pingCounterResetTime=c;f.pingsMaxCount=d;f.soundDeferred=h;f.playSound=k;f.threadSubscription=l;f.dispatchOpenTab=m;f.useHook=a}),null);
__d("MWLSChatPopperUpper.re",["MWLSChatPopperUpper.bs"],(function(a,b,c,d,e,f){a=b("MWLSChatPopperUpper.bs").useHook;f.useHook=a}),null);
__d("MWPGetThreadTitle.re",["MWPGetThreadTitle.bs"],(function(a,b,c,d,e,f){a=b("MWPGetThreadTitle.bs").amountToFetchForTitle;f.amountToFetchForTitle=a}),null);
__d("useMWChatInit",["LSErrorHandlerDeferred.re","MWLSChatPopperUpper.re","MWPGetThreadTitle.re","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(){var a=c("useReStore")();h(function(){d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("threads")).map(function(b){return[b,d("ReQLSuspense").toArray(d("ReQL").leftJoin(d("ReQL").fromTableAscending(a.table("participants")).getKeyRange(b.threadKey),d("ReQL").fromTableAscending(a.table("contacts"))).take(c("MWPGetThreadTitle.re").amountToFetchForTitle))]}).take(30));return c("LSErrorHandlerDeferred.re").subscribeToErrors(a)},[a]);c("MWLSChatPopperUpper.re").useHook(a)}g["default"]=a}),98);
__d("MWLSChatInit.bs",["useMWChatInit"],(function(a,b,c,d,e,f){"use strict";function a(a){b("useMWChatInit")()}f.useHook=a}),null);
__d("LSPlatformConfig.bs",["LSSuspense","bs_caml_exceptions","bs_caml_js_exceptions","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");d=b("bs_caml_exceptions").create("LSPlatformConfig.NoLSPlatformProviderFound");e=b("LSSuspense").makeWithError(b("bs_caml_js_exceptions").caml_as_js_exn({RE_EXN_ID:d}));var i=h.createContext(e);function a(a){var b=a.children;a=a.config;return h.createElement(i.Provider,{children:b,value:a})}a={make:a};function c(a){return b("LSSuspense").getOrSuspend(h.useContext(i))}f.NoLSPlatformProviderFound=d;f.defaultVal=e;f.Provider=a;f.useOrSuspend=c}),null);
__d("LSPlatformErrorsCatcher.react",["cr:529","justknobx","react"],(function(a,b,c,d,e,f,g){"use strict";e=d("react");var h=e.useEffect,i=e.useState;function a(){var a=i(null),d=a[0],e=a[1];h(function(){var a=b("cr:529")&&b("cr:529").subscribe(function(a){e(a)});return function(){a&&a()}},[]);if(c("justknobx")._("384")&&d!=null)throw d;return null}g["default"]=a}),98);
__d("LSPlatformClientProvider.bs",["CometPlaceholder.react","LSPersistedDbGating","LSPlatformClientInstances","LSPlatformConfig.bs","LSPlatformConnectionStatusContext.bs","LSPlatformErrorsCatcher.react","MAWCondWrapper.react","ReStoreProvider.react","bs_caml_option","bs_curry","cr:4412","gkx","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=h.createContext();function j(a){var c=b("LSPlatformConfig.bs").useOrSuspend();return b("LSPlatformClientInstances").getOrInit(c,a)}function k(a){var b=a.children;a=a.client;return h.jsx(i.Provider,{children:b,value:a})}c={make:k};d=b("gkx")("1644");var l,m=0;d||b("cr:4412")==null||!b("LSPersistedDbGating").oneMqttConnectionAcrossTabs?m=1:l=b("cr:4412").usePauseClientWhenTabIsntLeader;m===1&&(l=function(a){});function n(a){var c=a.children;a=a.loadLSPlatformClient;a=j(a);b("bs_curry")._1(l,a);return h.jsxs(b("ReStoreProvider.react").ReStoreProvider,{db:a.db,children:[h.jsx(b("LSPlatformErrorsCatcher.react"),{}),h.jsx(b("LSPlatformConnectionStatusContext.bs").make,{onConnectionStatusChange:a.onConnectionStatusChange,children:h.jsx(k,{client:a,children:c})})]})}n.displayName=n.name+" [from "+e.id+"]";d={make:n,usePauseClientWhenTabIsntLeader:l};function a(a){var c=a.children,d=a.loadLSPlatformClient;a=a.placeholder;a=a!==void 0?b("bs_caml_option").valFromOption(a):null;var e=h.useContext(i);if(e!==void 0)return c;else return h.jsx(b("MAWCondWrapper.react"),{children:h.jsx(b("CometPlaceholder.react"),{fallback:a,children:h.jsx(n,{loadLSPlatformClient:d,children:c})})})}m=a;f.context=i;f.Provider=c;f.$MWSetupLock$requireCondXplat=b("cr:4412");f.Inner=d;f.make=m}),null);
__d("LSPlatformClientProviderWithDeferredLoadingStrategy.bs",["LSPlatformClientProvider.bs","bs_caml_option","react","requireDeferred"],(function(a,b,c,d,e,f){"use strict";var g,h=b("requireDeferred")("LSPlatformClient.bs").__setRef("LSPlatformClientProviderWithDeferredLoadingStrategy.bs"),i=g||(g=b("react"));function j(a){return h.load()}function a(a){var c=a.children;a=a.placeholder;a=a!==void 0?b("bs_caml_option").valFromOption(a):null;return i.jsx(b("LSPlatformClientProvider.bs").make,{loadLSPlatformClient:j,placeholder:a,children:c})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.$LSPlatformClient$Deferred=h;f.loadLSPlatformClient=j;f.make=c}),null);
__d("LSPlatformClientProviderWithDeferredLoadingStrategy.re",["LSPlatformClientProviderWithDeferredLoadingStrategy.bs"],(function(a,b,c,d,e,f){a=b("LSPlatformClientProviderWithDeferredLoadingStrategy.bs").make;f.make=a}),null);
__d("LSPlatformConfig.re",["LSPlatformConfig.bs"],(function(a,b,c,d,e,f){a=b("LSPlatformConfig.bs").Provider.make;f.Provider_make=a;c=b("LSPlatformConfig.bs").useOrSuspend;f.useOrSuspend=c;d=b("LSPlatformConfig.bs").Provider;f.Provider=d}),null);
__d("LSDatascriptEvaluatorMaybeDeferred",["cr:974"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:974")}),98);
__d("LSDedicatedMqttChannel.bs",["cr:11792"],(function(a,b,c,d,e,f){"use strict";a=b("cr:11792").getInstance;c=b("cr:11792").shutdownAndClear;f.$LSMqttChannel$OR$FBMqttChannel$requireCond=b("cr:11792");f.getInstance=a;f.shutdownAndClear=c}),null);
__d("LSPlatformDeviceId.bs",["ChannelClientID","LSCookie.bs","LSPersistedDbGating","MqttWebDeviceID","gkx","killswitch"],(function(a,b,c,d,e,f){"use strict";function a(a){if(!b("killswitch")("MESSENGER_WEB_PERSISTED_DB")&&b("LSPersistedDbGating").oneMqttConnectionAcrossTabs)return b("LSCookie.bs").get().d;else if(b("gkx")("3400"))return b("MqttWebDeviceID").clientID;else return b("ChannelClientID").getID()}c=a();f.deviceId=c}),null);
__d("LSPlatformGraphQLLightspeedRequest",["CometRelay","CometRelayEnvironment","LSPlatformGraphQLLightspeedRequestQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,f,g){return d("CometRelay").fetchQuery(c("CometRelayEnvironment"),h!==void 0?h:h=b("LSPlatformGraphQLLightspeedRequestQuery.graphql"),{deviceId:a,requestId:e,requestPayload:f,requestType:g}).toPromise().then(function(a){return a==null?void 0:(a=a.viewer)==null?void 0:a.lightspeed_web_request})}g["default"]=a}),98);
__d("LSPlatformDefaultUnderlyingApi.bs",["Promise"],(function(a,b,c,d,e,f){"use strict";function a(a){return function(a){}}function c(a){return function(a){}}function d(a){return function(a){}}function e(a,c){return b("Promise").resolve()}function g(){}g={cleanup:g,onConnectionStatusChange:c,onReconnect:d,publish:e,subscribe:a};f.defaultUnderlyingApi=g}),null);
__d("LSPlatformMqttRealtimeTransport.bs",["ExecutionEnvironment","LSDedicatedMqttChannel.bs","LSPersistedDbGating","LSPlatformDefaultUnderlyingApi.bs","LSPlatformRealtimeTransport.bs","LSRequestType.bs","MqttState.bs","Promise","QPLUserFlow","bs_caml","bs_curry","killswitch","promiseDone","qpl"],(function(a,b,c,d,e,f){"use strict";function g(a){b("QPLUserFlow").addPoint(b("qpl")._(25305590,"1127"),"mqtt_started");return[{payload:JSON.stringify({ls_fdid:"",ls_sv:a}),qos:1,topic:"/ls_app_settings"}]}function h(a){var c={contents:a.getConnectionState()},d={contents:function(a){}},e={contents:new(b("Promise"))(function(a,b){d.contents=a})},f={onMQTTStateChanged:function(a){a===b("MqttState.bs").connected?d.contents():a===b("MqttState.bs").disconnected&&c.contents===b("MqttState.bs").connected&&(e.contents=new(b("Promise"))(function(a,b){d.contents=a})),c.contents=a}};c.contents===b("MqttState.bs").connected&&d.contents();a.subscribeChannelEvents(f);return[function(b){a.unsubscribeChannelEvents(f)},function(c,d){return e.contents.then(function(e){return new(b("Promise"))(function(e,f){b("promiseDone")(a.publish("/ls_req",c,{listener:{onEvent:function(a){if(a==="NOT_CONNECTED")return f({RE_EXN_ID:b("LSPlatformRealtimeTransport.bs").NotConnected})}},qos:b("bs_caml").i64_eq(d,b("LSRequestType.bs").fireForget)?0:1,skipBuffer:!1}),function(a){return e()},function(a){if(a.message==="Publish Timed Out")return f({RE_EXN_ID:b("LSPlatformRealtimeTransport.bs").Timeout});else return f(a)})})})}]}var i={contents:void 0};function a(a,c){if(!b("ExecutionEnvironment").canUseDOM)return b("LSPlatformDefaultUnderlyingApi.bs").defaultUnderlyingApi;var d=b("bs_curry")._1(c),e={getPublishMessages:function(b){return g(a)}};d.registerExtraConnectPayloadProvider(e);var f={onMQTTStateChanged:function(a){var b=i.contents;if(b!==void 0)return b(a)}};d.subscribeChannelEvents(f);var j=d.subscribe("/ls_foreground_state",function(a){});c=h(d);var k=c[0];return{cleanup:function(){d.unregisterExtraConnectPayloadProvider(e);!b("killswitch")("MESSENGER_WEB_PERSISTED_DB")&&b("LSPersistedDbGating").oneMqttConnectionAcrossTabs&&b("bs_curry")._1(b("LSDedicatedMqttChannel.bs").shutdownAndClear);d.unsubscribeChannelEvents(f);b("bs_curry")._1(j);return b("bs_curry")._1(k)},onConnectionStatusChange:function(a){i.contents=a;return function(a){i.contents=void 0}},onReconnect:function(a){var c={contents:d.getConnectionState()},e={contents:c.contents===b("MqttState.bs").connected},f={onMQTTStateChanged:function(d){d===b("MqttState.bs").connected&&(e.contents&&c.contents!==b("MqttState.bs").connected&&a(),e.contents=!0),c.contents=d}};d.subscribeChannelEvents(f);return function(a){d.unsubscribeChannelEvents(f)}},publish:c[1],subscribe:function(a){return d.subscribe("/ls_resp",function(b){return a(b)})}}}f.sendSchemaVersion=g;f.makePublish=h;f.connectionHandler=i;f.make=a}),null);
__d("MessengerWebRegion.bs",["MessengerWebRegion","gkx","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("MessengerWebRegion").regionNullable;if(a==null)if(b("gkx")("1993339"))return b("unrecoverableViolation")("Tried to load mailbox for a user that does not have a mailbox","messenger_web_product");else return"";else return a}f.getRegion=a}),null);
__d("LSPlatformMessengerConfig.bs",["LSDatabaseDeferred.bs","LSDatascriptEvaluatorMaybeDeferred","LSDedicatedMqttChannel.bs","LSPlatformDeviceId.bs","LSPlatformGraphQLLightspeedRequest","LSPlatformMessengerSyncParams","LSPlatformMqttRealtimeTransport.bs","LSSuspense","LSSyncChannel.bs","LSVersion","MessengerWebRegion.bs","ServerAppID","bs_caml","bs_curry","cr:972"],(function(a,b,c,d,e,f){"use strict";e=b("LSPlatformMessengerSyncParams");var g=b("MessengerWebRegion.bs").getRegion();function a(){return b("LSDatabaseDeferred.bs").db}function c(a){if(!(b("cr:972")==null)&&b("bs_caml").i64_eq(a,b("LSSyncChannel.bs").dgw))return b("bs_curry")._1(b("cr:972").make,b("LSVersion"));else return b("LSPlatformMqttRealtimeTransport.bs").make(b("LSVersion"),b("LSDedicatedMqttChannel.bs").getInstance)}function d(a){return b("LSDatascriptEvaluatorMaybeDeferred")()}a={appId:b("ServerAppID").app_id,deviceId:b("LSPlatformDeviceId.bs").deviceId,executeGraphQLLightSpeedRequest:b("LSPlatformGraphQLLightspeedRequest"),getDb:a,getEval:d,platformName:"Messenger",realtimeUnderylingTransport:c,region:g,schemaVersion:b("LSVersion"),sendHardcodedInitSync:!0,syncParams:e};d=b("LSSuspense").makeWithValue(a);f.syncParams=e;f.$LSPlatformDGWTransport$requireCond=b("cr:972");f.config=a;f.configEagerlyLoaded=d}),null);
__d("LSPlatformMessengerConfig.re",["LSPlatformMessengerConfig.bs"],(function(a,b,c,d,e,f){a=b("LSPlatformMessengerConfig.bs").config;f.config=a;c=b("LSPlatformMessengerConfig.bs").configEagerlyLoaded;f.configEagerlyLoaded=c}),null);
__d("CometContextualLayerAnchorRoot.re",["CometContextualLayerAnchorRoot.react"],(function(a,b,c,d,e,f){a=b("CometContextualLayerAnchorRoot.react");f.makeTypeChecked=a;c=a;f.make=c}),null);
__d("useMWChatEncryptedBackupsUpsellChatTabsDeferred",["cr:1474","react"],(function(a,b,c,d,e,f,g){"use strict";d("react");function a(){var a;return(a=b("cr:1474")())!=null?a:null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatEncryptedBackupsUpsellChatTabs.bs",["useMWChatEncryptedBackupsUpsellChatTabsDeferred"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("useMWChatEncryptedBackupsUpsellChatTabsDeferred")()}f.useHook=a}),null);
__d("MWSetupPresenceReportingDeferred.react",["CometPlaceholder.react","deferredLoadComponent","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("deferredLoadComponent")(c("requireDeferred")("MWSetupPresenceReporting.react").__setRef("MWSetupPresenceReportingDeferred.react"));function a(){return h.jsx(c("CometPlaceholder.react"),{fallback:null,children:h.jsx(i,{})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWSetupPresenceReportingDeferred.bs",["MWSetupPresenceReportingDeferred.react"],(function(a,b,c,d,e,f){"use strict";a=b("MWSetupPresenceReportingDeferred.react");f.make=a}),null);
__d("MWChatStateV2IsComposeTab.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.tabType;if(a.TAG===0)return!0;else return!1}f.isComposeTab=a}),null);
__d("MWChatStateV2HeadGroups.bs",["MWChatStateV2CompareTabs.bs","MWChatStateV2IsComposeTab.bs","MWChatStateV2IsMinimized.bs","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){var f=a!==void 0?b("bs_caml_option").valFromOption(a):void 0;a=Array.from(d.values()).filter(function(a){return b("MWChatStateV2IsMinimized.bs").isMinimized(b("bs_caml_option").some(f),a)}).sort(function(a,c){var d=b("MWChatStateV2CompareTabs.bs").byMostRecentMinimized(a,c);if(d===0)return b("MWChatStateV2CompareTabs.bs").byMostRecentOpened(a,c);else return d});d=c.filter(function(a){return!b("MWChatStateV2IsComposeTab.bs").isComposeTab(a)}).concat(a);return[d.slice(0,e),d.slice(e,d.length)]}f.getHeadGroups=a}),null);
__d("MWV2ChatHeadsLayout.bs",["react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={root:{bottom:"x191j7n5",end:"x92rtbv",position:"x10l6tqk",width:"x1useyqa"}};function a(a){a=a.children;return i.jsx("div",{className:(h||(h=b("stylex")))(j.root),children:a})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.styles=j;f.make=c}),null);
__d("MWV2PreloadComposeTab.bs",["JSResourceForInteraction","JSScheduler","react","useCometPreloader"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("JSResourceForInteraction")("MWV2ComposeTab.bs").__setRef("MWV2PreloadComposeTab.bs");function a(a){a=h.useCallback(function(a){b("JSScheduler").scheduleSpeculativeCallback(function(){i.preload()})},[]);return b("useCometPreloader")("button",a,a)}f.useHook=a}),null);
__d("MWV2ComposeHead.bs",["fbt","ix","CometPressable.react","CometTintedIcon.react","MWChatStateV2.bs","MWTooltip.react","MWV2PreloadComposeTab.bs","bs_curry","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||b("react"),k={button:{alignItems:"x6s0dn4",appearance:"xjyslct",backgroundColor:"x1l31dnx",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",boxShadow:"x1qeybcx",display:"x3nfvp2",height:"xsdox4t",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1useyqa",":hover":{boxShadow:"x19xcq9t"}}};function a(a){var c=a.onFocusChange;a=a.onHoverChange;var d=b("MWChatStateV2.bs").useDispatch(),e=function(a){var c=Date.now();a=function(a){return{clientForcedMinimizeWatermark:a.clientForcedMinimizeWatermark,closeWatermark:a.closeWatermark,minimizeWatermark:a.minimizeWatermark,openFlyoutWatermark:a.openFlyoutWatermark,openWatermark:c,tabId:a.tabId,tabType:a.tabType}};var e=function(a){var b=a.openWatermark<a.closeWatermark;if(b)return{clientForcedMinimizeWatermark:a.clientForcedMinimizeWatermark,closeWatermark:a.closeWatermark,minimizeWatermark:a.minimizeWatermark,openFlyoutWatermark:a.openFlyoutWatermark,openWatermark:c,tabId:a.tabId,tabType:{_0:[],_1:!1,TAG:0}};else return{clientForcedMinimizeWatermark:a.clientForcedMinimizeWatermark,closeWatermark:c,minimizeWatermark:a.minimizeWatermark,openFlyoutWatermark:a.openFlyoutWatermark,openWatermark:a.openWatermark,tabId:a.tabId,tabType:{_0:[],_1:!1,TAG:0}}};return b("bs_curry")._1(d,[{_0:{_0:[],_1:!1,TAG:0},_1:{shouldFocus:!0},_2:e,_3:a,TAG:3}])},f=b("MWV2PreloadComposeTab.bs").useHook(),i=g._("__JHASH__lMGuJRoIOm8__JHASH__");return j.jsx(b("MWTooltip.react"),{align:"middle",position:"start",tooltip:i.toString(),children:j.jsx(b("CometPressable.react"),{"aria-label":i,onFocusChange:c,onHoverChange:a,onHoverIn:f[0],onHoverOut:f[1],onPress:e,testid:void 0,xstyle:function(a){return[k.button]},children:j.jsx(b("CometTintedIcon.react"),{color:"primary",icon:b("fbicon")._(h("507172"),20)})})})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.styles=k;f.make=c}),null);
__d("MWV2ChatHeads.bs",["BootloaderResource","CometErrorBoundary.re","CometPlaceholder.react","JSResource","MWChatStateV2.bs","MWChatStateV2HeadGroups.bs","MWChatStateV2MaxTabCount.bs","MWChatStateV2TabGroups.bs","MWV2ChatHeadsLayout.bs","MWV2ComposeHead.bs","bs_caml_option","bs_curry","bs_int64","cr:1134","react","useMWIsTopLevelRouteMediaViewerExperiment"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("JSResource")("MWV2ChatOverflowHead.bs").__setRef("MWV2ChatHeads.bs");function j(a,b,c,d){return{excessHeads:b,onHoverChange:c,style:a}}function k(a){return h.createElement(b("BootloaderResource").read(i).make,a)}c={make:k,makeProps:j,reasonResource:i};var l=b("JSResource")("MWV2ChatHead.bs").__setRef("MWV2ChatHeads.bs");function m(a,b,c,d,e,f){return{onFocusChange:e,onHoverChange:d,style:c,tab:b,threadKeyDescriptor:a}}function n(a){return h.createElement(b("BootloaderResource").read(l).make,a)}d={make:n,makeProps:m,reasonResource:l};function o(a){return{transform:"translateY(-"+String(Math.imul(a,58))+"px)"}}function p(a){return{transform:"translateY(-"+String(Math.imul(a,58)-12|0)+"px)"}}function a(a){a=b("MWChatStateV2.bs").useState(function(a){return a.tabs});a=a.tabs;var c=b("MWChatStateV2.bs").useState(function(a){return a.focusedTabId}),d=b("MWChatStateV2.bs").useState(function(a){return a.mediaViewerOpenWatermark}),e=b("MWChatStateV2MaxTabCount.bs").useHook(),f=b("useMWIsTopLevelRouteMediaViewerExperiment")();f=f?d.mediaViewerOpenWatermark:void 0;d=b("MWChatStateV2TabGroups.bs").getTabGroups(b("bs_caml_option").some(f),a,c.focusedTabId,e);c=b("MWChatStateV2HeadGroups.bs").getHeadGroups(b("bs_caml_option").some(f),d[1],a,5);e=c[1];f=c[0];a=d[0].length;c=f.length;var g=e.length>0?1:0;d=h.useState(function(){return!1});var i=d[1],l=e.length;if(l!==1)l=l!==0?h.jsx(b("CometPlaceholder.react"),{fallback:null,children:h.jsx(k,j(o(1),e,function(a){return b("bs_curry")._1(i,function(b){return a})}))}):null;else{e=e[0];var q=e.tabType;if(q.TAG===0)l=null;else{q=q._0;l=h.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return null},children:h.jsx(b("CometPlaceholder.react"),{fallback:null,children:h.jsx(n,m(q,e,o(1),function(a){return b("bs_curry")._1(i,function(b){return a})},function(a){return b("bs_curry")._1(i,function(b){return a})}))})},b("bs_int64").to_string(q.threadKey))}}return h.jsxs(b("MWV2ChatHeadsLayout.bs").make,{children:[!(b("cr:1134")==null)&&(a>0||c>0)?h.jsx(b("cr:1134").make,{isVisible:d[0],openTabCount:a,style:p((c+g|0)+1|0)}):null,f.reverse().map(function(c,d){var a=c.tabType;if(a.TAG===0)return null;a=a._0;d=(d+g|0)+1|0;return h.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return null},children:h.jsx(b("CometPlaceholder.react"),{fallback:null,children:h.jsx(n,m(a,c,o(d),function(a){return b("bs_curry")._1(i,function(b){return a})},function(a){return b("bs_curry")._1(i,function(b){return a})}))})},b("bs_int64").to_string(a.threadKey))}),l,h.jsx(b("MWV2ComposeHead.bs").make,{onFocusChange:function(a){return b("bs_curry")._1(i,function(b){return a})},onHoverChange:function(a){return b("bs_curry")._1(i,function(b){return a})}})]})}a.displayName=a.name+" [from "+e.id+"]";e=a;f.LazyMWV2ChatOverflowHead=c;f.LazyMWV2ChatHead=d;f.$MWV2ChatOptionsHead$requireCond=b("cr:1134");f.make=e}),null);
__d("MWV2ChatTabLoading.bs",["cssVar","fbt","MWChatStateActions.bs","MWChatStateV2.bs","MWPThreadTheme.bs","MWV2HeaderCloseButton.bs","MWV2HeaderContainer.bs","MWV2IsTabFocusedContext.bs","MWV2TabContainer.bs","bs_curry","react","useCometLoadingStateTracker"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||b("react");function a(a){var c=a.tab;a=b("useCometLoadingStateTracker")();var d=a[1],e=b("MWChatStateV2.bs").useDispatch();a=b("MWPThreadTheme.bs").useTop();var f=b("MWV2IsTabFocusedContext.bs").useContext();a=f?a:"#C9CCD1";j.useEffect(function(){if(f){var a=d.current;a==null||a.focus()}},[f]);return j.jsx(b("MWV2TabContainer.bs").make,{ariaBusy:!0,ariaLabel:h._("__JHASH__SxkfHU6fYt9__JHASH__"),domRef:d,tab:c,tabIndex:0,children:j.jsx(b("MWV2HeaderContainer.bs").make,{endContent:j.jsx(b("MWV2HeaderCloseButton.bs").make,{color:a,onPress:function(a){return b("bs_curry")._1(e,b("MWChatStateActions.bs").closeTab(Date.now(),c.tabId))}})})})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.make=c}),null);
__d("MWV2ChatTabsLayout.bs",["react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={root:{bottom:"x1ey2m1c",display:"x78zum5",end:"x164qtfw",position:"xixxii4",zIndex:"x1vjfegm"}};function a(a){a=a.children;return i.jsx("div",{className:(h||(h=b("stylex")))(j.root),"data-testid":void 0,children:a})}a.displayName=a.name+" [from "+e.id+"]";c=a;f.styles=j;f.make=c}),null);
__d("MWV2ChatTabs.bs",["BootloaderResource","CometErrorBoundary.re","CometHeroInteractionWithDiv.react","CometPlaceholder.react","JSResource","MWChatInteraction.bs","MWChatStateV2.bs","MWChatStateV2MaxTabCount.bs","MWChatStateV2TabGroups.bs","MWPReplyContext.bs","MWV2ChatTabLoading.bs","MWV2ChatTabsLayout.bs","MWV2IsTabFocusedContext.bs","bs_caml_obj","bs_caml_option","bs_curry","bs_int64","cr:356","react","useCometDisplayTimingTrackerForInteraction","useMWIsTopLevelRouteMediaViewerExperiment"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("JSResource")("MWV2ComposeTab.bs").__setRef("MWV2ChatTabs.bs");function a(a,b,c){return{initialTokens:b,tab:a}}function j(a){return h.createElement(b("BootloaderResource").read(i).make,a)}a={make:j,makeProps:a,reasonResource:i};var k=b("JSResource")("MWV2ChatTab.bs").__setRef("MWV2ChatTabs.bs");function c(a,b,c){return{tab:a,threadKeyDescriptor:b}}function l(a){return h.createElement(b("BootloaderResource").read(k).make,a)}c={make:l,makeProps:c,reasonResource:k};var m=b("cr:356")==null?void 0:b("bs_caml_option").some(b("cr:356"));function d(a){a=b("MWChatStateV2.bs").useState(function(a){return a.tabs});var c=b("MWChatStateV2.bs").useState(function(a){return a.focusedTabId}),d=c.focusedTabId;c=b("MWChatStateV2.bs").useState(function(a){return a.mediaViewerOpenWatermark});var e=b("MWChatStateV2MaxTabCount.bs").useHook(),f=b("useMWIsTopLevelRouteMediaViewerExperiment")();f=b("MWChatStateV2TabGroups.bs").getTabGroups(b("bs_caml_option").some(f?c.mediaViewerOpenWatermark:void 0),a.tabs,d,e);var g=h.useCallback(function(a){if(a.TAG===0)return null;else return b("MWChatInteraction.bs").get(b("bs_int64").to_string(a._0.threadKey))},[]),i=b("useCometDisplayTimingTrackerForInteraction")("ChatMain",!0);c=f[0].map(function(a,c){var e=b("bs_caml_obj").caml_equal(d,a.tabId),f=a.tabType;f=f.TAG===0?h.jsx(j,{initialTokens:f._0,tab:a}):h.jsx(l,{tab:a,threadKeyDescriptor:f._0});e=h.jsx(b("MWV2IsTabFocusedContext.bs").make,{isFocused:e,children:h.jsx(b("MWPReplyContext.bs").make,{children:h.jsx(b("CometPlaceholder.react"),{fallback:h.jsx(b("MWV2ChatTabLoading.bs").make,{tab:a}),children:h.jsx(b("CometHeroInteractionWithDiv.react"),{excludeFromMainVC:!0,interactionDesc:"MWV2_CHAT_TAB",interactionUUID:b("bs_curry")._1(g,a.tabType),pageletName:"ChatTab",ref:i,children:f})})})});return h.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return null},children:b("cr:356")==null?e:h.jsx(m.TabIndex.make,{children:e,value:c})},String(a.tabId))});return h.jsx(b("MWV2ChatTabsLayout.bs").make,{children:b("cr:356")==null?c:h.jsx(m.make,{children:c})})}d.displayName=d.name+" [from "+e.id+"]";e=d;f.LazyMWV2ComposeTab=a;f.LazyMWV2ChatTab=c;f.$MWComposerKeyCommandFocusManager$OR$null$requireCond=b("cr:356");f.make=e}),null);
__d("MWV2ChatUpdateMediaViewerOpenWatermark.bs",["MWChatStateActions.bs","MWChatStateV2.bs","bs_curry","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("MWChatStateV2.bs").useDispatch();return h.useCallback(function(a){a=Date.now();return b("bs_curry")._1(c,b("MWChatStateActions.bs").updateMediaViewerOpenWatermark(a))},[c])}f.useHook=a}),null);
__d("MWV2CookieWriter.bs",["DeferredCookie","MWCMThreadTypes.bs","MessagingThreadType.bs","Promise","ReQL.bs","bs_belt_Option","bs_caml","bs_caml_option","bs_int64","gkx","promiseDone","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";function g(a){if(b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").group))return"g.";else if(b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").secureMessageOverWaOneToOne))return"sc.";else if(b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").secureMessageOverWaGroup))return"sg.";else return"u."}function a(a,c,d){var e=function(a){if(c===void 0)return!1;var d=c.tabType;if(d.TAG===0)return!1;else return b("bs_caml").i64_eq(d._0.threadKey,a)},f=function(a){return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("threads")),{hd:a,tl:0}))},h={contents:void 0};a=a.map(function(a){var c=a.threadType,d=a.threadKey,i={};return f(d).then(function(a){if(a!==void 0)if(e(d)){b("gkx")("1747")&&b("MWCMThreadTypes.bs").isJoinedCMThread(c)&&(h.contents=b("bs_int64").to_string(a.parentThreadKey));return b("Promise").resolve()}else{i.i=g(c)+b("bs_int64").to_string(d);b("gkx")("1747")&&b("MWCMThreadTypes.bs").isJoinedCMThread(c)&&(i.p=b("bs_int64").to_string(a.parentThreadKey));return b("Promise").resolve(b("bs_caml_option").some(i))}else{i.i=g(c)+b("bs_int64").to_string(d);return b("Promise").resolve(b("bs_caml_option").some(i))}})});a=b("Promise").all(a).then(function(a){var d;if(c!==void 0){var e=c.tabType;if(e.TAG===0)d=void 0;else{e=e._0;d=g(e.threadType)+b("bs_int64").to_string(e.threadKey)}}else d=void 0;e=a.filter(b("bs_belt_Option").isSome);a=h.contents;a=a!==void 0?JSON.stringify({lm3:d,lm3p:a,t3:e,utc3:Date.now(),v:1}):JSON.stringify({lm3:d,t3:e,utc3:Date.now(),v:1});a!==void 0?b("DeferredCookie").addToQueue("presence","C"+a,0,b("gkx")("1747")?"/":"",!1,!1,!0):b("recoverableViolation")("Failed to serialize cookie","messenger_comet");return b("Promise").resolve()});b("promiseDone")(a)}c=1;f.version=c;f.write=a}),null);
__d("UseMWV2CookieWriter.bs",["MWChatStateV2.bs","MWChatStateV2CompareTabs.bs","MWChatStateV2IsOpen.bs","MWV2CookieWriter.bs","bs_belt_Array","bs_caml","gkx","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("MWChatStateV2.bs").useState(function(a){return a.tabs}),d=b("useReStore")();h.useEffect(function(){var a=b("bs_belt_Array").get(Array.from(c.tabs.values()).filter(function(a){return b("MWChatStateV2IsOpen.bs").isOpen(void 0,a)}).sort(b("MWChatStateV2CompareTabs.bs").byMostRecentOpened),0),e=function(c){c=c.tabType;if(a===void 0)return!1;var d=a.tabType;if(d.TAG===0||c.TAG===0)return!1;else return b("bs_caml").i64_eq(d._0.threadKey,c._0.threadKey)},f=[];Array.from(c.tabs.values()).filter(function(a){if(a.openWatermark>a.closeWatermark)return!0;else return a.minimizeWatermark>a.closeWatermark}).filter(function(a){if(b("gkx")("1747"))return!0;else return!e(a)}).sort(function(a,c){var d=b("MWChatStateV2CompareTabs.bs").byMostRecentMinimized(a,c);if(d===0)return b("MWChatStateV2CompareTabs.bs").byMostRecentOpened(a,c);else return d}).forEach(function(a){a=a.tabType;if(a.TAG===0)return;f.push(a._0)});b("MWV2CookieWriter.bs").write(f,a,d)},[d,c])}c=b("gkx")("1812641")?a:function(a){};f.useHook=c}),null);
__d("MWV2ChatTabsRoot.bs",["CometContextualLayerAnchorRoot.re","CometPlaceholder.react","MWChatEncryptedBackupsUpsellChatTabs.bs","MWChatVisibilityOverrideContext","MWLSChatInit.bs","MWLSThreadDisplayContext.bs","MWSetupPresenceReportingDeferred.bs","MWV2ChatHeads.bs","MWV2ChatTabs.bs","MWV2ChatUpdateMediaViewerOpenWatermark.bs","UseMWV2CookieWriter.bs","bs_curry","react","stylex","useMWIsOnPushView","useMWIsTopLevelRouteMediaViewerExperiment","useShouldShowMessagingEntrypointInCometRoot"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={chatAbovePushView:{zIndex:"x1vjfegm"},container:{alignItems:"xuk3077",display:"x78zum5",isolation:"xc8icb0"},root:{bottom:"x1ey2m1c",end:"xds687c",position:"xixxii4"}};function k(a){a=b("useMWIsOnPushView")();var c=b("MWChatEncryptedBackupsUpsellChatTabs.bs").useHook();return i.jsx(b("MWLSThreadDisplayContext.bs").Provider.make,{value:"ChatTab",children:i.jsx("div",{className:(h||(h=b("stylex")))(j.root,a?j.chatAbovePushView:!1),children:i.jsx(b("CometContextualLayerAnchorRoot.re").make,{children:i.jsx("div",{className:h(j.container),children:c===null?i.jsxs(i.Fragment,{children:[i.jsx(b("MWV2ChatTabs.bs").make,{}),i.jsx(b("MWV2ChatHeads.bs").make,{})]}):c})})})})}k.displayName=k.name+" [from "+e.id+"]";c={make:k,styles:j};function l(a){a=a.children;b("UseMWV2CookieWriter.bs").useHook();b("MWLSChatInit.bs").useHook();return a}d={make:l};function a(a){var c=b("useMWIsTopLevelRouteMediaViewerExperiment")();a=b("MWChatVisibilityOverrideContext").useMWChatVisibilityOverride(c);var d=b("MWV2ChatUpdateMediaViewerOpenWatermark.bs").useHook();a=b("useShouldShowMessagingEntrypointInCometRoot")("CHAT")&&a;i.useEffect(function(){c&&b("bs_curry")._1(d)},[c,d]);return i.jsxs(b("CometPlaceholder.react"),{fallback:null,children:[i.jsx(b("MWSetupPresenceReportingDeferred.bs").make,{}),i.jsx(l,{children:a?i.jsx(k,{}):null})]})}a.displayName=a.name+" [from "+e.id+"]";e=a;f.ChatTabs=c;f.LoadLightspeed=d;f.make=e}),null);
__d("MWV2ChatTabsRoot.re",["MWV2ChatTabsRoot.bs"],(function(a,b,c,d,e,f){a=b("MWV2ChatTabsRoot.bs").make;f.make=a}),null);
__d("MWV2ChatContainer.react",["LSPlatformClientProviderWithDeferredLoadingStrategy.re","LSPlatformConfig.re","LSPlatformMessengerConfig.re","MWV2ChatTabsRoot.re","cr:1847792","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx(d("LSPlatformConfig.re").Provider_make,{config:d("LSPlatformMessengerConfig.re").configEagerlyLoaded,children:h.jsxs(d("LSPlatformClientProviderWithDeferredLoadingStrategy.re").make,{children:[h.jsx(d("MWV2ChatTabsRoot.re").make,{}),b("cr:1847792")&&h.jsx(b("cr:1847792"),{entrypoint:"fbdotcom"})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXACIntroView.react",["CometPlaceholder.react","CometRelay","MWXACIntroViewQuery.graphql","RelayHooks","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");e="8626";var j="8634",k="8635",l=h!==void 0?h:h=b("MWXACIntroViewQuery.graphql"),m={fbdotcom:e,inbox:j,mdotcom:k};function a(a){var b=m[a.entrypoint],e=d("RelayHooks").useLazyLoadQuery(l,{xacIntroNuxId:b});e=e==null?void 0:(e=e.viewer)==null?void 0:e.messenger_xac_intro_renderer;return i.jsx(c("CometPlaceholder.react"),{fallback:null,children:e?i.jsx(d("CometRelay").MatchContainer,{match:e,props:{entrypoint:a.entrypoint,nuxId:b,onClose:c("emptyFunction")}}):null})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWCometXACIntroView.react",["MWXACIntroView.react","react","useCometRouterState"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(){var a=c("useCometRouterState")(),b=a==null?void 0:a.main;a=a==null?void 0:a.pushViewStack;a=a&&a.length>0?a[a.length-1]:b;return(a==null?void 0:a.route.tracePolicy)==="comet.messenger.inbox"}function a(a){var b=i();return b&&a.entrypoint==="fbdotcom"?null:h.jsx(c("MWXACIntroView.react"),{entrypoint:a.entrypoint})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatBadgeCount.react",["CometNumberedBadge.react","CometPlaceholder.react","CometRelay","CometVisualCompletionAttributes","MAWGating","MWChatBadgeCountQuery.graphql","MWChatBadgeCountUpdates.re","MWXacGating.re","qex","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");e=d("react");var j=e.useEffect,k=e.useRef;function l(a){var e,f=a.overflow,g=a.setBadgeCount;a=d("CometRelay").useLazyLoadQuery(h!==void 0?h:h=b("MWChatBadgeCountQuery.graphql"),{suppress_xac_groups:!c("MWXacGating.re").isGroupsEnabled()},{fetchPolicy:"store-or-network"});a=(a=a.viewer)==null?void 0:a.message_threads;var l=a!=null&&!m((e=a.is_loading_client_threads)!=null?e:d("MAWGating").isArmadillo()===!0)&&a.unseen_count!=null&&a.unseen_count>0?Math.min(d("MWChatBadgeCountUpdates.re").minSyncedThreads,a.unseen_count):0,n=k(null);j(function(){g&&n.current!==l&&(n.current=l,g(l))},[l,g]);return i.jsx(i.Fragment,{children:l>0?i.jsx(c("CometNumberedBadge.react"),{overflow:f,testid:void 0,value:l}):null})}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=a.overflow;a=a.setBadgeCount;return i.jsx("div",babelHelpers["extends"]({},c("CometVisualCompletionAttributes").IGNORE_DYNAMIC,{children:i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx("span",{}),children:i.jsx(l,{overflow:b,setBadgeCount:a})})}))}a.displayName=a.name+" [from "+f.id+"]";function m(a){return a&&((a=c("qex")._("15"))!=null?a:!1)}g["default"]=a}),98);
__d("MWV2ChatOptionsHead.bs",["fbt","ix","CometDeferredPopoverTrigger.react","CometPressable.react","MWIcon.react","MWTooltip.react","bs_curry","fbicon","react","requireDeferred","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||b("react"),l={head:{alignItems:"x6s0dn4",backgroundColor:"x1l31dnx",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",boxShadow:"x1qeybcx",display:"x78zum5",height:"xc9qbxq",justifyContent:"xl56j7k",opacity:"xg01cxk",transform:"x1f85oc2",transitionDuration:"x19bguh7",transitionProperty:"x6o7n8i",width:"x14qfxbe",":hover":{boxShadow:"x19xcq9t"}},headArea:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",height:"xc9qbxq",position:"x10l6tqk",start:"xi8xln7",width:"x14qfxbe"},headVisible:{opacity:"x1hc1fzr",transform:"x3oybdh"},hoverTarget:{alignItems:"x6s0dn4",backgroundColor:"xjbqb8w",display:"x78zum5",height:"xnnlda6",justifyContent:"xl56j7k",marginStart:"x1tl9596",marginTop:"xhsvlbd",width:"x1dmp6jm"}},m=g._("__JHASH__GqqnGnZcXBj__JHASH__");function a(a){var c=a.isVisible,d=a.openTabCount,e=a.style;a=k.useState(function(){return!1});var f=a[1],g=a[0];a=k.useState(function(){return!1});var i=a[1],n=a[0];a=k.useState(function(){return!1});var o=a[1],p=a[0];return k.jsx(b("CometDeferredPopoverTrigger.react"),{align:"end",onVisibilityChange:function(a){return b("bs_curry")._1(o,function(b){return a})},popoverProps:{hasOpenTabs:d>0},popoverResource:b("requireDeferred")("MWV2ChatOptionsHeadPopover.react").__setRef("MWV2ChatOptionsHead.bs"),position:"above",children:function(a,d){return k.jsx("div",{className:(j||(j=b("stylex")))(l.headArea),style:e,children:k.jsx("div",{className:j(l.hoverTarget),"data-testid":void 0,onMouseEnter:function(a){return b("bs_curry")._1(f,function(a){return!0})},onMouseLeave:function(a){return b("bs_curry")._1(f,function(a){return!1})},children:k.jsx(b("CometPressable.react"),{label:m,onFocusChange:function(a){return b("bs_curry")._1(i,function(b){return a})},onPress:function(a){return b("bs_curry")._1(d)},ref:a,testid:void 0,xstyle:function(a){return[l.head,c||g||n||p?l.headVisible:!1]},children:k.jsx(b("MWTooltip.react"),{align:"middle",position:"start",tooltip:m,children:k.jsx(b("MWIcon.react"),{icon:b("fbicon")._(h("484387"),20)})})})})})}})}a.displayName=a.name+" [from "+e.id+"]";c=36;d=10;g=a;f.width=c;f.marginBottom=d;f.styles=l;f.make=g}),null);
__d("LSDatascriptEvaluatorDeferred",["MWDetectDbSupport","regeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("LSDatascriptEvaluator").__setRef("LSDatascriptEvaluatorDeferred"),i=c("requireDeferred")("LSDatascriptEvaluatorMaybeSandbox").__setRef("LSDatascriptEvaluatorDeferred");a=function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(d("MWDetectDbSupport").isIndexedDbSupported());case 2:a=c.sent;return c.abrupt("return",(a?i:h).load());case 4:case"end":return c.stop()}},null,this)};e=a;g["default"]=e}),98);
__d("LSPlatformDeviceId.re",["LSPlatformDeviceId.bs"],(function(a,b,c,d,e,f){a=b("LSPlatformDeviceId.bs").deviceId;f.deviceId=a}),null);
__d("LSMqttChannel",["LSPlatformDeviceId.re","MqttChannel","MqttEnvInitializer","MqttWebConfig"],(function(a,b,c,d,e,f,g){"use strict";d("MqttEnvInitializer").initialize();function h(){return new(c("MqttChannel"))({appId:d("MqttWebConfig").appID,capabilities:d("MqttWebConfig").capabilities,chatVisibility:d("MqttWebConfig").chatVisibility,clientCapabilities:d("MqttWebConfig").clientCapabilities,deviceId:c("LSPlatformDeviceId.re").deviceId,endpoint:d("MqttWebConfig").endpoint,initialSubscribedTopics:d("MqttWebConfig").subscribedTopics,phpOverride:d("MqttWebConfig").hostNameOverride,pollingEndpoint:d("MqttWebConfig").pollingEndpoint,userFbid:d("MqttWebConfig").fbid})}var i=null;function a(){if(i==null){i=h();return i}else return i}function b(){i!=null&&(i.shutdown(),i=null)}g.getInstance=a;g.shutdownAndClear=b}),98);
__d("LSMqttChannel.bs",["LSMqttChannel"],(function(a,b,c,d,e,f){"use strict";function a(a){b("LSMqttChannel").shutdownAndClear()}function c(a){return b("LSMqttChannel").getInstance()}f.shutdownAndClear=a;f.getInstance=c}),null);
__d("CometTypeaheadEntityViewItem.react",["CometProfilePhoto.react","CometTypeaheadViewItem.react","TetraTextPairing.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.entry,d=a.meta,e=a.pictureUrl;a.queryString;var f=a.size;f=f===void 0?36:f;var g=a.style;g=g===void 0?"circle":g;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","meta","pictureUrl","queryString","size","style"]);return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:b,itemStartContent:e!=null?h.jsx(c("CometProfilePhoto.react"),{shape:g,size:f,source:{uri:e}}):null,children:h.jsx(c("TetraTextPairing.react"),{body:b.label,bodyLineLimit:2,level:3,meta:d,metaLineLimit:1,reduceEmphasis:!0})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useSearchCometShouldRenderBadgeWithExposure",["QE2Logger","qex","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo;function a(a){return h(function(){var b;if(a==null)return!1;if(!c("qex")._("578"))return!0;d("QE2Logger").logExposureForUser("search_nullstate_desktop");return(b=c("qex")._("580"))!=null?b:!1},[a])}g["default"]=a}),98);
__d("CometSearchTypeaheadRecentEntityViewItem.react",["CometBadge.react","CometTypeaheadEntityViewItem.react","react","recoverableViolation","useSearchCometShouldRenderBadgeWithExposure"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.entry;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry"]);var d=b.rawData,e=d.badgeSnippet;d=d.profile;d=(d=d)!=null?d:{};var f=d.id,g=d.profilePictureURL;d=d.url;g==null&&c("recoverableViolation")("Missing profile picture for fbid "+f,"search");f=c("useSearchCometShouldRenderBadgeWithExposure")(e);f=f?h.jsxs(h.Fragment,{children:[h.jsx(c("CometBadge.react"),{color:"blue"}),e]}):void 0;return h.jsx(c("CometTypeaheadEntityViewItem.react"),babelHelpers["extends"]({},a,{entry:b,linkProps:{preventLocalNavigation:!0,url:d},meta:f,pictureUrl:g,size:36}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("cometSearchTypeaheadRecentEntityViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("entity")&&a.subtype==="recent"?a:null}f["default"]=a}),66);
__d("CometSearchTypeaheadBaseStructuredDirectNavKeywordViewItem.react",["CometImage.react","CometProfilePhoto.react","CometTypeaheadHighlight.react","CometTypeaheadViewItem.react","TetraTextPairing.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useMemo,j=36,k={imageIcon:{display:"x1lliihq"}};function a(a){var b,d=a.entry,e=a.isActive,f=a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","isActive","queryString"]);b=(b=(b=d.rawData.structuredInfo)==null?void 0:b.direct_nav_result)!=null?b:{};var g=b.img_url,l=b.link_url,m=b.snippet;b=b.type;var n=i(function(){return{preloadCodeOnMount:!0,preventLocalNavigation:!0,url:l}},[l]),o=null;g!=null&&(o=b==="SHORTCUT"?h.jsx(c("CometImage.react"),{height:j,src:g,width:j,xstyle:k.imageIcon}):h.jsx(c("CometProfilePhoto.react"),{shape:b==="SHORTCUT"?"square":"circle",size:j,source:{uri:g}}));return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:d,isActive:e,itemStartContent:o,linkProps:n,children:h.jsx(c("CometTypeaheadHighlight.react"),{content:d.label,query:f,strategy:"non-match",children:function(a){return h.jsx(c("TetraTextPairing.react"),{body:a,bodyLineLimit:2,level:3,meta:m,metaLineLimit:1})}})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchTypeaheadBaseStructuredDisambiguationKeywordViewItem.react",["CometTypeaheadHighlight.react","CometTypeaheadViewItem.react","CometTypeaheadViewItemIcon.react","TetraTextPairing.react","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b,e=a.entry,f=a.isActive,g=a.linkProps,i=a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","isActive","linkProps","queryString"]);b=(b=e.rawData.structuredInfo)!=null?b:{};b=b.disambiguation_result;if(b==null){c("recoverableViolation")("We were trying to show disambiguation result, but had missing data","search");return null}b=b.disambiguation_info_list;var j=b[0].snippet;return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:e,isActive:f,itemStartContent:h.jsx(d("CometTypeaheadViewItemIcon.react").CometTypeaheadViewTypedIcon,{isActive:f}),linkProps:g,children:h.jsx(c("CometTypeaheadHighlight.react"),{content:e.label,query:i,strategy:"non-match",children:function(a){return h.jsx(c("TetraTextPairing.react"),{body:a,bodyLineLimit:2,level:3,meta:j,metaLineLimit:1})}})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchTypeaheadBaseStructuredHighConfidenceKeywordViewItem.react",["CometProfilePhoto.react","CometTypeaheadHighlight.react","CometTypeaheadViewItem.react","CometTypeaheadViewItemIcon.react","TetraTextPairing.react","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b,e=a.entry,f=a.isActive,g=a.linkProps,i=a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","isActive","linkProps","queryString"]);b=(b=(b=e.rawData.structuredInfo)==null?void 0:b.high_confidence_result)!=null?b:{};var j=b.hcm_id,k=b.picture_url,l=b.snippet;if(k==null){c("recoverableViolation")("Missing HC keyword item picture url for hcm_id "+((b=j)!=null?b:"null"),"search")}return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:e,isActive:f,itemEndContent:k!=null?h.jsx(c("CometProfilePhoto.react"),{shape:"roundedRect",size:36,source:{uri:k}}):null,itemStartContent:h.jsx(d("CometTypeaheadViewItemIcon.react").CometTypeaheadViewTypedIcon,{isActive:f}),linkProps:g,children:h.jsx(c("CometTypeaheadHighlight.react"),{content:e.label,query:i,strategy:"non-match",children:function(a){return h.jsx(c("TetraTextPairing.react"),{body:a,bodyLineLimit:2,level:3,meta:l,metaLineLimit:1})}})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchTypeaheadBaseSurfaceRecentEntityViewItem.react",["CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react","CometSearchTypeaheadRecentEntityViewItem.react","CometTypeaheadFocusLockRegion.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.entry;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry"]);return h.jsx(c("CometSearchTypeaheadRecentEntityViewItem.react"),babelHelpers["extends"]({},a,{entry:b,itemEndContent:h.jsx(c("CometTypeaheadFocusLockRegion.react"),{children:h.jsx(c("CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react"),{entry:b})}),testid:void 0}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchTypeaheadStructuredDirectNavKeywordRecentViewItem.react",["CometBadge.react","CometProfilePhoto.react","CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react","CometTypeaheadFocusLockRegion.react","CometTypeaheadViewItem.react","TetraTextPairing.react","react","useSearchCometShouldRenderBadgeWithExposure"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useMemo;function a(a){var b=a.entry,d=a.isActive;a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","isActive","queryString"]);var e=b.rawData,f=e.badgeSnippet;e=e.structuredInfo;e=(e=e==null?void 0:e.direct_nav_result)!=null?e:{};var g=e.img_url,j=e.link_url,k=e.snippet,l=e.title;e=e.type;var m=i(function(){return{preloadCodeOnMount:!0,preventLocalNavigation:!0,url:j}},[j]),n=c("useSearchCometShouldRenderBadgeWithExposure")(f);n=n?h.jsxs(h.Fragment,{children:[h.jsx(c("CometBadge.react"),{color:"blue"}),f]}):k;return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:b,isActive:d,itemEndContent:h.jsx(c("CometTypeaheadFocusLockRegion.react"),{children:h.jsx(c("CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react"),{entry:b})}),itemStartContent:g!=null?h.jsx(c("CometProfilePhoto.react"),{shape:e==="SHORTCUT"?"square":"circle",size:36,source:{uri:g}}):null,linkProps:m,testid:void 0,children:h.jsx(c("TetraTextPairing.react"),{body:l,bodyLineLimit:2,level:3,meta:n,metaLineLimit:1})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchTypeaheadStructuredDisambiguationKeywordRecentViewItem.react",["CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react","CometTypeaheadFocusLockRegion.react","CometTypeaheadViewItem.react","CometTypeaheadViewItemIcon.react","TetraTextPairing.react","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b,e=a.entry,f=a.isActive,g=a.linkProps;a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","isActive","linkProps","queryString"]);b=(b=e.rawData.structuredInfo)!=null?b:{};b=b.disambiguation_result;if(b==null){c("recoverableViolation")("Missing disambiguation result STS info","search");return null}b=b.disambiguation_info_list;b=b[0].snippet;return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:e,isActive:f,itemEndContent:h.jsx(c("CometTypeaheadFocusLockRegion.react"),{children:h.jsx(c("CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react"),{entry:e})}),itemStartContent:h.jsx(d("CometTypeaheadViewItemIcon.react").CometTypeaheadViewRecentIcon,{isActive:f}),linkProps:g,children:h.jsx(c("TetraTextPairing.react"),{body:e.label,bodyLineLimit:2,level:2,meta:b,metaLineLimit:1})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchTypeaheadStructuredHighConfidenceKeywordRecentViewItem.react",["CometProfilePhoto.react","CometRow.react","CometRowItem.react","CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react","CometTypeaheadFocusLockRegion.react","CometTypeaheadViewItem.react","CometTypeaheadViewItemIcon.react","TetraTextPairing.react","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.entry,e=a.isActive,f=a.linkProps;a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","isActive","linkProps","queryString"]);var g=b.rawData;g=(g=(g=g.structuredInfo)==null?void 0:g.high_confidence_result)!=null?g:{};var i=g.hcm_id,j=g.picture_url;g=g.snippet;if(j==null){c("recoverableViolation")("Missing HC keyword item picture url for hcm_id "+((i=i)!=null?i:"null"),"search")}return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:b,isActive:e,itemEndContent:h.jsxs(c("CometRow.react"),{paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",children:[j!=null?h.jsx(c("CometRowItem.react"),{children:h.jsx(c("CometProfilePhoto.react"),{shape:"roundedRect",size:36,source:{uri:j}})}):null,h.jsx(c("CometRowItem.react"),{children:h.jsx(c("CometTypeaheadFocusLockRegion.react"),{children:h.jsx(c("CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react"),{entry:b})})})]}),itemStartContent:h.jsx(d("CometTypeaheadViewItemIcon.react").CometTypeaheadViewRecentIcon,{isActive:e}),linkProps:f,children:h.jsx(c("TetraTextPairing.react"),{body:b.label,bodyLineLimit:2,level:3,meta:g,metaLineLimit:1})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("cometSearchTypeaheadStructuredDirectNavKeywordRecentViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("direct_nav")&&a.subtype==="recent"?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadStructuredDirectNavKeywordViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("keyword")&&b.has("direct_nav")?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadStructuredDisambiguationKeywordRecentViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("disambiguation")&&a.subtype==="recent"?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadStructuredDisambiguationKeywordViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("disambiguation")&&a.subtype==="keyword"?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadStructuredHighConfidenceKeywordRecentViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("high_confidence")&&a.subtype==="recent"?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadStructuredHighConfidenceKeywordViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("high_confidence")&&a.subtype==="keyword"?a:null}f["default"]=a}),66);
__d("searchCometTypeaheadSTSMappings",["CometSearchTypeaheadBaseStructuredDirectNavKeywordViewItem.react","CometSearchTypeaheadBaseStructuredDisambiguationKeywordViewItem.react","CometSearchTypeaheadBaseStructuredHighConfidenceKeywordViewItem.react","CometSearchTypeaheadBaseSurfaceRecentEntityViewItem.react","CometSearchTypeaheadStructuredDirectNavKeywordRecentViewItem.react","CometSearchTypeaheadStructuredDisambiguationKeywordRecentViewItem.react","CometSearchTypeaheadStructuredHighConfidenceKeywordRecentViewItem.react","cometSearchTypeaheadRecentEntityViewItem.resolver","cometSearchTypeaheadStructuredDirectNavKeywordRecentViewItem.resolver","cometSearchTypeaheadStructuredDirectNavKeywordViewItem.resolver","cometSearchTypeaheadStructuredDisambiguationKeywordRecentViewItem.resolver","cometSearchTypeaheadStructuredDisambiguationKeywordViewItem.resolver","cometSearchTypeaheadStructuredHighConfidenceKeywordRecentViewItem.resolver","cometSearchTypeaheadStructuredHighConfidenceKeywordViewItem.resolver"],(function(a,b,c,d,e,f,g){"use strict";a=[{resolver:c("cometSearchTypeaheadStructuredDirectNavKeywordViewItem.resolver"),viewItem:c("CometSearchTypeaheadBaseStructuredDirectNavKeywordViewItem.react")},{resolver:c("cometSearchTypeaheadStructuredHighConfidenceKeywordViewItem.resolver"),viewItem:c("CometSearchTypeaheadBaseStructuredHighConfidenceKeywordViewItem.react")},{resolver:c("cometSearchTypeaheadStructuredDisambiguationKeywordViewItem.resolver"),viewItem:c("CometSearchTypeaheadBaseStructuredDisambiguationKeywordViewItem.react")},{resolver:c("cometSearchTypeaheadStructuredDirectNavKeywordRecentViewItem.resolver"),viewItem:c("CometSearchTypeaheadStructuredDirectNavKeywordRecentViewItem.react")},{resolver:c("cometSearchTypeaheadStructuredHighConfidenceKeywordRecentViewItem.resolver"),viewItem:c("CometSearchTypeaheadStructuredHighConfidenceKeywordRecentViewItem.react")},{resolver:c("cometSearchTypeaheadStructuredDisambiguationKeywordRecentViewItem.resolver"),viewItem:c("CometSearchTypeaheadStructuredDisambiguationKeywordRecentViewItem.react")},{resolver:c("cometSearchTypeaheadRecentEntityViewItem.resolver"),viewItem:c("CometSearchTypeaheadBaseSurfaceRecentEntityViewItem.react")}].filter(Boolean);g["default"]=a}),98);
__d("SearchCometGlobalTypeaheadInputStrategy.react",["CometTypeaheadInputRoundedStrategy.react","SearchCometTypeaheadEventEmitterContext","cr:2012305","react","useMergeRefs","useRefEffect","useSearchCometEventEmitterContext"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.useEffect,j=e.useRef;function a(a,d){var e,f=a.onChange;a=babelHelpers.objectWithoutPropertiesLoose(a,["onChange"]);e=(e=c("useSearchCometEventEmitterContext")(c("SearchCometTypeaheadEventEmitterContext")))!=null?e:{};var g=e.subscribeToGlobalTypeaheadFocus;e=c("useRefEffect")(function(a){return g==null?void 0:g(function(){if(a==null)return;a.value="";a.focus();f("")})},[f,g]);var k=j(null),l=j(!1);i(function(){var a=k.current;if(b("cr:2012305")!=null&&a!=null&&l.current===!1){b("cr:2012305").trackTypingPerf(a,"top_tab_serp_typeahead");l.current=!0;return function(){b("cr:2012305").unregisterTypingPerf(a),l.current=!1}}},[]);e=c("useMergeRefs")(e,k);e=c("useMergeRefs")(e,d);return h.jsx(c("CometTypeaheadInputRoundedStrategy.react"),babelHelpers["extends"]({},a,{onChange:f,ref:e}))}a.displayName=a.name+" [from "+f.id+"]";d=h.forwardRef(a);g["default"]=d}),98);
__d("LSThreadMediaGalleryGroup.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];f.photosAndVideos=a;f.filesOnly=c;f.links=d}),null);